/*
 jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license  jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license  Context menu plugin
 Radio buttons to regular buttons plugin, based on jQuery UI Button 1.11.2
 This has been done to avoid name collision
 Dialog plugin, based on jQuery UI Dialog 1.11.2
 This has been done to avoid name collision
 Menu plugin, based on jQuery UI Menu 1.11.2
 This has been done to avoid name collision
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var y=0;return function(){return y<c.length?{done:!1,value:c[y++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,y,D){if(c==Array.prototype||c==Object.prototype)return c;c[y]=D.value;return c};$jscomp.getGlobal=function(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var y=0;y<c.length;++y){var D=c[y];if(D&&D.Math==Math)return D}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(c,y){var D=$jscomp.propertyToPolyfillSymbol[y];if(null==D)return c[y];D=c[D];return void 0!==D?D:c[y]};
$jscomp.polyfill=function(c,y,D,M){y&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(c,y,D,M):$jscomp.polyfillUnisolated(c,y,D,M))};$jscomp.polyfillUnisolated=function(c,y,D,M){D=$jscomp.global;c=c.split(".");for(M=0;M<c.length-1;M++){var u=c[M];if(!(u in D))return;D=D[u]}c=c[c.length-1];M=D[c];y=y(M);y!=M&&null!=y&&$jscomp.defineProperty(D,c,{configurable:!0,writable:!0,value:y})};
$jscomp.polyfillIsolated=function(c,y,D,M){var u=c.split(".");c=1===u.length;M=u[0];M=!c&&M in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var t=0;t<u.length-1;t++){var h=u[t];if(!(h in M))return;M=M[h]}u=u[u.length-1];D=$jscomp.IS_SYMBOL_NATIVE&&"es6"===D?M[u]:null;y=y(D);null!=y&&(c?$jscomp.defineProperty($jscomp.polyfills,u,{configurable:!0,writable:!0,value:y}):y!==D&&(void 0===$jscomp.propertyToPolyfillSymbol[u]&&(D=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[u]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(u):$jscomp.POLYFILL_PREFIX+D+"$"+u),$jscomp.defineProperty(M,$jscomp.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:y})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(c){if(c)return c;var y=function(t,h){this.$jscomp$symbol$id_=t;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:h})};y.prototype.toString=function(){return this.$jscomp$symbol$id_};var D="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",M=0,u=function(t){if(this instanceof u)throw new TypeError("Symbol is not a constructor");return new y(D+(t||"")+"_"+M++,t)};return u},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var y="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),D=0;D<y.length;D++){var M=$jscomp.global[y[D]];"function"===typeof M&&"function"!=typeof M.prototype[c]&&$jscomp.defineProperty(M.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return c},"es6",
"es3");$jscomp.iteratorPrototype=function(c){c={next:c};c[Symbol.iterator]=function(){return this};return c};$jscomp.findInternal=function(c,y,D){c instanceof String&&(c=String(c));for(var M=c.length,u=0;u<M;u++){var t=c[u];if(y.call(D,t,u,c))return{i:u,v:t}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(y,D){return $jscomp.findInternal(this,y,D).v}},"es6","es3");
$jscomp.polyfill("Number.isFinite",function(c){return c?c:function(y){return"number"!==typeof y?!1:!isNaN(y)&&Infinity!==y&&-Infinity!==y}},"es6","es3");$jscomp.polyfill("Number.isInteger",function(c){return c?c:function(y){return Number.isFinite(y)?y===Math.floor(y):!1}},"es6","es3");
$jscomp.checkStringArgs=function(c,y,D){if(null==c)throw new TypeError("The 'this' value for String.prototype."+D+" must not be null or undefined");if(y instanceof RegExp)throw new TypeError("First argument to String.prototype."+D+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.endsWith",function(c){return c?c:function(y,D){var M=$jscomp.checkStringArgs(this,y,"endsWith");y+="";void 0===D&&(D=M.length);D=Math.max(0,Math.min(D|0,M.length));for(var u=y.length;0<u&&0<D;)if(M[--D]!=y[--u])return!1;return 0>=u}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(y,D,M){var u=this.length||0;0>D&&(D=Math.max(0,u+D));if(null==M||M>u)M=u;M=Number(M);0>M&&(M=Math.max(0,u+M));for(D=Number(D||0);D<M;D++)this[D]=y;return this}},"es6","es3");$jscomp.typedArrayFill=function(c){return c?c:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Math.trunc",function(c){return c?c:function(y){y=Number(y);if(isNaN(y)||Infinity===y||-Infinity===y||0===y)return y;var D=Math.floor(Math.abs(y));return 0>y?-D:D}},"es6","es3");$jscomp.owns=function(c,y){return Object.prototype.hasOwnProperty.call(c,y)};
$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(c,y){for(var D=1;D<arguments.length;D++){var M=arguments[D];if(M)for(var u in M)$jscomp.owns(M,u)&&(c[u]=M[u])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Object.fromEntries",function(c){return c?c:function(y){var D={};if(!(Symbol.iterator in y))throw new TypeError(""+y+" is not iterable");y=y[Symbol.iterator].call(y);for(var M=y.next();!M.done;M=y.next()){M=M.value;if(Object(M)!==M)throw new TypeError("iterable for fromEntries should yield objects");D[M[0]]=M[1]}return D}},"es_2019","es3");
$jscomp.iteratorFromArray=function(c,y){c instanceof String&&(c+="");var D=0,M=!1,u={next:function(){if(!M&&D<c.length){var t=D++;return{value:y(t,c[t]),done:!1}}M=!0;return{done:!0,value:void 0}}};u[Symbol.iterator]=function(){return u};return u};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(y){return y})}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(c){return c?c:function(y){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var D,M,u;for(D=u=0;D<arguments.length;D++)u=Math.max(u,Math.abs(arguments[D]));if(1E100<u||1E-100>u){if(!u)return u;for(D=M=0;D<arguments.length;D++){var t=Number(arguments[D])/u;M+=t*t}return Math.sqrt(M)*u}for(D=M=0;D<arguments.length;D++)t=Number(arguments[D]),M+=t*t;return Math.sqrt(M)}},"es6","es3");
!function(c,y){"object"==typeof module&&"object"==typeof module.exports?module.exports=c.document?y(c,!0):function(D){if(!D.document)throw Error("jQuery requires a window with a document");return y(D)}:y(c)}("undefined"!=typeof window?window:this,function(c,y){function D(f,m,r){var x,A,H=(r=r||Ja).createElement("script");if(H.text=f,m)for(x in Fb)(A=m[x]||m.getAttribute&&m.getAttribute(x))&&H.setAttribute(x,A);r.head.appendChild(H).parentNode.removeChild(H)}function M(f){return null==f?f+"":"object"==
typeof f||"function"==typeof f?Ya[jb.call(f)]||"object":typeof f}function u(f){var m=!!f&&"length"in f&&f.length,r=M(f);return!za(f)&&!xa(f)&&("array"===r||0===m||"number"==typeof m&&0<m&&m-1 in f)}function t(f,m){return f.nodeName&&f.nodeName.toLowerCase()===m.toLowerCase()}function h(f,m,r){return za(m)?v.grep(f,function(x,A){return!!m.call(x,A,x)!==r}):m.nodeType?v.grep(f,function(x){return x===m!==r}):"string"!=typeof m?v.grep(f,function(x){return-1<Va.call(m,x)!==r}):v.filter(m,f,r)}function l(f,
m){for(;(f=f[m])&&1!==f.nodeType;);return f}function q(f){return f}function z(f){throw f;}function E(f,m,r,x){var A;try{f&&za(A=f.promise)?A.call(f).done(m).fail(r):f&&za(A=f.then)?A.call(f,m,r):m.apply(void 0,[f].slice(x))}catch(H){r.apply(void 0,[H])}}function L(){Ja.removeEventListener("DOMContentLoaded",L);c.removeEventListener("load",L);v.ready()}function N(f,m){return m.toUpperCase()}function P(f){return f.replace($c,"ms-").replace(ad,N)}function S(){this.expando=v.expando+S.uid++}function X(f,
m,r){var x,A;if(void 0===r&&1===f.nodeType)if(x="data-"+m.replace(bd,"-$&").toLowerCase(),"string"==typeof(r=f.getAttribute(x))){try{r="true"===(A=r)||"false"!==A&&("null"===A?null:A===+A+""?+A:cd.test(A)?JSON.parse(A):A)}catch(H){}qb.set(f,m,r)}else r=void 0;return r}function ea(f,m,r,x){var A,H,I=20,Q=x?function(){return x.cur()}:function(){return v.css(f,m,"")},R=Q(),Z=r&&r[3]||(v.cssNumber[m]?"":"px"),ia=f.nodeType&&(v.cssNumber[m]||"px"!==Z&&+R)&&Wb.exec(v.css(f,m));if(ia&&ia[3]!==Z){R/=2;Z=
Z||ia[3];for(ia=+R||1;I--;)v.style(f,m,ia+Z),0>=(1-H)*(1-(H=Q()/R||.5))&&(I=0),ia/=H;ia*=2;v.style(f,m,ia+Z);r=r||[]}return r&&(ia=+ia||+R||0,A=r[1]?ia+(r[1]+1)*r[2]:+r[2],x&&(x.unit=Z,x.start=ia,x.end=A)),A}function fa(f,m){for(var r,x,A,H,I,Q,R,Z=[],ia=0,V=f.length;ia<V;ia++)(x=f[ia]).style&&(r=x.style.display,m?("none"===r&&(Z[ia]=Ia.get(x,"display")||null,Z[ia]||(x.style.display="")),""===x.style.display&&ec(x)&&(Z[ia]=(R=I=H=void 0,I=(A=x).ownerDocument,Q=A.nodeName,(R=wc[Q])||(H=I.body.appendChild(I.createElement(Q)),
R=v.css(H,"display"),H.parentNode.removeChild(H),"none"===R&&(R="block"),wc[Q]=R)))):"none"!==r&&(Z[ia]="none",Ia.set(x,"display",r)));for(ia=0;ia<V;ia++)null!=Z[ia]&&(f[ia].style.display=Z[ia]);return f}function sa(f,m){var r;return r="undefined"!=typeof f.getElementsByTagName?f.getElementsByTagName(m||"*"):"undefined"!=typeof f.querySelectorAll?f.querySelectorAll(m||"*"):[],void 0===m||m&&t(f,m)?v.merge([f],r):r}function W(f,m){for(var r=0,x=f.length;r<x;r++)Ia.set(f[r],"globalEval",!m||Ia.get(m[r],
"globalEval"))}function ja(f,m,r,x,A){for(var H,I,Q,R,Z=m.createDocumentFragment(),ia=[],V=0,ta=f.length;V<ta;V++)if((H=f[V])||0===H)if("object"===M(H))v.merge(ia,H.nodeType?[H]:H);else if(dd.test(H)){I=I||Z.appendChild(m.createElement("div"));Q=(xc.exec(H)||["",""])[1].toLowerCase();Q=yb[Q]||yb._default;I.innerHTML=Q[1]+v.htmlPrefilter(H)+Q[2];for(Q=Q[0];Q--;)I=I.lastChild;v.merge(ia,I.childNodes);(I=Z.firstChild).textContent=""}else ia.push(m.createTextNode(H));Z.textContent="";for(V=0;H=ia[V++];)if(x&&
-1<v.inArray(H,x))A&&A.push(H);else if(R=Tb(H),I=sa(Z.appendChild(H),"script"),R&&W(I),r)for(Q=0;H=I[Q++];)yc.test(H.type||"")&&r.push(H);return Z}function ka(){return!0}function ma(){return!1}function ra(f,m){a:{try{var r=Ja.activeElement;break a}catch(x){}r=void 0}return f===r==("focus"===m)}function Ca(f,m,r,x,A,H){var I,Q;if("object"==typeof m){for(Q in"string"!=typeof r&&(x=x||r,r=void 0),m)Ca(f,Q,r,x,m[Q],H);return f}if(null==x&&null==A?(A=r,x=r=void 0):null==A&&("string"==typeof r?(A=x,x=void 0):
(A=x,x=r,r=void 0)),!1===A)A=ma;else if(!A)return f;return 1===H&&(I=A,(A=function(R){return v().off(R),I.apply(this,arguments)}).guid=I.guid||(I.guid=v.guid++)),f.each(function(){v.event.add(this,m,A,x,r)})}function a(f,m,r){r?(Ia.set(f,m,!1),v.event.add(f,m,{namespace:!1,handler:function(x){var A,H,I=Ia.get(this,m);if(1&x.isTrigger&&this[m])if(I.length)(v.event.special[m]||{}).delegateType&&x.stopPropagation();else{if(I=gb.call(arguments),Ia.set(this,m,I),A=r(this,m),this[m](),I!==(H=Ia.get(this,
m))||A?Ia.set(this,m,!1):H={},I!==H)return x.stopImmediatePropagation(),x.preventDefault(),H&&H.value}else I.length&&(Ia.set(this,m,{value:v.event.trigger(v.extend(I[0],v.Event.prototype),I.slice(1),this)}),x.stopImmediatePropagation())}})):void 0===Ia.get(f,m)&&v.event.add(f,m,ka)}function B(f,m){return t(f,"table")&&t(11!==m.nodeType?m:m.firstChild,"tr")&&v(f).children("tbody")[0]||f}function J(f){return f.type=(null!==f.getAttribute("type"))+"/"+f.type,f}function b(f){return"true/"===(f.type||
"").slice(0,5)?f.type=f.type.slice(5):f.removeAttribute("type"),f}function d(f,m){var r,x,A,H,I;if(1===m.nodeType){if(Ia.hasData(f)&&(I=Ia.get(f).events))for(x in Ia.remove(m,"handle events"),I){var Q=0;for(r=I[x].length;Q<r;Q++)v.event.add(m,x,I[x][Q])}qb.hasData(f)&&(A=qb.access(f),H=v.extend({},A),qb.set(m,H))}}function e(f,m,r,x){m=sb(m);var A,H,I,Q=0,R=f.length,Z=R-1,ia=m[0],V=za(ia);if(V||1<R&&"string"==typeof ia&&!ba.checkClone&&ed.test(ia))return f.each(function(ya){var Aa=f.eq(ya);V&&(m[0]=
ia.call(this,ya,Aa.html()));e(Aa,m,r,x)});if(R&&(H=(A=ja(m,f[0].ownerDocument,!1,f,x)).firstChild,1===A.childNodes.length&&(A=H),H||x)){for(I=(H=v.map(sa(A,"script"),J)).length;Q<R;Q++){var ta=A;Q!==Z&&(ta=v.clone(ta,!0,!0),I&&v.merge(H,sa(ta,"script")));r.call(f[Q],ta,Q)}if(I)for(A=H[H.length-1].ownerDocument,v.map(H,b),Q=0;Q<I;Q++)ta=H[Q],yc.test(ta.type||"")&&!Ia.access(ta,"globalEval")&&v.contains(A,ta)&&(ta.src&&"module"!==(ta.type||"").toLowerCase()?v._evalUrl&&!ta.noModule&&v._evalUrl(ta.src,
{nonce:ta.nonce||ta.getAttribute("nonce")},A):D(ta.textContent.replace(fd,""),ta,A))}return f}function g(f,m,r){for(var x=m?v.filter(m,f):f,A=0;null!=(m=x[A]);A++)r||1!==m.nodeType||v.cleanData(sa(m)),m.parentNode&&(r&&Tb(m)&&W(sa(m,"script")),m.parentNode.removeChild(m));return f}function k(f,m,r){var x,A,H,I,Q=f.style;return(r=r||fc(f))&&(""!==(I=r.getPropertyValue(m)||r[m])||Tb(f)||(I=v.style(f,m)),!ba.pixelBoxStyles()&&mc.test(I)&&gd.test(m)&&(x=Q.width,A=Q.minWidth,H=Q.maxWidth,Q.minWidth=Q.maxWidth=
Q.width=I,I=r.width,Q.width=x,Q.minWidth=A,Q.maxWidth=H)),void 0!==I?I+"":I}function p(f,m){return{get:function(){if(!f())return(this.get=m).apply(this,arguments);delete this.get}}}function n(f){var m;if(!(m=v.cssProps[f]||zc[f])){if(!(f in Ac)){a:{m=f;for(var r=m[0].toUpperCase()+m.slice(1),x=Bc.length;x--;)if((m=Bc[x]+r)in Ac)break a;m=void 0}f=zc[f]=m||f}m=f}return m}function w(f,m,r){return(f=Wb.exec(m))?Math.max(0,f[2]-(r||0))+(f[3]||"px"):m}function C(f,m,r,x,A,H){var I="width"===m?1:0,Q=0,
R=0;if(r===(x?"border":"content"))return 0;for(;4>I;I+=2)"margin"===r&&(R+=v.css(f,r+Gb[I],!0,A)),x?("content"===r&&(R-=v.css(f,"padding"+Gb[I],!0,A)),"margin"!==r&&(R-=v.css(f,"border"+Gb[I]+"Width",!0,A))):(R+=v.css(f,"padding"+Gb[I],!0,A),"padding"!==r?R+=v.css(f,"border"+Gb[I]+"Width",!0,A):Q+=v.css(f,"border"+Gb[I]+"Width",!0,A));return!x&&0<=H&&(R+=Math.max(0,Math.ceil(f["offset"+m[0].toUpperCase()+m.slice(1)]-H-R-Q-.5))||0),R}function K(f,m,r){var x=fc(f),A=(!ba.boxSizingReliable()||r)&&"border-box"===
v.css(f,"boxSizing",!1,x),H=A,I=k(f,m,x),Q="offset"+m[0].toUpperCase()+m.slice(1);if(mc.test(I)){if(!r)return I;I="auto"}return(!ba.boxSizingReliable()&&A||!ba.reliableTrDimensions()&&t(f,"tr")||"auto"===I||!parseFloat(I)&&"inline"===v.css(f,"display",!1,x))&&f.getClientRects().length&&(A="border-box"===v.css(f,"boxSizing",!1,x),(H=Q in f)&&(I=f[Q])),(I=parseFloat(I)||0)+C(f,m,r||(A?"border":"content"),H,x,I)+"px"}function F(f,m,r,x,A){return new F.prototype.init(f,m,r,x,A)}function Y(){gc&&(!1===
Ja.hidden&&c.requestAnimationFrame?c.requestAnimationFrame(Y):c.setTimeout(Y,v.fx.interval),v.fx.tick())}function aa(){return c.setTimeout(function(){Ub=void 0}),Ub=Date.now()}function ha(f,m){var r,x=0,A={height:f};for(m=m?1:0;4>x;x+=2-m)A["margin"+(r=Gb[x])]=A["padding"+r]=f;return m&&(A.opacity=A.width=f),A}function da(f,m,r){for(var x,A=(la.tweeners[m]||[]).concat(la.tweeners["*"]),H=0,I=A.length;H<I;H++)if(x=A[H].call(r,m,f))return x}function la(f,m,r){var x,A=0,H=la.prefilters.length,I=v.Deferred().always(function(){delete Q.elem}),
Q=function(){if(x)return!1;var Z=Ub||aa();Z=Math.max(0,R.startTime+R.duration-Z);for(var ia=1-(Z/R.duration||0),V=0,ta=R.tweens.length;V<ta;V++)R.tweens[V].run(ia);return I.notifyWith(f,[R,ia,Z]),1>ia&&ta?Z:(ta||I.notifyWith(f,[R,1,0]),I.resolveWith(f,[R]),!1)},R=I.promise({elem:f,props:v.extend({},m),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},r),originalProperties:m,originalOptions:r,startTime:Ub||aa(),duration:r.duration,tweens:[],createTween:function(Z,ia){Z=v.Tween(f,R.opts,
Z,ia,R.opts.specialEasing[Z]||R.opts.easing);return R.tweens.push(Z),Z},stop:function(Z){var ia=0,V=Z?R.tweens.length:0;if(x)return this;for(x=!0;ia<V;ia++)R.tweens[ia].run(1);return Z?(I.notifyWith(f,[R,1,0]),I.resolveWith(f,[R,Z])):I.rejectWith(f,[R,Z]),this}});r=R.props;!function(Z,ia){var V,ta,ya,Aa,Qa;for(V in Z)if(ya=ia[ta=P(V)],Aa=Z[V],Array.isArray(Aa)&&(ya=Aa[1],Aa=Z[V]=Aa[0]),V!==ta&&(Z[ta]=Aa,delete Z[V]),(Qa=v.cssHooks[ta])&&"expand"in Qa)for(V in Aa=Qa.expand(Aa),delete Z[ta],Aa)V in
Z||(Z[V]=Aa[V],ia[V]=ya);else ia[ta]=ya}(r,R.opts.specialEasing);for(;A<H;A++)if(m=la.prefilters[A].call(R,f,r,R.opts))return za(m.stop)&&(v._queueHooks(R.elem,R.opts.queue).stop=m.stop.bind(m)),m;return v.map(r,da,R),za(R.opts.start)&&R.opts.start.call(f,R),R.progress(R.opts.progress).done(R.opts.done,R.opts.complete).fail(R.opts.fail).always(R.opts.always),v.fx.timer(v.extend(Q,{elem:f,anim:R,queue:R.opts.queue})),R}function Ha(f){return(f.match(Cb)||[]).join(" ")}function wa(f){return f.getAttribute&&
f.getAttribute("class")||""}function va(f){return Array.isArray(f)?f:"string"==typeof f&&f.match(Cb)||[]}function ua(f,m,r,x){var A;if(Array.isArray(m))v.each(m,function(H,I){r||hd.test(f)?x(f,I):ua(f+"["+("object"==typeof I&&null!=I?H:"")+"]",I,r,x)});else if(r||"object"!==M(m))x(f,m);else for(A in m)ua(f+"["+A+"]",m[A],r,x)}function Da(f){return function(m,r){"string"!=typeof m&&(r=m,m="*");var x=0,A=m.toLowerCase().match(Cb)||[];if(za(r))for(;m=A[x++];)"+"===m[0]?(m=m.slice(1)||"*",(f[m]=f[m]||
[]).unshift(r)):(f[m]=f[m]||[]).push(r)}}function Ua(f,m,r,x){function A(Q){var R;return H[Q]=!0,v.each(f[Q]||[],function(Z,ia){Z=ia(m,r,x);return"string"!=typeof Z||I||H[Z]?I?!(R=Z):void 0:(m.dataTypes.unshift(Z),A(Z),!1)}),R}var H={},I=f===nc;return A(m.dataTypes[0])||!H["*"]&&A("*")}function Ka(f,m){var r,x,A=v.ajaxSettings.flatOptions||{};for(r in m)void 0!==m[r]&&((A[r]?f:x||(x={}))[r]=m[r]);return x&&v.extend(!0,f,x),f}var pa=[],Fa=Object.getPrototypeOf,gb=pa.slice,sb=pa.flat?function(f){return pa.flat.call(f)}:
function(f){return pa.concat.apply([],f)},mb=pa.push,Va=pa.indexOf,Ya={},jb=Ya.toString,Ma=Ya.hasOwnProperty,kb=Ma.toString,Hb=kb.call(Object),ba={},za=function(f){return"function"==typeof f&&"number"!=typeof f.nodeType&&"function"!=typeof f.item},xa=function(f){return null!=f&&f===f.window},Ja=c.document,Fb={type:!0,src:!0,nonce:!0,noModule:!0},v=function(f,m){return new v.fn.init(f,m)};v.fn=v.prototype={jquery:"3.6.0",constructor:v,length:0,toArray:function(){return gb.call(this)},get:function(f){return null==
f?gb.call(this):0>f?this[f+this.length]:this[f]},pushStack:function(f){f=v.merge(this.constructor(),f);return f.prevObject=this,f},each:function(f){return v.each(this,f)},map:function(f){return this.pushStack(v.map(this,function(m,r){return f.call(m,r,m)}))},slice:function(){return this.pushStack(gb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,function(f,m){return(m+1)%2}))},odd:function(){return this.pushStack(v.grep(this,
function(f,m){return m%2}))},eq:function(f){var m=this.length;f=+f+(0>f?m:0);return this.pushStack(0<=f&&f<m?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:mb,sort:pa.sort,splice:pa.splice};v.extend=v.fn.extend=function(){var f,m,r,x,A,H=arguments[0]||{},I=1,Q=arguments.length,R=!1;"boolean"==typeof H&&(R=H,H=arguments[I]||{},I++);"object"==typeof H||za(H)||(H={});for(I===Q&&(H=this,I--);I<Q;I++)if(null!=(f=arguments[I]))for(m in f){var Z=f[m];"__proto__"!==m&&H!==
Z&&(R&&Z&&(v.isPlainObject(Z)||(x=Array.isArray(Z)))?(r=H[m],A=x&&!Array.isArray(r)?[]:x||v.isPlainObject(r)?r:{},x=!1,H[m]=v.extend(R,A,Z)):void 0!==Z&&(H[m]=Z))}return H};v.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(f){throw Error(f);},noop:function(){},isPlainObject:function(f){var m,r;return!(!f||"[object Object]"!==jb.call(f))&&(!(m=Fa(f))||"function"==typeof(r=Ma.call(m,"constructor")&&m.constructor)&&kb.call(r)===Hb)},isEmptyObject:function(f){for(var m in f)return!1;
return!0},globalEval:function(f,m,r){D(f,{nonce:m&&m.nonce},r)},each:function(f,m){var r,x=0;if(u(f))for(r=f.length;x<r&&!1!==m.call(f[x],x,f[x]);x++);else for(x in f)if(!1===m.call(f[x],x,f[x]))break;return f},makeArray:function(f,m){m=m||[];return null!=f&&(u(Object(f))?v.merge(m,"string"==typeof f?[f]:f):mb.call(m,f)),m},inArray:function(f,m,r){return null==m?-1:Va.call(m,f,r)},merge:function(f,m){for(var r=+m.length,x=0,A=f.length;x<r;x++)f[A++]=m[x];return f.length=A,f},grep:function(f,m,r){var x=
[],A=0,H=f.length;for(r=!r;A<H;A++)!m(f[A],A)!==r&&x.push(f[A]);return x},map:function(f,m,r){var x,A,H=0,I=[];if(u(f))for(x=f.length;H<x;H++)null!=(A=m(f[H],H,r))&&I.push(A);else for(H in f)null!=(A=m(f[H],H,r))&&I.push(A);return sb(I)},guid:1,support:ba});"function"==typeof Symbol&&(v.fn[Symbol.iterator]=pa[Symbol.iterator]);v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(f,m){Ya["[object "+m+"]"]=m.toLowerCase()});var xb=function(f){function m(G,
O,U,T){var ca,oa,na,Ea,qa=O&&O.ownerDocument;var Ga=O?O.nodeType:9;if(U=U||[],"string"!=typeof G||!G||1!==Ga&&9!==Ga&&11!==Ga)return U;if(!T&&(tb(O),O=O||Pa,cb)){if(11!==Ga&&(Ea=id.exec(G)))if(ca=Ea[1])if(9===Ga){if(!(oa=O.getElementById(ca)))return U;if(oa.id===ca)return U.push(oa),U}else{if(qa&&(oa=qa.getElementById(ca))&&Xa(O,oa)&&oa.id===ca)return U.push(oa),U}else{if(Ea[2])return Lb.apply(U,O.getElementsByTagName(G)),U;if((ca=Ea[3])&&Ba.getElementsByClassName&&O.getElementsByClassName)return Lb.apply(U,
O.getElementsByClassName(ca)),U}if(!(!Ba.qsa||hc[G+" "]||bb&&bb.test(G)||1===Ga&&"object"===O.nodeName.toLowerCase())){if(ca=G,qa=O,1===Ga&&(jd.test(G)||Cc.test(G))){(qa=oc.test(G)&&V(O.parentNode)||O)===O&&Ba.scope||((na=O.getAttribute("id"))?na=na.replace(Dc,Ec):O.setAttribute("id",na=Na));for(Ga=(ca=Mb(G)).length;Ga--;)ca[Ga]=(na?"#"+na:":scope")+" "+ya(ca[Ga]);ca=ca.join(",")}try{return Lb.apply(U,qa.querySelectorAll(ca)),U}catch(Ra){hc(G,!0)}finally{na===Na&&O.removeAttribute("id")}}}return zb(G.replace(ic,
"$1"),O,U,T)}function r(){var G=[];return function ca(U,T){return G.push(U+" ")>La.cacheLength&&delete ca[G.shift()],ca[U+" "]=T}}function x(G){return G[Na]=!0,G}function A(G){var O=Pa.createElement("fieldset");try{return!!G(O)}catch(U){return!1}finally{O.parentNode&&O.parentNode.removeChild(O)}}function H(G,O){G=G.split("|");for(var U=G.length;U--;)La.attrHandle[G[U]]=O}function I(G,O){var U=O&&G,T=U&&1===G.nodeType&&1===O.nodeType&&G.sourceIndex-O.sourceIndex;if(T)return T;if(U)for(;U=U.nextSibling;)if(U===
O)return-1;return G?1:-1}function Q(G){return function(O){return"input"===O.nodeName.toLowerCase()&&O.type===G}}function R(G){return function(O){var U=O.nodeName.toLowerCase();return("input"===U||"button"===U)&&O.type===G}}function Z(G){return function(O){return"form"in O?O.parentNode&&!1===O.disabled?"label"in O?"label"in O.parentNode?O.parentNode.disabled===G:O.disabled===G:O.isDisabled===G||O.isDisabled!==!G&&kd(O)===G:O.disabled===G:"label"in O&&O.disabled===G}}function ia(G){return x(function(O){return O=
+O,x(function(U,T){for(var ca,oa=G([],U.length,O),na=oa.length;na--;)U[ca=oa[na]]&&(U[ca]=!(T[ca]=U[ca]))})})}function V(G){return G&&"undefined"!=typeof G.getElementsByTagName&&G}function ta(){}function ya(G){for(var O=0,U=G.length,T="";O<U;O++)T+=G[O].value;return T}function Aa(G,O,U){var T=O.dir,ca=O.next,oa=ca||T,na=U&&"parentNode"===oa,Ea=Db++;return O.first?function(qa,Ga,Ra){for(;qa=qa[T];)if(1===qa.nodeType||na)return G(qa,Ga,Ra);return!1}:function(qa,Ga,Ra){var eb,db,Oa,Ta=[Za,Ea];if(Ra)for(;qa=
qa[T];){if((1===qa.nodeType||na)&&G(qa,Ga,Ra))return!0}else for(;qa=qa[T];)if(1===qa.nodeType||na)if(db=(Oa=qa[Na]||(qa[Na]={}))[qa.uniqueID]||(Oa[qa.uniqueID]={}),ca&&ca===qa.nodeName.toLowerCase())qa=qa[T]||qa;else{if((eb=db[oa])&&eb[0]===Za&&eb[1]===Ea)return Ta[2]=eb[2];if((db[oa]=Ta)[2]=G(qa,Ga,Ra))return!0}return!1}}function Qa(G){return 1<G.length?function(O,U,T){for(var ca=G.length;ca--;)if(!G[ca](O,U,T))return!1;return!0}:G[0]}function $a(G,O,U,T,ca){for(var oa,na=[],Ea=0,qa=G.length,Ga=
null!=O;Ea<qa;Ea++)(oa=G[Ea])&&(U&&!U(oa,T,ca)||(na.push(oa),Ga&&O.push(Ea)));return na}function Ab(G,O,U,T,ca,oa){return T&&!T[Na]&&(T=Ab(T)),ca&&!ca[Na]&&(ca=Ab(ca,oa)),x(function(na,Ea,qa,Ga){var Ra,eb=[],db=[],Oa=Ea.length,Ta;if(!(Ta=na)){Ta=O||"*";for(var Wa=qa.nodeType?[qa]:qa,Bb=[],pb=0,lb=Wa.length;pb<lb;pb++)m(Ta,Wa[pb],Bb);Ta=Bb}Ta=!G||!na&&O?Ta:$a(Ta,eb,G,qa,Ga);Wa=U?ca||(na?G:Oa||T)?[]:Ea:Ta;if(U&&U(Ta,Wa,qa,Ga),T){var fb=$a(Wa,db);T(fb,[],qa,Ga);for(qa=fb.length;qa--;)(Ra=fb[qa])&&(Wa[db[qa]]=
!(Ta[db[qa]]=Ra))}if(na){if(ca||G){if(ca){fb=[];for(qa=Wa.length;qa--;)(Ra=Wa[qa])&&fb.push(Ta[qa]=Ra);ca(null,Wa=[],fb,Ga)}for(qa=Wa.length;qa--;)(Ra=Wa[qa])&&-1<(fb=ca?Pb(na,Ra):eb[qa])&&(na[fb]=!(Ea[fb]=Ra))}}else Wa=$a(Wa===Ea?Wa.splice(Oa,Wa.length):Wa),ca?ca(null,Ea,Wa,Ga):Lb.apply(Ea,Wa)})}function nb(G){var O,U,T=G.length,ca=La.relative[G[0].type];var oa=ca||La.relative[" "];for(var na=ca?1:0,Ea=Aa(function(Ra){return Ra===O},oa,!0),qa=Aa(function(Ra){return-1<Pb(O,Ra)},oa,!0),Ga=[function(Ra,
eb,db){Ra=!ca&&(db||eb!==Nb)||((O=eb).nodeType?Ea(Ra,eb,db):qa(Ra,eb,db));return O=null,Ra}];na<T;na++)if(oa=La.relative[G[na].type])Ga=[Aa(Qa(Ga),oa)];else{if((oa=La.filter[G[na].type].apply(null,G[na].matches))[Na]){for(U=++na;U<T&&!La.relative[G[U].type];U++);return Ab(1<na&&Qa(Ga),1<na&&ya(G.slice(0,na-1).concat({value:" "===G[na-2].type?"*":""})).replace(ic,"$1"),oa,na<U&&nb(G.slice(na,U)),U<T&&nb(G=G.slice(U)),U<T&&ya(G))}Ga.push(oa)}return Qa(Ga)}var ub,Ba,La,Sa,ib,Mb,Xb,zb,Nb,vb,wb,tb,Pa,
ab,cb,bb,rb,ob,Xa,Na="sizzle"+1*new Date,hb=f.document,Za=0,Db=0,Qb=r(),jc=r(),Fc=r(),hc=r(),pc=function(G,O){return G===O&&(wb=!0),0},ld={}.hasOwnProperty,Rb=[],md=Rb.pop,nd=Rb.push,Lb=Rb.push,Gc=Rb.slice,Pb=function(G,O){for(var U=0,T=G.length;U<T;U++)if(G[U]===O)return U;return-1},qc=":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)",
od=/[\x20\t\r\n\f]+/g,ic=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,pd=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Cc=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,jd=/[\x20\t\r\n\f]|>/,qd=new RegExp(qc),rd=/^(?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+$/,kc={ID:/^#((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,CLASS:/^\.((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,TAG:/^((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+|[*])/,
ATTR:/^\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:new RegExp("^"+qc),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,
needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},sd=/HTML$/i,td=/^(?:input|select|textarea|button)$/i,ud=/^h\d$/i,Yb=/^[^{]+\{\s*\[native \w/,id=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oc=/[+~]/,Ib=/\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\([^\r\n\f])/g,Jb=function(G,O){G="0x"+G.slice(1)-65536;return O||(0>G?String.fromCharCode(G+65536):String.fromCharCode(G>>10|55296,1023&G|56320))},Dc=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
Ec=function(G,O){return O?"\x00"===G?"\ufffd":G.slice(0,-1)+"\\"+G.charCodeAt(G.length-1).toString(16)+" ":"\\"+G},Hc=function(){tb()},kd=Aa(function(G){return!0===G.disabled&&"fieldset"===G.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Lb.apply(Rb=Gc.call(hb.childNodes),hb.childNodes),Rb[hb.childNodes.length].nodeType}catch(G){Lb={apply:Rb.length?function(O,U){nd.apply(O,Gc.call(U))}:function(O,U){for(var T=O.length,ca=0;O[T++]=U[ca++];);O.length=T-1}}}for(ub in Ba=m.support={},ib=
m.isXML=function(G){var O=G&&(G.ownerDocument||G).documentElement;return!sd.test(G&&G.namespaceURI||O&&O.nodeName||"HTML")},tb=m.setDocument=function(G){var O,U;G=G?G.ownerDocument||G:hb;return G!=Pa&&9===G.nodeType&&G.documentElement&&(ab=(Pa=G).documentElement,cb=!ib(Pa),hb!=Pa&&(U=Pa.defaultView)&&U.top!==U&&(U.addEventListener?U.addEventListener("unload",Hc,!1):U.attachEvent&&U.attachEvent("onunload",Hc)),Ba.scope=A(function(T){return ab.appendChild(T).appendChild(Pa.createElement("div")),"undefined"!=
typeof T.querySelectorAll&&!T.querySelectorAll(":scope fieldset div").length}),Ba.attributes=A(function(T){return T.className="i",!T.getAttribute("className")}),Ba.getElementsByTagName=A(function(T){return T.appendChild(Pa.createComment("")),!T.getElementsByTagName("*").length}),Ba.getElementsByClassName=Yb.test(Pa.getElementsByClassName),Ba.getById=A(function(T){return ab.appendChild(T).id=Na,!Pa.getElementsByName||!Pa.getElementsByName(Na).length}),Ba.getById?(La.filter.ID=function(T){var ca=T.replace(Ib,
Jb);return function(oa){return oa.getAttribute("id")===ca}},La.find.ID=function(T,ca){if("undefined"!=typeof ca.getElementById&&cb)return(T=ca.getElementById(T))?[T]:[]}):(La.filter.ID=function(T){var ca=T.replace(Ib,Jb);return function(oa){return(oa="undefined"!=typeof oa.getAttributeNode&&oa.getAttributeNode("id"))&&oa.value===ca}},La.find.ID=function(T,ca){if("undefined"!=typeof ca.getElementById&&cb){var oa,na=ca.getElementById(T);if(na){if((oa=na.getAttributeNode("id"))&&oa.value===T)return[na];
var Ea=ca.getElementsByName(T);for(ca=0;na=Ea[ca++];)if((oa=na.getAttributeNode("id"))&&oa.value===T)return[na]}return[]}}),La.find.TAG=Ba.getElementsByTagName?function(T,ca){return"undefined"!=typeof ca.getElementsByTagName?ca.getElementsByTagName(T):Ba.qsa?ca.querySelectorAll(T):void 0}:function(T,ca){var oa=[],na=0;ca=ca.getElementsByTagName(T);if("*"===T){for(;T=ca[na++];)1===T.nodeType&&oa.push(T);return oa}return ca},La.find.CLASS=Ba.getElementsByClassName&&function(T,ca){if("undefined"!=typeof ca.getElementsByClassName&&
cb)return ca.getElementsByClassName(T)},rb=[],bb=[],(Ba.qsa=Yb.test(Pa.querySelectorAll))&&(A(function(T){var ca;ab.appendChild(T).innerHTML="<a id='"+Na+"'></a><select id='"+Na+"-\r\\' msallowcapture=''><option selected=''></option></select>";T.querySelectorAll("[msallowcapture^='']").length&&bb.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");T.querySelectorAll("[selected]").length||bb.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
T.querySelectorAll("[id~="+Na+"-]").length||bb.push("~=");(ca=Pa.createElement("input")).setAttribute("name","");T.appendChild(ca);T.querySelectorAll("[name='']").length||bb.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");T.querySelectorAll(":checked").length||bb.push(":checked");T.querySelectorAll("a#"+Na+"+*").length||bb.push(".#.+[+~]");T.querySelectorAll("\\\f");bb.push("[\\r\\n\\f]")}),A(function(T){T.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
var ca=Pa.createElement("input");ca.setAttribute("type","hidden");T.appendChild(ca).setAttribute("name","D");T.querySelectorAll("[name=d]").length&&bb.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==T.querySelectorAll(":enabled").length&&bb.push(":enabled",":disabled");ab.appendChild(T).disabled=!0;2!==T.querySelectorAll(":disabled").length&&bb.push(":enabled",":disabled");T.querySelectorAll("*,:x");bb.push(",.*:")})),(Ba.matchesSelector=Yb.test(ob=ab.matches||ab.webkitMatchesSelector||ab.mozMatchesSelector||
ab.oMatchesSelector||ab.msMatchesSelector))&&A(function(T){Ba.disconnectedMatch=ob.call(T,"*");ob.call(T,"[s!='']:x");rb.push("!=",qc)}),bb=bb.length&&new RegExp(bb.join("|")),rb=rb.length&&new RegExp(rb.join("|")),O=Yb.test(ab.compareDocumentPosition),Xa=O||Yb.test(ab.contains)?function(T,ca){var oa=9===T.nodeType?T.documentElement:T;ca=ca&&ca.parentNode;return T===ca||!(!ca||1!==ca.nodeType||!(oa.contains?oa.contains(ca):T.compareDocumentPosition&&16&T.compareDocumentPosition(ca)))}:function(T,
ca){if(ca)for(;ca=ca.parentNode;)if(ca===T)return!0;return!1},pc=O?function(T,ca){if(T===ca)return wb=!0,0;var oa=!T.compareDocumentPosition-!ca.compareDocumentPosition;return oa||(1&(oa=(T.ownerDocument||T)==(ca.ownerDocument||ca)?T.compareDocumentPosition(ca):1)||!Ba.sortDetached&&ca.compareDocumentPosition(T)===oa?T==Pa||T.ownerDocument==hb&&Xa(hb,T)?-1:ca==Pa||ca.ownerDocument==hb&&Xa(hb,ca)?1:vb?Pb(vb,T)-Pb(vb,ca):0:4&oa?-1:1)}:function(T,ca){if(T===ca)return wb=!0,0;var oa=0,na=T.parentNode,
Ea=ca.parentNode,qa=[T],Ga=[ca];if(!na||!Ea)return T==Pa?-1:ca==Pa?1:na?-1:Ea?1:vb?Pb(vb,T)-Pb(vb,ca):0;if(na===Ea)return I(T,ca);for(;T=T.parentNode;)qa.unshift(T);for(T=ca;T=T.parentNode;)Ga.unshift(T);for(;qa[oa]===Ga[oa];)oa++;return oa?I(qa[oa],Ga[oa]):qa[oa]==hb?-1:Ga[oa]==hb?1:0}),Pa},m.matches=function(G,O){return m(G,null,null,O)},m.matchesSelector=function(G,O){if(tb(G),!(!Ba.matchesSelector||!cb||hc[O+" "]||rb&&rb.test(O)||bb&&bb.test(O)))try{var U=ob.call(G,O);if(U||Ba.disconnectedMatch||
G.document&&11!==G.document.nodeType)return U}catch(T){hc(O,!0)}return 0<m(O,Pa,null,[G]).length},m.contains=function(G,O){return(G.ownerDocument||G)!=Pa&&tb(G),Xa(G,O)},m.attr=function(G,O){(G.ownerDocument||G)!=Pa&&tb(G);var U=La.attrHandle[O.toLowerCase()];U=U&&ld.call(La.attrHandle,O.toLowerCase())?U(G,O,!cb):void 0;return void 0!==U?U:Ba.attributes||!cb?G.getAttribute(O):(U=G.getAttributeNode(O))&&U.specified?U.value:null},m.escape=function(G){return(G+"").replace(Dc,Ec)},m.error=function(G){throw Error("Syntax error, unrecognized expression: "+
G);},m.uniqueSort=function(G){var O,U=[],T=0,ca=0;if(wb=!Ba.detectDuplicates,vb=!Ba.sortStable&&G.slice(0),G.sort(pc),wb){for(;O=G[ca++];)O===G[ca]&&(T=U.push(ca));for(;T--;)G.splice(U[T],1)}return vb=null,G},Sa=m.getText=function(G){var O,U="",T=0;if(O=G.nodeType)if(1===O||9===O||11===O){if("string"==typeof G.textContent)return G.textContent;for(G=G.firstChild;G;G=G.nextSibling)U+=Sa(G)}else{if(3===O||4===O)return G.nodeValue}else for(;O=G[T++];)U+=Sa(O);return U},(La=m.selectors={cacheLength:50,
createPseudo:x,match:kc,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(G){return G[1]=G[1].replace(Ib,Jb),G[3]=(G[3]||G[4]||G[5]||"").replace(Ib,Jb),"~="===G[2]&&(G[3]=" "+G[3]+" "),G.slice(0,4)},CHILD:function(G){return G[1]=G[1].toLowerCase(),"nth"===G[1].slice(0,3)?(G[3]||m.error(G[0]),G[4]=+(G[4]?G[5]+(G[6]||1):2*("even"===G[3]||"odd"===G[3])),G[5]=+(G[7]+G[8]||"odd"===
G[3])):G[3]&&m.error(G[0]),G},PSEUDO:function(G){var O,U=!G[6]&&G[2];return kc.CHILD.test(G[0])?null:(G[3]?G[2]=G[4]||G[5]||"":U&&qd.test(U)&&(O=Mb(U,!0))&&(O=U.indexOf(")",U.length-O)-U.length)&&(G[0]=G[0].slice(0,O),G[2]=U.slice(0,O)),G.slice(0,3))}},filter:{TAG:function(G){var O=G.replace(Ib,Jb).toLowerCase();return"*"===G?function(){return!0}:function(U){return U.nodeName&&U.nodeName.toLowerCase()===O}},CLASS:function(G){var O=Qb[G+" "];return O||(O=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+G+"([\\x20\\t\\r\\n\\f]|$)"),
Qb(G,function(U){return O.test("string"==typeof U.className&&U.className||"undefined"!=typeof U.getAttribute&&U.getAttribute("class")||"")}))},ATTR:function(G,O,U){return function(T){T=m.attr(T,G);return null==T?"!="===O:!O||(T+="","="===O?T===U:"!="===O?T!==U:"^="===O?U&&0===T.indexOf(U):"*="===O?U&&-1<T.indexOf(U):"$="===O?U&&T.slice(-U.length)===U:"~="===O?-1<(" "+T.replace(od," ")+" ").indexOf(U):"|="===O&&(T===U||T.slice(0,U.length+1)===U+"-"))}},CHILD:function(G,O,U,T,ca){var oa="nth"!==G.slice(0,
3),na="last"!==G.slice(-4),Ea="of-type"===O;return 1===T&&0===ca?function(qa){return!!qa.parentNode}:function(qa,Ga,Ra){var eb,db,Oa,Ta;Ga=oa!==na?"nextSibling":"previousSibling";var Wa=qa.parentNode,Bb=Ea&&qa.nodeName.toLowerCase(),pb=!Ra&&!Ea,lb=!1;if(Wa){if(oa){for(;Ga;){for(Oa=qa;Oa=Oa[Ga];)if(Ea?Oa.nodeName.toLowerCase()===Bb:1===Oa.nodeType)return!1;var fb=Ga="only"===G&&!fb&&"nextSibling"}return!0}if(fb=[na?Wa.firstChild:Wa.lastChild],na&&pb)for(lb=(Ta=(eb=(Ra=(db=(Oa=Wa)[Na]||(Oa[Na]={}))[Oa.uniqueID]||
(db[Oa.uniqueID]={}))[G]||[])[0]===Za&&eb[1])&&eb[2],Oa=Ta&&Wa.childNodes[Ta];Oa=++Ta&&Oa&&Oa[Ga]||(lb=Ta=0)||fb.pop();){if(1===Oa.nodeType&&++lb&&Oa===qa){Ra[G]=[Za,Ta,lb];break}}else if(pb&&(lb=Ta=(eb=((db=(Oa=qa)[Na]||(Oa[Na]={}))[Oa.uniqueID]||(db[Oa.uniqueID]={}))[G]||[])[0]===Za&&eb[1]),!1===lb)for(;(Oa=++Ta&&Oa&&Oa[Ga]||(lb=Ta=0)||fb.pop())&&((Ea?Oa.nodeName.toLowerCase()!==Bb:1!==Oa.nodeType)||!++lb||(pb&&((Ra=(db=Oa[Na]||(Oa[Na]={}))[Oa.uniqueID]||(db[Oa.uniqueID]={}))[G]=[Za,lb]),Oa!==qa)););
return(lb-=ca)===T||0==lb%T&&0<=lb/T}}},PSEUDO:function(G,O){var U,T=La.pseudos[G]||La.setFilters[G.toLowerCase()]||m.error("unsupported pseudo: "+G);return T[Na]?T(O):1<T.length?(U=[G,G,"",O],La.setFilters.hasOwnProperty(G.toLowerCase())?x(function(ca,oa){for(var na,Ea=T(ca,O),qa=Ea.length;qa--;)ca[na=Pb(ca,Ea[qa])]=!(oa[na]=Ea[qa])}):function(ca){return T(ca,0,U)}):T}},pseudos:{not:x(function(G){var O=[],U=[],T=Xb(G.replace(ic,"$1"));return T[Na]?x(function(ca,oa,na,Ea){var qa;na=T(ca,null,Ea,[]);
for(Ea=ca.length;Ea--;)(qa=na[Ea])&&(ca[Ea]=!(oa[Ea]=qa))}):function(ca,oa,na){return O[0]=ca,T(O,null,na,U),O[0]=null,!U.pop()}}),has:x(function(G){return function(O){return 0<m(G,O).length}}),contains:x(function(G){return G=G.replace(Ib,Jb),function(O){return-1<(O.textContent||Sa(O)).indexOf(G)}}),lang:x(function(G){return rd.test(G||"")||m.error("unsupported lang: "+G),G=G.replace(Ib,Jb).toLowerCase(),function(O){var U;do if(U=cb?O.lang:O.getAttribute("xml:lang")||O.getAttribute("lang"))return(U=
U.toLowerCase())===G||0===U.indexOf(G+"-");while((O=O.parentNode)&&1===O.nodeType);return!1}}),target:function(G){var O=f.location&&f.location.hash;return O&&O.slice(1)===G.id},root:function(G){return G===ab},focus:function(G){return G===Pa.activeElement&&(!Pa.hasFocus||Pa.hasFocus())&&!!(G.type||G.href||~G.tabIndex)},enabled:Z(!1),disabled:Z(!0),checked:function(G){var O=G.nodeName.toLowerCase();return"input"===O&&!!G.checked||"option"===O&&!!G.selected},selected:function(G){return G.parentNode&&
G.parentNode.selectedIndex,!0===G.selected},empty:function(G){for(G=G.firstChild;G;G=G.nextSibling)if(6>G.nodeType)return!1;return!0},parent:function(G){return!La.pseudos.empty(G)},header:function(G){return ud.test(G.nodeName)},input:function(G){return td.test(G.nodeName)},button:function(G){var O=G.nodeName.toLowerCase();return"input"===O&&"button"===G.type||"button"===O},text:function(G){var O;return"input"===G.nodeName.toLowerCase()&&"text"===G.type&&(null==(O=G.getAttribute("type"))||"text"===
O.toLowerCase())},first:ia(function(){return[0]}),last:ia(function(G,O){return[O-1]}),eq:ia(function(G,O,U){return[0>U?U+O:U]}),even:ia(function(G,O){for(var U=0;U<O;U+=2)G.push(U);return G}),odd:ia(function(G,O){for(var U=1;U<O;U+=2)G.push(U);return G}),lt:ia(function(G,O,U){for(O=0>U?U+O:O<U?O:U;0<=--O;)G.push(O);return G}),gt:ia(function(G,O,U){for(U=0>U?U+O:U;++U<O;)G.push(U);return G})}}).pseudos.nth=La.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})La.pseudos[ub]=Q(ub);for(ub in{submit:!0,
reset:!0})La.pseudos[ub]=R(ub);return ta.prototype=La.filters=La.pseudos,La.setFilters=new ta,Mb=m.tokenize=function(G,O){var U,T,ca,oa,na,Ea;if(na=jc[G+" "])return O?0:na.slice(0);na=G;var qa=[];for(Ea=La.preFilter;na;){for(oa in U&&!(T=pd.exec(na))||(T&&(na=na.slice(T[0].length)||na),qa.push(ca=[])),U=!1,(T=Cc.exec(na))&&(U=T.shift(),ca.push({value:U,type:T[0].replace(ic," ")}),na=na.slice(U.length)),La.filter)!(T=kc[oa].exec(na))||Ea[oa]&&!(T=Ea[oa](T))||(U=T.shift(),ca.push({value:U,type:oa,matches:T}),
na=na.slice(U.length));if(!U)break}return O?na.length:na?m.error(G):jc(G,qa).slice(0)},Xb=m.compile=function(G,O){var U,T,ca,oa,na=[],Ea=[],qa=Fc[G+" "];if(!qa){O||(O=Mb(G));for(U=O.length;U--;)(qa=nb(O[U]))[Na]?na.push(qa):Ea.push(qa);(qa=Fc(G,(T=0<na.length,ca=0<Ea.length,oa=function(Ga,Ra,eb,db,Oa){var Ta,Wa,Bb=0,pb="0",lb=Ga&&[],fb=[],Ic=Nb,Jc=Ga||ca&&La.find.TAG("*",Oa),Kc=Za+=null==Ic?1:Math.random()||.1,vd=Jc.length;for(Oa&&(Nb=Ra==Pa||Ra||Oa);pb!==vd&&null!=(Ta=Jc[pb]);pb++){if(ca&&Ta){var rc=
0;for(Ra||Ta.ownerDocument==Pa||(tb(Ta),eb=!cb);Wa=Ea[rc++];)if(Wa(Ta,Ra||Pa,eb)){db.push(Ta);break}Oa&&(Za=Kc)}T&&((Ta=!Wa&&Ta)&&Bb--,Ga&&lb.push(Ta))}if(Bb+=pb,T&&pb!==Bb){for(rc=0;Wa=na[rc++];)Wa(lb,fb,Ra,eb);if(Ga){if(0<Bb)for(;pb--;)lb[pb]||fb[pb]||(fb[pb]=md.call(db));fb=$a(fb)}Lb.apply(db,fb);Oa&&!Ga&&0<fb.length&&1<Bb+na.length&&m.uniqueSort(db)}return Oa&&(Za=Kc,Nb=Ic),lb},T?x(oa):oa))).selector=G}return qa},zb=m.select=function(G,O,U,T){var ca,oa,na,Ea,qa,Ga="function"==typeof G&&G,Ra=!T&&
Mb(G=Ga.selector||G);if(U=U||[],1===Ra.length){if(2<(oa=Ra[0]=Ra[0].slice(0)).length&&"ID"===(na=oa[0]).type&&9===O.nodeType&&cb&&La.relative[oa[1].type]){if(!(O=(La.find.ID(na.matches[0].replace(Ib,Jb),O)||[])[0]))return U;Ga&&(O=O.parentNode);G=G.slice(oa.shift().value.length)}for(ca=kc.needsContext.test(G)?0:oa.length;ca--&&(na=oa[ca],!La.relative[Ea=na.type]);)if((qa=La.find[Ea])&&(T=qa(na.matches[0].replace(Ib,Jb),oc.test(oa[0].type)&&V(O.parentNode)||O))){if(oa.splice(ca,1),!(G=T.length&&ya(oa)))return Lb.apply(U,
T),U;break}}return(Ga||Xb(G,Ra))(T,O,!cb,U,!O||oc.test(G)&&V(O.parentNode)||O),U},Ba.sortStable=Na.split("").sort(pc).join("")===Na,Ba.detectDuplicates=!!wb,tb(),Ba.sortDetached=A(function(G){return 1&G.compareDocumentPosition(Pa.createElement("fieldset"))}),A(function(G){return G.innerHTML="<a href='#'></a>","#"===G.firstChild.getAttribute("href")})||H("type|href|height|width",function(G,O,U){if(!U)return G.getAttribute(O,"type"===O.toLowerCase()?1:2)}),Ba.attributes&&A(function(G){return G.innerHTML=
"<input/>",G.firstChild.setAttribute("value",""),""===G.firstChild.getAttribute("value")})||H("value",function(G,O,U){if(!U&&"input"===G.nodeName.toLowerCase())return G.defaultValue}),A(function(G){return null==G.getAttribute("disabled")})||H("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(G,O,U){var T;if(!U)return!0===G[O]?O.toLowerCase():(T=G.getAttributeNode(O))&&T.specified?T.value:null}),m}(c);v.find=xb;v.expr=
xb.selectors;v.expr[":"]=v.expr.pseudos;v.uniqueSort=v.unique=xb.uniqueSort;v.text=xb.getText;v.isXMLDoc=xb.isXML;v.contains=xb.contains;v.escapeSelector=xb.escape;var Eb=function(f,m,r){for(var x=[],A=void 0!==r;(f=f[m])&&9!==f.nodeType;)if(1===f.nodeType){if(A&&v(f).is(r))break;x.push(f)}return x},Ob=function(f,m){for(var r=[];f;f=f.nextSibling)1===f.nodeType&&f!==m&&r.push(f);return r},Lc=v.expr.match.needsContext,Mc=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;v.filter=function(f,
m,r){var x=m[0];return r&&(f=":not("+f+")"),1===m.length&&1===x.nodeType?v.find.matchesSelector(x,f)?[x]:[]:v.find.matches(f,v.grep(m,function(A){return 1===A.nodeType}))};v.fn.extend({find:function(f){var m,r=this.length,x=this;if("string"!=typeof f)return this.pushStack(v(f).filter(function(){for(m=0;m<r;m++)if(v.contains(x[m],this))return!0}));var A=this.pushStack([]);for(m=0;m<r;m++)v.find(f,x[m],A);return 1<r?v.uniqueSort(A):A},filter:function(f){return this.pushStack(h(this,f||[],!1))},not:function(f){return this.pushStack(h(this,
f||[],!0))},is:function(f){return!!h(this,"string"==typeof f&&Lc.test(f)?v(f):f||[],!1).length}});var wd=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(v.fn.init=function(f,m,r){var x,A;if(!f)return this;if(r=r||xd,"string"==typeof f){if(!(x="<"===f[0]&&">"===f[f.length-1]&&3<=f.length?[null,f,null]:wd.exec(f))||!x[1]&&m)return!m||m.jquery?(m||r).find(f):this.constructor(m).find(f);if(x[1]){if(m=m instanceof v?m[0]:m,v.merge(this,v.parseHTML(x[1],m&&m.nodeType?m.ownerDocument||m:Ja,!0)),Mc.test(x[1])&&v.isPlainObject(m))for(x in m)za(this[x])?
this[x](m[x]):this.attr(x,m[x]);return this}return(A=Ja.getElementById(x[2]))&&(this[0]=A,this.length=1),this}return f.nodeType?(this[0]=f,this.length=1,this):za(f)?void 0!==r.ready?r.ready(f):f(v):v.makeArray(f,this)}).prototype=v.fn;var xd=v(Ja);var yd=/^(?:parents|prev(?:Until|All))/,zd={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(f){var m=v(f,this),r=m.length;return this.filter(function(){for(var x=0;x<r;x++)if(v.contains(this,m[x]))return!0})},closest:function(f,m){var r,
x=0,A=this.length,H=[],I="string"!=typeof f&&v(f);if(!Lc.test(f))for(;x<A;x++)for(r=this[x];r&&r!==m;r=r.parentNode)if(11>r.nodeType&&(I?-1<I.index(r):1===r.nodeType&&v.find.matchesSelector(r,f))){H.push(r);break}return this.pushStack(1<H.length?v.uniqueSort(H):H)},index:function(f){return f?"string"==typeof f?Va.call(v(f),this[0]):Va.call(this,f.jquery?f[0]:f):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(f,m){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(f,
m))))},addBack:function(f){return this.add(null==f?this.prevObject:this.prevObject.filter(f))}});v.each({parent:function(f){return(f=f.parentNode)&&11!==f.nodeType?f:null},parents:function(f){return Eb(f,"parentNode")},parentsUntil:function(f,m,r){return Eb(f,"parentNode",r)},next:function(f){return l(f,"nextSibling")},prev:function(f){return l(f,"previousSibling")},nextAll:function(f){return Eb(f,"nextSibling")},prevAll:function(f){return Eb(f,"previousSibling")},nextUntil:function(f,m,r){return Eb(f,
"nextSibling",r)},prevUntil:function(f,m,r){return Eb(f,"previousSibling",r)},siblings:function(f){return Ob((f.parentNode||{}).firstChild,f)},children:function(f){return Ob(f.firstChild)},contents:function(f){return null!=f.contentDocument&&Fa(f.contentDocument)?f.contentDocument:(t(f,"template")&&(f=f.content||f),v.merge([],f.childNodes))}},function(f,m){v.fn[f]=function(r,x){var A=v.map(this,m,r);return"Until"!==f.slice(-5)&&(x=r),x&&"string"==typeof x&&(A=v.filter(x,A)),1<this.length&&(zd[f]||
v.uniqueSort(A),yd.test(f)&&A.reverse()),this.pushStack(A)}});var Cb=/[^\x20\t\r\n\f]+/g;v.Callbacks=function(f){var m,r;f="string"==typeof f?(m=f,r={},v.each(m.match(Cb)||[],function(ta,ya){r[ya]=!0}),r):v.extend({},f);var x,A,H,I,Q=[],R=[],Z=-1,ia=function(){I=I||f.once;for(H=x=!0;R.length;Z=-1)for(A=R.shift();++Z<Q.length;)!1===Q[Z].apply(A[0],A[1])&&f.stopOnFalse&&(Z=Q.length,A=!1);f.memory||(A=!1);x=!1;I&&(Q=A?[]:"")},V={add:function(){return Q&&(A&&!x&&(Z=Q.length-1,R.push(A)),function Aa(ya){v.each(ya,
function(Qa,$a){za($a)?f.unique&&V.has($a)||Q.push($a):$a&&$a.length&&"string"!==M($a)&&Aa($a)})}(arguments),A&&!x&&ia()),this},remove:function(){return v.each(arguments,function(ta,ya){for(var Aa;-1<(Aa=v.inArray(ya,Q,Aa));)Q.splice(Aa,1),Aa<=Z&&Z--}),this},has:function(ta){return ta?-1<v.inArray(ta,Q):0<Q.length},empty:function(){return Q&&(Q=[]),this},disable:function(){return I=R=[],Q=A="",this},disabled:function(){return!Q},lock:function(){return I=R=[],A||x||(Q=A=""),this},locked:function(){return!!I},
fireWith:function(ta,ya){return I||(ya=[ta,(ya=ya||[]).slice?ya.slice():ya],R.push(ya),x||ia()),this},fire:function(){return V.fireWith(this,arguments),this},fired:function(){return!!H}};return V};v.extend({Deferred:function(f){var m=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],r="pending",x={state:function(){return r},
always:function(){return A.done(arguments).fail(arguments),this},"catch":function(H){return x.then(null,H)},pipe:function(){var H=arguments;return v.Deferred(function(I){v.each(m,function(Q,R){var Z=za(H[R[4]])&&H[R[4]];A[R[1]](function(){var ia=Z&&Z.apply(this,arguments);ia&&za(ia.promise)?ia.promise().progress(I.notify).done(I.resolve).fail(I.reject):I[R[0]+"With"](this,Z?[ia]:arguments)})});H=null}).promise()},then:function(H,I,Q){function R(ia,V,ta,ya){return function(){var Aa=this,Qa=arguments,
$a=function(){var nb;if(!(ia<Z)){if((nb=ta.apply(Aa,Qa))===V.promise())throw new TypeError("Thenable self-resolution");var ub=nb&&("object"==typeof nb||"function"==typeof nb)&&nb.then;za(ub)?ya?ub.call(nb,R(Z,V,q,ya),R(Z,V,z,ya)):(Z++,ub.call(nb,R(Z,V,q,ya),R(Z,V,z,ya),R(Z,V,q,V.notifyWith))):(ta!==q&&(Aa=void 0,Qa=[nb]),(ya||V.resolveWith)(Aa,Qa))}},Ab=ya?$a:function(){try{$a()}catch(nb){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(nb,Ab.stackTrace),Z<=ia+1&&(ta!==z&&(Aa=void 0,Qa=[nb]),V.rejectWith(Aa,
Qa))}};ia?Ab():(v.Deferred.getStackHook&&(Ab.stackTrace=v.Deferred.getStackHook()),c.setTimeout(Ab))}}var Z=0;return v.Deferred(function(ia){m[0][3].add(R(0,ia,za(Q)?Q:q,ia.notifyWith));m[1][3].add(R(0,ia,za(H)?H:q));m[2][3].add(R(0,ia,za(I)?I:z))}).promise()},promise:function(H){return null!=H?v.extend(H,x):x}},A={};return v.each(m,function(H,I){var Q=I[2],R=I[5];x[I[1]]=Q.add;R&&Q.add(function(){r=R},m[3-H][2].disable,m[3-H][3].disable,m[0][2].lock,m[0][3].lock);Q.add(I[3].fire);A[I[0]]=function(){return A[I[0]+
"With"](this===A?void 0:this,arguments),this};A[I[0]+"With"]=Q.fireWith}),x.promise(A),f&&f.call(A,A),A},when:function(f){var m=arguments.length,r=m,x=Array(r),A=gb.call(arguments),H=v.Deferred(),I=function(Q){return function(R){x[Q]=this;A[Q]=1<arguments.length?gb.call(arguments):R;--m||H.resolveWith(x,A)}};if(1>=m&&(E(f,H.done(I(r)).resolve,H.reject,!m),"pending"===H.state()||za(A[r]&&A[r].then)))return H.then();for(;r--;)E(A[r],I(r),H.reject);return H.promise()}});var Ad=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
v.Deferred.exceptionHook=function(f,m){c.console&&c.console.warn&&f&&Ad.test(f.name)&&c.console.warn("jQuery.Deferred exception: "+f.message,f.stack,m)};v.readyException=function(f){c.setTimeout(function(){throw f;})};var sc=v.Deferred();v.fn.ready=function(f){return sc.then(f)["catch"](function(m){v.readyException(m)}),this};v.extend({isReady:!1,readyWait:1,ready:function(f){(!0===f?--v.readyWait:v.isReady)||(v.isReady=!0)!==f&&0<--v.readyWait||sc.resolveWith(Ja,[v])}});v.ready.then=sc.then;"complete"===
Ja.readyState||"loading"!==Ja.readyState&&!Ja.documentElement.doScroll?c.setTimeout(v.ready):(Ja.addEventListener("DOMContentLoaded",L),c.addEventListener("load",L));var Kb=function(f,m,r,x,A,H,I){var Q=0,R=f.length,Z=null==r;if("object"===M(r))for(Q in A=!0,r)Kb(f,m,Q,r[Q],!0,H,I);else if(void 0!==x&&(A=!0,za(x)||(I=!0),Z&&(I?(m.call(f,x),m=null):(Z=m,m=function(ia,V,ta){return Z.call(v(ia),ta)})),m))for(;Q<R;Q++)m(f[Q],r,I?x:x.call(f[Q],Q,m(f[Q],r)));return A?f:Z?m.call(f):R?m(f[0],r):H},$c=/^-ms-/,
ad=/-([a-z])/g,Zb=function(f){return 1===f.nodeType||9===f.nodeType||!+f.nodeType};S.uid=1;S.prototype={cache:function(f){var m=f[this.expando];return m||(m={},Zb(f)&&(f.nodeType?f[this.expando]=m:Object.defineProperty(f,this.expando,{value:m,configurable:!0}))),m},set:function(f,m,r){var x;f=this.cache(f);if("string"==typeof m)f[P(m)]=r;else for(x in m)f[P(x)]=m[x];return f},get:function(f,m){return void 0===m?this.cache(f):f[this.expando]&&f[this.expando][P(m)]},access:function(f,m,r){return void 0===
m||m&&"string"==typeof m&&void 0===r?this.get(f,m):(this.set(f,m,r),void 0!==r?r:m)},remove:function(f,m){var r=f[this.expando];if(void 0!==r){if(void 0!==m){var x=(m=Array.isArray(m)?m.map(P):(m=P(m))in r?[m]:m.match(Cb)||[]).length;for(;x--;)delete r[m[x]]}(void 0===m||v.isEmptyObject(r))&&(f.nodeType?f[this.expando]=void 0:delete f[this.expando])}},hasData:function(f){f=f[this.expando];return void 0!==f&&!v.isEmptyObject(f)}};var Ia=new S,qb=new S,cd=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bd=/[A-Z]/g;
v.extend({hasData:function(f){return qb.hasData(f)||Ia.hasData(f)},data:function(f,m,r){return qb.access(f,m,r)},removeData:function(f,m){qb.remove(f,m)},_data:function(f,m,r){return Ia.access(f,m,r)},_removeData:function(f,m){Ia.remove(f,m)}});v.fn.extend({data:function(f,m){var r,x,A,H=this[0],I=H&&H.attributes;if(void 0===f){if(this.length&&(A=qb.get(H),1===H.nodeType&&!Ia.get(H,"hasDataAttrs"))){for(r=I.length;r--;)I[r]&&0===(x=I[r].name).indexOf("data-")&&(x=P(x.slice(5)),X(H,x,A[x]));Ia.set(H,
"hasDataAttrs",!0)}return A}return"object"==typeof f?this.each(function(){qb.set(this,f)}):Kb(this,function(Q){var R;if(H&&void 0===Q)return void 0!==(R=qb.get(H,f))?R:void 0!==(R=X(H,f))?R:void 0;this.each(function(){qb.set(this,f,Q)})},null,m,1<arguments.length,null,!0)},removeData:function(f){return this.each(function(){qb.remove(this,f)})}});v.extend({queue:function(f,m,r){var x;if(f)return m=(m||"fx")+"queue",x=Ia.get(f,m),r&&(!x||Array.isArray(r)?x=Ia.access(f,m,v.makeArray(r)):x.push(r)),x||
[]},dequeue:function(f,m){m=m||"fx";var r=v.queue(f,m),x=r.length,A=r.shift(),H=v._queueHooks(f,m);"inprogress"===A&&(A=r.shift(),x--);A&&("fx"===m&&r.unshift("inprogress"),delete H.stop,A.call(f,function(){v.dequeue(f,m)},H));!x&&H&&H.empty.fire()},_queueHooks:function(f,m){var r=m+"queueHooks";return Ia.get(f,r)||Ia.access(f,r,{empty:v.Callbacks("once memory").add(function(){Ia.remove(f,[m+"queue",r])})})}});v.fn.extend({queue:function(f,m){var r=2;return"string"!=typeof f&&(m=f,f="fx",r--),arguments.length<
r?v.queue(this[0],f):void 0===m?this:this.each(function(){var x=v.queue(this,f,m);v._queueHooks(this,f);"fx"===f&&"inprogress"!==x[0]&&v.dequeue(this,f)})},dequeue:function(f){return this.each(function(){v.dequeue(this,f)})},clearQueue:function(f){return this.queue(f||"fx",[])},promise:function(f,m){var r,x=1,A=v.Deferred(),H=this,I=this.length,Q=function(){--x||A.resolveWith(H,[H])};"string"!=typeof f&&(m=f,f=void 0);for(f=f||"fx";I--;)(r=Ia.get(H[I],f+"queueHooks"))&&r.empty&&(x++,r.empty.add(Q));
return Q(),A.promise(m)}});var Nc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Wb=new RegExp("^(?:([+-])=|)("+Nc+")([a-z%]*)$","i"),Gb=["Top","Right","Bottom","Left"],Sb=Ja.documentElement,Tb=function(f){return v.contains(f.ownerDocument,f)},Bd={composed:!0};Sb.getRootNode&&(Tb=function(f){return v.contains(f.ownerDocument,f)||f.getRootNode(Bd)===f.ownerDocument});var ec=function(f,m){return"none"===(f=m||f).style.display||""===f.style.display&&Tb(f)&&"none"===v.css(f,"display")},wc={};v.fn.extend({show:function(){return fa(this,
!0)},hide:function(){return fa(this)},toggle:function(f){return"boolean"==typeof f?f?this.show():this.hide():this.each(function(){ec(this)?v(this).show():v(this).hide()})}});var lc,$b=/^(?:checkbox|radio)$/i,xc=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yc=/^$|^module$|\/(?:java|ecma)script/i;var Vb=Ja.createDocumentFragment().appendChild(Ja.createElement("div"));(lc=Ja.createElement("input")).setAttribute("type","radio");lc.setAttribute("checked","checked");lc.setAttribute("name","t");Vb.appendChild(lc);ba.checkClone=
Vb.cloneNode(!0).cloneNode(!0).lastChild.checked;Vb.innerHTML="<textarea>x</textarea>";ba.noCloneChecked=!!Vb.cloneNode(!0).lastChild.defaultValue;Vb.innerHTML="<option></option>";ba.option=!!Vb.lastChild;var yb={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};yb.tbody=yb.tfoot=yb.colgroup=yb.caption=yb.thead;yb.th=yb.td;ba.option||(yb.optgroup=yb.option=
[1,"<select multiple='multiple'>","</select>"]);var dd=/<|&#?\w+;/,Oc=/^([^.]*)(?:\.(.+)|)/;v.event={global:{},add:function(f,m,r,x,A){var H,I,Q,R,Z,ia,V,ta;var ya=Ia.get(f);if(Zb(f))for(r.handler&&(r=(H=r).handler,A=H.selector),A&&v.find.matchesSelector(Sb,A),r.guid||(r.guid=v.guid++),(R=ya.events)||(R=ya.events=Object.create(null)),(I=ya.handle)||(I=ya.handle=function(Qa){return"undefined"!=typeof v&&v.event.triggered!==Qa.type?v.event.dispatch.apply(f,arguments):void 0}),ya=(m=(m||"").match(Cb)||
[""]).length;ya--;){var Aa=ta=(Q=Oc.exec(m[ya])||[])[1];Q=(Q[2]||"").split(".").sort();Aa&&(ia=v.event.special[Aa]||{},Aa=(A?ia.delegateType:ia.bindType)||Aa,ia=v.event.special[Aa]||{},Z=v.extend({type:Aa,origType:ta,data:x,handler:r,guid:r.guid,selector:A,needsContext:A&&v.expr.match.needsContext.test(A),namespace:Q.join(".")},H),(V=R[Aa])||((V=R[Aa]=[]).delegateCount=0,ia.setup&&!1!==ia.setup.call(f,x,Q,I)||f.addEventListener&&f.addEventListener(Aa,I)),ia.add&&(ia.add.call(f,Z),Z.handler.guid||
(Z.handler.guid=r.guid)),A?V.splice(V.delegateCount++,0,Z):V.push(Z),v.event.global[Aa]=!0)}},remove:function(f,m,r,x,A){var H,I,Q,R,Z,ia,V,ta,ya=Ia.hasData(f)&&Ia.get(f);if(ya&&(R=ya.events)){for(Z=(m=(m||"").match(Cb)||[""]).length;Z--;)if(ia=ta=(Q=Oc.exec(m[Z])||[])[1],V=(Q[2]||"").split(".").sort(),ia){var Aa=v.event.special[ia]||{};var Qa=R[ia=(x?Aa.delegateType:Aa.bindType)||ia]||[];Q=Q[2]&&new RegExp("(^|\\.)"+V.join("\\.(?:.*\\.|)")+"(\\.|$)");for(I=H=Qa.length;H--;){var $a=Qa[H];!A&&ta!==
$a.origType||r&&r.guid!==$a.guid||Q&&!Q.test($a.namespace)||x&&x!==$a.selector&&("**"!==x||!$a.selector)||(Qa.splice(H,1),$a.selector&&Qa.delegateCount--,Aa.remove&&Aa.remove.call(f,$a))}I&&!Qa.length&&(Aa.teardown&&!1!==Aa.teardown.call(f,V,ya.handle)||v.removeEvent(f,ia,ya.handle),delete R[ia])}else for(ia in R)v.event.remove(f,ia+m[Z],r,x,!0);v.isEmptyObject(R)&&Ia.remove(f,"handle events")}},dispatch:function(f){var m,r,x,A,H=Array(arguments.length),I=v.event.fix(f);var Q=(Ia.get(this,"events")||
Object.create(null))[I.type]||[];var R=v.event.special[I.type]||{};H[0]=I;for(m=1;m<arguments.length;m++)H[m]=arguments[m];if(I.delegateTarget=this,!R.preDispatch||!1!==R.preDispatch.call(this,I)){var Z=v.event.handlers.call(this,I,Q);for(m=0;(x=Z[m++])&&!I.isPropagationStopped();)for(I.currentTarget=x.elem,Q=0;(A=x.handlers[Q++])&&!I.isImmediatePropagationStopped();)I.rnamespace&&!1!==A.namespace&&!I.rnamespace.test(A.namespace)||(I.handleObj=A,I.data=A.data,void 0!==(r=((v.event.special[A.origType]||
{}).handle||A.handler).apply(x.elem,H))&&!1===(I.result=r)&&(I.preventDefault(),I.stopPropagation()));return R.postDispatch&&R.postDispatch.call(this,I),I.result}},handlers:function(f,m){var r,x,A,H=[],I=m.delegateCount,Q=f.target;if(I&&Q.nodeType&&!("click"===f.type&&1<=f.button))for(;Q!==this;Q=Q.parentNode||this)if(1===Q.nodeType&&("click"!==f.type||!0!==Q.disabled)){var R=[];var Z={};for(r=0;r<I;r++)void 0===Z[A=(x=m[r]).selector+" "]&&(Z[A]=x.needsContext?-1<v(A,this).index(Q):v.find(A,this,
null,[Q]).length),Z[A]&&R.push(x);R.length&&H.push({elem:Q,handlers:R})}return Q=this,I<m.length&&H.push({elem:Q,handlers:m.slice(I)}),H},addProp:function(f,m){Object.defineProperty(v.Event.prototype,f,{enumerable:!0,configurable:!0,get:za(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[f]},set:function(r){Object.defineProperty(this,f,{enumerable:!0,configurable:!0,writable:!0,value:r})}})},fix:function(f){return f[v.expando]?
f:new v.Event(f)},special:{load:{noBubble:!0},click:{setup:function(f){f=this||f;return $b.test(f.type)&&f.click&&t(f,"input")&&a(f,"click",ka),!1},trigger:function(f){f=this||f;return $b.test(f.type)&&f.click&&t(f,"input")&&a(f,"click"),!0},_default:function(f){f=f.target;return $b.test(f.type)&&f.click&&t(f,"input")&&Ia.get(f,"click")||t(f,"a")}},beforeunload:{postDispatch:function(f){void 0!==f.result&&f.originalEvent&&(f.originalEvent.returnValue=f.result)}}}};v.removeEvent=function(f,m,r){f.removeEventListener&&
f.removeEventListener(m,r)};v.Event=function(f,m){if(!(this instanceof v.Event))return new v.Event(f,m);f&&f.type?(this.originalEvent=f,this.type=f.type,this.isDefaultPrevented=f.defaultPrevented||void 0===f.defaultPrevented&&!1===f.returnValue?ka:ma,this.target=f.target&&3===f.target.nodeType?f.target.parentNode:f.target,this.currentTarget=f.currentTarget,this.relatedTarget=f.relatedTarget):this.type=f;m&&v.extend(this,m);this.timeStamp=f&&f.timeStamp||Date.now();this[v.expando]=!0};v.Event.prototype=
{constructor:v.Event,isDefaultPrevented:ma,isPropagationStopped:ma,isImmediatePropagationStopped:ma,isSimulated:!1,preventDefault:function(){var f=this.originalEvent;this.isDefaultPrevented=ka;f&&!this.isSimulated&&f.preventDefault()},stopPropagation:function(){var f=this.originalEvent;this.isPropagationStopped=ka;f&&!this.isSimulated&&f.stopPropagation()},stopImmediatePropagation:function(){var f=this.originalEvent;this.isImmediatePropagationStopped=ka;f&&!this.isSimulated&&f.stopImmediatePropagation();
this.stopPropagation()}};v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp);v.each({focus:"focusin",blur:"focusout"},function(f,m){v.event.special[f]={setup:function(){return a(this,
f,ra),!1},trigger:function(){return a(this,f),!0},_default:function(){return!0},delegateType:m}});v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(f,m){v.event.special[f]={delegateType:m,bindType:m,handle:function(r){var x,A=r.relatedTarget,H=r.handleObj;return A&&(A===this||v.contains(this,A))||(r.type=H.origType,x=H.handler.apply(this,arguments),r.type=m),x}}});v.fn.extend({on:function(f,m,r,x){return Ca(this,f,m,r,x)},one:function(f,
m,r,x){return Ca(this,f,m,r,x,1)},off:function(f,m,r){var x,A;if(f&&f.preventDefault&&f.handleObj)return x=f.handleObj,v(f.delegateTarget).off(x.namespace?x.origType+"."+x.namespace:x.origType,x.selector,x.handler),this;if("object"==typeof f){for(A in f)this.off(A,m,f[A]);return this}return!1!==m&&"function"!=typeof m||(r=m,m=void 0),!1===r&&(r=ma),this.each(function(){v.event.remove(this,f,r,m)})}});var Cd=/<script|<style|<link/i,ed=/checked\s*(?:[^=]|=\s*.checked.)/i,fd=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
v.extend({htmlPrefilter:function(f){return f},clone:function(f,m,r){var x,A,H,I=f.cloneNode(!0),Q=Tb(f);if(!(ba.noCloneChecked||1!==f.nodeType&&11!==f.nodeType||v.isXMLDoc(f))){var R=sa(I);var Z=0;for(x=(A=sa(f)).length;Z<x;Z++){var ia=A[Z];var V=R[Z];void 0;"input"===(H=V.nodeName.toLowerCase())&&$b.test(ia.type)?V.checked=ia.checked:"input"!==H&&"textarea"!==H||(V.defaultValue=ia.defaultValue)}}if(m)if(r)for(A=A||sa(f),R=R||sa(I),Z=0,x=A.length;Z<x;Z++)d(A[Z],R[Z]);else d(f,I);return 0<(R=sa(I,
"script")).length&&W(R,!Q&&sa(f,"script")),I},cleanData:function(f){for(var m,r,x,A=v.event.special,H=0;void 0!==(r=f[H]);H++)if(Zb(r)){if(m=r[Ia.expando]){if(m.events)for(x in m.events)A[x]?v.event.remove(r,x):v.removeEvent(r,x,m.handle);r[Ia.expando]=void 0}r[qb.expando]&&(r[qb.expando]=void 0)}}});v.fn.extend({detach:function(f){return g(this,f,!0)},remove:function(f){return g(this,f)},text:function(f){return Kb(this,function(m){return void 0===m?v.text(this):this.empty().each(function(){1!==this.nodeType&&
11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,f,arguments.length)},append:function(){return e(this,arguments,function(f){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||B(this,f).appendChild(f)})},prepend:function(){return e(this,arguments,function(f){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=B(this,f);m.insertBefore(f,m.firstChild)}})},before:function(){return e(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this)})},
after:function(){return e(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this.nextSibling)})},empty:function(){for(var f,m=0;null!=(f=this[m]);m++)1===f.nodeType&&(v.cleanData(sa(f,!1)),f.textContent="");return this},clone:function(f,m){return f=null!=f&&f,m=null==m?f:m,this.map(function(){return v.clone(this,f,m)})},html:function(f){return Kb(this,function(m){var r=this[0]||{},x=0,A=this.length;if(void 0===m&&1===r.nodeType)return r.innerHTML;if("string"==typeof m&&!Cd.test(m)&&
!yb[(xc.exec(m)||["",""])[1].toLowerCase()]){m=v.htmlPrefilter(m);try{for(;x<A;x++)1===(r=this[x]||{}).nodeType&&(v.cleanData(sa(r,!1)),r.innerHTML=m);r=0}catch(H){}}r&&this.empty().append(m)},null,f,arguments.length)},replaceWith:function(){var f=[];return e(this,arguments,function(m){var r=this.parentNode;0>v.inArray(this,f)&&(v.cleanData(sa(this)),r&&r.replaceChild(m,this))},f)}});v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},
function(f,m){v.fn[f]=function(r){for(var x=[],A=v(r),H=A.length-1,I=0;I<=H;I++)r=I===H?this:this.clone(!0),v(A[I])[m](r),mb.apply(x,r.get());return this.pushStack(x)}});var mc=new RegExp("^("+Nc+")(?!px)[a-z%]+$","i"),fc=function(f){var m=f.ownerDocument.defaultView;return m&&m.opener||(m=c),m.getComputedStyle(f)},Pc=function(f,m,r){var x,A={};for(x in m)A[x]=f.style[x],f.style[x]=m[x];for(x in r=r.call(f),m)f.style[x]=A[x];return r},gd=new RegExp(Gb.join("|"),"i");!function(){function f(){if(R){Q.style.cssText=
"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";R.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";Sb.appendChild(Q).appendChild(R);var Z=c.getComputedStyle(R);m="1%"!==Z.top;I=12===Math.round(parseFloat(Z.marginLeft));R.style.right="60%";A=36===Math.round(parseFloat(Z.right));r=36===Math.round(parseFloat(Z.width));R.style.position="absolute";x=12===Math.round(parseFloat(R.offsetWidth/
3));Sb.removeChild(Q);R=null}}var m,r,x,A,H,I,Q=Ja.createElement("div"),R=Ja.createElement("div");R.style&&(R.style.backgroundClip="content-box",R.cloneNode(!0).style.backgroundClip="",ba.clearCloneStyle="content-box"===R.style.backgroundClip,v.extend(ba,{boxSizingReliable:function(){return f(),r},pixelBoxStyles:function(){return f(),A},pixelPosition:function(){return f(),m},reliableMarginLeft:function(){return f(),I},scrollboxSize:function(){return f(),x},reliableTrDimensions:function(){var Z,ia,
V,ta;return null==H&&(Z=Ja.createElement("table"),ia=Ja.createElement("tr"),V=Ja.createElement("div"),Z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ia.style.cssText="border:1px solid",ia.style.height="1px",V.style.height="9px",V.style.display="block",Sb.appendChild(Z).appendChild(ia).appendChild(V),ta=c.getComputedStyle(ia),H=parseInt(ta.height,10)+parseInt(ta.borderTopWidth,10)+parseInt(ta.borderBottomWidth,10)===ia.offsetHeight,Sb.removeChild(Z)),H}}))}();var Bc=["Webkit",
"Moz","ms"],Ac=Ja.createElement("div").style,zc={},Dd=/^(none|table(?!-c[ea]).+)/,Qc=/^--/,Ed={position:"absolute",visibility:"hidden",display:"block"},Rc={letterSpacing:"0",fontWeight:"400"};v.extend({cssHooks:{opacity:{get:function(f,m){if(m)return f=k(f,"opacity"),""===f?"1":f}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,
opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(f,m,r,x){if(f&&3!==f.nodeType&&8!==f.nodeType&&f.style){var A,H,I,Q=P(m),R=Qc.test(m),Z=f.style;if(R||(m=n(Q)),I=v.cssHooks[m]||v.cssHooks[Q],void 0===r)return I&&"get"in I&&void 0!==(A=I.get(f,!1,x))?A:Z[m];"string"===(H=typeof r)&&(A=Wb.exec(r))&&A[1]&&(r=ea(f,m,A),H="number");null!=r&&r==r&&("number"!==H||R||(r+=A&&A[3]||(v.cssNumber[Q]?"":"px")),ba.clearCloneStyle||""!==r||0!==m.indexOf("background")||(Z[m]=
"inherit"),I&&"set"in I&&void 0===(r=I.set(f,r,x))||(R?Z.setProperty(m,r):Z[m]=r))}},css:function(f,m,r,x){var A,H,I,Q=P(m);return Qc.test(m)||(m=n(Q)),(I=v.cssHooks[m]||v.cssHooks[Q])&&"get"in I&&(A=I.get(f,!0,r)),void 0===A&&(A=k(f,m,x)),"normal"===A&&m in Rc&&(A=Rc[m]),""===r||r?(H=parseFloat(A),!0===r||isFinite(H)?H||0:A):A}});v.each(["height","width"],function(f,m){v.cssHooks[m]={get:function(r,x,A){if(x)return!Dd.test(v.css(r,"display"))||r.getClientRects().length&&r.getBoundingClientRect().width?
K(r,m,A):Pc(r,Ed,function(){return K(r,m,A)})},set:function(r,x,A){var H,I=fc(r),Q=!ba.scrollboxSize()&&"absolute"===I.position,R=(Q||A)&&"border-box"===v.css(r,"boxSizing",!1,I);A=A?C(r,m,A,R,I):0;return R&&Q&&(A-=Math.ceil(r["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(I[m])-C(r,m,"border",!1,I)-.5)),A&&(H=Wb.exec(x))&&"px"!==(H[3]||"px")&&(r.style[m]=x,x=v.css(r,m)),w(0,x,A)}}});v.cssHooks.marginLeft=p(ba.reliableMarginLeft,function(f,m){if(m)return(parseFloat(k(f,"marginLeft"))||f.getBoundingClientRect().left-
Pc(f,{marginLeft:0},function(){return f.getBoundingClientRect().left}))+"px"});v.each({margin:"",padding:"",border:"Width"},function(f,m){v.cssHooks[f+m]={expand:function(r){var x=0,A={};for(r="string"==typeof r?r.split(" "):[r];4>x;x++)A[f+Gb[x]+m]=r[x]||r[x-2]||r[0];return A}};"margin"!==f&&(v.cssHooks[f+m].set=w)});v.fn.extend({css:function(f,m){return Kb(this,function(r,x,A){var H,I={},Q=0;if(Array.isArray(x)){A=fc(r);for(H=x.length;Q<H;Q++)I[x[Q]]=v.css(r,x[Q],!1,A);return I}return void 0!==
A?v.style(r,x,A):v.css(r,x)},f,m,1<arguments.length)}});((v.Tween=F).prototype={constructor:F,init:function(f,m,r,x,A,H){this.elem=f;this.prop=r;this.easing=A||v.easing._default;this.options=m;this.start=this.now=this.cur();this.end=x;this.unit=H||(v.cssNumber[r]?"":"px")},cur:function(){var f=F.propHooks[this.prop];return f&&f.get?f.get(this):F.propHooks._default.get(this)},run:function(f){var m,r=F.propHooks[this.prop];return this.options.duration?this.pos=m=v.easing[this.easing](f,this.options.duration*
f,0,1,this.options.duration):this.pos=m=f,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):F.propHooks._default.set(this),this}}).init.prototype=F.prototype;(F.propHooks={_default:{get:function(f){var m;return 1!==f.elem.nodeType||null!=f.elem[f.prop]&&null==f.elem.style[f.prop]?f.elem[f.prop]:(m=v.css(f.elem,f.prop,""))&&"auto"!==m?m:0},set:function(f){v.fx.step[f.prop]?v.fx.step[f.prop](f):1!==f.elem.nodeType||!v.cssHooks[f.prop]&&
null==f.elem.style[n(f.prop)]?f.elem[f.prop]=f.now:v.style(f.elem,f.prop,f.now+f.unit)}}}).scrollTop=F.propHooks.scrollLeft={set:function(f){f.elem.nodeType&&f.elem.parentNode&&(f.elem[f.prop]=f.now)}};v.easing={linear:function(f){return f},swing:function(f){return.5-Math.cos(f*Math.PI)/2},_default:"swing"};v.fx=F.prototype.init;v.fx.step={};var Ub,gc,Fd=/^(?:toggle|show|hide)$/,Gd=/queueHooks$/;v.Animation=v.extend(la,{tweeners:{"*":[function(f,m){var r=this.createTween(f,m);return ea(r.elem,f,Wb.exec(m),
r),r}]},tweener:function(f,m){za(f)?(m=f,f=["*"]):f=f.match(Cb);for(var r,x=0,A=f.length;x<A;x++)r=f[x],la.tweeners[r]=la.tweeners[r]||[],la.tweeners[r].unshift(m)},prefilters:[function(f,m,r){var x,A,H,I,Q,R,Z,ia="width"in m||"height"in m,V=this,ta={},ya=f.style,Aa=f.nodeType&&ec(f),Qa=Ia.get(f,"fxshow");for(x in r.queue||(null==(I=v._queueHooks(f,"fx")).unqueued&&(I.unqueued=0,Q=I.empty.fire,I.empty.fire=function(){I.unqueued||Q()}),I.unqueued++,V.always(function(){V.always(function(){I.unqueued--;
v.queue(f,"fx").length||I.empty.fire()})})),m)if(A=m[x],Fd.test(A)){if(delete m[x],H=H||"toggle"===A,A===(Aa?"hide":"show")){if("show"!==A||!Qa||void 0===Qa[x])continue;Aa=!0}ta[x]=Qa&&Qa[x]||v.style(f,x)}if((m=!v.isEmptyObject(m))||!v.isEmptyObject(ta))for(x in ia&&1===f.nodeType&&(r.overflow=[ya.overflow,ya.overflowX,ya.overflowY],null==(R=Qa&&Qa.display)&&(R=Ia.get(f,"display")),"none"===(Z=v.css(f,"display"))&&(R?Z=R:(fa([f],!0),R=f.style.display||R,Z=v.css(f,"display"),fa([f]))),("inline"===
Z||"inline-block"===Z&&null!=R)&&"none"===v.css(f,"float")&&(m||(V.done(function(){ya.display=R}),null==R&&(Z=ya.display,R="none"===Z?"":Z)),ya.display="inline-block")),r.overflow&&(ya.overflow="hidden",V.always(function(){ya.overflow=r.overflow[0];ya.overflowX=r.overflow[1];ya.overflowY=r.overflow[2]})),m=!1,ta)m||(Qa?"hidden"in Qa&&(Aa=Qa.hidden):Qa=Ia.access(f,"fxshow",{display:R}),H&&(Qa.hidden=!Aa),Aa&&fa([f],!0),V.done(function(){for(x in Aa||fa([f]),Ia.remove(f,"fxshow"),ta)v.style(f,x,ta[x])})),
m=da(Aa?Qa[x]:0,x,V),x in Qa||(Qa[x]=m.start,Aa&&(m.end=m.start,m.start=0))}],prefilter:function(f,m){m?la.prefilters.unshift(f):la.prefilters.push(f)}});v.speed=function(f,m,r){var x=f&&"object"==typeof f?v.extend({},f):{complete:r||!r&&m||za(f)&&f,duration:f,easing:r&&m||m&&!za(m)&&m};return v.fx.off?x.duration=0:"number"!=typeof x.duration&&(x.duration in v.fx.speeds?x.duration=v.fx.speeds[x.duration]:x.duration=v.fx.speeds._default),null!=x.queue&&!0!==x.queue||(x.queue="fx"),x.old=x.complete,
x.complete=function(){za(x.old)&&x.old.call(this);x.queue&&v.dequeue(this,x.queue)},x};v.fn.extend({fadeTo:function(f,m,r,x){return this.filter(ec).css("opacity",0).show().end().animate({opacity:m},f,r,x)},animate:function(f,m,r,x){var A=v.isEmptyObject(f),H=v.speed(m,r,x);m=function(){var I=la(this,v.extend({},f),H);(A||Ia.get(this,"finish"))&&I.stop(!0)};return m.finish=m,A||!1===H.queue?this.each(m):this.queue(H.queue,m)},stop:function(f,m,r){var x=function(A){var H=A.stop;delete A.stop;H(r)};
return"string"!=typeof f&&(r=m,m=f,f=void 0),m&&this.queue(f||"fx",[]),this.each(function(){var A=!0,H=null!=f&&f+"queueHooks",I=v.timers,Q=Ia.get(this);if(H)Q[H]&&Q[H].stop&&x(Q[H]);else for(H in Q)Q[H]&&Q[H].stop&&Gd.test(H)&&x(Q[H]);for(H=I.length;H--;)I[H].elem!==this||null!=f&&I[H].queue!==f||(I[H].anim.stop(r),A=!1,I.splice(H,1));!A&&r||v.dequeue(this,f)})},finish:function(f){return!1!==f&&(f=f||"fx"),this.each(function(){var m=Ia.get(this),r=m[f+"queue"];var x=m[f+"queueHooks"];var A=v.timers,
H=r?r.length:0;m.finish=!0;v.queue(this,f,[]);x&&x.stop&&x.stop.call(this,!0);for(x=A.length;x--;)A[x].elem===this&&A[x].queue===f&&(A[x].anim.stop(!0),A.splice(x,1));for(x=0;x<H;x++)r[x]&&r[x].finish&&r[x].finish.call(this);delete m.finish})}});v.each(["toggle","show","hide"],function(f,m){var r=v.fn[m];v.fn[m]=function(x,A,H){return null==x||"boolean"==typeof x?r.apply(this,arguments):this.animate(ha(m,!0),x,A,H)}});v.each({slideDown:ha("show"),slideUp:ha("hide"),slideToggle:ha("toggle"),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(f,m){v.fn[f]=function(r,x,A){return this.animate(m,r,x,A)}});v.timers=[];v.fx.tick=function(){var f,m=0,r=v.timers;for(Ub=Date.now();m<r.length;m++)(f=r[m])()||r[m]!==f||r.splice(m--,1);r.length||v.fx.stop();Ub=void 0};v.fx.timer=function(f){v.timers.push(f);v.fx.start()};v.fx.interval=13;v.fx.start=function(){gc||(gc=!0,Y())};v.fx.stop=function(){gc=null};v.fx.speeds={slow:600,fast:200,_default:400};v.fn.delay=function(f,m){return f=
v.fx&&v.fx.speeds[f]||f,m=m||"fx",this.queue(m,function(r,x){var A=c.setTimeout(r,f);x.stop=function(){c.clearTimeout(A)}})};var ac=Ja.createElement("input");var Hd=Ja.createElement("select").appendChild(Ja.createElement("option"));ac.type="checkbox";ba.checkOn=""!==ac.value;ba.optSelected=Hd.selected;(ac=Ja.createElement("input")).value="t";ac.type="radio";ba.radioValue="t"===ac.value;var bc=v.expr.attrHandle;v.fn.extend({attr:function(f,m){return Kb(this,v.attr,f,m,1<arguments.length)},removeAttr:function(f){return this.each(function(){v.removeAttr(this,
f)})}});v.extend({attr:function(f,m,r){var x,A,H=f.nodeType;if(3!==H&&8!==H&&2!==H)return"undefined"==typeof f.getAttribute?v.prop(f,m,r):(1===H&&v.isXMLDoc(f)||(A=v.attrHooks[m.toLowerCase()]||(v.expr.match.bool.test(m)?Id:void 0)),void 0!==r?null===r?void v.removeAttr(f,m):A&&"set"in A&&void 0!==(x=A.set(f,r,m))?x:(f.setAttribute(m,r+""),r):A&&"get"in A&&null!==(x=A.get(f,m))?x:null==(x=v.find.attr(f,m))?void 0:x)},attrHooks:{type:{set:function(f,m){if(!ba.radioValue&&"radio"===m&&t(f,"input")){var r=
f.value;return f.setAttribute("type",m),r&&(f.value=r),m}}}},removeAttr:function(f,m){var r=0,x=m&&m.match(Cb);if(x&&1===f.nodeType)for(;m=x[r++];)f.removeAttribute(m)}});var Id={set:function(f,m,r){return!1===m?v.removeAttr(f,r):f.setAttribute(r,r),r}};v.each(v.expr.match.bool.source.match(/\w+/g),function(f,m){var r=bc[m]||v.find.attr;bc[m]=function(x,A,H){var I,Q,R=A.toLowerCase();return H||(Q=bc[R],bc[R]=I,I=null!=r(x,A,H)?R:null,bc[R]=Q),I}});var Jd=/^(?:input|select|textarea|button)$/i,Kd=/^(?:a|area)$/i;
v.fn.extend({prop:function(f,m){return Kb(this,v.prop,f,m,1<arguments.length)},removeProp:function(f){return this.each(function(){delete this[v.propFix[f]||f]})}});v.extend({prop:function(f,m,r){var x,A,H=f.nodeType;if(3!==H&&8!==H&&2!==H)return 1===H&&v.isXMLDoc(f)||(m=v.propFix[m]||m,A=v.propHooks[m]),void 0!==r?A&&"set"in A&&void 0!==(x=A.set(f,r,m))?x:f[m]=r:A&&"get"in A&&null!==(x=A.get(f,m))?x:f[m]},propHooks:{tabIndex:{get:function(f){var m=v.find.attr(f,"tabindex");return m?parseInt(m,10):
Jd.test(f.nodeName)||Kd.test(f.nodeName)&&f.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});ba.optSelected||(v.propHooks.selected={get:function(f){f=f.parentNode;return f&&f.parentNode&&f.parentNode.selectedIndex,null},set:function(f){f=f.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}});v.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){v.propFix[this.toLowerCase()]=this});v.fn.extend({addClass:function(f){var m,
r,x,A,H,I,Q,R=0;if(za(f))return this.each(function(Z){v(this).addClass(f.call(this,Z,wa(this)))});if((m=va(f)).length)for(;r=this[R++];)if(A=wa(r),x=1===r.nodeType&&" "+Ha(A)+" "){for(I=0;H=m[I++];)0>x.indexOf(" "+H+" ")&&(x+=H+" ");A!==(Q=Ha(x))&&r.setAttribute("class",Q)}return this},removeClass:function(f){var m,r,x,A,H,I,Q,R=0;if(za(f))return this.each(function(Z){v(this).removeClass(f.call(this,Z,wa(this)))});if(!arguments.length)return this.attr("class","");if((m=va(f)).length)for(;r=this[R++];)if(A=
wa(r),x=1===r.nodeType&&" "+Ha(A)+" "){for(I=0;H=m[I++];)for(;-1<x.indexOf(" "+H+" ");)x=x.replace(" "+H+" "," ");A!==(Q=Ha(x))&&r.setAttribute("class",Q)}return this},toggleClass:function(f,m){var r=typeof f,x="string"===r||Array.isArray(f);return"boolean"==typeof m&&x?m?this.addClass(f):this.removeClass(f):za(f)?this.each(function(A){v(this).toggleClass(f.call(this,A,wa(this),m),m)}):this.each(function(){var A,H;if(x){var I=0;var Q=v(this);for(H=va(f);A=H[I++];)Q.hasClass(A)?Q.removeClass(A):Q.addClass(A)}else void 0!==
f&&"boolean"!==r||((A=wa(this))&&Ia.set(this,"__className__",A),this.setAttribute&&this.setAttribute("class",A||!1===f?"":Ia.get(this,"__className__")||""))})},hasClass:function(f){var m,r=0;for(f=" "+f+" ";m=this[r++];)if(1===m.nodeType&&-1<(" "+Ha(wa(m))+" ").indexOf(f))return!0;return!1}});var Ld=/\r/g;v.fn.extend({val:function(f){var m,r,x,A=this[0];return arguments.length?(x=za(f),this.each(function(H){var I;1===this.nodeType&&(null==(I=x?f.call(this,H,v(this).val()):f)?I="":"number"==typeof I?
I+="":Array.isArray(I)&&(I=v.map(I,function(Q){return null==Q?"":Q+""})),(m=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,I,"value")||(this.value=I))})):A?(m=v.valHooks[A.type]||v.valHooks[A.nodeName.toLowerCase()])&&"get"in m&&void 0!==(r=m.get(A,"value"))?r:"string"==typeof(r=A.value)?r.replace(Ld,""):null==r?"":r:void 0}});v.extend({valHooks:{option:{get:function(f){var m=v.find.attr(f,"value");return null!=m?m:Ha(v.text(f))}},select:{get:function(f){var m,
r,x=f.options,A=f.selectedIndex,H="select-one"===f.type,I=H?null:[],Q=H?A+1:x.length;for(r=0>A?Q:H?A:0;r<Q;r++)if(!(!(m=x[r]).selected&&r!==A||m.disabled||m.parentNode.disabled&&t(m.parentNode,"optgroup"))){if(f=v(m).val(),H)return f;I.push(f)}return I},set:function(f,m){var r,x,A=f.options;m=v.makeArray(m);for(var H=A.length;H--;)((x=A[H]).selected=-1<v.inArray(v.valHooks.option.get(x),m))&&(r=!0);return r||(f.selectedIndex=-1),m}}}});v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(f,
m){if(Array.isArray(m))return f.checked=-1<v.inArray(v(f).val(),m)}};ba.checkOn||(v.valHooks[this].get=function(f){return null===f.getAttribute("value")?"on":f.value})});ba.focusin="onfocusin"in c;var Sc=/^(?:focusinfocus|focusoutblur)$/,Tc=function(f){f.stopPropagation()};v.extend(v.event,{trigger:function(f,m,r,x){var A,H,I,Q,R,Z,ia=[r||Ja],V=Ma.call(f,"type")?f.type:f;var ta=Ma.call(f,"namespace")?f.namespace.split("."):[];if(A=Z=H=r=r||Ja,3!==r.nodeType&&8!==r.nodeType&&!Sc.test(V+v.event.triggered)&&
(-1<V.indexOf(".")&&(V=(ta=V.split(".")).shift(),ta.sort()),I=0>V.indexOf(":")&&"on"+V,(f=f[v.expando]?f:new v.Event(V,"object"==typeof f&&f)).isTrigger=x?2:3,f.namespace=ta.join("."),f.rnamespace=f.namespace?new RegExp("(^|\\.)"+ta.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f.result=void 0,f.target||(f.target=r),m=null==m?[f]:v.makeArray(m,[f]),R=v.event.special[V]||{},x||!R.trigger||!1!==R.trigger.apply(r,m))){if(!x&&!R.noBubble&&!xa(r)){var ya=R.delegateType||V;for(Sc.test(ya+V)||(A=A.parentNode);A;A=
A.parentNode)ia.push(A),H=A;H===(r.ownerDocument||Ja)&&ia.push(H.defaultView||H.parentWindow||c)}for(ta=0;(A=ia[ta++])&&!f.isPropagationStopped();)Z=A,f.type=1<ta?ya:R.bindType||V,(Q=(Ia.get(A,"events")||Object.create(null))[f.type]&&Ia.get(A,"handle"))&&Q.apply(A,m),(Q=I&&A[I])&&Q.apply&&Zb(A)&&(f.result=Q.apply(A,m),!1===f.result&&f.preventDefault());return f.type=V,x||f.isDefaultPrevented()||R._default&&!1!==R._default.apply(ia.pop(),m)||!Zb(r)||I&&za(r[V])&&!xa(r)&&((H=r[I])&&(r[I]=null),v.event.triggered=
V,f.isPropagationStopped()&&Z.addEventListener(V,Tc),r[V](),f.isPropagationStopped()&&Z.removeEventListener(V,Tc),v.event.triggered=void 0,H&&(r[I]=H)),f.result}},simulate:function(f,m,r){f=v.extend(new v.Event,r,{type:f,isSimulated:!0});v.event.trigger(f,null,m)}});v.fn.extend({trigger:function(f,m){return this.each(function(){v.event.trigger(f,m,this)})},triggerHandler:function(f,m){var r=this[0];if(r)return v.event.trigger(f,m,r,!0)}});ba.focusin||v.each({focus:"focusin",blur:"focusout"},function(f,
m){var r=function(x){v.event.simulate(m,x.target,v.event.fix(x))};v.event.special[m]={setup:function(){var x=this.ownerDocument||this.document||this,A=Ia.access(x,m);A||x.addEventListener(f,r,!0);Ia.access(x,m,(A||0)+1)},teardown:function(){var x=this.ownerDocument||this.document||this,A=Ia.access(x,m)-1;A?Ia.access(x,m,A):(x.removeEventListener(f,r,!0),Ia.remove(x,m))}}});var cc=c.location,Uc=Date.now(),tc=/\?/;v.parseXML=function(f){var m;if(!f||"string"!=typeof f)return null;try{var r=(new c.DOMParser).parseFromString(f,
"text/xml")}catch(x){}return m=r&&r.getElementsByTagName("parsererror")[0],r&&!m||v.error("Invalid XML: "+(m?v.map(m.childNodes,function(x){return x.textContent}).join("\n"):f)),r};var hd=/\[\]$/,Vc=/\r?\n/g,Md=/^(?:submit|button|image|reset|file)$/i,Nd=/^(?:input|select|textarea|keygen)/i;v.param=function(f,m){var r,x=[],A=function(H,I){I=za(I)?I():I;x[x.length]=encodeURIComponent(H)+"="+encodeURIComponent(null==I?"":I)};if(null==f)return"";if(Array.isArray(f)||f.jquery&&!v.isPlainObject(f))v.each(f,
function(){A(this.name,this.value)});else for(r in f)ua(r,f[r],m,A);return x.join("&")};v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var f=v.prop(this,"elements");return f?v.makeArray(f):this}).filter(function(){var f=this.type;return this.name&&!v(this).is(":disabled")&&Nd.test(this.nodeName)&&!Md.test(f)&&(this.checked||!$b.test(f))}).map(function(f,m){f=v(this).val();return null==f?null:Array.isArray(f)?v.map(f,function(r){return{name:m.name,
value:r.replace(Vc,"\r\n")}}):{name:m.name,value:f.replace(Vc,"\r\n")}}).get()}});var Od=/%20/g,Pd=/#.*$/,Qd=/([?&])_=[^&]*/,Rd=/^(.*?):[ \t]*([^\r\n]*)$/gm,Sd=/^(?:GET|HEAD)$/,Td=/^\/\//,Wc={},nc={},Xc="*/".concat("*"),uc=Ja.createElement("a");uc.href=cc.href;v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:cc.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(cc.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
accepts:{"*":Xc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(f,m){return m?Ka(Ka(f,v.ajaxSettings),m):Ka(v.ajaxSettings,f)},ajaxPrefilter:Da(Wc),ajaxTransport:Da(nc),
ajax:function(f,m){function r(Sa,ib,Mb,Xb){var zb,Nb,vb,wb,tb,Pa=ib;La||(La=!0,Q&&c.clearTimeout(Q),x=void 0,H=Xb||"",Ba.readyState=0<Sa?4:0,zb=200<=Sa&&300>Sa||304===Sa,Mb&&(wb=function(ab,cb,bb){for(var rb,ob,Xa,Na,hb=ab.contents,Za=ab.dataTypes;"*"===Za[0];)Za.shift(),void 0===rb&&(rb=ab.mimeType||cb.getResponseHeader("Content-Type"));if(rb)for(ob in hb)if(hb[ob]&&hb[ob].test(rb)){Za.unshift(ob);break}if(Za[0]in bb)Xa=Za[0];else{for(ob in bb){if(!Za[0]||ab.converters[ob+" "+Za[0]]){Xa=ob;break}Na||
(Na=ob)}Xa=Xa||Na}if(Xa)return Xa!==Za[0]&&Za.unshift(Xa),bb[Xa]}(V,Ba,Mb)),!zb&&-1<v.inArray("script",V.dataTypes)&&0>v.inArray("json",V.dataTypes)&&(V.converters["text script"]=function(){}),wb=function(ab,cb,bb,rb){var ob,Xa,Na,hb,Za,Db={},Qb=ab.dataTypes.slice();if(Qb[1])for(Na in ab.converters)Db[Na.toLowerCase()]=ab.converters[Na];for(Xa=Qb.shift();Xa;)if(ab.responseFields[Xa]&&(bb[ab.responseFields[Xa]]=cb),!Za&&rb&&ab.dataFilter&&(cb=ab.dataFilter(cb,ab.dataType)),Za=Xa,Xa=Qb.shift())if("*"===
Xa)Xa=Za;else if("*"!==Za&&Za!==Xa){if(!(Na=Db[Za+" "+Xa]||Db["* "+Xa]))for(ob in Db)if((hb=ob.split(" "))[1]===Xa&&(Na=Db[Za+" "+hb[0]]||Db["* "+hb[0]])){!0===Na?Na=Db[ob]:!0!==Db[ob]&&(Xa=hb[0],Qb.unshift(hb[1]));break}if(!0!==Na)if(Na&&ab["throws"])cb=Na(cb);else try{cb=Na(cb)}catch(jc){return{state:"parsererror",error:Na?jc:"No conversion from "+Za+" to "+Xa}}}return{state:"success",data:cb}}(V,wb,Ba,zb),zb?(V.ifModified&&((tb=Ba.getResponseHeader("Last-Modified"))&&(v.lastModified[A]=tb),(tb=
Ba.getResponseHeader("etag"))&&(v.etag[A]=tb)),204===Sa||"HEAD"===V.type?Pa="nocontent":304===Sa?Pa="notmodified":(Pa=wb.state,Nb=wb.data,zb=!(vb=wb.error))):(vb=Pa,!Sa&&Pa||(Pa="error",0>Sa&&(Sa=0))),Ba.status=Sa,Ba.statusText=(ib||Pa)+"",zb?Aa.resolveWith(ta,[Nb,Pa,Ba]):Aa.rejectWith(ta,[Ba,Pa,vb]),Ba.statusCode($a),$a=void 0,R&&ya.trigger(zb?"ajaxSuccess":"ajaxError",[Ba,V,zb?Nb:vb]),Qa.fireWith(ta,[Ba,Pa]),R&&(ya.trigger("ajaxComplete",[Ba,V]),--v.active||v.event.trigger("ajaxStop")))}"object"==
typeof f&&(m=f,f=void 0);m=m||{};var x,A,H,I,Q,R,Z,ia,V=v.ajaxSetup({},m),ta=V.context||V,ya=V.context&&(ta.nodeType||ta.jquery)?v(ta):v.event,Aa=v.Deferred(),Qa=v.Callbacks("once memory"),$a=V.statusCode||{},Ab={},nb={},ub="canceled",Ba={readyState:0,getResponseHeader:function(Sa){var ib;if(La){if(!I)for(I={};ib=Rd.exec(H);)I[ib[1].toLowerCase()+" "]=(I[ib[1].toLowerCase()+" "]||[]).concat(ib[2]);ib=I[Sa.toLowerCase()+" "]}return null==ib?null:ib.join(", ")},getAllResponseHeaders:function(){return La?
H:null},setRequestHeader:function(Sa,ib){return null==La&&(Sa=nb[Sa.toLowerCase()]=nb[Sa.toLowerCase()]||Sa,Ab[Sa]=ib),this},overrideMimeType:function(Sa){return null==La&&(V.mimeType=Sa),this},statusCode:function(Sa){var ib;if(Sa)if(La)Ba.always(Sa[Ba.status]);else for(ib in Sa)$a[ib]=[$a[ib],Sa[ib]];return this},abort:function(Sa){Sa=Sa||ub;return x&&x.abort(Sa),r(0,Sa),this}};if(Aa.promise(Ba),V.url=((f||V.url||cc.href)+"").replace(Td,cc.protocol+"//"),V.type=m.method||m.type||V.method||V.type,
V.dataTypes=(V.dataType||"*").toLowerCase().match(Cb)||[""],null==V.crossDomain){f=Ja.createElement("a");try{f.href=V.url,f.href=f.href,V.crossDomain=uc.protocol+"//"+uc.host!=f.protocol+"//"+f.host}catch(Sa){V.crossDomain=!0}}if(V.data&&V.processData&&"string"!=typeof V.data&&(V.data=v.param(V.data,V.traditional)),Ua(Wc,V,m,Ba),La)return Ba;for(Z in(R=v.event&&V.global)&&0==v.active++&&v.event.trigger("ajaxStart"),V.type=V.type.toUpperCase(),V.hasContent=!Sd.test(V.type),A=V.url.replace(Pd,""),V.hasContent?
V.data&&V.processData&&0===(V.contentType||"").indexOf("application/x-www-form-urlencoded")&&(V.data=V.data.replace(Od,"+")):(ia=V.url.slice(A.length),V.data&&(V.processData||"string"==typeof V.data)&&(A+=(tc.test(A)?"&":"?")+V.data,delete V.data),!1===V.cache&&(A=A.replace(Qd,"$1"),ia=(tc.test(A)?"&":"?")+"_="+Uc++ +ia),V.url=A+ia),V.ifModified&&(v.lastModified[A]&&Ba.setRequestHeader("If-Modified-Since",v.lastModified[A]),v.etag[A]&&Ba.setRequestHeader("If-None-Match",v.etag[A])),(V.data&&V.hasContent&&
!1!==V.contentType||m.contentType)&&Ba.setRequestHeader("Content-Type",V.contentType),Ba.setRequestHeader("Accept",V.dataTypes[0]&&V.accepts[V.dataTypes[0]]?V.accepts[V.dataTypes[0]]+("*"!==V.dataTypes[0]?", "+Xc+"; q=0.01":""):V.accepts["*"]),V.headers)Ba.setRequestHeader(Z,V.headers[Z]);if(V.beforeSend&&(!1===V.beforeSend.call(ta,Ba,V)||La))return Ba.abort();if(ub="abort",Qa.add(V.complete),Ba.done(V.success),Ba.fail(V.error),x=Ua(nc,V,m,Ba)){if(Ba.readyState=1,R&&ya.trigger("ajaxSend",[Ba,V]),
La)return Ba;V.async&&0<V.timeout&&(Q=c.setTimeout(function(){Ba.abort("timeout")},V.timeout));try{var La=!1;x.send(Ab,r)}catch(Sa){if(La)throw Sa;r(-1,Sa)}}else r(-1,"No Transport");return Ba},getJSON:function(f,m,r){return v.get(f,m,r,"json")},getScript:function(f,m){return v.get(f,void 0,m,"script")}});v.each(["get","post"],function(f,m){v[m]=function(r,x,A,H){return za(x)&&(H=H||A,A=x,x=void 0),v.ajax(v.extend({url:r,type:m,dataType:H,data:x,success:A},v.isPlainObject(r)&&r))}});v.ajaxPrefilter(function(f){for(var m in f.headers)"content-type"===
m.toLowerCase()&&(f.contentType=f.headers[m]||"")});v._evalUrl=function(f,m,r){return v.ajax({url:f,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(x){v.globalEval(x,m,r)}})};v.fn.extend({wrapAll:function(f){var m;return this[0]&&(za(f)&&(f=f.call(this[0])),m=v(f,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var r=this;r.firstElementChild;)r=r.firstElementChild;return r}).append(this)),
this},wrapInner:function(f){return za(f)?this.each(function(m){v(this).wrapInner(f.call(this,m))}):this.each(function(){var m=v(this),r=m.contents();r.length?r.wrapAll(f):m.append(f)})},wrap:function(f){var m=za(f);return this.each(function(r){v(this).wrapAll(m?f.call(this,r):f)})},unwrap:function(f){return this.parent(f).not("body").each(function(){v(this).replaceWith(this.childNodes)}),this}});v.expr.pseudos.hidden=function(f){return!v.expr.pseudos.visible(f)};v.expr.pseudos.visible=function(f){return!!(f.offsetWidth||
f.offsetHeight||f.getClientRects().length)};v.ajaxSettings.xhr=function(){try{return new c.XMLHttpRequest}catch(f){}};var Ud={0:200,1223:204},dc=v.ajaxSettings.xhr();ba.cors=!!dc&&"withCredentials"in dc;ba.ajax=dc=!!dc;v.ajaxTransport(function(f){var m,r;if(ba.cors||dc&&!f.crossDomain)return{send:function(x,A){var H,I=f.xhr();if(I.open(f.type,f.url,f.async,f.username,f.password),f.xhrFields)for(H in f.xhrFields)I[H]=f.xhrFields[H];for(H in f.mimeType&&I.overrideMimeType&&I.overrideMimeType(f.mimeType),
f.crossDomain||x["X-Requested-With"]||(x["X-Requested-With"]="XMLHttpRequest"),x)I.setRequestHeader(H,x[H]);m=function(Q){return function(){m&&(m=r=I.onload=I.onerror=I.onabort=I.ontimeout=I.onreadystatechange=null,"abort"===Q?I.abort():"error"===Q?"number"!=typeof I.status?A(0,"error"):A(I.status,I.statusText):A(Ud[I.status]||I.status,I.statusText,"text"!==(I.responseType||"text")||"string"!=typeof I.responseText?{binary:I.response}:{text:I.responseText},I.getAllResponseHeaders()))}};I.onload=m();
r=I.onerror=I.ontimeout=m("error");void 0!==I.onabort?I.onabort=r:I.onreadystatechange=function(){4===I.readyState&&c.setTimeout(function(){m&&r()})};m=m("abort");try{I.send(f.hasContent&&f.data||null)}catch(Q){if(m)throw Q;}},abort:function(){m&&m()}}});v.ajaxPrefilter(function(f){f.crossDomain&&(f.contents.script=!1)});v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(f){return v.globalEval(f),
f}}});v.ajaxPrefilter("script",function(f){void 0===f.cache&&(f.cache=!1);f.crossDomain&&(f.type="GET")});v.ajaxTransport("script",function(f){var m,r;if(f.crossDomain||f.scriptAttrs)return{send:function(x,A){m=v("<script>").attr(f.scriptAttrs||{}).prop({charset:f.scriptCharset,src:f.url}).on("load error",r=function(H){m.remove();r=null;H&&A("error"===H.type?404:200,H.type)});Ja.head.appendChild(m[0])},abort:function(){r&&r()}}});var Yc,Zc=[],vc=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var f=
Zc.pop()||v.expando+"_"+Uc++;return this[f]=!0,f}});v.ajaxPrefilter("json jsonp",function(f,m,r){var x,A,H,I=!1!==f.jsonp&&(vc.test(f.url)?"url":"string"==typeof f.data&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&vc.test(f.data)&&"data");if(I||"jsonp"===f.dataTypes[0])return x=f.jsonpCallback=za(f.jsonpCallback)?f.jsonpCallback():f.jsonpCallback,I?f[I]=f[I].replace(vc,"$1"+x):!1!==f.jsonp&&(f.url+=(tc.test(f.url)?"&":"?")+f.jsonp+"="+x),f.converters["script json"]=function(){return H||
v.error(x+" was not called"),H[0]},f.dataTypes[0]="json",A=c[x],c[x]=function(){H=arguments},r.always(function(){void 0===A?v(c).removeProp(x):c[x]=A;f[x]&&(f.jsonpCallback=m.jsonpCallback,Zc.push(x));H&&za(A)&&A(H[0]);H=A=void 0}),"script"});ba.createHTMLDocument=((Yc=Ja.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Yc.childNodes.length);v.parseHTML=function(f,m,r){return"string"!=typeof f?[]:("boolean"==typeof m&&(r=m,m=!1),m||(ba.createHTMLDocument?((x=
(m=Ja.implementation.createHTMLDocument("")).createElement("base")).href=Ja.location.href,m.head.appendChild(x)):m=Ja),H=!r&&[],(A=Mc.exec(f))?[m.createElement(A[1])]:(A=ja([f],m,H),H&&H.length&&v(H).remove(),v.merge([],A.childNodes)));var x,A,H};v.fn.load=function(f,m,r){var x,A,H,I=this,Q=f.indexOf(" ");return-1<Q&&(x=Ha(f.slice(Q)),f=f.slice(0,Q)),za(m)?(r=m,m=void 0):m&&"object"==typeof m&&(A="POST"),0<I.length&&v.ajax({url:f,type:A||"GET",dataType:"html",data:m}).done(function(R){H=arguments;
I.html(x?v("<div>").append(v.parseHTML(R)).find(x):R)}).always(r&&function(R,Z){I.each(function(){r.apply(this,H||[R.responseText,Z,R])})}),this};v.expr.pseudos.animated=function(f){return v.grep(v.timers,function(m){return f===m.elem}).length};v.offset={setOffset:function(f,m,r){var x,A,H,I=v.css(f,"position"),Q=v(f),R={};"static"===I&&(f.style.position="relative");var Z=Q.offset();var ia=v.css(f,"top");var V=v.css(f,"left");("absolute"===I||"fixed"===I)&&-1<(ia+V).indexOf("auto")?(H=(x=Q.position()).top,
A=x.left):(H=parseFloat(ia)||0,A=parseFloat(V)||0);za(m)&&(m=m.call(f,r,v.extend({},Z)));null!=m.top&&(R.top=m.top-Z.top+H);null!=m.left&&(R.left=m.left-Z.left+A);"using"in m?m.using.call(f,R):Q.css(R)}};v.fn.extend({offset:function(f){if(arguments.length)return void 0===f?this:this.each(function(A){v.offset.setOffset(this,f,A)});var m,r,x=this[0];return x?x.getClientRects().length?(m=x.getBoundingClientRect(),r=x.ownerDocument.defaultView,{top:m.top+r.pageYOffset,left:m.left+r.pageXOffset}):{top:0,
left:0}:void 0},position:function(){if(this[0]){var f,m=this[0],r={top:0,left:0};if("fixed"===v.css(m,"position"))var x=m.getBoundingClientRect();else{x=this.offset();var A=m.ownerDocument;for(f=m.offsetParent||A.documentElement;f&&(f===A.body||f===A.documentElement)&&"static"===v.css(f,"position");)f=f.parentNode;f&&f!==m&&1===f.nodeType&&((r=v(f).offset()).top+=v.css(f,"borderTopWidth",!0),r.left+=v.css(f,"borderLeftWidth",!0))}return{top:x.top-r.top-v.css(m,"marginTop",!0),left:x.left-r.left-v.css(m,
"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var f=this.offsetParent;f&&"static"===v.css(f,"position");)f=f.offsetParent;return f||Sb})}});v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(f,m){var r="pageYOffset"===m;v.fn[f]=function(x){return Kb(this,function(A,H,I){var Q;if(xa(A)?Q=A:9===A.nodeType&&(Q=A.defaultView),void 0===I)return Q?Q[m]:A[H];Q?Q.scrollTo(r?Q.pageXOffset:I,r?I:Q.pageYOffset):A[H]=I},f,x,arguments.length)}});v.each(["top","left"],
function(f,m){v.cssHooks[m]=p(ba.pixelPosition,function(r,x){if(x)return x=k(r,m),mc.test(x)?v(r).position()[m]+"px":x})});v.each({Height:"height",Width:"width"},function(f,m){v.each({padding:"inner"+f,content:m,"":"outer"+f},function(r,x){v.fn[x]=function(A,H){var I=arguments.length&&(r||"boolean"!=typeof A),Q=r||(!0===A||!0===H?"margin":"border");return Kb(this,function(R,Z,ia){var V;return xa(R)?0===x.indexOf("outer")?R["inner"+f]:R.document.documentElement["client"+f]:9===R.nodeType?(V=R.documentElement,
Math.max(R.body["scroll"+f],V["scroll"+f],R.body["offset"+f],V["offset"+f],V["client"+f])):void 0===ia?v.css(R,Z,Q):v.style(R,Z,ia,Q)},m,I?A:void 0,I)}})});v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(f,m){v.fn[m]=function(r){return this.on(m,r)}});v.fn.extend({bind:function(f,m,r){return this.on(f,null,m,r)},unbind:function(f,m){return this.off(f,null,m)},delegate:function(f,m,r,x){return this.on(m,f,r,x)},undelegate:function(f,m,r){return 1===arguments.length?
this.off(f,"**"):this.off(m,f||"**",r)},hover:function(f,m){return this.mouseenter(f).mouseleave(m||f)}});v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(f,m){v.fn[m]=function(r,x){return 0<arguments.length?this.on(m,null,r,x):this.trigger(m)}});var Vd=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;v.proxy=function(f,m){var r,x,A;if("string"==typeof m&&
(r=f[m],m=f,f=r),za(f))return x=gb.call(arguments,2),(A=function(){return f.apply(m||this,x.concat(gb.call(arguments)))}).guid=f.guid=f.guid||v.guid++,A};v.holdReady=function(f){f?v.readyWait++:v.ready(!0)};v.isArray=Array.isArray;v.parseJSON=JSON.parse;v.nodeName=t;v.isFunction=za;v.isWindow=xa;v.camelCase=P;v.type=M;v.now=Date.now;v.isNumeric=function(f){var m=v.type(f);return("number"===m||"string"===m)&&!isNaN(f-parseFloat(f))};v.trim=function(f){return null==f?"":(f+"").replace(Vd,"")};"function"==
typeof define&&define.amd&&define("jquery",[],function(){return v});var Wd=c.jQuery,Xd=c.$;return v.noConflict=function(f){return c.$===v&&(c.$=Xd),f&&c.jQuery===v&&(c.jQuery=Wd),v},"undefined"==typeof y&&(c.jQuery=c.$=v),v});
var dvJQuery=jQuery.noConflict(!0),DocuViewarejQueryPlugins={areRegistered:function(){return dvJQuery&&dvJQuery.fn&&dvJQuery.fn.HasDocuViewarePlugins?!0:!1},register:function(){DocuViewarejQueryPlugins.areRegistered()||(dvJQuery&&dvJQuery.fn&&dvJQuery.fn.jquery&&3<=parseInt(dvJQuery.fn.jquery)&&("undefined"==typeof dvJQuery.migrateMute&&(dvJQuery.migrateMute=!0),function(c,y){function D(a){u[a]||(u[a]=!0,c.migrateWarnings.push(a))}function M(a,B,J,b){Object.defineProperty(a,B,{configurable:!0,enumerable:!0,
get:function(){D(b);return J}})}c.migrateVersion="3.0.0";var u={};c.migrateWarnings=[];void 0===c.migrateTrace&&(c.migrateTrace=!0);c.migrateReset=function(){u={};c.migrateWarnings.length=0};"BackCompat"===document.compatMode&&D("jQuery is not compatible with Quirks Mode");var t=c.fn.init,h=c.isNumeric,l=c.find,q=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,z=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;c.fn.init=function(a){var B=Array.prototype.slice.call(arguments);"string"===
typeof a&&"#"===a&&(D("jQuery( '#' ) is not a valid selector"),B[0]=[]);return t.apply(this,B)};c.fn.init.prototype=c.fn;c.find=function(a){var B=Array.prototype.slice.call(arguments);if("string"===typeof a&&q.test(a))try{document.querySelector(a)}catch(J){a=a.replace(z,function(b,d,e,g){return"["+d+e+'"'+g+'"]'});try{document.querySelector(a),D("Attribute selector with '#' must be quoted: "+B[0]),B[0]=a}catch(b){D("Attribute selector with '#' was not fixed: "+B[0])}}return l.apply(this,B)};for(var E in l)Object.prototype.hasOwnProperty.call(l,
E)&&(c.find[E]=l[E]);c.fn.size=function(){D("jQuery.fn.size() is deprecated; use the .length property");return this.length};c.parseJSON=function(){D("jQuery.parseJSON is deprecated; use JSON.parse");return JSON.parse.apply(null,arguments)};c.isNumeric=function(a){var B=h(a),J=a&&a.toString();a=!c.isArray(a)&&0<=J-parseFloat(J)+1;B!==a&&D("jQuery.isNumeric() should not be called on constructed objects");return a};M(c,"unique",c.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort");M(c.expr,
"filters",c.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos");M(c.expr,":",c.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var L=c.ajax;c.ajax=function(){var a=L.apply(this,arguments);a.promise&&(M(a,"success",a.done,"jQXHR.success is deprecated and removed"),M(a,"error",a.fail,"jQXHR.error is deprecated and removed"),M(a,"complete",a.always,"jQXHR.complete is deprecated and removed"));return a};var N=c.fn.removeAttr,P=c.fn.toggleClass,S=/\S+/g;c.fn.removeAttr=function(a){var B=
this;c.each(a.match(S),function(J,b){c.expr.match.bool.test(b)&&(D("jQuery.fn.removeAttr no longer sets boolean properties: "+b),B.prop(b,!1))});return N.apply(this,arguments)};c.fn.toggleClass=function(a){if(void 0!==a&&"boolean"!==typeof a)return P.apply(this,arguments);D("jQuery.fn.toggleClass( boolean ) is deprecated");return this.each(function(){var B=this.getAttribute&&this.getAttribute("class")||"";B&&c.data(this,"__className__",B);this.setAttribute&&this.setAttribute("class",B||!1===a?"":
c.data(this,"__className__")||"")})};var X=!1;c.swap&&c.each(["height","width","reliableMarginRight"],function(a,B){var J=c.cssHooks[B]&&c.cssHooks[B].get;J&&(c.cssHooks[B].get=function(){X=!0;var b=J.apply(this,arguments);X=!1;return b})});c.swap=function(a,B,J,b){var d,e={};X||D("jQuery.swap() is undocumented and deprecated");for(d in B)e[d]=a.style[d],a.style[d]=B[d];J=J.apply(a,b||[]);for(d in B)a.style[d]=e[d];return J};var ea=c.data;c.data=function(a,B,J){var b;return B&&B!==c.camelCase(B)&&
(b=c.hasData(a)&&ea.call(this,a))&&B in b?(D("jQuery.data() always sets/gets camelCased names: "+B),2<arguments.length&&(b[B]=J),b[B]):ea.apply(this,arguments)};var fa=c.Tween.prototype.run;c.Tween.prototype.run=function(a){1<c.easing[this.easing].length&&(D('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),c.easing[this.easing]=c.easing[this.easing].bind(c.easing,a,this.options.duration*a,0,1,this.options.duration));fa.apply(this,arguments)};var sa=c.fn.load,
W=c.event.fix;c.event.props=[];c.event.fixHooks={};c.event.fix=function(a){var B=a.type;var J=this.fixHooks[B],b=c.event.props;if(b.length)for(D("jQuery.event.props are deprecated and removed: "+b.join());b.length;)c.event.addProp(b.pop());if(J&&!J._migrated_&&(J._migrated_=!0,D("jQuery.event.fixHooks are deprecated and removed: "+B),(b=J.props)&&b.length))for(;b.length;)c.event.addProp(b.pop());B=W.call(this,a);return J&&J.filter?J.filter(B,a):B};c.each(["load","unload","error"],function(a,B){c.fn[B]=
function(){var J=Array.prototype.slice.call(arguments,0);if("load"===B&&"string"===typeof J[0])return sa.apply(this,J);D("jQuery.fn."+B+"() is deprecated");J.splice(0,0,B);if(arguments.length)return this.on.apply(this,J);this.triggerHandler.apply(this,J);return this}});c(function(){c(document).triggerHandler("ready")});c.event.special.ready={setup:function(){this===document&&D("'ready' event is deprecated")}};c.fn.extend({bind:function(a,B,J){D("jQuery.fn.bind() is deprecated");return this.on(a,null,
B,J)},unbind:function(a,B){D("jQuery.fn.unbind() is deprecated");return this.off(a,null,B)},delegate:function(a,B,J,b){D("jQuery.fn.delegate() is deprecated");return this.on(B,a,J,b)},undelegate:function(a,B,J){D("jQuery.fn.undelegate() is deprecated");return 1===arguments.length?this.off(a,"**"):this.off(B,a||"**",J)}});var ja=c.fn.offset;c.fn.offset=function(){var a=this[0],B={top:0,left:0};return a&&a.nodeType?c.contains((a.ownerDocument||document).documentElement,a)?ja.apply(this,arguments):(D("jQuery.fn.offset() requires an element connected to a document"),
B):(D("jQuery.fn.offset() requires a valid DOM element"),B)};var ka=c.param;c.param=function(a,B){var J=c.ajaxSettings&&c.ajaxSettings.traditional;void 0===B&&J&&(D("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),B=J);return ka.call(this,a,B)};var ma=c.fn.andSelf||c.fn.addBack;c.fn.andSelf=function(){D("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return ma.apply(this,arguments)};var ra=c.Deferred,Ca=[["resolve","done",c.Callbacks("once memory"),c.Callbacks("once memory"),
"resolved"],["reject","fail",c.Callbacks("once memory"),c.Callbacks("once memory"),"rejected"],["notify","progress",c.Callbacks("memory"),c.Callbacks("memory")]];c.Deferred=function(a){var B=ra(),J=B.promise();B.pipe=J.pipe=function(){var b=arguments;D("deferred.pipe() is deprecated");return c.Deferred(function(d){c.each(Ca,function(e,g){var k=c.isFunction(b[e])&&b[e];B[g[1]](function(){var p=k&&k.apply(this,arguments);if(p&&c.isFunction(p.promise))p.promise().done(d.resolve).fail(d.reject).progress(d.notify);
else d[g[0]+"With"](this===J?d.promise():this,k?[p]:arguments)})});b=null}).promise()};a&&a.call(B,B);return B}}(dvJQuery,window)),function(c){function y(h,l){var q,z,E,L=h.nodeName.toLowerCase();return"area"===L?(q=h.parentNode,z=q.name,h.href&&z&&"map"===q.nodeName.toLowerCase()?(E=c("img[usemap='#"+z+"']")[0],!!E&&D(E)):!1):(/input|select|textarea|button|object/.test(L)?!h.disabled:"a"===L?h.href||l:l)&&D(h)}function D(h){return c.expr.filters.visible(h)&&!c(h).parents().addBack().filter(function(){return"hidden"===
c.css(this,"visibility")}).length}c.dvUi=c.dvUi||{};c.extend(c.dvUi,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});c.fn.extend({scrollParent:function(h){var l=this.css("position"),q="absolute"===l,z=h?/(auto|scroll|hidden)/:/(auto|scroll)/;h=this.parents().filter(function(){var E=c(this);return q&&"static"===E.css("position")?!1:z.test(E.css("overflow")+E.css("overflow-y")+
E.css("overflow-x"))}).eq(0);return"fixed"!==l&&h.length?h:c(this[0].ownerDocument||document)},uniqueId:function(){var h=0;return function(){return this.each(function(){this.id||(this.id="dvUi-id-"+ ++h)})}}(),removeUniqueId:function(){return this.each(function(){/^dvUi-id-\d+$/.test(this.id)&&c(this).removeAttr("id")})}});c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(h){return function(l){return!!c.data(l,h)}}):function(h,l,q){return!!c.data(h,q[3])},focusable:function(h){return y(h,
!isNaN(c.attr(h,"tabindex")))},tabbable:function(h){var l=c.attr(h,"tabindex"),q=isNaN(l);return(q||0<=l)&&y(h,!q)}});c("<a>").outerWidth(1).jquery||c.each(["Width","Height"],function(h,l){function q(N,P,S,X){return c.each(z,function(){P-=parseFloat(c.css(N,"padding"+this))||0;S&&(P-=parseFloat(c.css(N,"border"+this+"Width"))||0);X&&(P-=parseFloat(c.css(N,"margin"+this))||0)}),P}var z="Width"===l?["Left","Right"]:["Top","Bottom"],E=l.toLowerCase(),L={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,
outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+l]=function(N){return void 0===N?L["inner"+l].call(this):this.each(function(){c(this).css(E,q(this,N)+"px")})};c.fn["outer"+l]=function(N,P){return"number"!=typeof N?L["outer"+l].call(this,N):this.each(function(){c(this).css(E,q(this,N,!0,P)+"px")})}});c.fn.addBack||(c.fn.addBack=function(h){return this.add(null==h?this.prevObject:this.prevObject.filter(h))});c("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(c.fn.removeData=
function(h){return function(l){return arguments.length?h.call(this,c.camelCase(l)):h.call(this)}}(c.fn.removeData));c.dvUi.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());c.fn.extend({focus:function(h){return function(l,q){return"number"==typeof l?this.each(function(){var z=this;setTimeout(function(){c(z).focus();q&&q.call(z)},l)}):h.apply(this,arguments)}}(c.fn.focus),disableSelection:function(){var h="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(h+
".dvUi-disableSelection",function(l){l.preventDefault()})}}(),enableSelection:function(){return this.unbind(".dvUi-disableSelection")},zIndex:function(h){if(void 0!==h)return this.css("zIndex",h);if(this.length){var l,q;for(h=c(this[0]);h.length&&h[0]!==document;){if(l=h.css("position"),("absolute"===l||"relative"===l||"fixed"===l)&&(q=parseInt(h.css("zIndex"),10),!isNaN(q)&&0!==q))return q;h=h.parent()}}return 0}});c.dvUi.plugin={add:function(h,l,q){var z;h=c.dvUi[h].prototype;for(z in q)h.plugins[z]=
h.plugins[z]||[],h.plugins[z].push([l,q[z]])},call:function(h,l,q,z){if((l=h.plugins[l])&&(z||h.element[0].parentNode&&11!==h.element[0].parentNode.nodeType))for(z=0;l.length>z;z++)h.options[l[z][0]]&&l[z][1].apply(h.element,q)}};var M=0,u=Array.prototype.slice;c.cleanData=function(h){return function(l){var q,z,E;for(E=0;null!=(z=l[E]);E++)try{(q=c._data(z,"events"))&&q.remove&&c(z).triggerHandler("remove")}catch(L){}h(l)}}(c.cleanData);c.widget=function(h,l,q){var z,E,L,N,P={},S=h.split(".")[0];
return h=h.split(".")[1],z=S+"-"+h,q||(q=l,l=c.Widget),c.expr[":"][z.toLowerCase()]=function(X){return!!c.data(X,z)},c[S]=c[S]||{},E=c[S][h],L=c[S][h]=function(X,ea){return this._createWidget?(arguments.length&&this._createWidget(X,ea),void 0):new L(X,ea)},c.extend(L,E,{version:q.version,_proto:c.extend({},q),_childConstructors:[]}),N=new l,N.options=c.widget.extend({},N.options),c.each(q,function(X,ea){return c.isFunction(ea)?(P[X]=function(){var fa=function(){return l.prototype[X].apply(this,arguments)},
sa=function(W){return l.prototype[X].apply(this,W)};return function(){var W,ja=this._super,ka=this._superApply;return this._super=fa,this._superApply=sa,W=ea.apply(this,arguments),this._super=ja,this._superApply=ka,W}}(),void 0):(P[X]=ea,void 0)}),L.prototype=c.widget.extend(N,{widgetEventPrefix:E?N.widgetEventPrefix||h:h},P,{constructor:L,namespace:S,widgetName:h,widgetFullName:z}),E?(c.each(E._childConstructors,function(X,ea){X=ea.prototype;c.widget(X.namespace+"."+X.widgetName,L,ea._proto)}),delete E._childConstructors):
l._childConstructors.push(L),c.widget.bridge(h,L),L};c.widget.extend=function(h){for(var l,q,z=u.call(arguments,1),E=0,L=z.length;L>E;E++)for(l in z[E])q=z[E][l],z[E].hasOwnProperty(l)&&void 0!==q&&(h[l]=c.isPlainObject(q)?c.isPlainObject(h[l])?c.widget.extend({},h[l],q):c.widget.extend({},q):q);return h};c.widget.bridge=function(h,l){var q=l.prototype.widgetFullName||h;c.fn[h]=function(z){var E="string"==typeof z,L=u.call(arguments,1),N=this;return z=!E&&L.length?c.widget.extend.apply(null,[z].concat(L)):
z,E?this.each(function(){var P,S=c.data(this,q);return"instance"===z?(N=S,!1):S?c.isFunction(S[z])&&"_"!==z.charAt(0)?(P=S[z].apply(S,L),P!==S&&void 0!==P?(N=P&&P.jquery?N.pushStack(P.get()):P,!1):void 0):c.error("no such method '"+z+"' for "+h+" widget instance"):c.error("cannot call methods on "+h+" prior to initialization; attempted to call method '"+z+"'")}):this.each(function(){var P=c.data(this,q);P?(P.option(z||{}),P._init&&P._init()):c.data(this,q,new l(z,this))}),N}};c.Widget=function(){};
c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(h,l){l=c(l||this.defaultElement||this)[0];this.element=c(l);this.uuid=M++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=c();this.hoverable=c();this.focusable=c();l!==this&&(c.data(l,this.widgetFullName,this),this._on(!0,this.element,{remove:function(q){q.target===l&&this.destroy()}}),this.document=c(l.style?l.ownerDocument:
l.document||l),this.window=c(this.document[0].defaultView||this.document[0].parentWindow));this.options=c.widget.extend({},this.options,this._getCreateOptions(),h);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+
"-disabled dvUi-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("dvUi-state-hover");this.focusable.removeClass("dvUi-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(h,l){var q,z,E=h;if(0===arguments.length)return c.widget.extend({},this.options);if("string"==typeof h)if(E={},q=h.split("."),h=q.shift(),q.length){var L=E[h]=c.widget.extend({},this.options[h]);for(z=0;q.length-1>z;z++)L[q[z]]=L[q[z]]||{},L=L[q[z]];if(h=q.pop(),
1===arguments.length)return void 0===L[h]?null:L[h];L[h]=l}else{if(1===arguments.length)return void 0===this.options[h]?null:this.options[h];E[h]=l}return this._setOptions(E),this},_setOptions:function(h){for(var l in h)this._setOption(l,h[l]);return this},_setOption:function(h,l){return this.options[h]=l,"disabled"===h&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!l),l&&(this.hoverable.removeClass("dvUi-state-hover"),this.focusable.removeClass("dvUi-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(h,l,q){var z,E=this;"boolean"!=typeof h&&(q=l,l=h,h=!1);q?(l=z=c(l),this.bindings=this.bindings.add(l)):(q=l,l=this.element,z=this.widget());c.each(q,function(L,N){function P(){return h||!0!==E.options.disabled&&!c(this).hasClass("dvUi-state-disabled")?("string"==typeof N?E[N]:N).apply(E,arguments):void 0}"string"!=typeof N&&(P.guid=N.guid=N.guid||P.guid||c.guid++);var S=L.match(/^([\w:-]*)\s*(.*)$/);L=S[1]+E.eventNamespace;(S=
S[2])?z.delegate(S,L,P):l.bind(L,P)})},_off:function(h,l){l=(l||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;h.unbind(l).undelegate(l);this.bindings=c(this.bindings.not(h).get());this.focusable=c(this.focusable.not(h).get());this.hoverable=c(this.hoverable.not(h).get())},_delay:function(h,l){var q=this;return setTimeout(function(){return("string"==typeof h?q[h]:h).apply(q,arguments)},l||0)},_hoverable:function(h){this.hoverable=this.hoverable.add(h);this._on(h,{mouseenter:function(l){c(l.currentTarget).addClass("dvUi-state-hover")},
mouseleave:function(l){c(l.currentTarget).removeClass("dvUi-state-hover")}})},_focusable:function(h){this.focusable=this.focusable.add(h);this._on(h,{focusin:function(l){c(l.currentTarget).addClass("dvUi-state-focus")},focusout:function(l){c(l.currentTarget).removeClass("dvUi-state-focus")}})},_trigger:function(h,l,q){var z,E=this.options[h];if(q=q||{},l=c.Event(l),l.type=(h===this.widgetEventPrefix?h:this.widgetEventPrefix+h).toLowerCase(),l.target=this.element[0],h=l.originalEvent)for(z in h)z in
l||(l[z]=h[z]);return this.element.trigger(l,q),!(c.isFunction(E)&&!1===E.apply(this.element[0],[l].concat(q))||l.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(h,l){c.Widget.prototype["_"+h]=function(q,z,E){"string"==typeof z&&(z={effect:z});var L=z?!0===z||"number"==typeof z?l:z.effect||l:h;z=z||{};"number"==typeof z&&(z={duration:z});var N=!c.isEmptyObject(z);z.complete=E;z.delay&&q.delay(z.delay);N&&c.effects&&c.effects.effect[L]?q[h](z):L!==h&&q[L]?q[L](z.duration,z.easing,
E):q.queue(function(P){c(this)[h]();E&&E.call(q[0]);P()})}});c.widget;var t=!1;c(document).mouseup(function(){t=!1});c.widget("dvUi.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var h=this;this.element.bind("mousedown."+this.widgetName,function(l){return h._mouseDown(l)}).bind("click."+this.widgetName,function(l){return!0===c.data(l.target,h.widgetName+".preventClickEvent")?(c.removeData(l.target,h.widgetName+".preventClickEvent"),
l.stopImmediatePropagation(),!1):void 0});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(h){if(!t){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(h);this._mouseDownEvent=h;var l=this,q=1===h.which,z="string"==typeof this.options.cancel&&h.target.nodeName?c(h.target).closest(this.options.cancel).length:
!1;return q&&!z&&this._mouseCapture(h)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){l.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(h)&&this._mouseDelayMet(h)&&(this._mouseStarted=!1!==this._mouseStart(h),!this._mouseStarted)?(h.preventDefault(),!0):(!0===c.data(h.target,this.widgetName+".preventClickEvent")&&c.removeData(h.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(E){return l._mouseMove(E)},
this._mouseUpDelegate=function(E){return l._mouseUp(E)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),h.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(h){return this._mouseMoved&&(c.dvUi.ie&&(!document.documentMode||9>document.documentMode)&&!h.button||!h.which)?this._mouseUp(h):((h.which||h.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(h),h.preventDefault()):(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)&&
(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,h),this._mouseStarted?this._mouseDrag(h):this._mouseUp(h)),!this._mouseStarted))},_mouseUp:function(h){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,h.target===this._mouseDownEvent.target&&c.data(h.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(h)),t=!1,!1},_mouseDistanceMet:function(h){return Math.max(Math.abs(this._mouseDownEvent.pageX-
h.pageX),Math.abs(this._mouseDownEvent.pageY-h.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function h(W,ja,ka){return[parseFloat(W[0])*(fa.test(W[0])?ja/100:1),parseFloat(W[1])*(fa.test(W[1])?ka/100:1)]}function l(W){var ja=W[0];return 9===ja.nodeType?{width:W.width(),height:W.height(),offset:{top:0,left:0}}:c.isWindow(ja)?{width:W.width(),
height:W.height(),offset:{top:W.scrollTop(),left:W.scrollLeft()}}:ja.preventDefault?{width:0,height:0,offset:{top:ja.pageY,left:ja.pageX}}:{width:W.outerWidth(),height:W.outerHeight(),offset:W.offset()}}c.dvUi=c.dvUi||{};var q,z,E=Math.max,L=Math.abs,N=Math.round,P=/left|center|right/,S=/top|center|bottom/,X=/[\+\-]\d+(\.[\d]+)?%?/,ea=/^\w+/,fa=/%$/,sa=c.fn.position;c.position={scrollbarWidth:function(){if(void 0!==q)return q;var W,ja,ka=c("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
ma=ka.children()[0];return c("body").append(ka),W=ma.offsetWidth,ka.css("overflow","scroll"),ja=ma.offsetWidth,W===ja&&(ja=ka[0].clientWidth),ka.remove(),q=W-ja},getScrollInfo:function(W){var ja=W.isWindow||W.isDocument?"":W.element.css("overflow-x"),ka=W.isWindow||W.isDocument?"":W.element.css("overflow-y");ja="scroll"===ja||"auto"===ja&&W.width<W.element[0].scrollWidth;return{width:"scroll"===ka||"auto"===ka&&W.height<W.element[0].scrollHeight?c.position.scrollbarWidth():0,height:ja?c.position.scrollbarWidth():
0}},getWithinInfo:function(W){W=c(W||window);var ja=c.isWindow(W[0]),ka=!!W[0]&&9===W[0].nodeType;return{element:W,isWindow:ja,isDocument:ka,offset:W.offset()||{left:0,top:0},scrollLeft:W.scrollLeft(),scrollTop:W.scrollTop(),width:ja||ka?W.width():W.outerWidth(),height:ja||ka?W.height():W.outerHeight()}}};c.fn.position=function(W){if(!W||!W.of)return sa.apply(this,arguments);W=c.extend({},W);var ja,ka,ma,ra,Ca,a,B=c(W.of),J=c.position.getWithinInfo(W.within),b=c.position.getScrollInfo(J),d=(W.collision||
"flip").split(" "),e={};return a=l(B),B[0].preventDefault&&(W.at="left top"),ka=a.width,ma=a.height,ra=a.offset,Ca=c.extend({},ra),c.each(["my","at"],function(){var g=(W[this]||"").split(" ");1===g.length&&(g=P.test(g[0])?g.concat(["center"]):S.test(g[0])?["center"].concat(g):["center","center"]);g[0]=P.test(g[0])?g[0]:"center";g[1]=S.test(g[1])?g[1]:"center";var k=X.exec(g[0]);var p=X.exec(g[1]);e[this]=[k?k[0]:0,p?p[0]:0];W[this]=[ea.exec(g[0])[0],ea.exec(g[1])[0]]}),1===d.length&&(d[1]=d[0]),"right"===
W.at[0]?Ca.left+=ka:"center"===W.at[0]&&(Ca.left+=ka/2),"bottom"===W.at[1]?Ca.top+=ma:"center"===W.at[1]&&(Ca.top+=ma/2),ja=h(e.at,ka,ma),Ca.left+=ja[0],Ca.top+=ja[1],this.each(function(){var g,k=c(this),p=k.outerWidth(),n=k.outerHeight(),w=parseInt(c.css(this,"marginLeft"),10)||0,C=parseInt(c.css(this,"marginTop"),10)||0,K=p+w+(parseInt(c.css(this,"marginRight"),10)||0)+b.width,F=n+C+(parseInt(c.css(this,"marginBottom"),10)||0)+b.height,Y=c.extend({},Ca),aa=h(e.my,k.outerWidth(),k.outerHeight());
"right"===W.my[0]?Y.left-=p:"center"===W.my[0]&&(Y.left-=p/2);"bottom"===W.my[1]?Y.top-=n:"center"===W.my[1]&&(Y.top-=n/2);Y.left+=aa[0];Y.top+=aa[1];z||(Y.left=N(Y.left),Y.top=N(Y.top));var ha={marginLeft:w,marginTop:C};c.each(["left","top"],function(da,la){c.dvUi.position[d[da]]&&c.dvUi.position[d[da]][la](Y,{targetWidth:ka,targetHeight:ma,elemWidth:p,elemHeight:n,collisionPosition:ha,collisionWidth:K,collisionHeight:F,offset:[ja[0]+aa[0],ja[1]+aa[1]],my:W.my,at:W.at,within:J,elem:k})});W.using&&
(g=function(da){var la=ra.left-Y.left,Ha=la+ka-p,wa=ra.top-Y.top,va=wa+ma-n,ua={target:{element:B,left:ra.left,top:ra.top,width:ka,height:ma},element:{element:k,left:Y.left,top:Y.top,width:p,height:n},horizontal:0>Ha?"left":0<la?"right":"center",vertical:0>va?"top":0<wa?"bottom":"middle"};p>ka&&ka>L(la+Ha)&&(ua.horizontal="center");n>ma&&ma>L(wa+va)&&(ua.vertical="middle");ua.important=E(L(la),L(Ha))>E(L(wa),L(va))?"horizontal":"vertical";W.using.call(this,da,ua)});k.offset(c.extend(Y,{using:g}))})};
c.dvUi.position={fit:{left:function(W,ja){var ka,ma=ja.within,ra=ma.isWindow?ma.scrollLeft:ma.offset.left;ma=ma.width;var Ca=W.left-ja.collisionPosition.marginLeft,a=ra-Ca,B=Ca+ja.collisionWidth-ma-ra;ja.collisionWidth>ma?0<a&&0>=B?(ka=W.left+a+ja.collisionWidth-ma-ra,W.left+=a-ka):W.left=0<B&&0>=a?ra:a>B?ra+ma-ja.collisionWidth:ra:0<a?W.left+=a:0<B?W.left-=B:W.left=E(W.left-Ca,W.left)},top:function(W,ja){var ka,ma=ja.within;ma=ma.isWindow?ma.scrollTop:ma.offset.top;var ra=ja.within.height,Ca=W.top-
ja.collisionPosition.marginTop,a=ma-Ca,B=Ca+ja.collisionHeight-ra-ma;ja.collisionHeight>ra?0<a&&0>=B?(ka=W.top+a+ja.collisionHeight-ra-ma,W.top+=a-ka):W.top=0<B&&0>=a?ma:a>B?ma+ra-ja.collisionHeight:ma:0<a?W.top+=a:0<B?W.top-=B:W.top=E(W.top-Ca,W.top)}},flip:{left:function(W,ja){var ka,ma,ra=ja.within,Ca=ra.offset.left+ra.scrollLeft,a=ra.width;ra=ra.isWindow?ra.scrollLeft:ra.offset.left;var B=W.left-ja.collisionPosition.marginLeft,J=B-ra;B=B+ja.collisionWidth-a-ra;var b="left"===ja.my[0]?-ja.elemWidth:
"right"===ja.my[0]?ja.elemWidth:0,d="left"===ja.at[0]?ja.targetWidth:"right"===ja.at[0]?-ja.targetWidth:0,e=-2*ja.offset[0];0>J?(ka=W.left+b+d+e+ja.collisionWidth-a-Ca,(0>ka||L(J)>ka)&&(W.left+=b+d+e)):0<B&&(ma=W.left-ja.collisionPosition.marginLeft+b+d+e-ra,(0<ma||B>L(ma))&&(W.left+=b+d+e))},top:function(W,ja){var ka,ma,ra=ja.within,Ca=ra.offset.top+ra.scrollTop,a=ra.height;ra=ra.isWindow?ra.scrollTop:ra.offset.top;var B=W.top-ja.collisionPosition.marginTop,J=B-ra;B=B+ja.collisionHeight-a-ra;var b=
"top"===ja.my[1]?-ja.elemHeight:"bottom"===ja.my[1]?ja.elemHeight:0,d="top"===ja.at[1]?ja.targetHeight:"bottom"===ja.at[1]?-ja.targetHeight:0,e=-2*ja.offset[1];0>J?(ma=W.top+b+d+e+ja.collisionHeight-a-Ca,W.top+b+d+e>J&&(0>ma||L(J)>ma)&&(W.top+=b+d+e)):0<B&&(ka=W.top-ja.collisionPosition.marginTop+b+d+e-ra,W.top+b+d+e>B&&(0<ka||B>L(ka))&&(W.top+=b+d+e))}},flipfit:{left:function(){c.dvUi.position.flip.left.apply(this,arguments);c.dvUi.position.fit.left.apply(this,arguments)},top:function(){c.dvUi.position.flip.top.apply(this,
arguments);c.dvUi.position.fit.top.apply(this,arguments)}}};(function(){var W,ja=document.getElementsByTagName("body")[0];var ka=document.createElement("div");var ma=document.createElement(ja?"div":"body");var ra={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};ja&&c.extend(ra,{position:"absolute",left:"-1000px",top:"-1000px"});for(W in ra)ma.style[W]=ra[W];ma.appendChild(ka);ra=ja||document.documentElement;ra.insertBefore(ma,ra.firstChild);ka.style.cssText="position: absolute; left: 10.7432222px;";
ka=c(ka).offset().left;z=10<ka&&11>ka;ma.innerHTML="";ra.removeChild(ma)})()})();c.dvUi.position;c.widget("dvUi.draggable",c.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,
stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this.element.addClass("dvUi-draggable");this.options.disabled&&this.element.addClass("dvUi-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(h,l){this._super(h,l);"handle"===h&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".dvUi-draggable-dragging")?
(this.destroyOnClear=!0,void 0):(this.element.removeClass("dvUi-draggable dvUi-draggable-dragging dvUi-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(h){var l=this.options;return this._blurActiveElement(h),this.helper||l.disabled||0<c(h.target).closest(".dvUi-resizable-handle").length?!1:(this.handle=this._getHandle(h),this.handle?(this._blockFrames(!0===l.iframeFix?"iframe":l.iframeFix),!0):!1)},_blockFrames:function(h){this.iframeBlocks=this.document.find(h).map(function(){var l=
c(this);return c("<div>").css("position","absolute").appendTo(l.parent()).outerWidth(l.outerWidth()).outerHeight(l.outerHeight()).offset(l.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(h){var l=this.document[0];if(this.handleElement.is(h.target))try{l.activeElement&&"body"!==l.activeElement.nodeName.toLowerCase()&&c(l.activeElement).blur()}catch(q){}},_mouseStart:function(h){var l=this.options;return this.helper=
this._createHelper(h),this.helper.addClass("dvUi-draggable-dragging"),this._cacheHelperProportions(),c.dvUi.ddmanager&&(c.dvUi.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===c(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(h),this.originalPosition=
this.position=this._generatePosition(h,!1),this.originalPageX=h.pageX,this.originalPageY=h.pageY,l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this._setContainment(),!1===this._trigger("start",h)?(this._clear(),!1):(this._cacheHelperProportions(),c.dvUi.ddmanager&&!l.dropBehaviour&&c.dvUi.ddmanager.prepareOffsets(this,h),this._normalizeRightBottom(),this._mouseDrag(h,!0),c.dvUi.ddmanager&&c.dvUi.ddmanager.dragStart(this,h),!0)},_refreshOffsets:function(h){this.offset={top:this.positionAbs.top-
this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:h.pageX-this.offset.left,top:h.pageY-this.offset.top}},_mouseDrag:function(h,l){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(h,!0),this.positionAbs=this._convertPositionTo("absolute"),!l){l=this._uiHash();if(!1===this._trigger("drag",h,l))return this._mouseUp({}),!1;this.position=
l.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",c.dvUi.ddmanager&&c.dvUi.ddmanager.drag(this,h),!1},_mouseStop:function(h){var l=this,q=!1;return c.dvUi.ddmanager&&!this.options.dropBehaviour&&(q=c.dvUi.ddmanager.drop(this,h)),this.dropped&&(q=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!q||"valid"===this.options.revert&&q||!0===this.options.revert||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,
q)?c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==l._trigger("stop",h)&&l._clear()}):!1!==this._trigger("stop",h)&&this._clear(),!1},_mouseUp:function(h){return this._unblockFrames(),c.dvUi.ddmanager&&c.dvUi.ddmanager.dragStop(this,h),this.handleElement.is(h.target)&&this.element.focus(),c.dvUi.mouse.prototype._mouseUp.call(this,h)},cancel:function(){return this.helper.is(".dvUi-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(h){return this.options.handle?
!!c(h.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("dvUi-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("dvUi-draggable-handle")},_createHelper:function(h){var l=this.options,q=c.isFunction(l.helper);h=q?c(l.helper.apply(this.element[0],[h])):"clone"===l.helper?this.element.clone().removeAttr("id"):
this.element;return h.parents("body").length||h.appendTo("parent"===l.appendTo?this.element[0].parentNode:l.appendTo),q&&h[0]===this.element[0]&&this._setPositionRelative(),h[0]===this.element[0]||/(fixed|absolute)/.test(h.css("position"))||h.css("position","absolute"),h},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(h){"string"==typeof h&&(h=h.split(" "));c.isArray(h)&&(h={left:+h[0],
top:+h[1]||0});"left"in h&&(this.offset.click.left=h.left+this.margins.left);"right"in h&&(this.offset.click.left=this.helperProportions.width-h.right+this.margins.left);"top"in h&&(this.offset.click.top=h.top+this.margins.top);"bottom"in h&&(this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top)},_isRootNode:function(h){return/(html|body)/i.test(h.tagName)||h===this.document[0]},_getParentOffset:function(){var h=this.offsetParent.offset(),l=this.document[0];return"absolute"===
this.cssPosition&&this.scrollParent[0]!==l&&c.contains(this.scrollParent[0],this.offsetParent[0])&&(h.left+=this.scrollParent.scrollLeft(),h.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(h={top:0,left:0}),{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var h=this.element.position(),l=this._isRootNode(this.scrollParent[0]);
return{top:h.top-(parseInt(this.helper.css("top"),10)||0)+(l?0:this.scrollParent.scrollTop()),left:h.left-(parseInt(this.helper.css("left"),10)||0)+(l?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var h,l,q,z=this.options,E=this.document[0];return this.relativeContainer=null,z.containment?"window"===z.containment?(this.containment=[c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,c(window).scrollLeft()+c(window).width()-this.helperProportions.width-this.margins.left,c(window).scrollTop()+(c(window).height()||E.body.parentNode.scrollHeight)-
this.helperProportions.height-this.margins.top],void 0):"document"===z.containment?(this.containment=[0,0,c(E).width()-this.helperProportions.width-this.margins.left,(c(E).height()||E.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):z.containment.constructor===Array?(this.containment=z.containment,void 0):("parent"===z.containment&&(z.containment=this.helper[0].parentNode),l=c(z.containment),q=l[0],q&&(h=/(scroll|auto)/.test(l.css("overflow")),this.containment=
[(parseInt(l.css("borderLeftWidth"),10)||0)+(parseInt(l.css("paddingLeft"),10)||0),(parseInt(l.css("borderTopWidth"),10)||0)+(parseInt(l.css("paddingTop"),10)||0),(h?Math.max(q.scrollWidth,q.offsetWidth):q.offsetWidth)-(parseInt(l.css("borderRightWidth"),10)||0)-(parseInt(l.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(h?Math.max(q.scrollHeight,q.offsetHeight):q.offsetHeight)-(parseInt(l.css("borderBottomWidth"),10)||0)-(parseInt(l.css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=l),void 0):(this.containment=null,void 0)},_convertPositionTo:function(h,l){l||(l=this.position);h="absolute"===h?1:-1;var q=this._isRootNode(this.scrollParent[0]);return{top:l.top+this.offset.relative.top*h+this.offset.parent.top*h-("fixed"===this.cssPosition?-this.offset.scroll.top:q?0:this.offset.scroll.top)*h,left:l.left+this.offset.relative.left*h+this.offset.parent.left*h-("fixed"===this.cssPosition?
-this.offset.scroll.left:q?0:this.offset.scroll.left)*h}},_generatePosition:function(h,l){var q,z,E,L,N=this.options,P=this._isRootNode(this.scrollParent[0]),S=h.pageX,X=h.pageY;return P&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),l&&(this.containment&&(this.relativeContainer?(z=this.relativeContainer.offset(),q=[this.containment[0]+z.left,this.containment[1]+z.top,this.containment[2]+z.left,this.containment[3]+z.top]):q=this.containment,
h.pageX-this.offset.click.left<q[0]&&(S=q[0]+this.offset.click.left),h.pageY-this.offset.click.top<q[1]&&(X=q[1]+this.offset.click.top),h.pageX-this.offset.click.left>q[2]&&(S=q[2]+this.offset.click.left),h.pageY-this.offset.click.top>q[3]&&(X=q[3]+this.offset.click.top)),N.grid&&(E=N.grid[1]?this.originalPageY+Math.round((X-this.originalPageY)/N.grid[1])*N.grid[1]:this.originalPageY,X=q?E-this.offset.click.top>=q[1]||E-this.offset.click.top>q[3]?E:E-this.offset.click.top>=q[1]?E-N.grid[1]:E+N.grid[1]:
E,L=N.grid[0]?this.originalPageX+Math.round((S-this.originalPageX)/N.grid[0])*N.grid[0]:this.originalPageX,S=q?L-this.offset.click.left>=q[0]||L-this.offset.click.left>q[2]?L:L-this.offset.click.left>=q[0]?L-N.grid[0]:L+N.grid[0]:L),"y"===N.axis&&(S=this.originalPageX),"x"===N.axis&&(X=this.originalPageY)),{top:X-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:P?0:this.offset.scroll.top),left:S-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:P?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("dvUi-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));
"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(h,l,q){return q=q||this._uiHash(),c.dvUi.plugin.call(this,h,[l,q,this],!0),/^(drag|start|stop)/.test(h)&&(this.positionAbs=this._convertPositionTo("absolute"),q.offset=this.positionAbs),c.Widget.prototype._trigger.call(this,h,l,q)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,
offset:this.positionAbs}}});c.dvUi.plugin.add("draggable","connectToSortable",{start:function(h,l,q){var z=c.extend({},l,{item:q.element});q.sortables=[];c(q.options.connectToSortable).each(function(){var E=c(this).sortable("instance");E&&!E.options.disabled&&(q.sortables.push(E),E.refreshPositions(),E._trigger("activate",h,z))})},stop:function(h,l,q){var z=c.extend({},l,{item:q.element});q.cancelHelperRemoval=!1;c.each(q.sortables,function(){this.isOver?(this.isOver=0,q.cancelHelperRemoval=!0,this.cancelHelperRemoval=
!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(h),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",h,z))})},drag:function(h,l,q){c.each(q.sortables,function(){var z=!1,E=this;E.positionAbs=q.positionAbs;E.helperProportions=q.helperProportions;E.offset.click=q.offset.click;E._intersectsWith(E.containerCache)&&(z=!0,c.each(q.sortables,function(){return this.positionAbs=
q.positionAbs,this.helperProportions=q.helperProportions,this.offset.click=q.offset.click,this!==E&&this._intersectsWith(this.containerCache)&&c.contains(E.element[0],this.element[0])&&(z=!1),z}));z?(E.isOver||(E.isOver=1,E.currentItem=l.helper.appendTo(E.element).data("dvUi-sortable-item",!0),E.options._helper=E.options.helper,E.options.helper=function(){return l.helper[0]},h.target=E.currentItem[0],E._mouseCapture(h,!0),E._mouseStart(h,!0,!0),E.offset.click.top=q.offset.click.top,E.offset.click.left=
q.offset.click.left,E.offset.parent.left-=q.offset.parent.left-E.offset.parent.left,E.offset.parent.top-=q.offset.parent.top-E.offset.parent.top,q._trigger("toSortable",h),q.dropped=E.element,c.each(q.sortables,function(){this.refreshPositions()}),q.currentItem=q.element,E.fromOutside=q),E.currentItem&&(E._mouseDrag(h),l.position=E.position)):E.isOver&&(E.isOver=0,E.cancelHelperRemoval=!0,E.options._revert=E.options.revert,E.options.revert=!1,E._trigger("out",h,E._uiHash(E)),E._mouseStop(h,!0),E.options.revert=
E.options._revert,E.options.helper=E.options._helper,E.placeholder&&E.placeholder.remove(),q._refreshOffsets(h),l.position=q._generatePosition(h,!0),q._trigger("fromSortable",h),q.dropped=!1,c.each(q.sortables,function(){this.refreshPositions()}))})}});c.dvUi.plugin.add("draggable","cursor",{start:function(h,l,q){h=c("body");q=q.options;h.css("cursor")&&(q._cursor=h.css("cursor"));h.css("cursor",q.cursor)},stop:function(h,l,q){h=q.options;h._cursor&&c("body").css("cursor",h._cursor)}});c.dvUi.plugin.add("draggable",
"opacity",{start:function(h,l,q){h=c(l.helper);q=q.options;h.css("opacity")&&(q._opacity=h.css("opacity"));h.css("opacity",q.opacity)},stop:function(h,l,q){h=q.options;h._opacity&&c(l.helper).css("opacity",h._opacity)}});c.dvUi.plugin.add("draggable","scroll",{start:function(h,l,q){q.scrollParentNotHidden||(q.scrollParentNotHidden=q.helper.scrollParent(!1));q.scrollParentNotHidden[0]!==q.document[0]&&"HTML"!==q.scrollParentNotHidden[0].tagName&&(q.overflowOffset=q.scrollParentNotHidden.offset())},
drag:function(h,l,q){l=q.options;var z=!1,E=q.scrollParentNotHidden[0],L=q.document[0];E!==L&&"HTML"!==E.tagName?(l.axis&&"x"===l.axis||(q.overflowOffset.top+E.offsetHeight-h.pageY<l.scrollSensitivity?E.scrollTop=z=E.scrollTop+l.scrollSpeed:h.pageY-q.overflowOffset.top<l.scrollSensitivity&&(E.scrollTop=z=E.scrollTop-l.scrollSpeed)),l.axis&&"y"===l.axis||(q.overflowOffset.left+E.offsetWidth-h.pageX<l.scrollSensitivity?E.scrollLeft=z=E.scrollLeft+l.scrollSpeed:h.pageX-q.overflowOffset.left<l.scrollSensitivity&&
(E.scrollLeft=z=E.scrollLeft-l.scrollSpeed))):(l.axis&&"x"===l.axis||(h.pageY-c(L).scrollTop()<l.scrollSensitivity?z=c(L).scrollTop(c(L).scrollTop()-l.scrollSpeed):c(window).height()-(h.pageY-c(L).scrollTop())<l.scrollSensitivity&&(z=c(L).scrollTop(c(L).scrollTop()+l.scrollSpeed))),l.axis&&"y"===l.axis||(h.pageX-c(L).scrollLeft()<l.scrollSensitivity?z=c(L).scrollLeft(c(L).scrollLeft()-l.scrollSpeed):c(window).width()-(h.pageX-c(L).scrollLeft())<l.scrollSensitivity&&(z=c(L).scrollLeft(c(L).scrollLeft()+
l.scrollSpeed))));!1!==z&&c.dvUi.ddmanager&&!l.dropBehaviour&&c.dvUi.ddmanager.prepareOffsets(q,h)}});c.dvUi.plugin.add("draggable","snap",{start:function(h,l,q){h=q.options;q.snapElements=[];c(h.snap.constructor!==String?h.snap.items||":data(dvUi-draggable)":h.snap).each(function(){var z=c(this),E=z.offset();this!==q.element[0]&&q.snapElements.push({item:this,width:z.outerWidth(),height:z.outerHeight(),top:E.top,left:E.left})})},drag:function(h,l,q){var z,E,L,N,P,S,X=q.options,ea=X.snapTolerance,
fa=l.offset.left,sa=fa+q.helperProportions.width,W=l.offset.top,ja=W+q.helperProportions.height;for(P=q.snapElements.length-1;0<=P;P--){var ka=q.snapElements[P].left-q.margins.left;var ma=ka+q.snapElements[P].width;var ra=q.snapElements[P].top-q.margins.top;var Ca=ra+q.snapElements[P].height;ka-ea>sa||fa>ma+ea||ra-ea>ja||W>Ca+ea||!c.contains(q.snapElements[P].item.ownerDocument,q.snapElements[P].item)?(q.snapElements[P].snapping&&q.options.snap.release&&q.options.snap.release.call(q.element,h,c.extend(q._uiHash(),
{snapItem:q.snapElements[P].item})),q.snapElements[P].snapping=!1):("inner"!==X.snapMode&&(z=ea>=Math.abs(ra-ja),E=ea>=Math.abs(Ca-W),L=ea>=Math.abs(ka-sa),N=ea>=Math.abs(ma-fa),z&&(l.position.top=q._convertPositionTo("relative",{top:ra-q.helperProportions.height,left:0}).top),E&&(l.position.top=q._convertPositionTo("relative",{top:Ca,left:0}).top),L&&(l.position.left=q._convertPositionTo("relative",{top:0,left:ka-q.helperProportions.width}).left),N&&(l.position.left=q._convertPositionTo("relative",
{top:0,left:ma}).left)),S=z||E||L||N,"outer"!==X.snapMode&&(z=ea>=Math.abs(ra-W),E=ea>=Math.abs(Ca-ja),L=ea>=Math.abs(ka-fa),N=ea>=Math.abs(ma-sa),z&&(l.position.top=q._convertPositionTo("relative",{top:ra,left:0}).top),E&&(l.position.top=q._convertPositionTo("relative",{top:Ca-q.helperProportions.height,left:0}).top),L&&(l.position.left=q._convertPositionTo("relative",{top:0,left:ka}).left),N&&(l.position.left=q._convertPositionTo("relative",{top:0,left:ma-q.helperProportions.width}).left)),!q.snapElements[P].snapping&&
(z||E||L||N||S)&&q.options.snap.snap&&q.options.snap.snap.call(q.element,h,c.extend(q._uiHash(),{snapItem:q.snapElements[P].item})),q.snapElements[P].snapping=z||E||L||N||S)}}});c.dvUi.plugin.add("draggable","stack",{start:function(h,l,q){var z;h=c.makeArray(c(q.options.stack)).sort(function(E,L){return(parseInt(c(E).css("zIndex"),10)||0)-(parseInt(c(L).css("zIndex"),10)||0)});h.length&&(z=parseInt(c(h[0]).css("zIndex"),10)||0,c(h).each(function(E){c(this).css("zIndex",z+E)}),this.css("zIndex",z+
h.length))}});c.dvUi.plugin.add("draggable","zIndex",{start:function(h,l,q){h=c(l.helper);q=q.options;h.css("zIndex")&&(q._zIndex=h.css("zIndex"));h.css("zIndex",q.zIndex)},stop:function(h,l,q){h=q.options;h._zIndex&&c(l.helper).css("zIndex",h._zIndex)}});c.dvUi.draggable;c.widget("dvUi.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,
over:null},_create:function(){var h,l=this.options,q=l.accept;this.isover=!1;this.isout=!0;this.accept=c.isFunction(q)?q:function(z){return z.is(q)};this.proportions=function(){return arguments.length?(h=arguments[0],void 0):h?h:h={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(l.scope);l.addClasses&&this.element.addClass("dvUi-droppable")},_addToManager:function(h){c.dvUi.ddmanager.droppables[h]=c.dvUi.ddmanager.droppables[h]||[];c.dvUi.ddmanager.droppables[h].push(this)},
_splice:function(h){for(var l=0;h.length>l;l++)h[l]===this&&h.splice(l,1)},_destroy:function(){this._splice(c.dvUi.ddmanager.droppables[this.options.scope]);this.element.removeClass("dvUi-droppable dvUi-droppable-disabled")},_setOption:function(h,l){"accept"===h?this.accept=c.isFunction(l)?l:function(q){return q.is(l)}:"scope"===h&&(this._splice(c.dvUi.ddmanager.droppables[this.options.scope]),this._addToManager(l));this._super(h,l)},_activate:function(h){var l=c.dvUi.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);l&&this._trigger("activate",h,this.ui(l))},_deactivate:function(h){var l=c.dvUi.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);l&&this._trigger("deactivate",h,this.ui(l))},_over:function(h){var l=c.dvUi.ddmanager.current;l&&(l.currentItem||l.element)[0]!==this.element[0]&&this.accept.call(this.element[0],l.currentItem||l.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),
this._trigger("over",h,this.ui(l)))},_out:function(h){var l=c.dvUi.ddmanager.current;l&&(l.currentItem||l.element)[0]!==this.element[0]&&this.accept.call(this.element[0],l.currentItem||l.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",h,this.ui(l)))},_drop:function(h,l){var q=l||c.dvUi.ddmanager.current,z=!1;return q&&(q.currentItem||q.element)[0]!==this.element[0]?(this.element.find(":data(dvUi-droppable)").not(".dvUi-draggable-dragging").each(function(){var E=
c(this).droppable("instance");return E.options.greedy&&!E.options.disabled&&E.options.scope===q.options.scope&&E.accept.call(E.element[0],q.currentItem||q.element)&&c.dvUi.intersect(q,c.extend(E,{offset:E.element.offset()}),E.options.tolerance,h)?(z=!0,!1):void 0}),z?!1:this.accept.call(this.element[0],q.currentItem||q.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",
h,this.ui(q)),this.element):!1):!1},ui:function(h){return{draggable:h.currentItem||h.element,helper:h.helper,position:h.position,offset:h.positionAbs}}});c.dvUi.intersect=function(){return function(h,l,q,z){if(!l.offset)return!1;var E=(h.positionAbs||h.position.absolute).left+h.margins.left,L=(h.positionAbs||h.position.absolute).top+h.margins.top,N=E+h.helperProportions.width,P=L+h.helperProportions.height,S=l.offset.left,X=l.offset.top,ea=S+l.proportions().width,fa=X+l.proportions().height;switch(q){case "fit":return E>=
S&&ea>=N&&L>=X&&fa>=P;case "intersect":return E+h.helperProportions.width/2>S&&ea>N-h.helperProportions.width/2&&L+h.helperProportions.height/2>X&&fa>P-h.helperProportions.height/2;case "pointer":h=z.pageY;q=l.proportions().height;if(X=h>=X&&X+q>h)z=z.pageX,l=l.proportions().width,X=z>=S&&S+l>z;return X;case "touch":return(L>=X&&fa>=L||P>=X&&fa>=P||X>L&&P>fa)&&(E>=S&&ea>=E||N>=S&&ea>=N||S>E&&N>ea);default:return!1}}}();c.dvUi.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(h,
l){var q,z=c.dvUi.ddmanager.droppables[h.options.scope]||[],E=l?l.type:null,L=(h.currentItem||h.element).find(":data(dvUi-droppable)").addBack();var N=0;a:for(;z.length>N;N++)if(!(z[N].options.disabled||h&&!z[N].accept.call(z[N].element[0],h.currentItem||h.element))){for(q=0;L.length>q;q++)if(L[q]===z[N].element[0]){z[N].proportions().height=0;continue a}z[N].visible="none"!==z[N].element.css("display");z[N].visible&&("mousedown"===E&&z[N]._activate.call(z[N],l),z[N].offset=z[N].element.offset(),
z[N].proportions({width:z[N].element[0].offsetWidth,height:z[N].element[0].offsetHeight}))}},drop:function(h,l){var q=!1;return c.each((c.dvUi.ddmanager.droppables[h.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&c.dvUi.intersect(h,this,this.options.tolerance,l)&&(q=this._drop.call(this,l)||q),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],h.currentItem||h.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,l)))}),
q},dragStart:function(h,l){h.element.parentsUntil("body").bind("scroll.droppable",function(){h.options.refreshPositions||c.dvUi.ddmanager.prepareOffsets(h,l)})},drag:function(h,l){h.options.refreshPositions&&c.dvUi.ddmanager.prepareOffsets(h,l);c.each(c.dvUi.ddmanager.droppables[h.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var q,z,E,L=c.dvUi.intersect(h,this,this.options.tolerance,l);(L=!L&&this.isover?"isout":L&&!this.isover?"isover":null)&&(this.options.greedy&&
(z=this.options.scope,E=this.element.parents(":data(dvUi-droppable)").filter(function(){return c(this).droppable("instance").options.scope===z}),E.length&&(q=c(E[0]).droppable("instance"),q.greedyChild="isover"===L)),q&&"isover"===L&&(q.isover=!1,q.isout=!0,q._out.call(q,l)),this[L]=!0,this["isout"===L?"isover":"isout"]=!1,this["isover"===L?"_over":"_out"].call(this,l),q&&"isout"===L&&(q.isout=!1,q.isover=!0,q._over.call(q,l)))}})},dragStop:function(h,l){h.element.parentsUntil("body").unbind("scroll.droppable");
h.options.refreshPositions||c.dvUi.ddmanager.prepareOffsets(h,l)}};c.dvUi.droppable;c.widget("dvUi.resizable",c.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(h){return parseInt(h,10)||0},_isNumber:function(h){return!isNaN(parseInt(h,
10))},_hasScroll:function(h,l){if("hidden"===c(h).css("overflow"))return!1;l=l&&"left"===l?"scrollLeft":"scrollTop";var q=!1;return 0<h[l]?!0:(h[l]=1,q=0<h[l],h[l]=0,q)},_create:function(){var h,l=this,q=this.options;if(this.element.addClass("dvUi-resizable"),c.extend(this,{_aspectRatio:!!q.aspectRatio,aspectRatio:q.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:q.helper||q.ghost||q.animate?q.helper||"dvUi-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&
(this.element.wrap(c("<div class='dvUi-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("dvUi-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),
marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=q.handles||(c(".dvUi-resizable-handle",
this.element).length?{n:".dvUi-resizable-n",e:".dvUi-resizable-e",s:".dvUi-resizable-s",w:".dvUi-resizable-w",se:".dvUi-resizable-se",sw:".dvUi-resizable-sw",ne:".dvUi-resizable-ne",nw:".dvUi-resizable-nw"}:"e,s,se"),this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var z=this.handles.split(",");this.handles={};for(h=0;z.length>h;h++){var E=c.trim(z[h]);var L="dvUi-resizable-"+E;var N=c("<div class='dvUi-resizable-handle "+L+"'></div>");N.css({zIndex:q.zIndex});
"se"===E&&N.addClass("dvUi-icon dvUi-icon-gripsmall-diagonal-se");this.handles[E]=".dvUi-resizable-"+E;this.element.append(N)}}this._renderAxis=function(P){var S,X,ea,fa;P=P||this.element;for(S in this.handles)this.handles[S].constructor===String&&(this.handles[S]=this.element.children(this.handles[S]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(X=c(this.handles[S],this.element),fa=/sw|ne|nw|se|n|s/.test(S)?X.outerHeight():X.outerWidth(),
ea=["padding",/ne|nw|n/.test(S)?"Top":/se|sw|s/.test(S)?"Bottom":/^e$/.test(S)?"Right":"Left"].join(""),P.css(ea,fa),this._proportionallyResize()),c(this.handles[S]).length};this._renderAxis(this.element);this._handles=c(".dvUi-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){l.resizing||(this.className&&(N=this.className.match(/dvUi-resizable-(se|sw|ne|nw|n|e|s|w)/i)),l.axis=N&&N[1]?N[1]:"se")});q.autoHide&&(this._handles.hide(),c(this.element).addClass("dvUi-resizable-autohide").mouseenter(function(){q.disabled||
(c(this).removeClass("dvUi-resizable-autohide"),l._handles.show())}).mouseleave(function(){q.disabled||l.resizing||(c(this).addClass("dvUi-resizable-autohide"),l._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var h,l=function(q){c(q).removeClass("dvUi-resizable dvUi-resizable-disabled dvUi-resizable-resizing").removeData("resizable").removeData("dvUi-resizable").unbind(".resizable").find(".dvUi-resizable-handle").remove()};return this.elementIsWrapper&&(l(this.element),
h=this.element,this.originalElement.css({position:h.css("position"),width:h.outerWidth(),height:h.outerHeight(),top:h.css("top"),left:h.css("left")}).insertAfter(h),h.remove()),this.originalElement.css("resize",this.originalResizeStyle),l(this.originalElement),this},_mouseCapture:function(h){var l,q=!1;for(l in this.handles){var z=c(this.handles[l])[0];(z===h.target||c.contains(z,h.target))&&(q=!0)}return!this.options.disabled&&q},_mouseStart:function(h){var l,q,z,E=this.options,L=this.element;return this.resizing=
!0,this._renderProxy(),l=this._num(this.helper.css("left")),q=this._num(this.helper.css("top")),E.containment&&(l+=c(E.containment).scrollLeft()||0,q+=c(E.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:l,top:q},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:L.width(),height:L.height()},this.originalSize=this._helper?{width:L.outerWidth(),height:L.outerHeight()}:{width:L.width(),height:L.height()},this.sizeDiff={width:L.outerWidth()-
L.width(),height:L.outerHeight()-L.height()},this.originalPosition={left:l,top:q},this.originalMousePosition={left:h.pageX,top:h.pageY},this.aspectRatio="number"==typeof E.aspectRatio?E.aspectRatio:this.originalSize.width/this.originalSize.height||1,z=c(".dvUi-resizable-"+this.axis).css("cursor"),c("body").css("cursor","auto"===z?this.axis+"-resize":z),L.addClass("dvUi-resizable-resizing"),this._propagate("start",h),!0},_mouseDrag:function(h){var l,q,z=this.originalMousePosition,E=h.pageX-z.left||
0;z=h.pageY-z.top||0;var L=this._change[this.axis];return this._updatePrevProperties(),L?(l=L.apply(this,[h,E,z]),this._updateVirtualBoundaries(h.shiftKey),(this._aspectRatio||h.shiftKey)&&(l=this._updateRatio(l,h)),l=this._respectSize(l,h),this._updateCache(l),this._propagate("resize",h),q=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),c.isEmptyObject(q)||(this._updatePrevProperties(),this._trigger("resize",h,this.ui()),this._applyChanges()),
!1):!1},_mouseStop:function(h){this.resizing=!1;var l,q,z,E,L,N,P,S=this.options;return this._helper&&(l=this._proportionallyResizeElements,q=l.length&&/textarea/i.test(l[0].nodeName),z=q&&this._hasScroll(l[0],"left")?0:this.sizeDiff.height,E=q?0:this.sizeDiff.width,L={width:this.helper.width()-E,height:this.helper.height()-z},N=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,P=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||
null,S.animate||this.element.css(c.extend(L,{top:P,left:N})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!S.animate&&this._proportionallyResize()),c("body").css("cursor","auto"),this.element.removeClass("dvUi-resizable-resizing"),this._propagate("stop",h),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var h=
{};return this.position.top!==this.prevPosition.top&&(h.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(h.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(h.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(h.height=this.size.height+"px"),this.helper.css(h),h},_updateVirtualBoundaries:function(h){var l,q,z,E;var L=this.options;L={minWidth:this._isNumber(L.minWidth)?L.minWidth:0,maxWidth:this._isNumber(L.maxWidth)?L.maxWidth:1/0,minHeight:this._isNumber(L.minHeight)?
L.minHeight:0,maxHeight:this._isNumber(L.maxHeight)?L.maxHeight:1/0};(this._aspectRatio||h)&&(l=L.minHeight*this.aspectRatio,z=L.minWidth/this.aspectRatio,q=L.maxHeight*this.aspectRatio,E=L.maxWidth/this.aspectRatio,l>L.minWidth&&(L.minWidth=l),z>L.minHeight&&(L.minHeight=z),L.maxWidth>q&&(L.maxWidth=q),L.maxHeight>E&&(L.maxHeight=E));this._vBoundaries=L},_updateCache:function(h){this.offset=this.helper.offset();this._isNumber(h.left)&&(this.position.left=h.left);this._isNumber(h.top)&&(this.position.top=
h.top);this._isNumber(h.height)&&(this.size.height=h.height);this._isNumber(h.width)&&(this.size.width=h.width)},_updateRatio:function(h){var l=this.position,q=this.size,z=this.axis;return this._isNumber(h.height)?h.width=h.height*this.aspectRatio:this._isNumber(h.width)&&(h.height=h.width/this.aspectRatio),"sw"===z&&(h.left=l.left+(q.width-h.width),h.top=null),"nw"===z&&(h.top=l.top+(q.height-h.height),h.left=l.left+(q.width-h.width)),h},_respectSize:function(h){var l=this._vBoundaries,q=this.axis,
z=this._isNumber(h.width)&&l.maxWidth&&l.maxWidth<h.width,E=this._isNumber(h.height)&&l.maxHeight&&l.maxHeight<h.height,L=this._isNumber(h.width)&&l.minWidth&&l.minWidth>h.width,N=this._isNumber(h.height)&&l.minHeight&&l.minHeight>h.height,P=this.originalPosition.left+this.originalSize.width,S=this.position.top+this.size.height,X=/sw|nw|w/.test(q);q=/nw|ne|n/.test(q);return L&&(h.width=l.minWidth),N&&(h.height=l.minHeight),z&&(h.width=l.maxWidth),E&&(h.height=l.maxHeight),L&&X&&(h.left=P-l.minWidth),
z&&X&&(h.left=P-l.maxWidth),N&&q&&(h.top=S-l.minHeight),E&&q&&(h.top=S-l.maxHeight),h.width||h.height||h.left||!h.top?h.width||h.height||h.top||!h.left||(h.left=null):h.top=null,h},_getPaddingPlusBorderDimensions:function(h){var l=0,q=[],z=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")];for(h=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")];4>l;l++)q[l]=parseInt(z[l],10)||0,q[l]+=parseInt(h[l],10)||0;return{height:q[0]+
q[2],width:q[1]+q[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var h,l=0,q=this.helper||this.element;this._proportionallyResizeElements.length>l;l++)h=this._proportionallyResizeElements[l],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(h)),h.css({height:q.height()-this.outerDimensions.height||0,width:q.width()-this.outerDimensions.width||0})},_renderProxy:function(){var h=this.options;this.elementOffset=this.element.offset();
this._helper?(this.helper=this.helper||c("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++h.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(h,l){return{width:this.originalSize.width+l}},w:function(h,l){return{left:this.originalPosition.left+l,width:this.originalSize.width-
l}},n:function(h,l,q){return{top:this.originalPosition.top+q,height:this.originalSize.height-q}},s:function(h,l,q){return{height:this.originalSize.height+q}},se:function(h,l,q){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[h,l,q]))},sw:function(h,l,q){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[h,l,q]))},ne:function(h,l,q){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[h,l,q]))},nw:function(h,l,
q){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[h,l,q]))}},_propagate:function(h,l){c.dvUi.plugin.call(this,h,[l,this.ui()]);"resize"!==h&&this._trigger(h,l,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.dvUi.plugin.add("resizable","animate",{stop:function(h){var l=c(this).resizable("instance"),
q=l.options,z=l._proportionallyResizeElements,E=z.length&&/textarea/i.test(z[0].nodeName),L=E&&l._hasScroll(z[0],"left")?0:l.sizeDiff.height;E={width:l.size.width-(E?0:l.sizeDiff.width),height:l.size.height-L};L=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null;var N=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null;l.element.animate(c.extend(E,N&&L?{top:N,left:L}:{}),{duration:q.animateDuration,easing:q.animateEasing,step:function(){var P=
{width:parseInt(l.element.css("width"),10),height:parseInt(l.element.css("height"),10),top:parseInt(l.element.css("top"),10),left:parseInt(l.element.css("left"),10)};z&&z.length&&c(z[0]).css({width:P.width,height:P.height});l._updateCache(P);l._propagate("resize",h)}})}});c.dvUi.plugin.add("resizable","containment",{start:function(){var h,l,q,z,E,L,N,P=c(this).resizable("instance"),S=P.element,X=P.options.containment;(S=X instanceof c?X.get(0):/parent/.test(X)?S.parent().get(0):X)&&(P.containerElement=
c(S),/document/.test(X)||X===document?(P.containerOffset={left:0,top:0},P.containerPosition={left:0,top:0},P.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}):(h=c(S),l=[],c(["Top","Right","Left","Bottom"]).each(function(ea,fa){l[ea]=P._num(h.css("padding"+fa))}),P.containerOffset=h.offset(),P.containerPosition=h.position(),P.containerSize={height:h.innerHeight()-l[3],width:h.innerWidth()-l[1]},q=P.containerOffset,
z=P.containerSize.height,E=P.containerSize.width,L=P._hasScroll(S,"left")?S.scrollWidth:E,N=P._hasScroll(S)?S.scrollHeight:z,P.parentData={element:S,left:q.left,top:q.top,width:L,height:N}))},resize:function(h){var l=c(this).resizable("instance");var q=l.options;var z=l.containerOffset;var E=l.position;h=l._aspectRatio||h.shiftKey;var L={top:0,left:0},N=l.containerElement,P=!0;N[0]!==document&&/static/.test(N.css("position"))&&(L=z);E.left<(l._helper?z.left:0)&&(l.size.width+=l._helper?l.position.left-
z.left:l.position.left-L.left,h&&(l.size.height=l.size.width/l.aspectRatio,P=!1),l.position.left=q.helper?z.left:0);E.top<(l._helper?z.top:0)&&(l.size.height+=l._helper?l.position.top-z.top:l.position.top,h&&(l.size.width=l.size.height*l.aspectRatio,P=!1),l.position.top=l._helper?z.top:0);q=l.containerElement.get(0)===l.element.parent().get(0);E=/relative|absolute/.test(l.containerElement.css("position"));q&&E?(l.offset.left=l.parentData.left+l.position.left,l.offset.top=l.parentData.top+l.position.top):
(l.offset.left=l.element.offset().left,l.offset.top=l.element.offset().top);q=Math.abs(l.sizeDiff.width+(l._helper?l.offset.left-L.left:l.offset.left-z.left));z=Math.abs(l.sizeDiff.height+(l._helper?l.offset.top-L.top:l.offset.top-z.top));q+l.size.width>=l.parentData.width&&(l.size.width=l.parentData.width-q,h&&(l.size.height=l.size.width/l.aspectRatio,P=!1));z+l.size.height>=l.parentData.height&&(l.size.height=l.parentData.height-z,h&&(l.size.width=l.size.height*l.aspectRatio,P=!1));P||(l.position.left=
l.prevPosition.left,l.position.top=l.prevPosition.top,l.size.width=l.prevSize.width,l.size.height=l.prevSize.height)},stop:function(){var h=c(this).resizable("instance"),l=h.options,q=h.containerOffset,z=h.containerPosition,E=h.containerElement,L=c(h.helper),N=L.offset(),P=L.outerWidth()-h.sizeDiff.width;L=L.outerHeight()-h.sizeDiff.height;h._helper&&!l.animate&&/relative/.test(E.css("position"))&&c(this).css({left:N.left-z.left-q.left,width:P,height:L});h._helper&&!l.animate&&/static/.test(E.css("position"))&&
c(this).css({left:N.left-z.left-q.left,width:P,height:L})}});c.dvUi.plugin.add("resizable","alsoResize",{start:function(){var h=c(this).resizable("instance").options,l=function(q){c(q).each(function(){var z=c(this);z.data("dvUi-resizable-alsoresize",{width:parseInt(z.width(),10),height:parseInt(z.height(),10),left:parseInt(z.css("left"),10),top:parseInt(z.css("top"),10)})})};"object"!=typeof h.alsoResize||h.alsoResize.parentNode?l(h.alsoResize):h.alsoResize.length?(h.alsoResize=h.alsoResize[0],l(h.alsoResize)):
c.each(h.alsoResize,function(q){l(q)})},resize:function(h,l){h=c(this).resizable("instance");var q=h.options,z=h.originalSize,E=h.originalPosition,L={height:h.size.height-z.height||0,width:h.size.width-z.width||0,top:h.position.top-E.top||0,left:h.position.left-E.left||0},N=function(P,S){c(P).each(function(){var X=c(this),ea=c(this).data("dvUi-resizable-alsoresize"),fa={},sa=S&&S.length?S:X.parents(l.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(sa,function(W,
ja){(W=(ea[ja]||0)+(L[ja]||0))&&0<=W&&(fa[ja]=W||null)});X.css(fa)})};"object"!=typeof q.alsoResize||q.alsoResize.nodeType?N(q.alsoResize):c.each(q.alsoResize,function(P,S){N(P,S)})},stop:function(){c(this).removeData("resizable-alsoresize")}});c.dvUi.plugin.add("resizable","ghost",{start:function(){var h=c(this).resizable("instance"),l=h.options,q=h.size;h.ghost=h.originalElement.clone();h.ghost.css({opacity:.25,display:"block",position:"relative",height:q.height,width:q.width,margin:0,left:0,top:0}).addClass("dvUi-resizable-ghost").addClass("string"==
typeof l.ghost?l.ghost:"");h.ghost.appendTo(h.helper)},resize:function(){var h=c(this).resizable("instance");h.ghost&&h.ghost.css({position:"relative",height:h.size.height,width:h.size.width})},stop:function(){var h=c(this).resizable("instance");h.ghost&&h.helper&&h.helper.get(0).removeChild(h.ghost.get(0))}});c.dvUi.plugin.add("resizable","grid",{resize:function(){var h,l=c(this).resizable("instance"),q=l.options,z=l.size,E=l.originalSize,L=l.originalPosition,N=l.axis,P="number"==typeof q.grid?[q.grid,
q.grid]:q.grid,S=P[0]||1,X=P[1]||1,ea=Math.round((z.width-E.width)/S)*S;z=Math.round((z.height-E.height)/X)*X;var fa=E.width+ea,sa=E.height+z,W=q.maxWidth&&fa>q.maxWidth,ja=q.maxHeight&&sa>q.maxHeight,ka=q.minWidth&&q.minWidth>fa,ma=q.minHeight&&q.minHeight>sa;q.grid=P;ka&&(fa+=S);ma&&(sa+=X);W&&(fa-=S);ja&&(sa-=X);/^(se|s|e)$/.test(N)?(l.size.width=fa,l.size.height=sa):/^(ne)$/.test(N)?(l.size.width=fa,l.size.height=sa,l.position.top=L.top-z):/^(sw)$/.test(N)?(l.size.width=fa,l.size.height=sa,l.position.left=
L.left-ea):((0>=sa-X||0>=fa-S)&&(h=l._getPaddingPlusBorderDimensions(this)),0<sa-X?(l.size.height=sa,l.position.top=L.top-z):(sa=X-h.height,l.size.height=sa,l.position.top=L.top+E.height-sa),0<fa-S?(l.size.width=fa,l.position.left=L.left-ea):(fa=X-h.height,l.size.width=fa,l.position.left=L.left+E.width-fa))}});c.dvUi.resizable;c.widget("dvUi.selectable",c.dvUi.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,
stop:null,unselected:null,unselecting:null},_create:function(){var h,l=this;this.element.addClass("dvUi-selectable");this.dragged=!1;this.refresh=function(){h=c(l.options.filter,l.element[0]);h.addClass("dvUi-selectee");h.each(function(){var q=c(this),z=q.offset();c.data(this,"selectable-item",{element:this,$element:q,left:z.left,top:z.top,right:z.left+q.outerWidth(),bottom:z.top+q.outerHeight(),startselected:!1,selected:q.hasClass("dvUi-selected"),selecting:q.hasClass("dvUi-selecting"),unselecting:q.hasClass("dvUi-unselecting")})})};
this.refresh();this.selectees=h.addClass("dvUi-selectee");this._mouseInit();this.helper=c("<div class='dvUi-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("dvUi-selectee").removeData("selectable-item");this.element.removeClass("dvUi-selectable dvUi-selectable-disabled");this._mouseDestroy()},_mouseStart:function(h){var l=this,q=this.options;this.opos=[h.pageX,h.pageY];this.options.disabled||(this.selectees=c(q.filter,this.element[0]),this._trigger("start",h),c(q.appendTo).append(this.helper),
this.helper.css({left:h.pageX,top:h.pageY,width:0,height:0}),q.autoRefresh&&this.refresh(),this.selectees.filter(".dvUi-selected").each(function(){var z=c.data(this,"selectable-item");z.startselected=!0;h.metaKey||h.ctrlKey||(z.$element.removeClass("dvUi-selected"),z.selected=!1,z.$element.addClass("dvUi-unselecting"),z.unselecting=!0,l._trigger("unselecting",h,{unselecting:z.element}))}),c(h.target).parents().addBack().each(function(){var z,E=c.data(this,"selectable-item");return E?(z=!h.metaKey&&
!h.ctrlKey||!E.$element.hasClass("dvUi-selected"),E.$element.removeClass(z?"dvUi-unselecting":"dvUi-selected").addClass(z?"dvUi-selecting":"dvUi-unselecting"),E.unselecting=!z,E.selecting=z,E.selected=z,z?l._trigger("selecting",h,{selecting:E.element}):l._trigger("unselecting",h,{unselecting:E.element}),!1):void 0}))},_mouseDrag:function(h){if(this.dragged=!0,!this.options.disabled){var l,q=this,z=this.options,E=this.opos[0],L=this.opos[1],N=h.pageX,P=h.pageY;return E>N&&(l=N,N=E,E=l),L>P&&(l=P,P=
L,L=l),this.helper.css({left:E,top:L,width:N-E,height:P-L}),this.selectees.each(function(){var S=c.data(this,"selectable-item"),X=!1;S&&S.element!==q.element[0]&&("touch"===z.tolerance?X=!(S.left>N||E>S.right||S.top>P||L>S.bottom):"fit"===z.tolerance&&(X=S.left>E&&N>S.right&&S.top>L&&P>S.bottom),X?(S.selected&&(S.$element.removeClass("dvUi-selected"),S.selected=!1),S.unselecting&&(S.$element.removeClass("dvUi-unselecting"),S.unselecting=!1),S.selecting||(S.$element.addClass("dvUi-selecting"),S.selecting=
!0,q._trigger("selecting",h,{selecting:S.element}))):(S.selecting&&((h.metaKey||h.ctrlKey)&&S.startselected?(S.$element.removeClass("dvUi-selecting"),S.selecting=!1,S.$element.addClass("dvUi-selected"),S.selected=!0):(S.$element.removeClass("dvUi-selecting"),S.selecting=!1,S.startselected&&(S.$element.addClass("dvUi-unselecting"),S.unselecting=!0),q._trigger("unselecting",h,{unselecting:S.element}))),S.selected&&(h.metaKey||h.ctrlKey||S.startselected||(S.$element.removeClass("dvUi-selected"),S.selected=
!1,S.$element.addClass("dvUi-unselecting"),S.unselecting=!0,q._trigger("unselecting",h,{unselecting:S.element})))))}),!1}},_mouseStop:function(h){var l=this;return this.dragged=!1,c(".dvUi-unselecting",this.element[0]).each(function(){var q=c.data(this,"selectable-item");q.$element.removeClass("dvUi-unselecting");q.unselecting=!1;q.startselected=!1;l._trigger("unselected",h,{unselected:q.element})}),c(".dvUi-selecting",this.element[0]).each(function(){var q=c.data(this,"selectable-item");q.$element.removeClass("dvUi-selecting").addClass("dvUi-selected");
q.selecting=!1;q.selected=!0;q.startselected=!0;l._trigger("selected",h,{selected:q.element})}),this._trigger("stop",h),this.helper.remove(),!1}});c.widget("dvUi.sortable",c.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,
scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(h,l,q){return h>=l&&l+q>h},_isFloating:function(h){return/left|right/.test(h.css("float"))||/inline|table-cell/.test(h.css("display"))},_create:function(){var h=this.options;this.containerCache={};this.element.addClass("dvUi-sortable");this.refresh();this.floating=this.items.length?
"x"===h.axis||this._isFloating(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(h,l){this._super(h,l);"handle"===h&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");c.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("dvUi-sortable-handle")})},_destroy:function(){this.element.removeClass("dvUi-sortable dvUi-sortable-disabled").find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");
this._mouseDestroy();for(var h=this.items.length-1;0<=h;h--)this.items[h].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(h,l){var q=null,z=!1,E=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(h),c(h.target).parents().each(function(){return c.data(this,E.widgetName+"-item")===E?(q=c(this),!1):void 0}),c.data(h.target,E.widgetName+"-item")===E&&(q=c(h.target)),q?!this.options.handle||l||(c(this.options.handle,q).find("*").addBack().each(function(){this===
h.target&&(z=!0)}),z)?(this.currentItem=q,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(h,l,q){var z;l=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(h),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:h.pageX-this.offset.left,
top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),
l.containment&&this._setContainment(),l.cursor&&"auto"!==l.cursor&&(z=this.document.find("body"),this.storedCursor=z.css("cursor"),z.css("cursor",l.cursor),this.storedStylesheet=c("<style>*{ cursor: "+l.cursor+" !important; }</style>").appendTo(z)),l.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",l.opacity)),l.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",l.zIndex)),this.scrollParent[0]!==
document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",h,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!q)for(q=this.containers.length-1;0<=q;q--)this.containers[q]._trigger("activate",h,this._uiHash(this));return c.dvUi.ddmanager&&(c.dvUi.ddmanager.current=this),c.dvUi.ddmanager&&!l.dropBehaviour&&c.dvUi.ddmanager.prepareOffsets(this,h),this.dragging=!0,this.helper.addClass("dvUi-sortable-helper"),
this._mouseDrag(h),!0},_mouseDrag:function(h){var l,q,z;var E=this.options;var L=!1;this.position=this._generatePosition(h);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-h.pageY<E.scrollSensitivity?this.scrollParent[0].scrollTop=L=this.scrollParent[0].scrollTop+E.scrollSpeed:h.pageY-
this.overflowOffset.top<E.scrollSensitivity&&(this.scrollParent[0].scrollTop=L=this.scrollParent[0].scrollTop-E.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-h.pageX<E.scrollSensitivity?this.scrollParent[0].scrollLeft=L=this.scrollParent[0].scrollLeft+E.scrollSpeed:h.pageX-this.overflowOffset.left<E.scrollSensitivity&&(this.scrollParent[0].scrollLeft=L=this.scrollParent[0].scrollLeft-E.scrollSpeed)):(h.pageY-c(document).scrollTop()<E.scrollSensitivity?L=c(document).scrollTop(c(document).scrollTop()-
E.scrollSpeed):c(window).height()-(h.pageY-c(document).scrollTop())<E.scrollSensitivity&&(L=c(document).scrollTop(c(document).scrollTop()+E.scrollSpeed)),h.pageX-c(document).scrollLeft()<E.scrollSensitivity?L=c(document).scrollLeft(c(document).scrollLeft()-E.scrollSpeed):c(window).width()-(h.pageX-c(document).scrollLeft())<E.scrollSensitivity&&(L=c(document).scrollLeft(c(document).scrollLeft()+E.scrollSpeed))),!1!==L&&c.dvUi.ddmanager&&!E.dropBehaviour&&c.dvUi.ddmanager.prepareOffsets(this,h));this.positionAbs=
this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(E=this.items.length-1;0<=E;E--)if(l=this.items[E],q=l.item[0],z=this._intersectsWithPointer(l),z&&l.instance===this.currentContainer&&q!==this.currentItem[0]&&this.placeholder[1===z?"next":"prev"]()[0]!==q&&!c.contains(this.placeholder[0],q)&&("semi-dynamic"===this.options.type?
!c.contains(this.element[0],q):!0)){if(this.direction=1===z?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(l))break;this._rearrange(h,l);this._trigger("change",h,this._uiHash());break}return this._contactContainers(h),c.dvUi.ddmanager&&c.dvUi.ddmanager.drag(this,h),this._trigger("sort",h,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(h,l){if(h){if(c.dvUi.ddmanager&&!this.options.dropBehaviour&&c.dvUi.ddmanager.drop(this,h),this.options.revert){var q=
this;l=this.placeholder.offset();var z=this.options.axis,E={};z&&"x"!==z||(E.left=l.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));z&&"y"!==z||(E.top=l.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;c(this.helper).animate(E,parseInt(this.options.revert,10)||500,function(){q._clear(h)})}else this._clear(h,l);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});
"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper"):this.currentItem.show();for(var h=this.containers.length-1;0<=h;h--)this.containers[h]._trigger("deactivate",null,this._uiHash(this)),this.containers[h].containerCache.over&&(this.containers[h]._trigger("out",null,this._uiHash(this)),this.containers[h].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(h){var l=this._getItemsAsjQuery(h&&h.connected),q=[];return h=h||{},c(l).each(function(){var z=(c(h.item||this).attr(h.attribute||"id")||"").match(h.expression||/(.+)[\-=_](.+)/);z&&q.push((h.key||
z[1]+"[]")+"="+(h.key&&h.expression?z[1]:z[2]))}),!q.length&&h.key&&q.push(h.key+"="),q.join("&")},toArray:function(h){var l=this._getItemsAsjQuery(h&&h.connected),q=[];return h=h||{},l.each(function(){q.push(c(h.item||this).attr(h.attribute||"id")||"")}),q},_intersectsWith:function(h){var l=this.positionAbs.left,q=l+this.helperProportions.width,z=this.positionAbs.top,E=z+this.helperProportions.height,L=h.left,N=L+h.width,P=h.top,S=P+h.height,X=this.offset.click.top,ea=this.offset.click.left;X="x"===
this.options.axis||z+X>P&&S>z+X;ea="y"===this.options.axis||l+ea>L&&N>l+ea;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>h[this.floating?"width":"height"]?X&&ea:l+this.helperProportions.width/2>L&&N>q-this.helperProportions.width/2&&z+this.helperProportions.height/2>P&&S>E-this.helperProportions.height/2},_intersectsWithPointer:function(h){var l="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+
this.offset.click.top,h.top,h.height);h="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,h.left,h.width);l=l&&h;h=this._getDragVerticalDirection();var q=this._getDragHorizontalDirection();return l?this.floating?q&&"right"===q||"down"===h?2:1:h&&("down"===h?2:1):!1},_intersectsWithSides:function(h){var l=this._isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height);h=this._isOverAxis(this.positionAbs.left+this.offset.click.left,h.left+
h.width/2,h.width);var q=this._getDragVerticalDirection(),z=this._getDragHorizontalDirection();return this.floating&&z?"right"===z&&h||"left"===z&&!h:q&&("down"===q&&l||"up"===q&&!l)},_getDragVerticalDirection:function(){var h=this.positionAbs.top-this.lastPositionAbs.top;return 0!==h&&(0<h?"down":"up")},_getDragHorizontalDirection:function(){var h=this.positionAbs.left-this.lastPositionAbs.left;return 0!==h&&(0<h?"right":"left")},refresh:function(h){return this._refreshItems(h),this._setHandleClassName(),
this.refreshPositions(),this},_connectWith:function(){var h=this.options;return h.connectWith.constructor===String?[h.connectWith]:h.connectWith},_getItemsAsjQuery:function(h){function l(){E.push(this)}var q,z,E=[],L=[],N=this._connectWith();if(N&&h)for(h=N.length-1;0<=h;h--){var P=c(N[h]);for(q=P.length-1;0<=q;q--)(z=c.data(P[q],this.widgetFullName))&&z!==this&&!z.options.disabled&&L.push([c.isFunction(z.options.items)?z.options.items.call(z.element):c(z.options.items,z.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),
z])}L.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),this]);for(h=L.length-1;0<=h;h--)L[h][0].each(l);return c(E)},_removeCurrentsFromItems:function(){var h=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=c.grep(this.items,function(l){for(var q=0;h.length>q;q++)if(h[q]===l.item[0])return!1;return!0})},
_refreshItems:function(h){this.items=[];this.containers=[this];var l,q,z,E,L=this.items,N=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],h,{item:this.currentItem}):c(this.options.items,this.element),this]];if((E=this._connectWith())&&this.ready)for(l=E.length-1;0<=l;l--){var P=c(E[l]);for(q=P.length-1;0<=q;q--)(z=c.data(P[q],this.widgetFullName))&&z!==this&&!z.options.disabled&&(N.push([c.isFunction(z.options.items)?z.options.items.call(z.element[0],h,{item:this.currentItem}):
c(z.options.items,z.element),z]),this.containers.push(z))}for(l=N.length-1;0<=l;l--)for(h=N[l][1],P=N[l][0],q=0,E=P.length;E>q;q++)z=c(P[q]),z.data(this.widgetName+"-item",h),L.push({item:z,instance:h,width:0,height:0,left:0,top:0})},refreshPositions:function(h){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var l,q,z;for(l=this.items.length-1;0<=l;l--){var E=this.items[l];E.instance!==this.currentContainer&&this.currentContainer&&E.item[0]!==this.currentItem[0]||(q=
this.options.toleranceElement?c(this.options.toleranceElement,E.item):E.item,h||(E.width=q.outerWidth(),E.height=q.outerHeight()),z=q.offset(),E.left=z.left,E.top=z.top)}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(l=this.containers.length-1;0<=l;l--)z=this.containers[l].element.offset(),this.containers[l].containerCache.left=z.left,this.containers[l].containerCache.top=z.top,this.containers[l].containerCache.width=this.containers[l].element.outerWidth(),
this.containers[l].containerCache.height=this.containers[l].element.outerHeight();return this},_createPlaceholder:function(h){h=h||this;var l,q=h.options;q.placeholder&&q.placeholder.constructor!==String||(l=q.placeholder,q.placeholder={element:function(){var z=h.currentItem[0].nodeName.toLowerCase(),E=c("<"+z+">",h.document[0]).addClass(l||h.currentItem[0].className+" dvUi-sortable-placeholder").removeClass("dvUi-sortable-helper");return"tr"===z?h.currentItem.children().each(function(){c("<td>&#160;</td>",
h.document[0]).attr("colspan",c(this).attr("colspan")||1).appendTo(E)}):"img"===z&&E.attr("src",h.currentItem.attr("src")),l||E.css("visibility","hidden"),E},update:function(z,E){(!l||q.forcePlaceholderSize)&&(E.height()||E.height(h.currentItem.innerHeight()-parseInt(h.currentItem.css("paddingTop")||0,10)-parseInt(h.currentItem.css("paddingBottom")||0,10)),E.width()||E.width(h.currentItem.innerWidth()-parseInt(h.currentItem.css("paddingLeft")||0,10)-parseInt(h.currentItem.css("paddingRight")||0,10)))}});
h.placeholder=c(q.placeholder.element.call(h.element,h.currentItem));h.currentItem.after(h.placeholder);q.placeholder.update(h,h.placeholder)},_contactContainers:function(h){var l,q,z,E,L,N=z=null;for(l=this.containers.length-1;0<=l;l--)c.contains(this.currentItem[0],this.containers[l].element[0])||(this._intersectsWith(this.containers[l].containerCache)?z&&c.contains(this.containers[l].element[0],z.element[0])||(z=this.containers[l],N=l):this.containers[l].containerCache.over&&(this.containers[l]._trigger("out",
h,this._uiHash(this)),this.containers[l].containerCache.over=0));if(z)if(1===this.containers.length)this.containers[N].containerCache.over||(this.containers[N]._trigger("over",h,this._uiHash(this)),this.containers[N].containerCache.over=1);else{l=1E4;var P=null;z=(q=z.floating||this._isFloating(this.currentItem))?"left":"top";var S=q?"width":"height";var X=q?"clientX":"clientY";for(q=this.items.length-1;0<=q;q--)c.contains(this.containers[N].element[0],this.items[q].item[0])&&this.items[q].item[0]!==
this.currentItem[0]&&(E=this.items[q].item.offset()[z],L=!1,h[X]-E>this.items[q][S]/2&&(L=!0),l>Math.abs(h[X]-E)&&(l=Math.abs(h[X]-E),P=this.items[q],this.direction=L?"up":"down"));if(P||this.options.dropOnEmpty){if(this.currentContainer===this.containers[N])return this.currentContainer.containerCache.over||(this.containers[N]._trigger("over",h,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;P?this._rearrange(h,P,null,!0):this._rearrange(h,null,this.containers[N].element,!0);this._trigger("change",
h,this._uiHash());this.containers[N]._trigger("change",h,this._uiHash(this));this.currentContainer=this.containers[N];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[N]._trigger("over",h,this._uiHash(this));this.containers[N].containerCache.over=1}}},_createHelper:function(h){var l=this.options;h=c.isFunction(l.helper)?c(l.helper.apply(this.element[0],[h,this.currentItem])):"clone"===l.helper?this.currentItem.clone():this.currentItem;return h.parents("body").length||
c("parent"!==l.appendTo?l.appendTo:this.currentItem[0].parentNode)[0].appendChild(h[0]),h[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!h[0].style.width||l.forceHelperSize)&&h.width(this.currentItem.width()),(!h[0].style.height||l.forceHelperSize)&&h.height(this.currentItem.height()),h},_adjustOffsetFromHelper:function(h){"string"==
typeof h&&(h=h.split(" "));c.isArray(h)&&(h={left:+h[0],top:+h[1]||0});"left"in h&&(this.offset.click.left=h.left+this.margins.left);"right"in h&&(this.offset.click.left=this.helperProportions.width-h.right+this.margins.left);"top"in h&&(this.offset.click.top=h.top+this.margins.top);"bottom"in h&&(this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var h=this.offsetParent.offset();return"absolute"===
this.cssPosition&&this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0])&&(h.left+=this.scrollParent.scrollLeft(),h.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&c.dvUi.ie)&&(h={top:0,left:0}),{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===
this.cssPosition){var h=this.currentItem.position();return{top:h.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:h.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var h,l,q,z=this.options;"parent"===z.containment&&(z.containment=this.helper[0].parentNode);"document"!==z.containment&&"window"!==z.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,c("document"===z.containment?document:window).width()-this.helperProportions.width-this.margins.left,(c("document"===z.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top]);/^(document|window|parent)$/.test(z.containment)||(h=c(z.containment)[0],l=c(z.containment).offset(),q="hidden"!==c(h).css("overflow"),this.containment=[l.left+(parseInt(c(h).css("borderLeftWidth"),10)||0)+(parseInt(c(h).css("paddingLeft"),10)||0)-this.margins.left,l.top+(parseInt(c(h).css("borderTopWidth"),10)||0)+(parseInt(c(h).css("paddingTop"),10)||0)-this.margins.top,l.left+(q?Math.max(h.scrollWidth,h.offsetWidth):h.offsetWidth)-(parseInt(c(h).css("borderLeftWidth"),10)||0)-
(parseInt(c(h).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,l.top+(q?Math.max(h.scrollHeight,h.offsetHeight):h.offsetHeight)-(parseInt(c(h).css("borderTopWidth"),10)||0)-(parseInt(c(h).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(h,l){l||(l=this.position);h="absolute"===h?1:-1;var q="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:
this.offsetParent,z=/(html|body)/i.test(q[0].tagName);return{top:l.top+this.offset.relative.top*h+this.offset.parent.top*h-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():z?0:q.scrollTop())*h,left:l.left+this.offset.relative.left*h+this.offset.parent.left*h-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():z?0:q.scrollLeft())*h}},_generatePosition:function(h){var l,q,z=this.options,E=h.pageX,L=h.pageY,N="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],
this.offsetParent[0])?this.scrollParent:this.offsetParent,P=/(html|body)/i.test(N[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(h.pageX-this.offset.click.left<this.containment[0]&&(E=this.containment[0]+this.offset.click.left),h.pageY-this.offset.click.top<this.containment[1]&&(L=this.containment[1]+this.offset.click.top),h.pageX-
this.offset.click.left>this.containment[2]&&(E=this.containment[2]+this.offset.click.left),h.pageY-this.offset.click.top>this.containment[3]&&(L=this.containment[3]+this.offset.click.top)),z.grid&&(l=this.originalPageY+Math.round((L-this.originalPageY)/z.grid[1])*z.grid[1],L=this.containment?l-this.offset.click.top>=this.containment[1]&&l-this.offset.click.top<=this.containment[3]?l:l-this.offset.click.top>=this.containment[1]?l-z.grid[1]:l+z.grid[1]:l,q=this.originalPageX+Math.round((E-this.originalPageX)/
z.grid[0])*z.grid[0],E=this.containment?q-this.offset.click.left>=this.containment[0]&&q-this.offset.click.left<=this.containment[2]?q:q-this.offset.click.left>=this.containment[0]?q-z.grid[0]:q+z.grid[0]:q)),{top:L-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():P?0:N.scrollTop()),left:E-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():
P?0:N.scrollLeft())}},_rearrange:function(h,l,q,z){q?q[0].appendChild(this.placeholder[0]):l.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?l.item[0]:l.item[0].nextSibling);var E=this.counter=this.counter?++this.counter:1;this._delay(function(){E===this.counter&&this.refreshPositions(!z)})},_clear:function(h,l){function q(L,N,P){return function(S){P._trigger(L,S,N._uiHash(N))}}this.reverting=!1;var z,E=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),
this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(z in this._storedCSS)"auto"!==this._storedCSS[z]&&"static"!==this._storedCSS[z]||(this._storedCSS[z]="");this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper")}else this.currentItem.show();this.fromOutside&&!l&&E.push(function(L){this._trigger("receive",L,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".dvUi-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||
l||E.push(function(L){this._trigger("update",L,this._uiHash())});this!==this.currentContainer&&(l||(E.push(function(L){this._trigger("remove",L,this._uiHash())}),E.push(function(L){return function(N){L._trigger("receive",N,this._uiHash(this))}}.call(this,this.currentContainer)),E.push(function(L){return function(N){L._trigger("update",N,this._uiHash(this))}}.call(this,this.currentContainer))));for(z=this.containers.length-1;0<=z;z--)l||E.push(q("deactivate",this,this.containers[z])),this.containers[z].containerCache.over&&
(E.push(q("out",this,this.containers[z])),this.containers[z].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,l||this._trigger("beforeStop",h,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||
(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!l){for(z=0;E.length>z;z++)E[z].call(this,h);this._trigger("stop",h,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===c.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(h){var l=h||this;return{helper:l.helper,placeholder:l.placeholder||c([]),position:l.position,originalPosition:l.originalPosition,offset:l.positionAbs,item:l.currentItem,sender:h?
h.element:null}}})}(dvJQuery),dvJQuery&&function(c){(function(){function y(a){var B=a.css("color"),J;a=a[0];for(var b=!1;a&&!J&&!b;){try{var d=c(a).css("background-color")}catch(k){d="transparent"}"transparent"!==d&&"rgba(0, 0, 0, 0)"!==d&&(J=d);b=a.body;a=a.parentNode}a=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/;b=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;var e;d=void 0;(d=B.match(a))?e={r:parseInt(d[1],10),g:parseInt(d[2],10),b:parseInt(d[3],10)}:(d=B.match(b))&&(e={r:parseInt(d[1],
16),g:parseInt(d[2],16),b:parseInt(d[3],16)});var g;J?(d=void 0,(d=J.match(a))?g={r:parseInt(d[1],10),g:parseInt(d[2],10),b:parseInt(d[3],10)}:(d=J.match(b))&&(g={r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16)})):g=e?127<Math.max.apply(null,[e.r,e.g,e.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255}:{r:255,g:255,b:255};d=function(k){return"rgb("+[k.r,k.g,k.b].join(", ")+")"};e&&g?(a=Math.max.apply(null,[e.r,e.g,e.b]),e=Math.max.apply(null,[g.r,g.g,g.b]),e=Math.round(e+-.75*(e-a)),e={r:e,g:e,b:e}):
e?(e=Math.max.apply(null,[e.r,e.g,e.b]),a=1,127<e&&(a=-1),e=Math.round(e+96*a),e={r:e,g:e,b:e}):e={r:191,g:191,b:191};return{color:B,"background-color":g?d(g):J,"decor-color":d(e)}}function D(a,B){this.x=a;this.y=B;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var J=function(b){return Math.round(b/Math.abs(b))};this.resizeTo=function(b){if(0===
this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=b,this.y=b*J(this.y);else if(0===this.y)this._length=b,this.x=b*J(this.x);else{var d=Math.abs(this.y/this.x),e=Math.sqrt(Math.pow(b,2)/(1+Math.pow(d,2)));d*=e;this._length=b;this.x=e*J(this.x);this.y=d*J(this.y)}return this};this.angleTo=function(b){var d=this.getLength()*b.getLength();return 0===d?0:Math.acos(Math.min(Math.max((this.x*b.x+this.y*b.y)/d,-1),1))/Math.PI}}function M(a,B){this.x=a;this.y=B;this.getVectorToCoordinates=
function(J,b){return new D(J-this.x,b-this.y)};this.getVectorFromCoordinates=function(J,b){return this.getVectorToCoordinates(J,b).reverse()};this.getVectorToPoint=function(J){return new D(J.x-this.x,J.y-this.y)};this.getVectorFromPoint=function(J){return this.getVectorToPoint(J).reverse()}}function u(a,B,J,b,d){this.data=a;this.context=B;if(a.length)for(var e=a.length,g,k,p=0;p<e;p++){g=a[p];k=g.x.length;J.call(B,g);for(var n=1;n<k;n++)b.call(B,g,n);d.call(B,g)}this.changed=function(){};this.startStrokeFn=
J;this.addToStrokeFn=b;this.endStrokeFn=d;this.inStroke=!1;this._stroke=this._lastPoint=null;this.startStroke=function(w){if(w&&"number"==typeof w.x&&"number"==typeof w.y){this._stroke={x:[w.x],y:[w.y]};this.data.push(this._stroke);this._lastPoint=w;this.inStroke=!0;var C=this._stroke,K=this.startStrokeFn,F=this.context;setTimeout(function(){K.call(F,C)},3);return w}return null};this.addToStroke=function(w){if(this.inStroke&&"number"===typeof w.x&&"number"===typeof w.y&&4<Math.abs(w.x-this._lastPoint.x)+
Math.abs(w.y-this._lastPoint.y)){var C=this._stroke.x.length;this._stroke.x.push(w.x);this._stroke.y.push(w.y);this._lastPoint=w;var K=this._stroke,F=this.addToStrokeFn,Y=this.context;setTimeout(function(){F.call(Y,K,C)},3);return w}return null};this.endStroke=function(){var w=this.inStroke;this.inStroke=!1;this._lastPoint=null;if(w){var C=this._stroke,K=this.endStrokeFn,F=this.context,Y=this.changed;setTimeout(function(){K.call(F,C);Y.call(F)},3);return!0}return null}}function t(a,B,J){var b=this.$parent=
c(a);a=this.eventTokens={};this.events=new q(this);var d=c.fn[h]("globalEvents"),e={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};c.extend(e,y(b));B&&c.extend(e,B);this.settings=e;for(var g in J)J.hasOwnProperty(g)&&J[g].call(this,g);this.events.publish(h+".initializing");this.$controlbarUpper=c('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(b);
this.isCanvasEmulator=!1;J=this.canvas=this.initializeCanvas(e);B=c(J);this.$controlbarLower=c('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(b);this.canvasContext=J.getContext("2d");B.data(h+".this",this);b=(b=e.lineWidth)?b:Math.max(Math.round(J.width/400),2);e.lineWidth=b;this.lineCurveThreshold=3*e.lineWidth;e.cssclass&&""!=c.trim(e.cssclass)&&B.addClass(e.cssclass);
this.fatFingerCompensation=0;b=function(F){var Y,aa,ha=function(la){la=la.changedTouches&&0<la.changedTouches.length?la.changedTouches[0]:la;return new M(Math.round(la.pageX+Y),Math.round(la.pageY+aa)+F.fatFingerCompensation)},da=new l(750,function(){F.dataEngine.endStroke()});this.drawEndHandler=function(la){try{la.preventDefault()}catch(Ha){}da.clear();F.dataEngine.endStroke()};this.drawStartHandler=function(la){la.preventDefault();var Ha=c(F.canvas).offset();Y=-1*Ha.left;aa=-1*Ha.top;F.dataEngine.startStroke(ha(la));
da.kick()};this.drawMoveHandler=function(la){la.preventDefault();F.dataEngine.inStroke&&(F.dataEngine.addToStroke(ha(la)),da.kick())};return this}.call({},this);var k=b.drawEndHandler,p=b.drawStartHandler,n=b.drawMoveHandler,w=this.canvas;B=c(w);this.isCanvasEmulator?(B.bind("mousemove."+h,n),B.bind("mouseup."+h,k),B.bind("mousedown."+h,p)):(w.ontouchstart=function(F){w.onmousedown=void 0;w.onmouseup=void 0;w.onmousemove=void 0;this.fatFingerCompensation=e.minFatFingerCompensation&&-3*e.lineWidth>
e.minFatFingerCompensation?-3*e.lineWidth:e.minFatFingerCompensation;p(F);w.ontouchend=k;w.ontouchstart=p;w.ontouchmove=n},w.onmousedown=function(F){w.ontouchstart=void 0;w.ontouchend=void 0;w.ontouchmove=void 0;p(F);w.onmousedown=p;w.onmouseup=k;w.onmousemove=n});a[h+".windowmouseup"]=d.subscribe(h+".windowmouseup",b.drawEndHandler);this.events.publish(h+".attachingEventHandlers");var C=this;a=e.width.toString(10);var K=h;if("ratio"===a||"%"===a.split("")[a.length-1])this.eventTokens[K+".parentresized"]=
d.subscribe(K+".parentresized",function(F,Y,aa){return function(){var ha=Y.width();if(ha!==aa){for(var da in F)F.hasOwnProperty(da)&&(d.unsubscribe(F[da]),delete F[da]);var la=C.settings;C.$parent.children().remove();for(da in C)C.hasOwnProperty(da)&&delete C[da];da=la.data;ha=1*ha/aa;var Ha=[],wa,va;var ua=0;for(wa=da.length;ua<wa;ua++){var Da=da[ua];var Ua={x:[],y:[]};var Ka=0;for(va=Da.x.length;Ka<va;Ka++)Ua.x.push(Da.x[Ka]*ha),Ua.y.push(Da.y[Ka]*ha);Ha.push(Ua)}la.data=Ha;Y[K](la)}}}(this.eventTokens,
this.$parent,this.$parent.width(),1*this.canvas.width/this.canvas.height));this.resetCanvas(e.data);this.events.publish(h+".initialized");return this}var h="jSignature",l=function(a,B){var J;this.kick=function(){clearTimeout(J);J=setTimeout(B,a)};this.clear=function(){clearTimeout(J)};return this},q=function(a){this.topics={};this.context=a?a:this;this.publish=function(B,J,b,d){if(this.topics[B]){var e=this.topics[B],g=Array.prototype.slice.call(arguments,1),k=[],p;var n=0;for(p=e.length;n<p;n++){var w=
e[n];var C=w[0];w[1]&&(w[0]=function(){},k.push(n));C.apply(this.context,g)}n=0;for(p=k.length;n<p;n++)e.splice(k[n],1)}};this.subscribe=function(B,J,b){this.topics[B]?this.topics[B].push([J,b]):this.topics[B]=[[J,b]];return{topic:B,callback:J}};this.unsubscribe=function(B){if(this.topics[B.topic])for(var J=this.topics[B.topic],b=0,d=J.length;b<d;b++)J[b][0]===B.callback&&J.splice(b,1)}},z=function(a){var B=this.canvasContext,J=a.x[0];a=a.y[0];var b=this.settings.lineWidth,d=B.fillStyle;B.fillStyle=
B.strokeStyle;B.fillRect(J+b/-2,a+b/-2,b,b);B.fillStyle=d},E=function(a,B){var J=new M(a.x[B-1],a.y[B-1]),b=new M(a.x[B],a.y[B]),d=J.getVectorToPoint(b);if(1<B){var e=new M(a.x[B-2],a.y[B-2]),g=e.getVectorToPoint(J);if(g.getLength()>this.lineCurveThreshold){var k=2<B?(new M(a.x[B-3],a.y[B-3])).getVectorToPoint(e):new D(0,0);a=.35*g.getLength();B=g.angleTo(k.reverse());var p=d.angleTo(g.reverse());k=(new D(k.x+g.x,k.y+g.y)).resizeTo(Math.max(.05,B)*a);var n=(new D(g.x+d.x,g.y+d.y)).reverse().resizeTo(Math.max(.05,
p)*a);g=this.canvasContext;a=e.x;p=e.y;B=J.x;var w=J.y,C=e.x+k.x;e=e.y+k.y;k=J.x+n.x;n=J.y+n.y;g.beginPath();g.moveTo(a,p);g.bezierCurveTo(C,e,k,n,B,w);g.stroke()}}d.getLength()<=this.lineCurveThreshold&&(d=this.canvasContext,e=J.x,J=J.y,k=b.x,b=b.y,d.beginPath(),d.moveTo(e,J),d.lineTo(k,b),d.stroke())},L=function(a){var B=a.x.length-1;if(0<B){var J=new M(a.x[B],a.y[B]),b=new M(a.x[B-1],a.y[B-1]),d=b.getVectorToPoint(J);if(d.getLength()>this.lineCurveThreshold){if(1<B){a=(new M(a.x[B-2],a.y[B-2])).getVectorToPoint(b);
var e=(new D(a.x+d.x,a.y+d.y)).resizeTo(d.getLength()/2);d=this.canvasContext;a=b.x;B=b.y;var g=J.x,k=J.y,p=b.x+e.x;b=b.y+e.y;e=J.x;J=J.y;d.beginPath();d.moveTo(a,B);d.bezierCurveTo(p,b,e,J,g,k)}else d=this.canvasContext,a=b.x,b=b.y,B=J.x,J=J.y,d.beginPath(),d.moveTo(a,b),d.lineTo(B,J);d.stroke()}}};t.prototype.resetCanvas=function(a){var B=this.canvas,J=this.settings,b=this.canvasContext,d=this.isCanvasEmulator,e=B.width,g=B.height;b.clearRect(0,0,e+30,g+30);b.shadowColor=b.fillStyle=J["background-color"];
d&&b.fillRect(0,0,e+30,g+30);b.lineWidth=Math.ceil(parseInt(J.lineWidth,10));b.lineCap=b.lineJoin="round";b.strokeStyle=J["decor-color"];b.shadowOffsetX=0;b.shadowOffsetY=0;var k=Math.round(g/5),p=1.5*k,n=g-k;e-=1.5*k;g-=k;b.beginPath();b.moveTo(p,n);b.lineTo(e,g);b.stroke();b.strokeStyle=J.color;d||(b.shadowColor=b.strokeStyle,b.shadowOffsetX=.5*b.lineWidth,b.shadowOffsetY=-.6*b.lineWidth,b.shadowBlur=0);a||(a=[]);b=this.dataEngine=new u(a,this,z,E,L);J.data=a;c(B).data(h+".data",a).data(h+".settings",
J);var w=this.$parent,C=this.events,K=h;b.changed=function(){C.publish(K+".change");w.trigger("change")};b.changed();return!0};t.prototype.initializeCanvas=function(a){var B=document.createElement("canvas"),J=c(B);a.width===a.height&&"ratio"===a.height&&(a.width="100%");J.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==a.height&&a.height?a.height.toString(10):1).css("width","ratio"!==a.width&&a.width?a.width.toString(10):1);J.appendTo(this.$parent);"ratio"===a.height?
J.css("height",Math.round(J.width()/a.sizeRatio)):"ratio"===a.width&&J.css("width",Math.round(J.height()*a.sizeRatio));J.addClass(h);B.width=J.width();B.height=J.height();a=B;if(a.getContext)a=!1;else{J=a.ownerDocument.parentWindow;var b=J.FlashCanvas?a.ownerDocument.parentWindow.FlashCanvas:"undefined"===typeof FlashCanvas?void 0:FlashCanvas;if(b){a=b.initElement(a);b=1;J&&J.screen&&J.screen.deviceXDPI&&J.screen.logicalXDPI&&(b=1*J.screen.deviceXDPI/J.screen.logicalXDPI);if(1!==b)try{c(a).children("object").get(0).resize(Math.ceil(a.width*
b),Math.ceil(a.height*b)),a.getContext("2d").scale(b,b)}catch(d){}a=!0}else throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");}this.isCanvasEmulator=a;B.onselectstart=function(d){d&&d.preventDefault&&d.preventDefault();d&&d.stopPropagation&&d.stopPropagation();return!1};return B};var N=window,P=function(a,B){var J=new Image,b=this;J.onload=function(){b.getContext("2d").drawImage(J,0,0,J.width<b.width?J.width:b.width,J.height<b.height?J.height:b.height)};J.src="data:"+
B+","+a},S=function(a){this.find("canvas."+h).add(this.filter("canvas."+h)).data(h+".this").resetCanvas(a);return this},X=function(a,B){if(void 0!==B||"string"!==typeof a||"data:"!==a.substr(0,5)||(B=a.slice(5).split(",")[0],a=a.slice(6+B.length),B!==a)){var J=this.find("canvas."+h).add(this.filter("canvas."+h));if(ma.hasOwnProperty(B))0!==J.length&&ma[B].call(J[0],a,B,function(b){return function(){return b.resetCanvas.apply(b,arguments)}}(J.data(h+".this")));else throw Error(h+" is unable to find import plugin with for format '"+
String(B)+"'");return this}},ea=new q,fa=h,sa,W=function(){ea.publish(fa+".parentresized")};c(N).bind("resize."+fa,function(){sa&&clearTimeout(sa);sa=setTimeout(W,500)}).bind("mouseup."+fa,function(){ea.publish(fa+".windowmouseup")});var ja={},ka={"default":function(){return this.toDataURL()},"native":function(a){return a},image:function(){var a=this.toDataURL();if("string"===typeof a&&4<a.length&&"data:"===a.slice(0,5)&&-1!==a.indexOf(",")){var B=a.indexOf(",");return[a.slice(5,B),a.substr(B+1)]}return[]}},
ma={"native":function(a,B,J){J(a)},image:P,"image/png;base64":P,"image/jpeg;base64":P,"image/jpg;base64":P},ra={"export":ka,"import":ma,instance:ja},Ca={init:function(a){return this.each(function(){var B,J=!1;for(B=this.parentNode;B&&!J;)J=B.body,B=B.parentNode;!J||new t(this,a,ja)})},getSettings:function(){return this.find("canvas."+h).add(this.filter("canvas."+h)).data(h+".this").settings},clear:S,reset:S,addPlugin:function(a,B,J){ra.hasOwnProperty(a)&&(ra[a][B]=J);return this},listPlugins:function(a){var B=
[];if(ra.hasOwnProperty(a)){a=ra[a];for(var J in a)a.hasOwnProperty(J)&&B.push(J)}return B},getData:function(a){var B=this.find("canvas."+h).add(this.filter("canvas."+h));void 0===a&&(a="default");if(0!==B.length&&ka.hasOwnProperty(a))return ka[a].call(B.get(0),B.data(h+".data"))},importData:X,setData:X,globalEvents:function(){return ea},events:function(){return this.find("canvas."+h).add(this.filter("canvas."+h)).data(h+".this").events}};c.fn[h]=function(a){if(!a||"object"===typeof a)return Ca.init.apply(this,
arguments);if("string"===typeof a&&Ca[a])return Ca[a].apply(this,Array.prototype.slice.call(arguments,1));c.error("Method "+String(a)+" does not exist on dvJQuery."+h)}})();(function(){c.fn.jSignature("addPlugin","instance","UndoButton",function(y){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[y]){var D=this.settings[y];"function"!==typeof D&&(D=function(){var l=c('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),
q=l.width();l.css("left",Math.round((this.canvas.width-q)/2));q!==l.width()&&l.width(q);return l});var M=D.call(this),u=this;u.events.subscribe("jSignature.change",function(){u.dataEngine.data.length?M.show():M.hide()});var t=this,h=(this.events.topics.hasOwnProperty("jSignature.undo")?y:"jSignature")+".undo";M.bind("click",function(){t.events.publish(h)});t.events.subscribe(h,function(){var l=t.dataEngine.data;l.length&&(l.pop(),t.resetCanvas(l))})}})})})();(function(){for(var y={},D={},M="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),
u=M.length/2,t=u-1;-1<t;t--)y[M[t]]=M[t+u],D[M[t+u]]=M[t];var h=function(N){N=N.split("");for(var P=N.length,S=1;S<P;S++)N[S]=y[N[S]];return N.join("")},l=function(N){for(var P=[],S=0,X=1,ea=N.length,fa,sa,W=0;W<ea;W++)fa=Math.round(N[W]),sa=fa-S,S=fa,0>sa&&0<X?(X=-1,P.push("Z")):0<sa&&0>X&&(X=1,P.push("Y")),fa=Math.abs(sa),fa>=u?P.push(h(fa.toString(u))):P.push(fa.toString(u));return P.join("")},q=function(N){var P=[];N=N.split("");for(var S=N.length,X,ea=1,fa=[],sa=0,W=0;W<S;W++)X=N[W],X in y||
"Z"===X||"Y"===X?(0!==fa.length&&(fa=parseInt(fa.join(""),u)*ea+sa,P.push(fa),sa=fa),"Z"===X?(ea=-1,fa=[]):"Y"===X?(ea=1,fa=[]):fa=[X]):fa.push(D[X]);P.push(parseInt(fa.join(""),u)*ea+sa);return P},z=function(N){for(var P=[],S=N.length,X,ea=0;ea<S;ea++)X=N[ea],P.push(l(X.x)),P.push(l(X.y));return P.join("_")},E=function(N){var P=[];N=N.split("_");for(var S=N.length/2,X=0;X<S;X++)P.push({x:q(N[2*X]),y:q(N[2*X+1])});return P};M=function(N){return["image/jsignature;base30",z(N)]};t=function(N,P,S){"string"===
typeof N&&("image/jsignature;base30"===N.substring(0,23).toLowerCase()&&(N=N.substring(24)),S(E(N)))};if(null==this.dvJQuery)throw Error("We need dvJQuery for some of the functionality. dvJQuery is not detected. Failing to initialize...");var L=this.dvJQuery.fn.jSignature;L("addPlugin","export","base30",M);L("addPlugin","export","image/jsignature;base30",M);L("addPlugin","import","base30",t);L("addPlugin","import","image/jsignature;base30",t);this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:h,
compressstrokeleg:l,uncompressstrokeleg:q,compressstrokes:z,uncompressstrokes:E,charmap:y})}).call("undefined"!==typeof window?window:this);(function(){function y(L,N){this.x=L;this.y=N;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var P=function(S){return Math.round(S/Math.abs(S))};this.resizeTo=function(S){if(0===this.x&&0===this.y)this._length=
0;else if(0===this.x)this._length=S,this.y=S*P(this.y);else if(0===this.y)this._length=S,this.x=S*P(this.x);else{var X=Math.abs(this.y/this.x),ea=Math.sqrt(Math.pow(S,2)/(1+Math.pow(X,2)));X*=ea;this._length=S;this.x=ea*P(this.x);this.y=X*P(this.y)}return this};this.angleTo=function(S){var X=this.getLength()*S.getLength();return 0===X?0:Math.acos(Math.min(Math.max((this.x*S.x+this.y*S.y)/X,-1),1))/Math.PI}}function D(L,N){this.x=L;this.y=N;this.getVectorToCoordinates=function(P,S){return new y(P-
this.x,S-this.y)};this.getVectorFromCoordinates=function(P,S){return this.getVectorToCoordinates(P,S).reverse()};this.getVectorToPoint=function(P){return new y(P.x-this.x,P.y-this.y)};this.getVectorFromPoint=function(P){return this.getVectorToPoint(P).reverse()}}function M(L,N){N=Math.pow(10,N);return Math.round(L*N)/N}function u(L){var N=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],
P,S=L.length,X,ea=[],fa=[],sa=X=P=0,W=0,ja=[];if(0!==S){for(P=0;P<S;P++){sa=L[P];W=[];X={x:[],y:[]};var ka;var ma=0;for(ka=sa.x.length;ma<ka;ma++)W.push({x:sa.x[ma],y:sa.y[ma]});W=simplify(W,.7,!0);ma=0;for(ka=W.length;ma<ka;ma++)X.x.push(W[ma].x),X.y.push(W[ma].y);ja.push(X);ea=ea.concat(X.x);fa=fa.concat(X.y)}L=Math.min.apply(null,ea)-1;S=Math.max.apply(null,ea)+1;ea=Math.min.apply(null,fa)-1;fa=Math.max.apply(null,fa)+1;sa=0>L?0:L;W=0>ea?0:ea;P=S-L;X=fa-ea}N.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+
P.toString()+'" height="'+X.toString()+'">');P=0;for(S=ja.length;P<S;P++){X=ja[P];L=N;ea=L.push;ma=X;X=sa;fa=W;X=["M",M(ma.x[0]-X,2),M(ma.y[0]-fa,2)];fa=1;for(ka=ma.x.length-1;fa<ka;fa++){var ra=X.push,Ca=ra.apply,a=X,B=ma,J=fa,b=1;J+=1;var d=new D(B.x[J-1],B.y[J-1]);var e=new D(B.x[J],B.y[J]);e=d.getVectorToPoint(e);var g=new D(B.x[J-2],B.y[J-2]);d=g.getVectorToPoint(d);d=d.getLength()>b?(b=2<J?(new D(B.x[J-3],B.y[J-3])).getVectorToPoint(g):new y(0,0),B=.35*d.getLength(),g=d.angleTo(b.reverse()),
J=e.angleTo(d.reverse()),b=(new y(b.x+d.x,b.y+d.y)).resizeTo(Math.max(.05,g)*B),e=(new y(d.x+e.x,d.y+e.y)).reverse().resizeTo(Math.max(.05,J)*B),e=new y(d.x+e.x,d.y+e.y),["c",M(b.x,2),M(b.y,2),M(e.x,2),M(e.y,2),M(d.x,2),M(d.y,2)]):["l",M(d.x,2),M(d.y,2)];Ca.call(ra,a,d)}0<ka?(ka=X.push,ra=ka.apply,Ca=X,J=fa,fa=ma.x.length-1,a=new D(ma.x[fa],ma.y[fa]),B=new D(ma.x[fa-1],ma.y[fa-1]),a=B.getVectorToPoint(a),1<fa&&a.getLength()>J?(fa=(new D(ma.x[fa-2],ma.y[fa-2])).getVectorToPoint(B),B=a.angleTo(fa.reverse()),
ma=.35*a.getLength(),fa=(new y(fa.x+a.x,fa.y+a.y)).resizeTo(Math.max(.05,B)*ma),fa=["c",M(fa.x,2),M(fa.y,2),M(a.x,2),M(a.y,2),M(a.x,2),M(a.y,2)]):fa=["l",M(a.x,2),M(a.y,2)],ra.call(ka,Ca,fa)):0===ka&&X.push.apply(X,["l",1,1]);X=X.join(" ");ea.call(L,'<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+X+'"/>')}N.push("</svg>");return N.join("")}function t(L){return[z,u(L)]}function h(L){return[E,q(u(L))]}var l=window;"use strict";("undefined"!=typeof exports?
exports:l).simplify=function(L,N,P){N=void 0!==N?N*N:1;if(!P){var S=L.length,X=L[0],ea=[X];for(P=1;P<S;P++){var fa=L[P];var sa=fa.x-X.x,W=fa.y-X.y;sa*sa+W*W>N&&(ea.push(fa),X=fa)}L=(X!==fa&&ea.push(fa),ea)}fa=L;P=fa.length;S=new ("undefined"!=typeof Uint8Array?Uint8Array:Array)(P);X=0;ea=P-1;var ja,ka=[],ma=[],ra=[];for(S[X]=S[ea]=1;ea;){W=0;for(sa=X+1;sa<ea;sa++){var Ca=fa[sa];var a=fa[X],B=fa[ea],J=a.x,b=a.y;a=B.x-J;var d=B.y-b;if(0!==a||0!==d){var e=((Ca.x-J)*a+(Ca.y-b)*d)/(a*a+d*d);1<e?(J=B.x,
b=B.y):0<e&&(J+=a*e,b+=d*e)}Ca=(a=Ca.x-J,d=Ca.y-b,a*a+d*d);Ca>W&&(ja=sa,W=Ca)}W>N&&(S[ja]=1,ka.push(X),ma.push(ja),ka.push(ja),ma.push(ea));X=ka.pop();ea=ma.pop()}for(sa=0;sa<P;sa++)S[sa]&&ra.push(fa[sa]);return L=ra,L};if("function"!==typeof q)var q=function(L){var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),P=0,S=0;var X=[];do{var ea=L.charCodeAt(P++);var fa=L.charCodeAt(P++);var sa=L.charCodeAt(P++);var W=ea<<16|fa<<8|sa;ea=W>>18&63;fa=W>>12&63;sa=W>>6&63;W&=
63;X[S++]=N[ea]+N[fa]+N[sa]+N[W]}while(P<L.length);X=X.join("");L=L.length%3;return(L?X.slice(0,L-3):X)+"===".slice(L||3)};var z="image/svg+xml",E="image/svg+xml;base64";if("undefined"===typeof c)throw Error("We need dvJQuery for some of the functionality. dvJQuery is not detected. Failing to initialize...");l=c.fn.jSignature;l("addPlugin","export","svg",t);l("addPlugin","export",z,t);l("addPlugin","export","svgbase64",h);l("addPlugin","export",E,h)})()}(dvJQuery),dvJQuery&&function(c){var y=!1,D=
{x:null,y:null},M=null,u={init:function(t){function h(){"none"!==c("#"+t.idMenu).css("display")&&(c("#"+t.idMenu).css("opacity",1),clearTimeout(M),M=null)}function l(){"none"!==c("#"+t.idMenu).css("display")&&(c("#"+t.idMenu).css("opacity",.85),clearTimeout(M),M=setTimeout(function(){c("#"+t.idMenu).hide()},2E3))}"string"===typeof t&&(t={idMenu:t});t=c.extend(!0,{},c.fn.dvContextMenu.defaults,t);t.idMenu?null===document.getElementById(t.idMenu)&&c.error("The menu specified does not exist"):c.error("No menu specified");
u.destroy.call(this);this.data("dv-context-menu",t);var q="dv-context-menu-"+t.idMenu;c("html").on("contextmenu."+q+" click."+q,function(){y?y=!1:c("#"+t.idMenu).hide()});c(t.referrer).on("contextmenu."+q+" scroll."+q,function(z){if("none"!==c("#"+t.idMenu).css("display")){var E={x:z.target.scrollLeft,y:z.target.scrollTop};z=E.x-D.x;var L=E.y-D.y;D=E;E=parseInt(c("#"+t.idMenu).css("top").slice(0,-2))-L;z=parseInt(c("#"+t.idMenu).css("left").slice(0,-2))-z;c("#"+t.idMenu).css({left:z+"px",top:E+"px"})}});
c("#"+t.idMenu).on("contextmenu."+q+" mouseenter."+q,h);c("#"+t.idMenu).on("contextmenu."+q+" mouseleave."+q,l);this.on("contextmenu."+q,function(z){z.preventDefault();z.stopPropagation();if(null==t.beforeShow||"function"!==typeof t.beforeShow||t.beforeShow()){var E={x:z.clientX,y:z.clientY};null!=t.translateMouse&&"function"===typeof t.translateMouse&&t.translateMouse(E);c("#"+t.idMenu).css({left:E.x+"px",top:E.y+"px"});c("#"+t.idMenu).css("opacity",1);c("#"+t.idMenu).show();D={x:z.currentTarget.scrollLeft,
y:z.currentTarget.scrollTop};z.skipNextCloseEvent&&(y=z.skipNextCloseEvent);t.dependsOnTextSelection&&(z=c(t.referrer).children('[data-dv-sel-type="us"]'),z.on("contextmenu."+q+" mouseenter."+q,h),z.on("contextmenu."+q+" mouseleave."+q,l))}});return this},destroy:function(){this.each(function(){var t=c(this),h=t.data("dv-context-menu");void 0!==h&&(c("#"+h.idMenu).hide(),t.removeData("dv-context-menu").off(".dv-context-menu-"+h.idMenu))});c("html").off(".dv-context-menu");return this}};c.fn.dvContextMenu=
function(t){if(u[t])return u[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof t&&"string"!==typeof t&&t)c.error("Method "+t+" does not exist on dvJQuery.dvContextMenu");else return u.init.apply(this,arguments)};c.fn.dvContextMenu.defaults={idMenu:null,translateMouse:null,beforeShow:null,dependsOnTextSelection:!1}}(dvJQuery),dvJQuery&&function(c){function y(a,B){Ca();var J=c('<div class="minicolors" />'),b=c.minicolors.defaults,d;if(!a.data("minicolors-initialized")){B=c.extend(!0,
{},b,B);J.addClass("minicolors-theme-"+B.theme).toggleClass("minicolors-with-opacity",B.opacity);void 0!==B.position&&c.each(B.position.split(" "),function(){J.addClass("minicolors-position-"+this)});b="rgb"===B.format?B.opacity?"25":"20":B.keywords?"11":"7";a.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",B).prop("size",b).wrap(J).after('<div class="minicolors-panel minicolors-slider-'+B.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>');
B.inline||(a.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),a.next(".minicolors-input-swatch").on("click",function(g){g.preventDefault();a.focus()}));b=a.parent().find(".minicolors-panel");b.on("selectstart",function(){return!1}).end();if(B.swatches&&0!==B.swatches.length)for(b.addClass("minicolors-with-swatches"),b=c('<ul class="minicolors-swatches"></ul>').appendTo(b),d=0;d<B.swatches.length;++d){var e=B.swatches[d];
e=fa(e)?S(e,!0):ra(P(e,!0));c('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(b).data("swatch-color",B.swatches[d]).find(".minicolors-swatch-color").css({backgroundColor:ja(e),opacity:e.a});B.swatches[d]=e}B.inline&&a.parent().addClass("minicolors-inline");q(a,!1);a.data("minicolors-initialized",!0)}}function D(a){var B=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");
B.before(a).remove();c(B).off(".minicolors")}function M(a){var B=a.parent(),J=B.find(".minicolors-panel"),b=a.data("minicolors-settings");!a.data("minicolors-initialized")||a.prop("disabled")||B.hasClass("minicolors-inline")||B.hasClass("minicolors-focus")||(u(),B.addClass("minicolors-focus"),J.stop(!0,!0).fadeIn(b.showSpeed,function(){b.show&&b.show.call(a.get(0))}))}function u(){c(".minicolors-focus").each(function(){var a=c(this),B=a.find(".minicolors-input"),J=a.find(".minicolors-panel"),b=B.data("minicolors-settings");
J.fadeOut(b.hideSpeed,function(){b.hide&&"function"===typeof b.hide&&b.hide.call(B.get(0));a.removeClass("minicolors-focus")})})}function t(a,B,J){var b=a.parents(".minicolors").find(".minicolors-input"),d=b.data("minicolors-settings"),e=a.find("[class$=-picker]"),g=a.offset().left,k=a.offset().top,p=Math.round(B.pageX-g),n=Math.round(B.pageY-k);J=J?d.animationSpeed:0;B.originalEvent.changedTouches&&(p=B.originalEvent.changedTouches[0].pageX-g,n=B.originalEvent.changedTouches[0].pageY-k);0>p&&(p=
0);0>n&&(n=0);p>a.width()&&(p=a.width());n>a.height()&&(n=a.height());a.parent().is(".minicolors-slider-wheel")&&e.parent().is(".minicolors-grid")&&(g=75-p,k=75-n,B=Math.sqrt(g*g+k*k),g=Math.atan2(k,g),0>g&&(g+=2*Math.PI),75<B&&(B=75,p=75-75*Math.cos(g),n=75-75*Math.sin(g)),p=Math.round(p),n=Math.round(n));a.is(".minicolors-grid")?e.stop(!0).animate({top:n+"px",left:p+"px"},J,d.animationEasing,function(){h(b,a)}):e.stop(!0).animate({top:n+"px"},J,d.animationEasing,function(){h(b,a)})}function h(a,
B){function J(Y,aa){if(!Y.length||!aa)return null;var ha=Y.offset().left;var da=Y.offset().top;return{x:ha-aa.offset().left+Y.outerWidth()/2,y:da-aa.offset().top+Y.outerHeight()/2}}var b=a.val();var d=a.attr("data-opacity");var e=a.parent();var g=a.data("minicolors-settings"),k=e.find(".minicolors-input-swatch");var p=e.find(".minicolors-grid");var n=e.find(".minicolors-slider"),w=e.find(".minicolors-opacity-slider");var C=p.find("[class$=-picker]");var K=n.find("[class$=-picker]"),F=w.find("[class$=-picker]");
C=J(C,p);K=J(K,n);F=J(F,w);if(B.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(g.control){case "wheel":b=p.width()/2-C.x;e=p.height()/2-C.y;p=Math.sqrt(b*b+e*e);b=Math.atan2(e,b);0>b&&(b+=2*Math.PI);75<p&&(p=75,C.x=69-75*Math.cos(b),C.y=69-75*Math.sin(b));B=ea(p/.75,0,100);d=ea(180*b/Math.PI,0,360);C=ea(100-Math.floor(K.y*(100/n.height())),0,100);b=ka({h:d,s:B,b:C});n.css("backgroundColor",ka({h:d,s:B,b:100}));break;case "saturation":d=ea(parseInt(C.x*(360/p.width()),
10),0,360);B=ea(100-Math.floor(K.y*(100/n.height())),0,100);C=ea(100-Math.floor(C.y*(100/p.height())),0,100);b=ka({h:d,s:B,b:C});n.css("backgroundColor",ka({h:d,s:100,b:C}));e.find(".minicolors-grid-inner").css("opacity",B/100);break;case "brightness":d=ea(parseInt(C.x*(360/p.width()),10),0,360);B=ea(100-Math.floor(C.y*(100/p.height())),0,100);C=ea(100-Math.floor(K.y*(100/n.height())),0,100);b=ka({h:d,s:B,b:C});n.css("backgroundColor",ka({h:d,s:B,b:100}));e.find(".minicolors-grid-inner").css("opacity",
1-C/100);break;default:d=ea(360-parseInt(K.y*(360/n.height()),10),0,360),B=ea(Math.floor(C.x*(100/p.width())),0,100),C=ea(100-Math.floor(C.y*(100/p.height())),0,100),b=ka({h:d,s:B,b:C}),p.css("backgroundColor",ka({h:d,s:100,b:100}))}d=g.opacity?parseFloat(1-F.y/w.height()).toFixed(2):1;l(a,b,d)}else k.find("span").css({backgroundColor:b,opacity:d}),z(a,b,d)}function l(a,B,J){var b=a.parent(),d=a.data("minicolors-settings");b=b.find(".minicolors-input-swatch");d.opacity&&a.attr("data-opacity",J);if("rgb"===
d.format){B=fa(B)?S(B,!0):ra(P(B,!0));J=""===a.attr("data-opacity")?1:ea(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);if(isNaN(J)||!d.opacity)J=1;B=1>=a.minicolors("rgbObject").a&&B&&d.opacity?"rgba("+B.r+", "+B.g+", "+B.b+", "+parseFloat(J)+")":"rgb("+B.r+", "+B.g+", "+B.b+")"}else fa(B)&&(B=W(B)),B=N(B,d.letterCase);a.val(B);b.find("span").css({backgroundColor:B,opacity:J});z(a,B,J)}function q(a,B){var J;var b=a.parent();var d=a.data("minicolors-settings");var e=b.find(".minicolors-input-swatch");
var g=b.find(".minicolors-grid"),k=b.find(".minicolors-slider"),p=b.find(".minicolors-opacity-slider"),n=g.find("[class$=-picker]"),w=k.find("[class$=-picker]"),C=p.find("[class$=-picker]");if(fa(a.val())){var K=W(a.val());(J=ea(parseFloat(sa(a.val())).toFixed(2),0,1))&&a.attr("data-opacity",J)}else K=N(P(a.val(),!0),d.letterCase);K||(K=N(X(d.defaultValue,!0),d.letterCase));J=ma(K);var F=d.keywords?c.map(d.keywords.split(","),function(aa){return c.trim(aa.toLowerCase())}):[];F=""!==a.val()&&-1<c.inArray(a.val().toLowerCase(),
F)?N(a.val()):fa(a.val())?S(a.val()):K;B||a.val(F);if(d.opacity){var Y=""===a.attr("data-opacity")?1:ea(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);isNaN(Y)&&(Y=1);a.attr("data-opacity",Y);e.find("span").css("opacity",Y);B=ea(p.height()-p.height()*Y,0,p.height());C.css("top",B+"px")}"transparent"===a.val().toLowerCase()&&e.find("span").css("opacity",0);e.find("span").css("backgroundColor",K);switch(d.control){case "wheel":b=ea(Math.ceil(.75*J.s),0,g.height()/2);e=J.h*Math.PI/180;d=ea(75-Math.cos(e)*
b,0,g.width());B=ea(75-Math.sin(e)*b,0,g.height());n.css({top:B+"px",left:d+"px"});B=150-J.b/(100/g.height());""===K&&(B=0);w.css("top",B+"px");k.css("backgroundColor",ka({h:J.h,s:J.s,b:100}));break;case "saturation":d=ea(5*J.h/12,0,150);B=ea(g.height()-Math.ceil(J.b/(100/g.height())),0,g.height());n.css({top:B+"px",left:d+"px"});B=ea(k.height()-J.s*(k.height()/100),0,k.height());w.css("top",B+"px");k.css("backgroundColor",ka({h:J.h,s:100,b:J.b}));b.find(".minicolors-grid-inner").css("opacity",J.s/
100);break;case "brightness":d=ea(5*J.h/12,0,150);B=ea(g.height()-Math.ceil(J.s/(100/g.height())),0,g.height());n.css({top:B+"px",left:d+"px"});B=ea(k.height()-J.b*(k.height()/100),0,k.height());w.css("top",B+"px");k.css("backgroundColor",ka({h:J.h,s:J.s,b:100}));b.find(".minicolors-grid-inner").css("opacity",1-J.b/100);break;default:d=ea(Math.ceil(J.s/(100/g.width())),0,g.width()),B=ea(g.height()-Math.ceil(J.b/(100/g.height())),0,g.height()),n.css({top:B+"px",left:d+"px"}),B=ea(k.height()-J.h/(360/
k.height()),0,k.height()),w.css("top",B+"px"),g.css("backgroundColor",ka({h:J.h,s:100,b:100}))}a.data("minicolors-initialized")&&z(a,F,Y)}function z(a,B,J){var b=a.data("minicolors-settings"),d=a.data("minicolors-lastChange"),e;if(!d||d.value!==B||d.opacity!==J){a.data("minicolors-lastChange",{value:B,opacity:J});if(b.swatches&&0!==b.swatches.length){d=fa(B)?S(B,!0):ra(B);var g=-1;for(e=0;e<b.swatches.length;++e)if(d.r===b.swatches[e].r&&d.g===b.swatches[e].g&&d.b===b.swatches[e].b&&d.a===b.swatches[e].a){g=
e;break}a.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected");-1!==g&&a.parent().find(".minicolors-swatches .minicolors-swatch").eq(e).addClass("selected")}b.change&&(b.changeDelay?(clearTimeout(a.data("minicolors-changeTimeout")),a.data("minicolors-changeTimeout",setTimeout(function(){b.change.call(a.get(0),B,J)},b.changeDelay))):b.change.call(a.get(0),B,J));a.trigger("change").trigger("input")}}function E(a){var B=c(a).attr("data-opacity");fa(c(a).val())?a=S(c(a).val(),
!0):(a=P(c(a).val(),!0),a=ra(a));if(!a)return null;void 0!==B&&c.extend(a,{a:parseFloat(B)});return a}function L(a,B){var J=c(a).attr("data-opacity");fa(c(a).val())?a=S(c(a).val(),!0):(a=P(c(a).val(),!0),a=ra(a));if(!a)return null;void 0===J&&(J=1);return B?"rgba("+a.r+", "+a.g+", "+a.b+", "+parseFloat(J)+")":"rgb("+a.r+", "+a.g+", "+a.b+")"}function N(a,B){return"uppercase"===B?a.toUpperCase():a.toLowerCase()}function P(a,B){a=a.replace(/^#/g,"");if(!a.match(/^[A-F0-9]{3,6}/ig)||3!==a.length&&6!==
a.length)return"";3===a.length&&B&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a}function S(a,B){a=a.replace(/[^\d,.]/g,"").split(",");a[0]=ea(parseInt(a[0],10),0,255);a[1]=ea(parseInt(a[1],10),0,255);a[2]=ea(parseInt(a[2],10),0,255);a[3]&&(a[3]=ea(parseFloat(a[3],10),0,1));return B?a[3]?{r:a[0],g:a[1],b:a[2],a:a[3]}:{r:a[0],g:a[1],b:a[2]}:"undefined"!==typeof a[3]&&1>=a[3]?"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")":"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function X(a,B){return fa(a)?S(a):P(a,B)}
function ea(a,B,J){a<B&&(a=B);a>J&&(a=J);return a}function fa(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?!0:!1}function sa(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===a.length?a[4]:"1"}function W(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+
("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function ja(a){var B=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];c.each(B,function(J,b){1===b.length&&(B[J]="0"+b)});return"#"+B.join("")}function ka(a){var B=ja,J,b;var d=Math.round(a.h);var e=Math.round(255*a.s/100);a=Math.round(255*a.b/100);if(0===e)d=J=b=a;else{e=(255-e)*a/255;var g=d%60*(a-e)/60;360===d&&(d=0);60>d?(d=a,b=e,J=e+g):120>d?(J=a,b=e,d=a-g):180>d?(J=a,d=e,b=e+g):240>d?(b=a,d=
e,J=a-g):300>d?(b=a,J=e,d=e+g):360>d?(d=a,J=e,b=a-g):b=J=d=0}return B({r:Math.round(d),g:Math.round(J),b:Math.round(b)})}function ma(a){a=ra(a);var B={h:0,s:0,b:0},J=Math.max(a.r,a.g,a.b),b=J-Math.min(a.r,a.g,a.b);B.b=J;B.s=0!==J?255*b/J:0;B.h=0!==B.s?a.r===J?(a.g-a.b)/b:a.g===J?2+(a.b-a.r)/b:4+(a.r-a.g)/b:-1;B.h*=60;0>B.h&&(B.h+=360);B.s*=100/255;B.b*=100/255;0===B.s&&(B.h=360);return B}function ra(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}}function Ca(){c([document]).on("mousedown.minicolors touchstart.minicolors",
function(a){c(a.target).parents().add(a.target).hasClass("minicolors")||u()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(a){var B=c(this);a.preventDefault();c(a.delegateTarget).data("minicolors-target",B);t(B,a,!0)}).on("mousemove.minicolors touchmove.minicolors",function(a){var B=c(a.delegateTarget).data("minicolors-target");B&&t(B,a)}).on("mouseup.minicolors touchend.minicolors",function(){c(this).removeData("minicolors-target")}).on("click.minicolors",
".minicolors-swatches li",function(a){a.preventDefault();var B=c(this);a=B.parents(".minicolors").find(".minicolors-input");B=B.data("swatch-color");l(a,B,sa(B));q(a)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(a){var B=c(this).parent().find(".minicolors-input");a.preventDefault();M(B)}).on("focus.minicolors",".minicolors-input",function(){var a=c(this);a.data("minicolors-initialized")&&M(a)}).on("blur.minicolors",".minicolors-input",function(){var a=c(this),
B=a.data("minicolors-settings");if(a.data("minicolors-initialized")){var J=B.keywords?c.map(B.keywords.split(","),function(d){return c.trim(d.toLowerCase())}):[];if(""!==a.val()&&-1<c.inArray(a.val().toLowerCase(),J))var b=a.val();else J=fa(a.val())?S(a.val(),!0):(J=P(a.val(),!0))?ra(J):null,b=null===J?B.defaultValue:"rgb"===B.format?B.opacity?S("rgba("+J.r+","+J.g+","+J.b+","+a.attr("data-opacity")+")"):S("rgb("+J.r+","+J.g+","+J.b+")"):ja(J);J=B.opacity?a.attr("data-opacity"):1;"transparent"===
b.toLowerCase()&&(J=0);a.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",J);a.val(b);""===a.val()&&a.val(X(B.defaultValue,!0));a.val(N(a.val(),B.letterCase))}}).on("keydown.minicolors",".minicolors-input",function(a){var B=c(this);if(B.data("minicolors-initialized"))switch(a.keyCode){case 9:u();break;case 13:case 27:u(),B.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var a=c(this);a.data("minicolors-initialized")&&q(a,!0)}).on("paste.minicolors",".minicolors-input",
function(){var a=c(this);a.data("minicolors-initialized")&&setTimeout(function(){q(a,!0)},1)})}c.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom right",show:null,showSpeed:100,theme:"default",swatches:[]}};c.extend(c.fn,{minicolors:function(a,B){switch(a){case "destroy":return c(this).each(function(){D(c(this))}),c(this);
case "hide":return u(),c(this);case "opacity":if(void 0===B)return c(this).attr("data-opacity");c(this).each(function(){q(c(this).attr("data-opacity",B))});return c(this);case "rgbObject":return E(c(this),"rgbaObject"===a);case "rgbString":case "rgbaString":return L(c(this),"rgbaString"===a);case "settings":if(void 0===B)return c(this).data("minicolors-settings");c(this).each(function(){var J=c(this).data("minicolors-settings")||{};D(c(this));c(this).minicolors(c.extend(!0,J,B))});return c(this);
case "show":return M(c(this).eq(0)),c(this);case "value":if(void 0===B)return c(this).val();c(this).each(function(){"object"===typeof B&&null!==B?(B.opacity&&c(this).attr("data-opacity",ea(B.opacity,0,1)),B.color&&c(this).val(B.color)):c(this).val(B);q(c(this))});return c(this);default:return"create"!==a&&(B=a),c(this).each(function(){y(c(this),B)}),c(this)}}})}(dvJQuery),dvJQuery&&function(c){var y,D=function(){var u=c(this);setTimeout(function(){u.find(":dvUi-dvButton").dvButton("refresh")},1)},
M=function(u){var t=u.name,h=u.form,l=c([]);t&&(t=t.replace(/'/g,"\\'"),l=h?c(h).find("[name='"+t+"'][type=radio]"):c("[name='"+t+"'][type=radio]",u.ownerDocument).filter(function(){return!this.form}));return l};c.widget("dvUi.dvButton",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null},setActive:null},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,D);"boolean"!==
typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var u=this,t=this.options,h="checkbox"===this.type||"radio"===this.type,l=h?"":"dvUi-state-active";null===t.label&&(t.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){t.disabled||this===y&&c(this).addClass("dvUi-state-active")}).bind("mouseleave"+this.eventNamespace,function(){t.disabled||c(this).removeClass(l)}).bind("click"+this.eventNamespace,function(q){t.disabled&&(q.preventDefault(),q.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("dvUi-state-focus")},blur:function(){this.buttonElement.removeClass("dvUi-state-focus")}});h&&this.element.bind("change"+this.eventNamespace,
function(){u.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1;c(this).addClass("dvUi-state-active");u.buttonElement.attr("aria-pressed","true");var q=u.element[0];M(q).not(q).map(function(){return c(this).dvButton("widget")[0]}).removeClass("dvUi-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+
this.eventNamespace,function(){if(t.disabled)return!1;c(this).addClass("dvUi-state-active");y=this;u.document.one("mouseup",function(){y=null})}).bind("mouseup"+this.eventNamespace,function(){if(t.disabled)return!1;c(this).removeClass("dvUi-state-active")}).bind("keydown"+this.eventNamespace,function(q){if(t.disabled)return!1;q.keyCode!==c.dvUi.keyCode.SPACE&&q.keyCode!==c.dvUi.keyCode.ENTER||c(this).addClass("dvUi-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){c(this).removeClass("dvUi-state-active")}),
this.buttonElement.is("a")&&this.buttonElement.keyup(function(q){q.keyCode===c.dvUi.keyCode.SPACE&&c(this).click()}));this._setOption("disabled",t.disabled);this._resetButton()},_determineButtonType:function(){this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if("checkbox"===this.type||"radio"===this.type){var u=this.element.parents().last();var t="label[for='"+this.element.attr("id")+
"']";this.buttonElement=u.find(t);this.buttonElement.length||(u=u.length?u.siblings():this.element.siblings(),this.buttonElement=u.filter(t),this.buttonElement.length||(this.buttonElement=u.find(t)));this.element.addClass("dvUi-helper-hidden-accessible");(u=this.element.is(":checked"))&&this.buttonElement.addClass("dvUi-state-active");this.buttonElement.prop("aria-pressed",u)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("dvUi-helper-hidden-accessible");
this.buttonElement.removeClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all dvUi-state-active dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".dvUi-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(u,t){this._super(u,t);"disabled"===u?(this.widget().toggleClass("dvUi-state-disabled",
!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("dvUi-state-focus"):this.buttonElement.removeClass("dvUi-state-focus dvUi-state-active"))):this._resetButton()},refresh:function(){var u=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("dvUi-button-disabled"),t=this;u!==this.options.disabled&&this._setOption("disabled",u);"radio"===this.type?M(this.element[0]).each(function(){c(this).is(":checked")?
(c(this).dvButton("widget").addClass("dvUi-state-active").attr("aria-pressed","true"),t._trigger("setActive")):c(this).dvButton("widget").removeClass("dvUi-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?(this.buttonElement.addClass("dvUi-state-active").attr("aria-pressed","true"),t._trigger("setActive")):this.buttonElement.removeClass("dvUi-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&
this.element.val(this.options.label);else{var u=this.buttonElement.removeClass("dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only"),t=c("<span></span>",this.document[0]).addClass("dvUi-button-text").html(this.options.label).appendTo(u.empty()).text(),h=this.options.icons,l=h.primary&&h.secondary,q=[];h.primary||h.secondary?(this.options.text&&q.push("dvUi-button-text-icon"+(l?"s":h.primary?"-primary":
"-secondary")),h.primary&&u.prepend("<span class='dvUi-button-icon-primary dvUi-icon "+h.primary+"'></span>"),h.secondary&&u.append("<span class='dvUi-button-icon-secondary dvUi-icon "+h.secondary+"'></span>"),this.options.text||(q.push(l?"dvUi-button-icons-only":"dvUi-button-icon-only"),this.hasTitle||u.attr("title",c.trim(t)))):q.push("dvUi-button-text-only");u.addClass(q.join(" "))}}});c.widget("dvUi.dvButtonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(dvUi-dvButton)",
setActive:null},_create:function(){this.element.addClass("dvUi-buttonset");this.refresh()},_init:function(){this.refresh()},_setOption:function(u,t){"disabled"===u&&this.buttons.dvButton("option",u,t);this._super(u,t)},refresh:function(){var u="rtl"===this.element.css("direction"),t=this.element.find(this.options.items),h=t.filter(":dvUi-dvButton");t.not(":dvUi-dvButton").dvButton({setActive:this.options.setActive});h.dvButton("refresh");this.buttons=t.map(function(){return c(this).dvButton("widget")[0]}).removeClass("dvUi-corner-all dvUi-corner-left dvUi-corner-right").filter(":first").addClass(u?
"dvUi-corner-right":"dvUi-corner-left").end().filter(":last").addClass(u?"dvUi-corner-left":"dvUi-corner-right").end().end()},_destroy:function(){this.element.removeClass("dvUi-buttonset");this.buttons.map(function(){return c(this).dvButton("widget")[0]}).removeClass("dvUi-corner-left dvUi-corner-right").end().dvButton("destroy")}});c.widget("dvUi.dvDialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,
maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(u){var t=c(this).css(u).offset().top;0>t&&c(this).css("top",u.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,
maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();
this.element.show().removeAttr("title").addClass("dvUi-dialog-content dvUi-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&c.fn.draggable&&this._makeDraggable();this.options.resizable&&c.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var u=this.options.appendTo;return u&&(u.jquery||u.nodeType)?c(u):this.document.find(u||"body").eq(0)},
_destroy:function(){var u=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("dvUi-dialog-content dvUi-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var t=u.parent.children().eq(u.index);t.length&&t[0]!==this.element[0]?t.before(this.element):u.parent.append(this.element)},widget:function(){return this.uiDialog},disable:c.noop,enable:c.noop,close:function(u){var t,
h=this;if(this._isOpen&&!1!==this._trigger("beforeClose",u)){this._isOpen=!1;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").focus().length)try{(t=this.document[0].activeElement)&&"body"!==t.nodeName.toLowerCase()&&c(t).blur()}catch(l){}this._hide(this.uiDialog,this.options.hide,function(){h._trigger("close",u)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(u,t){var h=!1,l=this.uiDialog.siblings(".dvUi-front:visible").map(function(){return+c(this).css("z-index")}).get();
l=Math.max.apply(null,l);l>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",l+1),h=!0);h&&!t&&this._trigger("focus",u);return h},open:function(){var u=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=c(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){u._focusTabbable();
u._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},refresh:function(u){u&&(this._setOption("maxHeight",u),this._size());this._position()},_focusTabbable:function(){var u=this._focusedElement;u||(u=this.element.find("[autofocus]"));u.length||(u=this.element.find(":tabbable"));u.length||(u=this.uiDialogButtonPane.find(":tabbable"));u.length||(u=this.uiDialogTitlebarClose.filter(":tabbable"));u.length||(u=this.uiDialog);u.eq(0).focus()},_keepFocus:function(u){function t(){var h=this.document[0].activeElement;
this.uiDialog[0]===h||c.contains(this.uiDialog[0],h)||this._focusTabbable()}u.preventDefault();t.call(this);this._delay(t)},_createWrapper:function(){this.uiDialog=c("<div>").addClass("dvUi-dialog dvUi-widget dvUi-widget-content dvUi-corner-all dvUi-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(u){if(this.options.closeOnEscape&&!u.isDefaultPrevented()&&u.keyCode&&u.keyCode===c.dvUi.keyCode.ESCAPE)u.preventDefault(),
this.close(u);else if(u.keyCode===c.dvUi.keyCode.TAB&&!u.isDefaultPrevented()){var t=this.uiDialog.find(":tabbable"),h=t.filter(":first"),l=t.filter(":last");u.target!==l[0]&&u.target!==this.uiDialog[0]||u.shiftKey?u.target!==h[0]&&u.target!==this.uiDialog[0]||!u.shiftKey||(this._delay(function(){l.focus()}),u.preventDefault()):(this._delay(function(){h.focus()}),u.preventDefault())}},mousedown:function(u){this._moveToTop(u)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||
this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=c("<div>").addClass("dvUi-dialog-titlebar dvUi-widget-header dvUi-corner-all dvUi-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(t){c(t.target).closest(".dvUi-dialog-titlebar-close")||this.uiDialog.focus()}});this.uiDialogTitlebarClose=c('<div class="dvUi-button"><svg width="100%" height="100%" viewbox="0 0 512 512"><path d="M490.767,471.211L275.512,255.989L490.658,40.79c5.4-5.402,5.4-14.153,0-19.555c-5.402-5.401-14.152-5.401-19.556,0l-215.148,215.2L40.79,21.302c-5.402-5.402-14.153-5.402-19.555,0c-5.401,5.402-5.401,14.153,0,19.555l215.167,215.135L21.234,471.211c-5.401,5.401-5.401,14.152,0,19.556c5.402,5.4,14.153,5.4,19.555,0l215.169-215.221l215.252,215.221c5.402,5.4,14.152,5.4,19.556,0C496.167,485.363,496.167,476.612,490.767,471.211z"/></svg></div>').addClass("dvUi-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);
this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault();this.close(t)}});var u=c("<span>").uniqueId().addClass("dvUi-dialog-title").prependTo(this.uiDialogTitlebar);this._title(u);this.uiDialog.attr({"aria-labelledby":u.attr("id")})},_title:function(u){this.options.title||u.html("&#160;");u.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=c("<div>").addClass("dvUi-dialog-buttonpane dvUi-widget-content dvUi-helper-clearfix");this.uiDialogButtonSpacer=
c("<div>").addClass("dvUi-dialog-spacer");this.uiButtonSet=c("<div>").addClass("dvUi-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var u=this,t=this.options.buttons;this.uiDialogButtonPane.remove();this.uiDialogButtonSpacer.remove();this.uiButtonSet.empty();c.isEmptyObject(t)||c.isArray(t)&&!t.length?this.uiDialog.removeClass("dvUi-dialog-buttons"):(c.each(t,function(h,l){l=c.isFunction(l)?{click:l,text:h}:l;l=c.extend({type:"button"},l);var q=
l.click;l.click=function(){q.apply(u.element[0],arguments)};h={icons:l.icons,text:l.showText};delete l.icons;delete l.showText;c("<button></button>",l).dvButton(h).appendTo(u.uiButtonSet)}),this.uiDialog.addClass("dvUi-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),this.uiDialogButtonSpacer.insertBefore(this.uiDialogButtonPane))},_makeDraggable:function(){function u(l){return{position:l.position,offset:l.offset}}var t=this,h=this.options;this.uiDialog.draggable({cancel:".dvUi-dialog-content, .dvUi-dialog-titlebar-close",
handle:".dvUi-dialog-titlebar",containment:"document",start:function(l,q){c(this).addClass("dvUi-dialog-dragging");t._blockFrames();t._trigger("dragStart",l,u(q))},drag:function(l,q){t._trigger("drag",l,u(q))},stop:function(l,q){var z=q.offset.left-t.document.scrollLeft(),E=q.offset.top-t.document.scrollTop();h.position={my:"left top",at:"left"+(0<=z?"+":"")+z+" top"+(0<=E?"+":"")+E,of:t.window};c(this).removeClass("dvUi-dialog-dragging");t._unblockFrames();t._trigger("dragStop",l,u(q))}})},_makeResizable:function(){function u(z){return{originalPosition:z.originalPosition,
originalSize:z.originalSize,position:z.position,size:z.size}}var t=this,h=this.options,l=h.resizable,q=this.uiDialog.css("position");l="string"===typeof l?l:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".dvUi-dialog-content",containment:"document",alsoResize:this.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:this._minHeight(),handles:l,start:function(z,E){c(this).addClass("dvUi-dialog-resizing");t._blockFrames();t._trigger("resizeStart",z,u(E))},resize:function(z,
E){t._trigger("resize",z,u(E))},stop:function(z,E){var L=t.uiDialog.offset(),N=L.left-t.document.scrollLeft();L=L.top-t.document.scrollTop();h.height=t.uiDialog.height();h.width=t.uiDialog.width();h.position={my:"left top",at:"left"+(0<=N?"+":"")+N+" top"+(0<=L?"+":"")+L,of:t.window};c(this).removeClass("dvUi-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",z,u(E))}}).css("position",q)},_trackFocus:function(){this._on(this.widget(),{focusin:function(u){this._makeFocusTarget();this._focusedElement=
c(u.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var u=this._trackingInstances(),t=c.inArray(this,u);-1!==t&&u.splice(t,1)},_trackingInstances:function(){var u=this.document.data("dvUi-dvDialog-instances");u||(u=[],this.document.data("dvUi-dvDialog-instances",u));return u},_minHeight:function(){var u=this.options;return"auto"===u.height?u.minHeight:Math.min(u.minHeight,u.height)},_position:function(){var u=this.uiDialog.is(":visible");
u||this.uiDialog.show();this.uiDialog.position(this.options.position);u||this.uiDialog.hide()},_setOptions:function(u){var t=this,h=!1,l={};c.each(u,function(q,z){t._setOption(q,z);q in t.sizeRelatedOptions&&(h=!0);q in t.resizableRelatedOptions&&(l[q]=z)});h&&(this._size(),this._position());this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",l)},_setOption:function(u,t){var h,l=this.uiDialog;"dialogClass"===u&&l.removeClass(this.options.dialogClass).addClass(t);"disabled"!==
u&&(this._super(u,t),"appendTo"===u&&this.uiDialog.appendTo(this._appendTo()),"buttons"===u&&this._createButtons(),"draggable"===u&&((h=l.is(":data(dvUi-draggable)"))&&!t&&l.draggable("destroy"),!h&&t&&this._makeDraggable()),"position"===u&&this._position(),"resizable"===u&&((h=l.is(":data(dvUi-resizable)"))&&!t&&l.resizable("destroy"),h&&"string"===typeof t&&l.resizable("option","handles",t),h||!1===t||this._makeResizable()),"title"===u&&this._title(this.uiDialogTitlebar.find(".dvUi-dialog-title")))},
_size:function(){var u=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});u.minWidth>u.width&&(u.width=u.minWidth);var t=this.uiDialog.css({height:"auto",width:u.width}).outerHeight();var h=Math.max(0,u.minHeight-t);var l="number"===typeof u.maxHeight?Math.max(0,u.maxHeight-t):"none";"auto"===u.height?this.element.css({minHeight:h,maxHeight:l,height:"auto"}):this.element.height(Math.max(0,u.height-t));this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",
"minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var u=c(this);return c("<div>").css({position:"absolute",width:u.outerWidth(),height:u.outerHeight()}).appendTo(u.parent()).offset(u.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(u){return c(u.target).closest(".dvUi-dialog").length?!0:!!c(u.target).closest(".dvUi-datepicker").length},_createOverlay:function(){if(this.options.modal){var u=
!0;this._delay(function(){u=!1});this.document.data("dvUi-dvDialog-overlays")||this._on(this.document,{focusin:function(t){u||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=c("<div>").addClass("dvUi-widget-overlay dvUi-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("dvUi-dvDialog-overlays",(this.document.data("dvUi-dvDialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&
this.overlay){var u=this.document.data("dvUi-dvDialog-overlays")-1;u?this.document.data("dvUi-dvDialog-overlays",u):this.document.unbind("focusin").removeData("dvUi-dvDialog-overlays");this.overlay.remove();this.overlay=null}}});c.widget("dvUi.dvMenu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"dvUi-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;
this.mouseHandled=!1;this.element.uniqueId().addClass("dvUi-menu dvUi-widget dvUi-widget-content").toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("dvUi-state-disabled").attr("aria-disabled","true");this._on({"mousedown .dvUi-menu-item":function(u){u.preventDefault()},"click .dvUi-menu-item":function(u){var t=c(u.target);!this.mouseHandled&&t.not(".dvUi-state-disabled").length&&(this.select(u),
u.isPropagationStopped()||(this.mouseHandled=!0),t.has(".dvUi-menu").length?this.expand(u):!this.element.is(":focus")&&c(this.document[0].activeElement).closest(".dvUi-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".dvUi-menu").length&&clearTimeout(this.timer)))},"mouseenter .dvUi-menu-item":function(u){if(!this.previousFilter){var t=c(u.currentTarget);t.siblings(".dvUi-state-active").removeClass("dvUi-state-active");this.focus(u,t)}},mouseleave:"collapseAll",
"mouseleave .dvUi-menu":"collapseAll",focus:function(u,t){var h=this.active||this.element.find(this.options.items).eq(0);t||this.focus(u,h)},blur:function(u){this._delay(function(){c.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(u)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(u){this._closeOnDocumentClick(u)&&this.collapseAll(u);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".dvUi-menu").addBack().removeClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-menu-icons dvUi-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".dvUi-menu-item").removeClass("dvUi-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("dvUi-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var u=c(this);u.data("dvUi-dvMenu-submenu-carat")&&u.remove()});this.element.find(".dvUi-menu-divider").removeClass("dvUi-menu-divider dvUi-widget-content")},_keydown:function(u){var t=!0;switch(u.keyCode){case c.dvUi.keyCode.PAGE_UP:this.previousPage(u);
break;case c.dvUi.keyCode.PAGE_DOWN:this.nextPage(u);break;case c.dvUi.keyCode.HOME:this._move("first","first",u);break;case c.dvUi.keyCode.END:this._move("last","last",u);break;case c.dvUi.keyCode.UP:this.previous(u);break;case c.dvUi.keyCode.DOWN:this.next(u);break;case c.dvUi.keyCode.LEFT:this.collapse(u);break;case c.dvUi.keyCode.RIGHT:this.active&&!this.active.is(".dvUi-state-disabled")&&this.expand(u);break;case c.dvUi.keyCode.ENTER:case c.dvUi.keyCode.SPACE:this._activate(u);break;case c.dvUi.keyCode.ESCAPE:this.collapse(u);
break;default:t=!1;var h=this.previousFilter||"";var l=String.fromCharCode(u.keyCode);var q=!1;clearTimeout(this.filterTimer);l===h?q=!0:l=h+l;h=this._filterMenuItems(l);h=q&&-1!==h.index(this.active.next())?this.active.nextAll(".dvUi-menu-item"):h;h.length||(l=String.fromCharCode(u.keyCode),h=this._filterMenuItems(l));h.length?(this.focus(u,h),this.previousFilter=l,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}t&&u.preventDefault()},_activate:function(u){this.active.is(".dvUi-state-disabled")||
(this.active.is("[aria-haspopup='true']")?this.expand(u):this.select(u))},refresh:function(){var u=this,t=this.options.icons.submenu;var h=this.element.find(this.options.menus);this.element.toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length);h.filter(":not(.dvUi-menu)").addClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var l=c(this),q=l.parent(),z=c("<span>").addClass("dvUi-menu-icon dvUi-icon "+
t).data("dvUi-dvMenu-submenu-carat",!0);q.attr("aria-haspopup","true").prepend(z);l.attr("aria-labelledby",q.attr("id"))});h=h.add(this.element).find(this.options.items);h.not(".dvUi-menu-item").each(function(){var l=c(this);u._isDivider(l)&&l.addClass("dvUi-widget-content dvUi-menu-divider")});h.not(".dvUi-menu-item, .dvUi-menu-divider").addClass("dvUi-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});h.filter(".dvUi-state-disabled").attr("aria-disabled","true");this.active&&!c.contains(this.element[0],
this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(u,t){"icons"===u&&this.element.find(".dvUi-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu);"disabled"===u&&this.element.toggleClass("dvUi-state-disabled",!!t).attr("aria-disabled",t);this._super(u,t)},focus:function(u,t){this.blur(u,u&&"focus"===u.type);this._scrollIntoView(t);this.active=t.first();var h=this.active.addClass("dvUi-state-focus").removeClass("dvUi-state-active");
this.options.role&&this.element.attr("aria-activedescendant",h.attr("id"));this.active.parent().closest(".dvUi-menu-item").addClass("dvUi-state-active");u&&"keydown"===u.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);h=t.children(".dvUi-menu");h.length&&u&&/^mouse/.test(u.type)&&this._startOpening(h);this.activeMenu=t.parent();this._trigger("focus",u,{item:t})},_scrollIntoView:function(u){if(this._hasScroll()){var t=parseFloat(c.css(this.activeMenu[0],"borderTopWidth"))||
0;var h=parseFloat(c.css(this.activeMenu[0],"paddingTop"))||0;t=u.offset().top-this.activeMenu.offset().top-t-h;h=this.activeMenu.scrollTop();var l=this.activeMenu.height();u=u.outerHeight();0>t?this.activeMenu.scrollTop(h+t):t+u>l&&this.activeMenu.scrollTop(h+t-l+u)}},blur:function(u,t){t||clearTimeout(this.timer);this.active&&(this.active.removeClass("dvUi-state-focus"),this.active=null,this._trigger("blur",u,{item:this.active}))},_startOpening:function(u){clearTimeout(this.timer);"true"===u.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(u)},this.delay))},_open:function(u){var t=c.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".dvUi-menu").not(u.parents(".dvUi-menu")).hide().attr("aria-hidden","true");u.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(u,t){clearTimeout(this.timer);this.timer=this._delay(function(){var h=t?this.element:c(u&&u.target).closest(this.element.find(".dvUi-menu"));
h.length||(h=this.element);this._close(h);this.blur(u);this.activeMenu=h},this.delay)},_close:function(u){u||(u=this.active?this.active.parent():this.element);u.find(".dvUi-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".dvUi-state-active").not(".dvUi-state-focus").removeClass("dvUi-state-active")},_closeOnDocumentClick:function(u){return!c(u.target).closest(".dvUi-menu").length},_isDivider:function(u){return!/[^\-\u2014\u2013\s]/.test(u.text())},collapse:function(u){var t=
this.active&&this.active.parent().closest(".dvUi-menu-item",this.element);t&&t.length&&(this._close(),this.focus(u,t))},expand:function(u){var t=this.active&&this.active.children(".dvUi-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(u,t)}))},next:function(u){this._move("next","first",u)},previous:function(u){this._move("prev","last",u)},isFirstItem:function(){return this.active&&!this.active.prevAll(".dvUi-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".dvUi-menu-item").length},_move:function(u,t,h){var l;this.active&&(l="first"===u||"last"===u?this.active["first"===u?"prevAll":"nextAll"](".dvUi-menu-item").eq(-1):this.active[u+"All"](".dvUi-menu-item").eq(0));l&&l.length&&this.active||(l=this.activeMenu.find(this.options.items)[t]());this.focus(h,l)},nextPage:function(u){var t;if(!this.active)this.next(u);else if(!this.isLastItem())if(this._hasScroll()){var h=this.active.offset().top;var l=this.element.height();this.active.nextAll(".dvUi-menu-item").each(function(){t=
c(this);return 0>t.offset().top-h-l});this.focus(u,t)}else this.focus(u,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(u){var t;if(!this.active)this.next(u);else if(!this.isFirstItem())if(this._hasScroll()){var h=this.active.offset().top;var l=this.element.height();this.active.prevAll(".dvUi-menu-item").each(function(){t=c(this);return 0<t.offset().top-h+l});this.focus(u,t)}else this.focus(u,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(u){this.active=this.active||c(u.target).closest(".dvUi-menu-item");var t={item:this.active};this.active.has(".dvUi-menu").length||this.collapseAll(u,!0);this._trigger("select",u,t)},_filterMenuItems:function(u){u=u.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var t=new RegExp("^"+u,"i");return this.activeMenu.find(this.options.items).filter(".dvUi-menu-item").filter(function(){return t.test(c.trim(c(this).text()))})}});c.widget("dvUi.dvSelectmenu",
{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"dvUi-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var u=this.element.uniqueId().attr("id");this.ids={element:u,button:u+"-button",menu:u+"-menu"};this._drawButton();this._drawMenu();this.options.disabled&&this.disable()},_drawButton:function(){var u=this,t=this.element.attr("tabindex");
this.label=c("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(h){this.button.focus();h.preventDefault()}});this.element.hide();this.button=c("<span>",{"class":"dvUi-selectmenu-button dvUi-widget dvUi-state-default dvUi-corner-all",tabindex:t||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);c("<span>",{"class":"dvUi-icon "+
this.options.icons.button}).prependTo(this.button);this.buttonText=c("<span>",{"class":"dvUi-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){u.menuItems||u._refreshMenu()});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var u=this;this.menu=c("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,
id:this.ids.menu});this.menuWrap=c("<div>",{"class":"dvUi-selectmenu-menu dvUi-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.dvMenu({role:"listbox",select:function(t,h){t.preventDefault();u._setSelection();u._select(h.item.data("dvUi-dvSelectmenu-item"),t)},focus:function(t,h){h=h.item.data("dvUi-dvSelectmenu-item");null!=u.focusIndex&&h.index!==u.focusIndex&&(u._trigger("focus",t,{item:h}),u.isOpen||u._select(h,t));u.focusIndex=h.index;u.button.attr("aria-activedescendant",
u.menuItems.eq(h.index).attr("id"))}}).dvMenu("instance");this.menu.addClass("dvUi-corner-bottom").removeClass("dvUi-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var u=this.element.find("option");
u.length&&(this._parseOptions(u),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".dvUi-selectmenu-optgroup"),u=this._getSelectedItem(),this.menuInstance.focus(null,u),this._setAria(u.data("dvUi-dvSelectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(u){this.options.disabled||(this.menuItems?(this.menu.find(".dvUi-state-focus").removeClass("dvUi-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):
this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",u))},_position:function(){this.menuWrap.position(c.extend({of:this.button},this.options.position))},close:function(u){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",u))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(u,t){var h=this,
l="";c.each(t,function(q,z){z.optgroup!==l&&(c("<li>",{"class":"dvUi-selectmenu-optgroup dvUi-menu-divider"+(z.element.parent("optgroup").prop("disabled")?" dvUi-state-disabled":""),text:z.optgroup}).appendTo(u),l=z.optgroup);h._renderItemData(u,z)})},_renderItemData:function(u,t){return this._renderItem(u,t).data("dvUi-dvSelectmenu-item",t)},_renderItem:function(u,t){var h=c("<li>",{text:t.label});t.disabled&&h.addClass("dvUi-state-disabled");t.element.attr("data-class")&&h.addClass("dv-SelectIcon").addClass(t.element.attr("data-class"));
return h.appendTo(u)},_setText:function(u,t){t?u.text(t):u.html("&#160;")},_move:function(u,t){var h=".dvUi-menu-item";if(this.isOpen)var l=this.menuItems.eq(this.focusIndex);else l=this.menuItems.eq(this.element[0].selectedIndex),h+=":not(.dvUi-state-disabled)";u="first"===u||"last"===u?l["first"===u?"prevAll":"nextAll"](h).eq(-1):l[u+"All"](h).eq(0);u.length&&this.menuInstance.focus(t,u)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(u){this[this.isOpen?
"close":"open"](u)},_setSelection:function(){if(this.range){if(window.getSelection){var u=window.getSelection();u.removeAllRanges();u.addRange(this.range)}else this.range.select();this.button.focus()}},_documentClick:{mousedown:function(u){this.isOpen&&(c(u.target).closest(".dvUi-selectmenu-menu, #"+this.ids.button).length||this.close(u))}},_buttonEvents:{mousedown:function(){if(window.getSelection){var u=window.getSelection();u.rangeCount&&(this.range=u.getRangeAt(0))}else this.range=document.selection.createRange()},
click:function(u){this._setSelection();this._toggle(u)},keydown:function(u){var t=!0;switch(u.keyCode){case c.dvUi.keyCode.TAB:case c.dvUi.keyCode.ESCAPE:this.close(u);t=!1;break;case c.dvUi.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(u);break;case c.dvUi.keyCode.UP:u.altKey?this._toggle(u):this._move("prev",u);break;case c.dvUi.keyCode.DOWN:u.altKey?this._toggle(u):this._move("next",u);break;case c.dvUi.keyCode.SPACE:this.isOpen?this._selectFocusedItem(u):this._toggle(u);break;case c.dvUi.keyCode.LEFT:this._move("prev",
u);break;case c.dvUi.keyCode.RIGHT:this._move("next",u);break;case c.dvUi.keyCode.HOME:case c.dvUi.keyCode.PAGE_UP:this._move("first",u);break;case c.dvUi.keyCode.END:case c.dvUi.keyCode.PAGE_DOWN:this._move("last",u);break;default:this.menu.trigger(u),t=!1}t&&u.preventDefault()}},_selectFocusedItem:function(u){var t=this.menuItems.eq(this.focusIndex);t.hasClass("dvUi-state-disabled")||this._select(t.data("dvUi-dvSelectmenu-item"),u)},_select:function(u,t){var h=this.element[0].selectedIndex;this.element[0].selectedIndex=
u.index;this._setText(this.buttonText,u.label);this._setAria(u);this._trigger("select",t,{item:u});u.index!==h&&this._trigger("change",t,{item:u});this.close(t)},_setAria:function(u){u=this.menuItems.eq(u.index).attr("id");this.button.attr({"aria-labelledby":u,"aria-activedescendant":u});this.menu.attr("aria-activedescendant",u)},_setOption:function(u,t){"icons"===u&&this.button.find("span.dvUi-icon").removeClass(this.options.icons.button).addClass(t.button);this._super(u,t);"appendTo"===u&&this.menuWrap.appendTo(this._appendTo());
"disabled"===u&&(this.menuInstance.option("disabled",t),this.button.toggleClass("dvUi-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0));"width"===u&&this._resizeButton()},_appendTo:function(){var u=this.options.appendTo;u&&(u=u.jquery||u.nodeType?c(u):this.document.find(u).eq(0));u&&u[0]||(u=this.element.closest(".dvUi-front"));u.length||(u=this.document[0].body);return u},_toggleAttr:function(){this.button.toggleClass("dvUi-corner-top",
this.isOpen).toggleClass("dvUi-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("dvUi-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var u=this.options.width;u||(u=this.element.show().outerWidth(),this.element.hide());this.button.outerWidth(u)},_resizeMenu:function(){},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(u){var t=[];u.each(function(h,l){l=c(l);var q=
l.parent("optgroup");t.push({element:l,index:h,value:l.attr("value"),label:l.text(),optgroup:q.attr("label")||"",disabled:q.prop("disabled")||l.prop("disabled")})});this.items=t},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}})}(dvJQuery),dvJQuery.fn.HasDocuViewarePlugins=!0)}},DocuViewareConstants={MAX_PAGE_TRANSFER_RETRIES:10,IE_MAX_SCROLL_TOP_LIMIT:153E4},DocuViewareEncodingUtilities={File:{New:function(c,
y,D){c={blob:new Blob([new Uint8Array(c)],{type:y}),type:y,lastModified:new Date(Date.now()),name:D,slice:function(M,u){return this.blob.slice(M,u)}};c.size=c.blob.size;return c}},TypedArray:{Uint8Array:function(c){return window.Uint8Array?new window.Uint8Array(c):new DocuViewareEncodingUtilities.TypedArray.TypedArray(c)},subarray:function(c,y){return this.slice(c,y)},set_:function(c,y){2>arguments.length&&(y=0);for(var D=0,M=c.length;D<M;++D,++y)this[y]=c[D]&255},TypedArray:function(c){if("number"===
typeof c){var y=Array(c);for(var D=0;D<c;++D)y[D]=0}else y=c.slice(0);y.subarray=DocuViewareEncodingUtilities.TypedArray.subarray;y.buffer=y;y.byteLength=y.length;y.set=DocuViewareEncodingUtilities.TypedArray.set_;"object"===typeof c&&c.buffer&&(y.buffer=c.buffer);return y}},base64:{PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",getbyte64:function(c,y){return DocuViewareEncodingUtilities.base64.ALPHA.indexOf(c.charAt(y))},decode:function(c){if(window.atob)return window.atob(c);
c=""+c;var y=DocuViewareEncodingUtilities.base64.getbyte64,D,M=c.length;if(0===M)return c;var u=0;c.charAt(M-1)===DocuViewareEncodingUtilities.base64.PADCHAR&&(u=1,c.charAt(M-2)===DocuViewareEncodingUtilities.base64.PADCHAR&&(u=2),M-=4);var t=[];for(D=0;D<M;D+=4){var h=y(c,D)<<18|y(c,D+1)<<12|y(c,D+2)<<6|y(c,D+3);t.push(String.fromCharCode(h>>16,h>>8&255,h&255))}switch(u){case 1:h=y(c,D)<<18|y(c,D+1)<<12|y(c,D+2)<<6;t.push(String.fromCharCode(h>>16,h>>8&255));break;case 2:h=y(c,D)<<18|y(c,D+1)<<12,
t.push(String.fromCharCode(h>>16))}return t.join("")},getbyte:function(c,y){return c.charCodeAt(y)},encode:function(c){if(window.btoa)return window.btoa(c);var y=DocuViewareEncodingUtilities.base64.PADCHAR,D=DocuViewareEncodingUtilities.base64.ALPHA,M=DocuViewareEncodingUtilities.base64.getbyte,u,t=[];c=""+c;var h=c.length-c.length%3;if(0===c.length)return c;for(u=0;u<h;u+=3){var l=M(c,u)<<16|M(c,u+1)<<8|M(c,u+2);t.push(D.charAt(l>>18));t.push(D.charAt(l>>12&63));t.push(D.charAt(l>>6&63));t.push(D.charAt(l&
63))}switch(c.length-h){case 1:l=M(c,u)<<16;t.push(D.charAt(l>>18)+D.charAt(l>>12&63)+y+y);break;case 2:l=M(c,u)<<16|M(c,u+1)<<8,t.push(D.charAt(l>>18)+D.charAt(l>>12&63)+D.charAt(l>>6&63)+y)}return t.join("")},base64toArrayBuffer:function(c){c=this.decode(c);for(var y=c.length,D=new Uint8Array(y),M=0;M<y;M++)D[M]=c.charCodeAt(M);return D.buffer},base64toBlob:function(c,y,D){y=y||"";c=DocuViewareEncodingUtilities.base64.decode(c);for(var M=c.length,u=Math.ceil(M/D),t=Array(u),h=0;h<u;++h){for(var l=
h*D,q=Math.min(l+D,M),z=Array(q-l),E=0;l<q;++E,++l)z[E]=c[l].charCodeAt(0);t[h]=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(z)}return new Blob(t,{type:y})}}},DocuViewareUtilities={addEvent:function(c,y,D){c.attachEvent?(c["e"+y+D]=D,c[y+D]=function(){c["e"+y+D](window.event)},c.attachEvent("on"+y,c[y+D])):c.addEventListener(y,D,!1)},removeEvent:function(c,y,D){c.detachEvent?(c.detachEvent("on"+y,c[y+D]),c[y+D]=null):c.removeEventListener(y,D,!1)},getWindowsVersion:function(){var c=window.navigator.userAgent.toLowerCase().match(/windows nt ([0-9]?[0-9]\.[0-9])/);
return null!=c?2==c.length||3==c.length?parseFloat(c[1]):0:0},getInternetExplorerVersion:function(){var c=-1;if("Microsoft Internet Explorer"==navigator.appName){var y=navigator.userAgent,D=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=D.exec(y)&&(c=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(y=navigator.userAgent,D=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=D.exec(y)&&(c=parseFloat(RegExp.$1)));return c},getScrollbarWidth:function(){var c=document.createElement("div");c.style.position="absolute";
c.style.top="-1000px";c.style.left="-1000px";c.style.width="100px";c.style.height="50px";c.style.overflow="hidden";var y=document.createElement("div");y.style.width="100%";y.style.height="200px";c.appendChild(y);document.body.appendChild(c);var D=y.offsetWidth;c.style.overflow="auto";c=y.offsetWidth;document.body.removeChild(document.body.lastChild);return D-c},getDevicePixelRatio:function(){var c=1;void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?
c=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(c=window.devicePixelRatio);return c},isValidURL:function(c){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.?(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{0,}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(c)},clonePageCanvasSizes:function(c){if(null!=
c){for(var y=[],D=0;D<c.length;D++)y.push({PageNo:c[D].PageNo,Width:c[D].Width,Height:c[D].Height,OffsetX:c[D].OffsetX,OffsetY:c[D].OffsetY});return y}return null},getPageCanvasSize:function(c){var y={width:0,height:0};if(null!=c)for(var D=0;D<c.length;D++){var M=c[D].OffsetX+c[D].Width,u=c[D].OffsetY+c[D].Height;M>y.width&&(y.width=M);u>y.height&&(y.height=u)}return y},isBetaEnabled:function(c){return!1},getLocaleDateTimeFormat:function(c,y){if(Date.parse(c)===Number.NaN)return null;if(10===this.getInternetExplorerVersion())return c.split("T")[0]+
" "+c.split("T")[1].split(".")[0];y||(y="en");c=new Date(c);return c.toLocaleDateString(y,{day:"2-digit",month:"2-digit",year:"numeric"})+" "+c.toLocaleTimeString(y,{hour12:!1,hour:"2-digit",minute:"2-digit"})}},DocuViewareAnnotationsUtilities={getAnnotationDefaultProperties:function(c){switch(c){case 0:return{type:0,borderWidth:.2,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:1,foreColor:"#FF0000",opacity:1,radiusFactor:.25,rotation:0,stroke:!0,strokeColor:"#FF0000",
text:"STAMP",autoCreate:!1};case 1:return{type:1,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FFFFFF",opacity:1,radiusFactor:0,rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 2:return{type:2,fillColor:"#FFFF00",rotation:0,squaredBox:!1,autoCreate:!1};case 3:return{type:3,borderWidth:.04,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:"#000000",autoCreate:!1};case 4:return{type:4,arrowFilled:!0,arrowHeight:10,arrowWidth:5,borderWidth:.04,
dashCap:0,dashStyle:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 5:return{type:5,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 6:return{type:6,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FFFFFF",opacity:1,rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 7:return{type:7,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",opacity:1,
radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#FFFFFF",autoCreate:!1,keepAspectRatio:!1,bitmapData:""};case 8:return{type:8,alignment:0,autoSize:!1,borderWidth:.01,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FFFFFF",fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",lineAlignment:0,opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#000000",text:"Text",canEditText:!0,autoCreate:!1};case 9:return{type:9,alignment:0,autoSize:!1,borderWidth:.01,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FDFD32",
fontName:"Arial",fontSize:20,fontStyle:1,foreColor:"#000000",lineAlignment:0,opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",text:"Text",canEditText:!0,autoCreate:!1};case 10:return{type:10,borderWidth:.04,dashStyle:0,dashCap:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 11:return{type:11,borderWidth:.2,rotation:0,strokeColor:"#FFFF00",autoCreate:!1};case 12:return{type:11,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FF0000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",
autoCreate:!1};case 13:return{type:13,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:3,foreColor:"#0000FF",link:"",opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#000000",autoCreate:!1,text:""};case 14:return{type:14,borderWidth:.04,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FF0000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 15:return{type:15,borderWidth:.02,dashCap:0,dashStyle:0,fontName:"Arial",fontSize:12,fontStyle:0,
foreColor:"#000000",measurementUnit:1,measurementUnitCustomString:"",ticksPerUnit:10,opacity:1,rotation:0,strokeColor:"#000000",scale:1,autoCreate:!1};case 16:return{type:16,borderWidth:.02,dashCap:0,dashStyle:0,fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",measurementUnit:1,measurementUnitCustomString:"",fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",scale:1,autoCreate:!1};case 17:return{type:17,title:"",fillColor:"#010101",autoCreate:!1};case 2048:return{type:2048,
allowReview:!0,allowAnswer:!0,reviewStatus:0,fontName:"Arial",fontSize:9,fontStyle:0,foreColor:"#000000"};default:return null}},getAnnotationDefaultPropertiesDisplay:function(c){switch(c){case 0:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor opacity radiusFactor rotation stroke strokeColor text".split(" ");case 1:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation squaredBox stroke strokeColor".split(" ");case 2:return["fillColor","rotation",
"squaredBox"];case 3:return"borderWidth dashCap dashStyle endCap opacity rotation startCap strokeColor".split(" ");case 4:return"arrowFilled arrowHeight arrowWidth borderWidth dashCap dashStyle opacity rotation strokeColor".split(" ");case 5:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 6:return"borderWidth dashCap dashStyle fill fillColor opacity rotation squaredBox stroke strokeColor".split(" ");case 7:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation stroke strokeColor".split(" ");
case 8:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity radiusFactor rotation stroke strokeColor text".split(" ");case 9:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity rotation stroke strokeColor text".split(" ");case 10:return"borderWidth dashStyle dashCap opacity rotation strokeColor".split(" ");case 11:return["borderWidth","rotation",
"strokeColor"];case 12:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 13:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor link opacity radiusFactor rotation stroke strokeColor text".split(" ");case 14:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 15:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit opacity rotation strokeColor scale".split(" ");
case 16:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit fill fillColor opacity rotation stroke strokeColor scale".split(" ");case 17:return["title","fillColor"];case 2048:return"allowReview allowAnswer reviewStatus fontName fontSize fontStyle foreColor".split(" ");default:return null}}},JSON=JSON||{};
JSON.stringify=JSON.stringify||function(c){var y=typeof c;if("object"!=y||null===c)return"string"==y&&(c='"'+c+'"'),String(c);var D,M=[],u=c&&c.constructor==Array;for(D in c){var t=c[D];y=typeof t;"string"==y?t='"'+t+'"':"object"==y&&null!==t&&(t=JSON.stringify(t));M.push((u?"":'"'+D+'":')+String(t))}return(u?"[":"{")+String(M)+(u?"]":"}")};
var DocuViewareAPI={Constants:{SINGLE_COLUMN_MOBILE_MENU_WIDTH:126,TWO_COLUMNS_MOBILE_MENU_WIDTH:188},Status:{OK:0,GenericError:1,PasswordRequired:27,InvalidPassword:29},Toolbar:{None:0,Standard:1,Mobile:2},SearchPageSelection:{CurrentPage:0,AllPages:1},RotateFlipType:{Rotate90FlipNone:1,Rotate180FlipNone:2,Rotate270FlipNone:3},LocalServiceStatus:{Ready:0,NotFound:1,WrongVersion:2},TwainCapabilities:{ACAP_AUDIOFILEFORMAT:4609,ACAP_XFERMECH:4610,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTHOR:4096,
CAP_AUTOFEED:4103,CAP_AUTOMATICCAPTURE:4122,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_AUTOSCAN:4112,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_CAMERAPREVIEWUI:4129,CAP_CAMERASIDE:4148,CAP_CAPTION:4097,CAP_CLEARBUFFERS:4125,CAP_CLEARPAGE:4104,CAP_CUSTOMBASE:32768,CAP_CUSTOMDSDATA:4117,CAP_CUSTOMINTERFACEGUID:4156,CAP_DEVICEEVENT:4130,CAP_DEVICEONLINE:4111,CAP_DEVICETIMEDATE:4127,CAP_DOUBLEFEEDDETECTION:4159,CAP_DOUBLEFEEDDETECTIONLENGTH:4160,CAP_DOUBLEFEEDDETECTIONRESPONSE:4162,
CAP_DOUBLEFEEDDETECTIONSENSITIVITY:4161,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_ENDORSER:4118,CAP_EXTENDEDCAPS:4102,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_FEEDERORDER:4142,CAP_FEEDERPOCKET:4154,CAP_FEEDERPREP:4153,CAP_FEEDPAGE:4105,CAP_INDICATORS:4107,CAP_INDICATORSMODE:4164,CAP_JOBCONTROL:4119,CAP_LANGUAGE:4140,CAP_MAXBATCHBUFFERS:4126,CAP_MICRENABLED:4152,CAP_PAPERDETECTABLE:4109,CAP_PAPERHANDLING:4163,CAP_POWERSAVETIME:4166,CAP_POWERSUPPLY:4128,
CAP_PRINTER:4134,CAP_PRINTERCHARROTATION:4167,CAP_PRINTERENABLED:4135,CAP_PRINTERFONTSTYLE:4168,CAP_PRINTERINDEX:4136,CAP_PRINTERINDEXLEADCHAR:4169,CAP_PRINTERINDEXMAXVALUE:4170,CAP_PRINTERINDEXNUMDIGITS:4171,CAP_PRINTERINDEXSTEP:4172,CAP_PRINTERINDEXTRIGGER:4173,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSTRINGPREVIEW:4174,CAP_PRINTERSUFFIX:4139,CAP_PRINTERVERTICALOFFSET:4165,CAP_REACQUIREALLOWED:4144,CAP_REWINDPAGE:4106,CAP_SEGMENTED:4149,CAP_SERIALNUMBER:4132,CAP_SUPPORTEDCAPS:4101,
CAP_SUPPORTEDCAPSEXT:4108,CAP_SUPPORTEDCAPSSEGMENTUNIQUE:4157,CAP_SUPPORTEDDATS:4158,CAP_THUMBNAILSENABLED:4113,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_TIMEDATE:4100,CAP_UICONTROLLABLE:4110,CAP_XFERCOUNT:1,ICAP_AUTOBRIGHT:4352,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICROTATE:4434,
ICAP_AUTOSIZE:4438,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODETIMEOUT:4413,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_BITORDER:4380,ICAP_BITORDERCODES:4390,ICAP_BRIGHTNESS:4353,ICAP_CCITTKFACTOR:4381,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_COMPRESSION:256,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_EXTIMAGEINFO:4399,ICAP_FEEDERTYPE:4436,
ICAP_FILMTYPE:4447,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_FLASHUSED2:4422,ICAP_FLIPROTATION:4406,ICAP_FRAMES:4372,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_ICCPROFILE:4437,ICAP_IMAGEDATASET:4398,ICAP_IMAGEFILEFORMAT:4364,ICAP_IMAGEFILTER:4423,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_JPEGPIXELTYPE:4392,ICAP_JPEGQUALITY:4435,ICAP_JPEGSUBSAMPLING:4449,ICAP_LAMPSTATE:4365,ICAP_LIGHTPATH:4382,ICAP_LIGHTSOURCE:4366,ICAP_MAXFRAMES:4378,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,
ICAP_MIRROR:4448,ICAP_NOISEFILTER:4424,ICAP_ORIENTATION:4368,ICAP_OVERSCAN:4425,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODETIMEOUT:4421,ICAP_PHYSICALHEIGHT:4370,ICAP_PHYSICALWIDTH:4369,ICAP_PIXELFLAVOR:4383,ICAP_PIXELFLAVORCODES:4391,ICAP_PIXELTYPE:257,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SHADOW:4371,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_SUPPORTEDEXTIMAGEINFO:4446,
ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_TILES:4379,ICAP_TIMEFILL:4394,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_UNITS:258,ICAP_XFERMECH:259,ICAP_XNATIVERESOLUTION:4374,ICAP_XRESOLUTION:4376,ICAP_XSCALING:4388,ICAP_YNATIVERESOLUTION:4375,ICAP_YRESOLUTION:4377,ICAP_YSCALING:4389,ICAP_ZOOMFACTOR:4414},GetSessionID:function(c){return(c=document.getElementById(c))&&c.control?c.control.ajax.sessionID:null},IsInitialized:function(c){return(c=document.getElementById(c))&&
c.control?!0:!1},IsLoaded:function(c){return(c=document.getElementById(c))&&c.control&&!c.control.waitForInit&&!c.control.hasPendingResize()},IsTwainSupportAvailable:function(c){return(c=document.getElementById(c))&&c.control?c.control.IsTwainSupportAvailable():!1},SetAjaxCustomHeaders:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.SetAjaxCustomHeaders(y,D):DocuViewareAPI.Status.GenericError},PostCustomServerAction:function(c,y,D,M,u,t){return(c=document.getElementById(c))&&
c.control?c.control.PostCustomServerAction(y,D,M,u,t):DocuViewareAPI.Status.GenericError},SetMaxUploadThreads:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.SetMaxUploadThreads(y):DocuViewareAPI.Status.GenericError},LoadFromByteArray:function(c,y,D,M,u,t){return(c=document.getElementById(c))&&c.control?c.control.LoadFromByteArray(y,D,M,u,t):DocuViewareAPI.Status.GenericError},LoadFromBase64:function(c,y,D,M,u,t){return(c=document.getElementById(c))&&c.control?c.control.LoadFromBase64(y,
D,M,u,t):DocuViewareAPI.Status.GenericError},LoadFromFile:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.LoadFromFile(y,D):DocuViewareAPI.Status.GenericError},LoadFromUri:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.LoadFromUri(y,"",D,M):DocuViewareAPI.Status.GenericError},LoadFromUriEx:function(c,y,D,M,u){return(c=document.getElementById(c))&&c.control?c.control.LoadFromUri(y,D,M,u):DocuViewareAPI.Status.GenericError},ToggleLoadFromUriDialog:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.ToggleLoadFromUriDialog(y):DocuViewareAPI.Status.GenericError},Save:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.ToggleSaveDialog(y,D):DocuViewareAPI.Status.GenericError},DirectSave:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.DirectSave(y,D,M):DocuViewareAPI.Status.GenericError},Print:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.TogglePrintDialog(y,
D):DocuViewareAPI.Status.GenericError},DirectPrint:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.LaunchDirectPrint(y,D,M):DocuViewareAPI.Status.GenericError},TwainAcquire:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.TwainToggleAcquisitionDialog(y,D):DocuViewareAPI.Status.GenericError},TwainSetConfig:function(c,y,D,M,u,t,h,l,q){return(c=document.getElementById(c))&&c.control?c.control.TwainSetConfig(y,D,M,u,t,h,l,q):DocuViewareAPI.Status.GenericError},
TwainDownloadServiceSetup:function(c){return(c=document.getElementById(c))&&c.control?c.control.DownloadTwainServiceSetup():DocuViewareAPI.Status.GenericError},TwainGetLocalServiceStatus:function(c){return(c=document.getElementById(c))&&c.control?c.control.TwainGetLocalServiceStatus():DocuViewareAPI.Status.GenericError},TwainGetSources:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetTwainSourceList():DocuViewareAPI.Status.GenericError},TwainGetClientInfo:function(c){return(c=
document.getElementById(c))&&c.control?c.control.TwainGetClientInfo():DocuViewareAPI.Status.GenericError},TwainAcquireToNewDocument:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.TwainAcquireToNewDocument(y,D,M):DocuViewareAPI.Status.GenericError},TwainAcquireToCurrentDocument:function(c,y,D,M,u){return(c=document.getElementById(c))&&c.control?c.control.TwainAcquireToCurrentDocument(y,D,M,u):DocuViewareAPI.Status.GenericError},GetDocumentType:function(c){return(c=document.getElementById(c))&&
c.control?c.control.GetDocumentType():-1},GetDocumentName:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetDocumentName():""},GetPageCount:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetPageCount():-1},GetPageWidth:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.GetPageWidth(y):-1},GetPageHeight:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.GetPageHeight(y):-1},GetSelectedTextAreas:function(c){return(c=
document.getElementById(c))&&c.control?c.control.GetSelectedTextArea():DocuViewareAPI.Status.GenericError},GetDisplayedArea:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetDisplayedArea():{left:0,top:0,width:0,height:0}},GetViewerScrollLeft:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetViewerScrollLeft():-1},GetViewerScrollTop:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetViewerScrollTop():-1},SetViewerScrollLeft:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.SetViewerScrollLeft(y):DocuViewareAPI.Status.GenericError},SetViewerScrollTop:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.SetViewerScrollTop(y):DocuViewareAPI.Status.GenericError},GetSelectionAreaCoordinates:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(c,y){return(c=document.getElementById(c))&&
c.control?c.control.SetSelectionAreaCoordinates(y):DocuViewareAPI.Status.GenericError},ClearSelectionArea:function(c){return(c=document.getElementById(c))&&c.control?c.control.ClearSelectionArea():DocuViewareAPI.Status.GenericError},GetMouseMode:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetMouseMode():DocuViewareAPI.Status.GenericError},SetMouseMode:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.SetMouseMode(y):DocuViewareAPI.Status.GenericError},
GetCurrentPage:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetCurrentPage():-1},GetSelectedThumbnailItems:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetSelectedThumbnailItems():null},SetThumbnailSelected:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.SetThumbnailSelected(y,D):null},GetCurrentZoom:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetCurrentZoom():-1},SetCurrentZoom:function(c,y){return(c=
document.getElementById(c))&&c.control?c.control.SetCurrentZoom(y):DocuViewareAPI.Status.GenericError},SelectPage:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.SelectPage(y):DocuViewareAPI.Status.GenericError},ZoomIN:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.ZoomIN(1,!0,!1,y,D):DocuViewareAPI.Status.GenericError},ZoomOUT:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.ZoomOUT(1,!0,!1,y,D):DocuViewareAPI.Status.GenericError},
ZoomRect:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.ZoomRect(y,D,M):DocuViewareAPI.Status.GenericError},RotateView:function(c,y){if((c=document.getElementById(c))&&c.control){var D=!1;"number"!=typeof y||y!=this.RotateFlipType.Rotate90FlipNone&&y!=this.RotateFlipType.Rotate180FlipNone&&y!=this.RotateFlipType.Rotate270FlipNone||(D=!0);return D?c.control.Rotate(y,0):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},RotatePage:function(c,y,
D,M){return this.RotatePages(c,this.GetCurrentPage(c),y,D,M)},RotatePages:function(c,y,D,M,u){return(c=document.getElementById(c))&&c.control?"number"!=typeof y&&"object"!=typeof y||"number"!=typeof D||D!=this.RotateFlipType.Rotate90FlipNone&&D!=this.RotateFlipType.Rotate180FlipNone&&D!=this.RotateFlipType.Rotate270FlipNone?DocuViewareAPI.Status.GenericError:c.control.RotatePage(y,D,M,u):DocuViewareAPI.Status.GenericError},SwapPages:function(c,y,D,M,u){return(c=document.getElementById(c))&&c.control?
c.control.SwapPages(y,D,M,u):DocuViewareAPI.Status.GenericError},DeletePage:function(c,y,D){return this.DeletePages(c,this.GetCurrentPage(c),y,D)},DeletePages:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?"number"==typeof y||"object"==typeof y?c.control.DeletePage(y,D,M):DocuViewareAPI.Status.GenericError:DocuViewareAPI.Status.GenericError},ToggleSinglePageViewMode:function(c){return(c=document.getElementById(c))&&c.control?c.control.ToggleSinglePageViewMode():DocuViewareAPI.Status.GenericError},
SetZoomWidthViewer:function(c){return(c=document.getElementById(c))&&c.control?c.control.SetZoomMode(3):DocuViewareAPI.Status.GenericError},SetZoomFitViewer:function(c){return(c=document.getElementById(c))&&c.control?c.control.SetZoomMode(2):DocuViewareAPI.Status.GenericError},CloseDocument:function(c){return(c=document.getElementById(c))&&c.control?c.control.CloseDocument():DocuViewareAPI.Status.GenericError},SelectThumbnailSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowThumbnailsSnapIn():
DocuViewareAPI.Status.GenericError},SelectBookmarksSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowBookmarksSnapIn():DocuViewareAPI.Status.GenericError},SelectSearchSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowSearchSnapIn():DocuViewareAPI.Status.GenericError},SelectAnnotationsSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowAnnotationsSnapIn():DocuViewareAPI.Status.GenericError},SelectCommentsSnapIn:function(c){return(c=
document.getElementById(c))&&c.control?c.control.ShowCommentsSnapIn():DocuViewareAPI.Status.GenericError},SelectRedactionSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowRedactionSnapIn():DocuViewareAPI.Status.GenericError},SelectSnapIn:function(c,y){return(c=document.getElementById(c))&&""!==y?c.control.SelectSnapIn(y,!1):DocuViewareAPI.Status.GenericError},ShowSnapIn:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.ToggleSnapIn(y,!0):DocuViewareAPI.Status.GenericError},
HideSnapIn:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.ToggleSnapIn(y,!1):DocuViewareAPI.Status.GenericError},CollapseSnapInPanel:function(c){return(c=document.getElementById(c))&&c.control?c.control.SetSnapinsPanelVisibility(!1):DocuViewareAPI.Status.GenericError},AddCustomSnapIn:function(c,y,D,M,u,t,h){return(c=document.getElementById(c))&&c.control?c.control.AddCustomSnapIn(y,D,M,u,t,h):DocuViewareAPI.Status.GenericError},GetSnapInPanelWidth:function(c){return(c=document.getElementById(c))&&
c.control?c.control.GetSnapInPanelWidth():0},SetSnapInPanelWidth:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.SetSnapInPanelWidth(y):DocuViewareAPI.Status.GenericError},GetSelectedText:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetSelectedText():""},HighlightSelectedText:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.HighlightSelectedText(y):DocuViewareAPI.Status.GenericError},StrikeoutSelectedText:function(c,y){return(c=
document.getElementById(c))&&c.control?c.control.StrikeoutSelectedText(y):DocuViewareAPI.Status.GenericError},UnderlineSelectedText:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.UnderlineSelectedText(y):DocuViewareAPI.Status.GenericError},RedactSelectedText:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RedactSelectedText(y):DocuViewareAPI.Status.GenericError},AddSelectedTextContextMenuItem:function(c,y,D,M){return(c=document.getElementById(c))&&
c.control?c.control.AddSelectedTextContextMenuItem(y,D,M):DocuViewareAPI.Status.GenericError},ResetSelectedTextContextMenu:function(c){return(c=document.getElementById(c))&&c.control?c.control.ResetSelectedTextContextMenu():DocuViewareAPI.Status.GenericError},AddAnnotationsActionButton:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotationsActionButton(y,D,M):DocuViewareAPI.Status.GenericError},Search:function(c,y,D,M,u,t){if((c=document.getElementById(c))&&c.control){var h=
!1;"string"===typeof y&&("undefined"===typeof t&&(t=!1),"boolean"==typeof D&&"boolean"==typeof M&&"boolean"==typeof t&&("number"!=typeof u||u!==this.SearchPageSelection.AllPages&&u!==this.SearchPageSelection.CurrentPage||(h=!0)));return h?c.control.Search(y,D,M,t,u):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},SetSearchSettings:function(c,y,D,M,u){return(c=document.getElementById(c))&&c.control?"boolean"==typeof y&&"boolean"==typeof D&&"boolean"==typeof M?"number"!=
typeof u||u!==this.SearchPageSelection.AllPages&&u!==this.SearchPageSelection.CurrentPage?DocuViewareAPI.Status.GenericError:c.control.SetSearchSettings(y,D,M,u):DocuViewareAPI.Status.GenericError:null},SearchNavigateToOccurrence:function(c,y){return(c=document.getElementById(c))&&c.control?Number.isInteger(y)?c.control.SearchNavigateToOccurrence(y):DocuViewareAPI.Status.GenericError:null},GetSearchResultsCount:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetSearchResultsCount():
0},GetCurrentSearchOccurrenceIdx:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetCurrentSearchOccurrenceIdx():0},ClearSearch:function(c){return(c=document.getElementById(c))&&c.control?c.control.ClearSearch():DocuViewareAPI.Status.GenericError},UpdateLayout:function(c){return(c=document.getElementById(c))&&c.control?c.control.UpdateLayout():DocuViewareAPI.Status.GenericError},ExitAnnotationDrawingMode:function(c){return(c=document.getElementById(c))&&c.control?c.control.ExitAnnotationDrawingMode():
DocuViewareAPI.Status.GenericError},DisplayMessageBox:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.DisplayMessageBox(y):DocuViewareAPI.Status.GenericError},DisplayPendingActionNotification:function(c){if((c=document.getElementById(c))&&c.control)c.control.DisplayPendingActionNotification();else return DocuViewareAPI.Status.GenericError},HidePendingActionNotification:function(c){if((c=document.getElementById(c))&&c.control)c.control.HidePendingActionNotification();else return DocuViewareAPI.Status.GenericError},
ApplyAllRedactions:function(c){return(c=document.getElementById(c))&&c.control?c.control.ApplyAllRedactions():DocuViewareAPI.Status.GenericError},RegisterOnViewerScroll:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnViewerScroll(y):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationSelectedStateChanged:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationSelectedStateChanged(y):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationAdded:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationAdded(y):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationEdited:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationEdited(y):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMoved:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationMoved(y):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationDeleted:function(c,y){return(c=
document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationDeleted(y):DocuViewareAPI.Status.GenericError},RegisterOnDocumentSigned:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnDocumentSigned(y):DocuViewareAPI.Status.GenericError},RegisterOnFormFieldChanged:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnFormFieldChanged(y):DocuViewareAPI.Status.GenericError},RegisterOnPageChanged:function(c,y){return(c=document.getElementById(c))&&
c.control?c.control.RegisterOnPageChanged(y):DocuViewareAPI.Status.GenericError},RegisterOnPageDeleted:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnPageDeleted(y):DocuViewareAPI.Status.GenericError},RegisterOnZoomChanged:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnZoomChanged(y):DocuViewareAPI.Status.GenericError},RegisterOnRotationChanged:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnRotationChanged(y):
DocuViewareAPI.Status.GenericError},RegisterOnNewDocumentLoaded:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnNewDocumentLoaded(y):DocuViewareAPI.Status.GenericError},RegisterOnDocumentClosed:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnDocumentClosed(y):DocuViewareAPI.Status.GenericError},RegisterOnDocumentPrinted:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnDocumentPrinted(y):DocuViewareAPI.Status.GenericError},
RegisterOnDocumentSaved:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnDocumentSaved(y):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnTwainAcquisitionDialogAcquireButtonClick(y):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnTwainAcquisitionDialogCancelButtonClick(y):
DocuViewareAPI.Status.GenericError},RegisterOnThumbnailsOrderChanged:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnThumbnailsOrderChanged(y):DocuViewareAPI.Status.GenericError},RegisterOnTextSelected:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnTextSelected(y):DocuViewareAPI.Status.GenericError},RegisterOnTextUnselected:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnTextUnselected(y):DocuViewareAPI.Status.GenericError},
RegisterOnAreaSelected:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAreaSelected(y):DocuViewareAPI.Status.GenericError},RegisterOnCommentAdded:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnCommentAdded(y):DocuViewareAPI.Status.GenericError},RegisterOnCommentEdited:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnCommentEdited(y):DocuViewareAPI.Status.GenericError},RegisterOnCommentDeleted:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnCommentDeleted(y):DocuViewareAPI.Status.GenericError},RegisterOnFullscreenModeChanged:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnFullscreenModeChanged(y):DocuViewareAPI.Status.GenericError},RegisterOnSearchInvoked:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnSearchInvoked(y):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMouseEnter:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationMouseEnter(y):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMouseLeave:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationMouseLeave(y):DocuViewareAPI.Status.GenericError},RegisterOnTextAnnotated:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnTextAnnotated(y):DocuViewareAPI.Status.GenericError},RegisterOnThumbnailsSnapInSelected:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnThumbnailsSnapInSelected(y):DocuViewareAPI.Status.GenericError},RegisterOnBookmarksSnapInSelected:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnBookmarksSnapInSelected(y):DocuViewareAPI.Status.GenericError},RegisterOnSearchSnapInSelected:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnSearchSnapInSelected(y):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationsSnapInSelected:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationsSnapInSelected(y):DocuViewareAPI.Status.GenericError},RegisterOnCommentsSnapInSelected:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnCommentsSnapInSelected(y):DocuViewareAPI.Status.GenericError},RegisterOnSnapInPanelResized:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnSnapInPanelResized(y):DocuViewareAPI.Status.GenericError},RegisterOnRedactionMarksApplied:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnRedactionMarksApplied(y):DocuViewareAPI.Status.GenericError},RegisterOnUriNavigation:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnUriNavigation(y):DocuViewareAPI.Status.GenericError},RegisterOnUnknownLinkNavigation:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnUnknownLinkNavigation(y):DocuViewareAPI.Status.GenericError},RegisterOnAttachmentClick:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAttachmentClick(y):DocuViewareAPI.Status.GenericError},SetSignatureAppearance:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?null!=y?c.control.Internal.DigiSign.setSignatureAppearanceImage(y):null!=D&&null!=M?c.control.Internal.DigiSign.setSignatureAppearanceText(D,M):DocuViewareAPI.Status.GenericError:DocuViewareAPI.Status.GenericError},SetSignatureCertificate:function(c,y,D,M,u,t){return(c=document.getElementById(c))&&
c.control?(c.control.Internal.DigiSign.setCertificate(y,D,M),c.control.Internal.DigiSign.sendSignatureRequest(u,t)):DocuViewareAPI.Status.GenericError},SetSignatureTimeStamp:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.Internal.DigiSign.setTimeStamp(y,D,M):DocuViewareAPI.Status.GenericError},AddSignatureInteractive:function(c){return(c=document.getElementById(c))&&c.control?c.control.Internal.DigiSign.beginAddSignatureInteractive(!1):DocuViewareAPI.Status.GenericError},
AddSignature:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.Internal.DigiSign.addSignature(y,D):DocuViewareAPI.Status.GenericError},RegisterOnSnapInPanelToggle:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnSnapInPanelToggle(y):DocuViewareAPI.Status.GenericError},SetAnnotationsInteractionState:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotationsInteractionState(y):DocuViewareAPI.Status.GenericError},SetAnnotationsVisibility:function(c,
y){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotationsVisibility(y):DocuViewareAPI.Status.GenericError},AddRubberStampAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(0,y,D,M):DocuViewareAPI.Status.GenericError},AddRectangleAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(1,y,D,M):DocuViewareAPI.Status.GenericError},AddRectangleHighlighterAnnotInteractive:function(c,
y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(2,y,D,M):DocuViewareAPI.Status.GenericError},AddLineAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(3,y,D,M):DocuViewareAPI.Status.GenericError},AddConnectedLineAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(5,y,D,M):DocuViewareAPI.Status.GenericError},AddLineArrowAnnotInteractive:function(c,
y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(4,y,D,M):DocuViewareAPI.Status.GenericError},AddEllipseAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(6,y,D,M):DocuViewareAPI.Status.GenericError},AddTextAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(8,y,D,M):DocuViewareAPI.Status.GenericError},AddStickyNoteAnnotInteractive:function(c,
y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(9,y,D,M):DocuViewareAPI.Status.GenericError},AddFreeHandAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(10,y,D,M):DocuViewareAPI.Status.GenericError},AddFreeHandHighLighterAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(11,y,D,M):DocuViewareAPI.Status.GenericError},AddLinkAnnotInteractive:function(c,
y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(13,y,D,M):DocuViewareAPI.Status.GenericError},AddRulerAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(15,y,D,M):DocuViewareAPI.Status.GenericError},AddPolyRulerAnnotInteractive:function(c,y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(16,y,D,M):DocuViewareAPI.Status.GenericError},AddRedactionMarkAnnotInteractive:function(c,
y,D,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(17,y,D,M):DocuViewareAPI.Status.GenericError},AddAnnot:function(c,y,D,M){if((c=document.getElementById(c))&&c.control){if(Array.isArray(y))return c.control.AddAnnot(y,!1,D,M);var u=[];u.push(y);return c.control.AddAnnot(u,!1,D,M)}return DocuViewareAPI.Status.GenericError},RemoveAnnotById:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.DeleteAnnotationById(y,"undefined"===typeof D?!1:D):DocuViewareAPI.Status.GenericError},
UnselectAllAnnotations:function(c){return(c=document.getElementById(c))&&c.control?c.control.UnselectAllAnnotations():DocuViewareAPI.Status.GenericError},UpdateAnnotById:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.UpdateAnnotationById(y,D):DocuViewareAPI.Status.GenericError},GetAnnotProperties:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.GetAnnotationProperties(y):DocuViewareAPI.Status.GenericError},GetPageAnnotCount:function(c,y){return(c=
document.getElementById(c))&&c.control?c.control.GetPageAnnotCount(y):DocuViewareAPI.Status.GenericError},GetPageAnnotId:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.GetPageAnnotId(y,D):DocuViewareAPI.Status.GenericError},GetAnnotClientTag:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.GetAnnotationClientTag(y):DocuViewareAPI.Status.GenericError},SetAnnotClientTag:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotationClientTag(y,
D):DocuViewareAPI.Status.GenericError},GetPageFormFields:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.GetPageFormFields(y):DocuViewareAPI.Status.GenericError},UpdateFormFields:function(c,y,D,M){if((c=document.getElementById(c))&&c.control){if(Array.isArray(y))return c.control.UpdateFormFields(y,D,M);var u=[];u.push(y);return c.control.UpdateFormFields(u,D,M)}return DocuViewareAPI.Status.GenericError},HasPendingRedactionMark:function(c){return(c=document.getElementById(c))&&
c.control?c.control.HasPendingRedactionMark():DocuViewareAPI.Status.GenericError},EnableAnnotEditionOnDblClick:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.EnableAnnotEditionOnDblClick(y):DocuViewareAPI.Status.GenericError},ResetAnnotAutoCreateProperty:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.ResetAnnotAutoCreate(y):DocuViewareAPI.Status.GenericError},ResetAnnotToDefault:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.ResetAnnotToDefault(y):
DocuViewareAPI.Status.GenericError},SetAnnotPropertiesValues:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotPropertiesValues(y,D):DocuViewareAPI.Status.GenericError},GetAnnotPropertiesValues:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.GetAnnotPropertiesValues(y):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesToDisplay:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotPropertiesToDisplay(y,D):DocuViewareAPI.Status.GenericError},
ResetAnnotPropertiesToDisplayDefault:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.ResetAnnotPropertiesToDisplayDefault(y):DocuViewareAPI.Status.GenericError},SetAnnotDefaultAuthor:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotDefaultAuthor(y,D):DocuViewareAPI.Status.GenericError},EnsureAnnotVisibility:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.FocusAnnot(y,D,!0):DocuViewareAPI.Status.GenericError},EnableAnnotMultiSelect:function(c,
y){return(c=document.getElementById(c))&&c.control?(c.control.EnableAnnotMultiSelect(y),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},SelectAnnot:function(c,y,D){return(c=document.getElementById(c))&&c.control?c.control.FocusAnnot(y,!0,D):DocuViewareAPI.Status.GenericError},UnselectAnnot:function(c,y){return(c=document.getElementById(c))&&c.control?c.control.UnselectAnnot(y):DocuViewareAPI.Status.GenericError},GetAnnotBBoxOnViewer:function(c,y){return(c=document.getElementById(c))&&
c.control?c.control.GetAnnotBBoxOnViewer(y):DocuViewareAPI.Status.GenericError}},DOCUVIEWARE_JS_VERSION=30047,DocuViewareProgressbar=function(){var c={width:"100%",height:"4px",zIndex:16777271},y={width:0,height:"100%",clear:"both",transition:"height .3s"};var D=function(q,z){for(var E in z)q.style[E]=z[E];q.style.float="left"};var M=function(){var q=this,z=this.width-this.here;.1>z&&-.1<z?(u.call(this,this.here),this.moving=!1,100==this.width&&(this.el.style.height=0,setTimeout(function(){q.cont.el.removeChild(q.el)},
300))):(u.call(this,this.width-z/4),setTimeout(function(){q.go()},16))};var u=function(q){this.width=q;this.el.style.width=this.width+"%"};var t=function(){var q=new h(this);this.bars.unshift(q)};var h=function(q){this.el=document.createElement("div");this.el.style.backgroundColor=q.opts.bg;this.here=this.width=0;this.moving=!1;this.cont=q;D(this.el,y);q.el.appendChild(this.el)};h.prototype.go=function(q){q?(this.here=q,this.moving||(this.moving=!0,M.call(this))):this.moving&&M.call(this)};var l=
function(q){q=this.opts=q||{};q.bg=q.bg||"#000";this.bars=[];var z=this.el=document.createElement("div");D(this.el,c);q.id&&(z.id=q.id);z.style.position=q.target?"absolute":"fixed";q.target?q.target.insertBefore(z,q.target.firstChild):document.getElementsByTagName("body")[0].appendChild(z);t.call(this)};l.prototype.value=function(){return this.bars[0].here};l.prototype.go=function(q){this.bars[0].go(q);100==q&&t.call(this)};return l}(),CreateDocuViewareCursorManager=function(c,y){return{target:c,
isIE:y,cursor:null,customCursorClass:null,setStdCursor:function(D){D!=this.cursor&&(this.dropCurrentCursor(),this.cursor=D,this.target.style.cursor=this.cursor)},setCustomCursorClass:function(D){this.isIE&&(D+="IE");D!=this.customCursorClass&&(this.dropCurrentCursor(),this.customCursorClass=D,dvJQuery(this.target).addClass(this.customCursorClass))},dropCurrentCursor:function(){this.customCursorClass&&(dvJQuery(this.target).removeClass(this.customCursorClass),this.customCursorClass=null);null!=this.cursor&&
(this.cursor=null,this.target.style.cursor="")}}},CreateDocuViewareController=function(c,y,D,M,u,t,h,l,q,z,E,L,N,P,S,X,ea,fa,sa,W,ja,ka,ma){function ra(b){null!=b.dom.openfile&&DocuViewareUtilities.addEvent(b.dom.openfile,"change",function(d){if(null!=d.target.files&&0!=d.target.files.length){d=d.target.files[0];var e=dvJQuery(b.dom.openfile);e.val("");e.replaceWith(e.clone());ra(b);b.Internal.Files.uploadFile(d,0)}},!0)}function Ca(){"tiff"===dvJQuery(a.dom.saveDialog).find("select[name='save_extension_select"+
a.uniqueID+"']").val()&&"0"===dvJQuery(a.dom.saveDialog).find("select[name='save_content_select"+a.uniqueID+"']").val()?dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("visibility","visible"):(dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("visibility","hidden"),dvJQuery(a.dom.saveDialog).find("input[name='save_content_burn_annot"+a.uniqueID+"']").prop("checked",!1))}if(c!=DOCUVIEWARE_JS_VERSION)S=document.getElementById("main"+t),null!=
S&&(S.style.visibility="visible"),document.write("The version of the DocuVieware javascript used is incorrect. The JavaScript version version is: "+DOCUVIEWARE_JS_VERSION+". The expected version is: "+c+". Please refresh this page or contact the webmaster if the problem persists.");else{DocuViewarejQueryPlugins.register();var a={viewerWidth:null,viewerHeight:null,waitForInit:!1,appControllerPath:y,useIdInRoot:D,uniqueID:t,maxUploadSize:l,packetSize:q,favorMultipartUpload:h,debug:z,localization:eval("("+
E+")"),certificateNames:eval("("+L+")"),UIconfig:N,snapIns:eval("("+P+")"),attachedDebugger:X,twainServiceUri32:ea,twainServiceUri64:fa,twainServiceSupportedVersion:sa,twainSourceConfig:JSON.parse(W),isWindows:-1<navigator.platform.indexOf("Win"),windowsVersion:DocuViewareUtilities.getWindowsVersion(),isIOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,isSafari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),isIE:-1!=DocuViewareUtilities.getInternetExplorerVersion(),
isIE9:9==DocuViewareUtilities.getInternetExplorerVersion(),isIE10:10==DocuViewareUtilities.getInternetExplorerVersion(),isIE11:11==DocuViewareUtilities.getInternetExplorerVersion(),isIEorEdge:-1!=DocuViewareUtilities.getInternetExplorerVersion()||"Netscape"==navigator.appName&&-1<navigator.appVersion.indexOf("Edge"),isEdge:-1<navigator.userAgent.indexOf("Edge"),isFirefox:"undefined"!==typeof InstallTrigger,isMobile:function(){var b=!1,d=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(d)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(d.substr(0,
4)))b=!0;return b},isMobileOrTablet:function(){var b=!1,d=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(d)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(d.substr(0,
4)))b=!0;return b},fastMode:!0,log:function(b){this.debug&&(dvJQuery("#logDebug"+this.uniqueID).val(dvJQuery("#logDebug"+this.uniqueID).val()+b+"\n"),dvJQuery("#logDebug"+this.uniqueID).scrollTop(dvJQuery("#logDebug"+this.uniqueID)[0].scrollHeight),dvJQuery("#debugBar"+this.uniqueID).show())},Internal:{Libs:{pica:{FILTER_INFO:[{win:.5,filter:function(b){return-.5<=b&&.5>b?1:0}},{win:1,filter:function(b){if(-1>=b||1<=b)return 0;if(-1.1920929E-7<b&&1.1920929E-7>b)return 1;b*=Math.PI;return Math.sin(b)/
b*(.54+.46*Math.cos(b/1))}},{win:2,filter:function(b){if(-2>=b||2<=b)return 0;if(-1.1920929E-7<b&&1.1920929E-7>b)return 1;b*=Math.PI;return Math.sin(b)/b*Math.sin(b/2)/(b/2)}},{win:3,filter:function(b){if(-3>=b||3<=b)return 0;if(-1.1920929E-7<b&&1.1920929E-7>b)return 1;b*=Math.PI;return Math.sin(b)/b*Math.sin(b/3)/(b/3)}}],toFixedPoint:function(b){return Math.floor(16384*b)},createFilters:function(b,d,e){var g=this.FILTER_INFO[b].filter,k=e/d,p=1/k;k=Math.min(1,k);b=this.FILTER_INFO[b].win/k;var n,
w,C=new Int16Array((Math.floor(2*(b+1))+2)*e),K=0;for(n=0;n<e;n++){var F=(n+.5)*p;var Y=Math.max(0,Math.floor(F-b));var aa=Math.min(d-1,Math.ceil(F+b));var ha=aa-Y+1;var da=new Float32Array(ha);ha=new Int16Array(ha);var la=0;var Ha=Y;for(w=0;Ha<=aa;Ha++,w++){var wa=g((Ha+.5-F)*k);la+=wa;da[w]=wa}for(w=F=0;w<da.length;w++)aa=this.toFixedPoint(da[w]/la),F+=aa,ha[w]=aa;ha[e>>1]+=this.toFixedPoint(1)-F;for(da=0;da<ha.length&&0===ha[da];)da++;if(da<ha.length){for(la=ha.length-1;0<la&&0===ha[la];)la--;
Y+=da;w=la-da+1;C[K++]=Y;C[K++]=w;C.set(ha.subarray(da,la+1),K);K+=w}else C[K++]=0,C[K++]=0}return C},convolveHorizontally:function(b,d,e,g,k,p,n){var w,C,K,F,Y,aa,ha=0,da=0;for(Y=0;Y<k;Y++){for(aa=F=0;aa<p;aa++){var la=n[F++];var Ha=n[F++];var wa=ha+4*la|0;for(la=w=C=K=0;0<Ha;Ha--){var va=n[F++];0!=va&&(b&&(K=K+va*d[wa+3]|0),C=C+va*d[wa+2]|0,w=w+va*d[wa+1]|0,la=la+va*d[wa]|0);wa=wa+4|0}e[da+3]=b&&4169728>K?K+8192>>14:255;e[da+2]=4169728>C?C+8192>>14:255;e[da+1]=4169728>w?w+8192>>14:255;e[da]=4169728>
la?la+8192>>14:255;da=da+4*k|0}da=4*(Y+1)|0;ha=(Y+1)*g*4|0}},convolveVertically:function(b,d,e,g,k,p,n){var w,C,K,F,Y,aa,ha=0,da=0;for(Y=0;Y<k;Y++){for(aa=F=0;aa<p;aa++){var la=n[F++];var Ha=n[F++];var wa=ha+4*la|0;for(la=w=C=K=0;0<Ha;Ha--){var va=n[F++];0!=va&&(b&&(K=K+va*d[wa+3]|0),C=C+va*d[wa+2]|0,w=w+va*d[wa+1]|0,la=la+va*d[wa]|0);wa=wa+4|0}e[da+3]=b&&4169728>K?K+8192>>14:255;e[da+2]=4169728>C?C+8192>>14:255;e[da+1]=4169728>w?w+8192>>14:255;e[da]=4169728>la?la+8192>>14:255;da=da+4*k|0}da=4*(Y+
1)|0;ha=(Y+1)*g*4|0}},resize:function(b){var d=b.width,e=b.height,g=b.toWidth,k=b.toHeight,p=b.dest||new DocuViewareEncodingUtilities.TypedArray.Uint8Array(g*k*4),n="undefined"===typeof b.quality?3:b.quality,w=b.alpha||!1;if(1>d||1>e||1>g||1>k)return[];var C=this.createFilters(n,d,g);n=this.createFilters(n,e,k);var K=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(g*e*4);this.convolveHorizontally(w,b.src,K,d,e,g,C);this.convolveVertically(w,K,p,e,g,k,n);return p}}},Capabilities:{_hasWebPSupport:null,
hasWebPSupport:function(){if(null===this._hasWebPSupport){if(-1!=navigator.userAgent.indexOf("Firefox")){var b=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);b=b?parseInt(b[1]):0;0!=b&&(this._hasWebPSupport=65<=b)}1!=this._hasWebPSupport&&(b=document.createElement("canvas"),b.getContext&&b.getContext("2d")?this._hasWebPSupport=0==b.toDataURL("image/webp").indexOf("data:image/webp"):this._hasWebPSupport=!1)}return this._hasWebPSupport},hasTiffSupport:function(){return a.isIE}},Utilities:{normalizeRotation:function(b){b%=
360;0>b&&(b+=360);return b},rgb2hex:function(b,d,e){return"#"+(16777216+(e|d<<8|b<<16)).toString(16).slice(1)},color2Hex:function(b){return"#"===b.substr(0,1)?b:(b=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===b.length?"#"+("0"+parseInt(b[1],10).toString(16)).slice(-2)+("0"+parseInt(b[2],10).toString(16)).slice(-2)+("0"+parseInt(b[3],10).toString(16)).slice(-2):""},color2Object:function(b){"#"===b.substr(0,1)&&(b=this.hex2Rgb(b));return(b=b.match(/^(?:rgb|rgba)\s*\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(\d?\.\d+))?\s*\)$/i))&&
5===b.length?{r:parseInt(b[1]),g:parseInt(b[2]),b:parseInt(b[3]),a:b[4]?parseFloat(b[4]):1}:null},hex2Rgb:function(b){return"#"!==b.substr(0,1)?"":"rgb("+(b>>16)+","+(b>>8&255)+","+(b&255)+")"},roundEx:function(b,d){d=Math.pow(10,d);return Math.round(b*d)/d},pageRangeChecker:function(b,d){if(""!=d&&"*"!=d){d=d.split(";");var e=/([0-9])/,g;for(g in d){var k=d[g].split("-");if(2>=k.length)for(var p in k){if(1!=e.test(k[p])||0==parseInt(k[p])||parseInt(k[p])>b)return!1}else return!1}}return!0},pageRangeToArrayConverter:function(b){var d=
a.serverCtx.pageCount,e=(b+"").replace(/\s+/g,""),g=[];if("*"==b||""==b){for(e=1;e<=d;e++)g.push(e);return g}b=-1!=b.indexOf(";")?";":",";e=e.split(b);for(b=0;b<e.length;b++){var k=e[b].split("-");if(1===k.length)g.push(parseInt(k[0],10));else if(2===k.length){var p=parseInt(k[0],10);k=parseInt(k[1],10);if(!(k<p))for(;p<=k;p++)g.push(p)}}return g=g.filter(function(n,w,C){return C.indexOf(n)===w&&0<n&&n<=d}).sort(function(n,w){return n-w})}},Thumbnails:{lastUpdatedPageThumbnail:-1,selectedItems:[],
THUMBNAIL_SHADOW_OFFSETX:2,THUMBNAIL_SHADOW_OFFSETY:2,THUMBNAIL_SHADOW_BLUR:8,THUMBNAIL_SHADOW_COLOR:"rgba(0,0,0,0.1)",getThumbnailPage:function(b){if(null!=b){var d=b.getAttribute("data-pageNo");if(d)return parseInt(d);if(null!=b.parentNode&&b.parentNode.getAttribute("data-pageNo"))return parseInt(b.parentNode.getAttribute("data-pageNo"))}return 0},setThumbnailPageDest:function(b,d){return null!=b?(b.setAttribute("data-pageNo",d.toString()),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},
setThumbnailText:function(b,d){return null!=b?(b.children[1].innerHTML="<p align=center style='margin: 0 0 0 0;'><font size='-3'>"+d+"</font></p>",DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},getThumbnailFromPageNo:function(b){b=dvJQuery(a.dom.thumbnailArea).children("[data-pageNo="+b+"]");return 0<b.length?b:null},resetThumbnailFromPageNo:function(b){b=this.getThumbnailFromPageNo(b);null!=b&&(b.attr("data-loaded","false"),b.attr("data-loading","false"))},getThumbnailAt:function(b,
d){for(var e=a.dom.thumbnailArea.childElementCount,g=!1,k=0;k<e;k++){var p=a.dom.thumbnailArea.children[k];if(0!=a.Internal.Thumbnails.getThumbnailPage(p)){var n=dvJQuery(p).position().top;if(n+dvJQuery(p).innerHeight()>=d&&n<=d){n=dvJQuery(p).position().left;if(n+dvJQuery(p).innerWidth()>=b&&n<=b)return p;g|=1}else if(g)break}}return null},createThumbnail:function(b){var d=document.createElement("div");d.className="thumbnail-preview";a.Internal.Thumbnails.setThumbnailPageDest(d,b);d.setAttribute("data-loaded",
"false");d.setAttribute("data-loading","false");d.setAttribute("data-moving","false");d.onmouseover=a.events.onThumbnailItemMouseOverHandler;d.onmouseout=a.events.onThumbnailItemMouseOutHandler;d.onclick=a.events.onThumbnailItemClickHandler;var e=document.createElement("canvas");e.className="spinner-thumb";e.width=a.dom.UIconfig.thumbnailWidth*DocuViewareUtilities.getDevicePixelRatio()+2*this.THUMBNAIL_SHADOW_OFFSETX;e.height=a.dom.UIconfig.thumbnailHeight*DocuViewareUtilities.getDevicePixelRatio()+
2*this.THUMBNAIL_SHADOW_OFFSETY;e.style.width=a.dom.UIconfig.thumbnailWidth+2*this.THUMBNAIL_SHADOW_OFFSETX+"px";e.style.height=a.dom.UIconfig.thumbnailHeight+2*this.THUMBNAIL_SHADOW_OFFSETY+"px";e.style.backgroundColor="transparent";d.appendChild(e);e=document.createElement("div");e.style.position="relative";d.appendChild(e);if(a.dom.UIconfig.enableThumbnailRotateButtons||a.dom.UIconfig.enableThumbnailDeleteButton){e=document.createElement("div");e.className="dv-thumbnail-menu";var g=document.createElement("div");
g.classList.add("menu");g.classList.add("dv-list-group");g.style.backgroundColor=a.dom.UIconfig.contextMenuButtonColor;if(a.dom.UIconfig.enableThumbnailRotateButtons){var k=document.createElement("button");k.className="dv-list-group-item";k.onclick=function(){a.RotatePage(b,3)};k.onmouseenter=function(){this.style.background=a.dom.UIconfig.contextMenuHoverButtonColor};k.onmouseleave=function(){this.style.background=a.dom.UIconfig.contextMenuButtonColor};var p=document.createElement("span");p.className=
"context-menu-icon";p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 11.5V7.6c2.8.5 5 2.9 5 5.9s-2.2 5.4-5 5.9v2c3.9-.5 7-3.9 7-7.9s-3.1-7.4-7-7.9V2.5L8.4 7.1l4.6 4.4zm-6.9 1c.1-.9.5-1.7 1-2.5L5.7 8.6c-.9 1.2-1.5 2.5-1.7 3.9h2.1zm2.4 5.9l-1.4 1.4c1.2.9 2.5 1.4 3.9 1.6v-2c-.9-.1-1.7-.5-2.5-1zm-2.4-3.9H4c.2 1.4.7 2.7 1.6 3.9L7.1 17c-.6-.7-.9-1.6-1-2.5z"/></svg>';p.style.fill=a.dom.UIconfig.contextMenuIconColor;k.appendChild(p);g.appendChild(k);k=document.createElement("button");
k.className="dv-list-group-item";k.onclick=function(){a.RotatePage(b,1)};k.onmouseenter=function(){this.style.background=a.dom.UIconfig.contextMenuHoverButtonColor};k.onmouseleave=function(){this.style.background=a.dom.UIconfig.contextMenuButtonColor};p=document.createElement("span");p.className="context-menu-icon";p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.6 7.1L11 2.5v3.1c-3.9.5-7 3.9-7 7.9s3.1 7.4 7 7.9v-2c-2.8-.5-5-2.9-5-5.9s2.2-5.4 5-5.9v3.9l4.6-4.4zm4.4 5.4c-.2-1.4-.7-2.7-1.6-3.9L17 10c.5.8.9 1.6 1 2.5h2zm-7 6.9v2c1.4-.2 2.7-.7 3.9-1.6l-1.4-1.4c-.8.5-1.6.9-2.5 1zm3.9-2.4l1.4 1.4c.9-1.2 1.5-2.5 1.6-3.9h-2c-.1.9-.4 1.8-1 2.5z"/></svg>';
p.style.fill=a.dom.UIconfig.contextMenuIconColor;k.appendChild(p);g.appendChild(k)}a.serverCtx.enablePageRemoval&&a.dom.UIconfig.enableThumbnailDeleteButton&&1<a.GetPageCount()&&(k=document.createElement("button"),k.className="dv-list-group-item",k.onclick=function(){a.DeletePageInteractive(b)},k.onmouseenter=function(){this.style.background=a.dom.UIconfig.contextMenuHoverButtonColor},k.onmouseleave=function(){this.style.background=a.dom.UIconfig.contextMenuButtonColor},p=document.createElement("span"),
p.className="context-menu-icon",p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>',p.style.fill=a.dom.UIconfig.contextMenuIconColor,k.appendChild(p),g.appendChild(k));e.appendChild(g);d.appendChild(e)}a.Internal.Thumbnails.setThumbnailText(d,b.toString());return d},getSelectedThumbnails:function(b){var d=a.Internal.Thumbnails.selectedItems.slice();b&&d.sort(function(e,g){return e-
g});return d},setThumbnailSelected:function(b,d){return d?this.selectThumbnail(b):this.unselectThumbnail(b)},selectThumbnail:function(b){if(1>b||b>a.GetPageCount())return DocuViewareAPI.Status.GenericError;-1==this.selectedItems.indexOf(b)&&(this.selectedItems.push(b),a.dom.updateThumbStyle(b));return DocuViewareAPI.Status.OK},unselectThumbnail:function(b){if(1>b||b>a.GetPageCount())return DocuViewareAPI.Status.GenericError;this.selectedItems&&-1<this.selectedItems.indexOf(b)&&(this.selectedItems.splice(this.selectedItems.indexOf(b),
1),a.dom.updateThumbStyle(b));return DocuViewareAPI.Status.OK},isThumbnailSelected:function(b){return this.selectedItems?-1<this.selectedItems.indexOf(b):!1},toggleThumbnailSelection:function(b){return 1>b||b>a.GetPageCount()?DocuViewareAPI.Status.GenericError:this.isThumbnailSelected(b)?this.unselectThumbnail(b):this.selectThumbnail(b)},reinitThumbnailsSelection:function(){var b=this.selectedItems;this.selectedItems=[];if(0!=b.length)for(var d=0;d<b.length;d++)a.dom.updateThumbStyle(b[d])},reinitThumbnails:function(){a.Internal.Thumbnails.reinitThumbnailsSelection();
for(var b=a.dom.thumbnailArea.childElementCount,d=0;d<b;d++){var e=a.dom.thumbnailArea.children[d];a.Internal.Thumbnails.setThumbnailPageDest(e,d+1);a.Internal.Thumbnails.setThumbnailText(e,(d+1).toString())}},removeAllThumbnails:function(){this.selectedItems=[];if(a.dom.thumbnailArea)for(;a.dom.thumbnailArea.hasChildNodes();)a.dom.thumbnailArea.removeChild(a.dom.thumbnailArea.lastChild)}},Files:{MAX_UPLOAD_THREADS:3,uploadThreads:0,uploadStates:[],uploading:!1,uploadChunks:0,file:null,updateProgress:function(){for(var b=
0,d=0;d<a.Internal.Files.uploadStates.length;d++)b+=a.Internal.Files.uploadStates[d];d=Math.min(b/(100*a.Internal.Files.uploadStates.length)*100,99.9);if("undefined"===typeof a.dom.progressbar.value100||a.dom.progressbar.value100<d)a.dom.progressbar.go(d),a.dom.progressbar.value100=d,b=dvJQuery(a.dom.mainSpinnerContent),d=parseFloat(Math.round(100*d)/100).toFixed(2),b.children(b.children.length-1).text(a.Localize("label__loading_progress")+" ("+d+"%)")},uploadFile:function(b,d,e,g){var k=b.size;if(0!=
k)if(a.Internal.Files.file=b,0<a.dom.maxUploadSize&&a.dom.maxUploadSize<k)b=alert,d=a.Localize("error__upload_max_size"),e=a.dom.maxUploadSize,g=1099511627776,e=0<=e&&1024>e?e+" B":1024<=e&&1048576>e?(e/1024).toFixed(2)+" KB":1048576<=e&&1073741824>e?(e/1048576).toFixed(2)+" MB":1073741824<=e&&e<g?(e/1073741824).toFixed(2)+" GB":e>=g?(e/g).toFixed(2)+" TB":e+" B",b(d+e+".");else{for(var p=[],n=0,w=0,C=a.dom.packetSize>k?k:a.dom.packetSize;w<k;)n++,p.push(b.slice(w,C)),w=C,C=w+a.dom.packetSize;w=0;
C=Date.now();for(a.debug&&console.log("DocuVieware: uploadFile::creating packets");w<n;)this.uploadChunk(C,b.name,p[w],n,w+1,k,d,e,g),w++;a.debug&&console.log("DocuVieware: uploadFile::"+n+" packets generated")}},uploadChunk:function(b,d,e,g,k,p,n,w,C){function K(aa,ha){dvJQuery(a.dom.mainSpinner).show();a.ajax.transferID=aa;a.Internal.Files.uploading=!0;a.Internal.Files.uploadStates=Array(g);for(aa=0;aa<g;aa++)a.Internal.Files.uploadStates[aa]=0;a.Internal.Files.uploadThreads=0;a.Internal.Files.uploadChunks=
ha;a.dom.progressbar.go(0);a.dom.progressbar.value100=0;ha=dvJQuery(a.dom.mainSpinnerContent);ha.children(ha.children.length-1).text(a.Localize("label__loading_progress"))}a.ajax.transferID!=b&&K(b,g);if(1==a.Internal.Files.uploading)if(a.Internal.Files.uploadThreads>=a.Internal.Files.MAX_UPLOAD_THREADS)setTimeout(function(){a.Internal.Files.uploadChunk(b,d,e,g,k,p,n,w,C)},10);else{a.Internal.Files.uploadThreads++;var F=new FileReader;if(a.favorMultipartUpload)F.onload=function(aa){a.Internal.Files.transferChunk(b,
d,e,null,g,k,p,n,w,C)},F.readAsArrayBuffer(e);else if(null==F.readAsBinaryString)if(a.isIE11){F=URL.createObjectURL(e);var Y=new XMLHttpRequest;Y.open("get",F,!0);Y.responseType="arraybuffer";Y.onload=function(){if(200==this.status){for(var aa=new Uint8Array(this.response),ha=aa.length,da=Array(ha);ha--;)da[ha]=String.fromCharCode(aa[ha]);aa=window.btoa(da.join(""));a.Internal.Files.transferChunk(b,d,e,aa,g,k,p,n,w,C)}};Y.send()}else F.onload=function(aa){var ha=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(this.result);
aa=DocuViewareEncodingUtilities.base64;for(var da=aa.encode,la=ha.length,Ha=Array(la);la--;)Ha[la]=String.fromCharCode(ha[la]);ha=Ha.join("");aa=da.call(aa,ha);a.Internal.Files.transferChunk(b,d,e,aa,g,k,p,n,w,C)},F.readAsArrayBuffer(e);else F.onload=function(aa){aa=DocuViewareEncodingUtilities.base64.encode(aa.target.result);a.Internal.Files.transferChunk(b,d,e,aa,g,k,p,n,w,C)},F.readAsBinaryString(e)}},transferChunk:function(b,d,e,g,k,p,n,w,C,K){function F(aa){a.Internal.Files.uploading=!1;a.dom.progressbar.go(100);
a.dom.progressbar.value100=100;dvJQuery(a.dom.mainSpinner).hide();if(aa){if(a.callbacks.onFileOpenSuccess)a.callbacks.onFileOpenSuccess()}else if(a.callbacks.onFileOpenError)a.callbacks.onFileOpenError()}var Y={url:a.appControllerPath+(a.favorMultipartUpload?"/loadfromfilemultipart":"/loadfromfile")+(a.useIdInRoot?"/1":""),async:!0,beforeSend:function(){a.Internal.Files.uploadStates[p-1]=0;return a.Internal.Files.uploading},success:function(aa){a.Internal.Files.uploading?(aa="string"===typeof aa?
eval("("+aa+")"):aa)&&aa.status==DocuViewareAPI.Status.OK?(a.Internal.Files.uploadThreads--,aa.isTransfering?(a.Internal.Files.uploadStates[p-1]=100,a.Internal.Files.updateProgress()):(F(!0),a.ajax.SetNewServerCtx(aa))):aa&&aa.status!=DocuViewareAPI.Status.OK&&null!=aa.responseType&&"DocuVieware"===aa.responseType&&aa.allowRetry?(console.log("DocuVieware: Failed to upload packet: "+p.toString()+". Retrying..."),a.ajax.PostAjaxRequestForDocuViewareAction(Y)):(F(!1),a.Internal.Files.uploadThreads--,
a.ajax.HandleError(aa)):a.Internal.Files.uploadThreads--},error:function(aa){a.ajax.HandleError(aa);F(!1);a.Internal.Files.uploadThreads--},xhr:function(){var aa=dvJQuery.ajaxSettings.xhr();aa.upload&&aa.upload.addEventListener("progress",function(ha){ha.lengthComputable&&(a.Internal.Files.uploadStates[p-1]=ha.loaded/ha.total*100,a.Internal.Files.updateProgress())},!1);return aa}};a.favorMultipartUpload?(b=new FormData,b.append("transferID",a.ajax.transferID),b.append("sessionID",a.ajax.sessionID),
b.append("appendMode",w),b.append("fileName",d),b.append("fileSize",n),b.append("data",e,"fileblob"),b.append("chunkCount",k),b.append("chunkID",p),b.append("password",C),b.append("contentEncoding",K),Y.data=b,Y.cache=!1,Y.contentType=!1,Y.processData=!1):(d=JSON.stringify({transferID:a.ajax.transferID,sessionID:a.ajax.sessionID,appendMode:w,fileName:d,fileSize:n,data:g,chunkCount:k,chunkID:p,password:C,contentEncoding:K}),Y.data=d,Y.contentType="application/json");a.ajax.PostAjaxRequestForDocuViewareAction(Y)}},
FilePassword:{dialog:null,createAndShowDialog:function(b,d){null!=a.Internal.FilePassword.dialog&&a.Internal.FilePassword.dialog.remove();a.Internal.FilePassword.dialog=dvJQuery(a.dom.dvpassword).clone();var e=a.Internal.FilePassword.dialog;dvJQuery(a.dom.mainSpinner).hide();dvJQuery(a.dom.modalOverlayArea).show();e.appendTo(dvJQuery(a.dom.mainArea));e.css("display","block");e.find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor);e.find(".dvUi-dialog-content").css("background-color",
a.dom.UIconfig.panelBackColor);e.find(".password-dialog-submit-button").click(function(){b(e.find("input[type=password]").val())});e.find(".password-dialog-close-button").click(function(){d()})},showError:function(b){var d=a.Internal.FilePassword.dialog.find(".dvUi-state-error-text");d.text(b);d.css({"font-weight":"bold"});setTimeout(function(){d.css({"font-weight":"normal"})},1E3)},destroyDialog:function(){a.Internal.FilePassword.dialog.remove();dvJQuery(a.dom.modalOverlayArea).hide()},setPassword:function(b,
d){a.ajax.PostBaseRequest("setpassword",{data:{password:b},success:function(e){(e="string"===typeof e?eval("("+e+")"):e)&&e.status==DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(e),a.Internal.FilePassword.destroyDialog()):e.status!==DocuViewareAPI.Status.InvalidPassword&&e.status!==DocuViewareAPI.Status.PasswordRequired||!d?a.ajax.HandleError(e):a.Internal.FilePassword.showError(a.Localize("dialog_password_incorrect"))},error:function(e){a.ajax.HandleError(e)}},!1,!0)}},Print:{MAX_PRINTING_THREADS:5,
printThreads:0,isPrinting:!1,printPages:function(b,d,e,g,k,p){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.isIE&&a.IsFullScreenMode()&&a.ToggleFullscreen();if(d&&!a.Internal.Utilities.pageRangeChecker(a.GetPageCount(),d))return a.DisplayError(a.Localize("error__invalid_page_range")),DocuViewareAPI.Status.GenericError;if("0"==e)if(a.Internal.Utilities.pageRangeToArrayConverter(d)){e=function(){a.Internal.Print.isPrinting=!1;p&&p()};var n=function(F,Y){if(a.Internal.Print.isPrinting&&
(C[F-1]=Y,K++,g&&g(K,w.length),K==w.length)){var aa=document.createElement("iframe");document.body.appendChild(aa);aa.contentWindow.document.open();aa.contentWindow.document.write("<!doctype html>");a.isFirefox||a.isEdge?aa.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>"+a.serverCtx.fileName+"</title><style media='print'>@page{size:auto;margin:0;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>"):
aa.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>"+a.serverCtx.fileName+"</title><style media='print'>@page{size:auto;margin:10mm;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>");for(F=0;F<K;F++)0<F&&aa.contentWindow.document.write("<div style='page-break-before:always;width:0;height:0;margin:0;padding:0'></div>"),aa.contentWindow.document.write(C[w[F]-
1]),"function"==typeof CollectGarbage&&CollectGarbage();aa.contentWindow.document.write("</body></html>");aa.contentWindow.document.close();setTimeout(function(){document.body.removeChild(aa)},6E3);a.Internal.Print.isPrinting=!1;k&&k();if(a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted()}},w=a.Internal.Utilities.pageRangeToArrayConverter(d),C=[],K=0;a.Internal.Print.isPrinting=!0;for(d=0;d<w.length;d++)this.getPageForPrint(b,w[d],w.length,n,e)}else return DocuViewareAPI.Status.GenericError;
else if(window.open(a.appControllerPath+"/print"+(a.useIdInRoot?"/1":"")+"?sessionID="+a.ajax.sessionID+"&pageRange="+(d?d:"*")+"&printAnnotations="+b,"_blank"),k&&k(),a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted();return DocuViewareAPI.Status.OK},getPageForPrint:function(b,d,e,g,k){1==a.Internal.Print.isPrinting&&(a.Internal.Print.printThreads>=a.Internal.Print.MAX_PRINTING_THREADS?setTimeout(function(){a.Internal.Print.getPageForPrint(b,d,e,g,k)},10):(a.Internal.Print.printThreads++,
a.ajax.PostBaseRequest("print",{data:{entries:[d],printAnnotations:b,pageCount:e},success:function(p){if((p="string"===typeof p?eval("("+p+")"):p)&&p.status==DocuViewareAPI.Status.OK&&p.contextID==a.ajax.contextID)for(var n=0;n<p.images.length;n++){var w=null;if(p.images[n].getFromCache){var C=a.cache.getPageObject(p.images[n].pageNo);C&&(w=C.bitmap,w.style.display="block",w.style.maxWidth="99.5%",w.style.maxHeight="99.5%",w.style.margin="0 auto",w.style.padding="0",w.style.height="auto",w.style.width=
"auto",w=w.outerHTML)}else p.images[n].mime&&p.images[n].data&&(w="<img src='data:"+p.images[n].mime+";base64,"+p.images[n].data+"' style='display: block; max-width: 99.5%; max-height: 99.5%; margin: 0 auto; padding: 0; height: auto; width: auto;'>",p.images[n].setInCache&&a.cache.cachePageBitmap(p.images[n].pageNo,p.images[n].mime,p.images[n].data,p.images[n].scale,p.images[n].hasTransparency));g&&g(p.images[n].pageNo,w)}"function"==typeof CollectGarbage&&CollectGarbage()},error:function(p){a.ajax.HandleError(p);
k&&k()},complete:function(p){a.Internal.Print.printThreads--}},!1,!0)))}},Selection:{getSelectionAreaCoordinates:function(){var b={left:0,top:0,width:0,height:0};if((3==a.events.mouseMode||4==a.events.mouseMode)&&0<dvJQuery(a.dom.rselect).width()&&dvJQuery(a.dom.rselect).height()){var d=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),e=a.dom.viewerArea.getBoundingClientRect(),g=a.dom.rselect.getBoundingClientRect();e={left:g.left-e.left-d.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),
top:g.top-e.top-d.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:dvJQuery(a.dom.rselect).width(),height:dvJQuery(a.dom.rselect).height()};d=a.Internal.Matrix.scale(a.Internal.Matrix.invert(d.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(d,0,e);b.left=a.Internal.Utilities.roundEx(e.left,7);b.top=a.Internal.Utilities.roundEx(e.top,7);b.width=a.Internal.Utilities.roundEx(e.width,7);b.height=a.Internal.Utilities.roundEx(e.height,7)}return b},setSelectionAreaCoordinates:function(b){if(!a.serverCtx.documentLoaded||
"object"!==typeof b||!b.left&&0!=b.left||!b.top&&0!=b.top||!b.width||!b.height)return DocuViewareAPI.Status.GenericError;var d=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),e=a.Internal.Matrix.scale(d.contentMatrix,96,96,!1);a.Internal.Matrix.transformBBox(e,0,b);e=b.left+d.pageLeft;var g=b.top+d.pageTop,k=b.width;b=b.height;if(e<d.pageLeft||e+k>d.pageLeft+d.pageWidth||g<d.pageTop||g+b>d.pageTop+d.pageHeight)return DocuViewareAPI.Status.GenericError;3!=a.events.mouseMode&&4!=a.events.mouseMode&&
a.SetMouseMode(3);this.selectionArea.startNewSelectionBox(e,g,!0);a.dom.rselect.style.height=b+"px";a.dom.rselect.style.width=k+"px";a.dom.rselect.height=b;a.dom.rselect.width=k;this.selectionArea.show();return DocuViewareAPI.Status.OK},clearSelectionArea:function(){this.selectionArea.reset()},selectionArea:{isMoving:!1,isSelected:!1,isOver:!1,resizingMode:-1,lineMode:0,startX:0,endX:0,startY:0,endY:0,antOffset:0,dashList:[4,4,4,4],dashLength:0,init:function(b){a.dom.rselect=document.createElement("canvas");
a.dom.rselect.style.zIndex=a.dom.zindexManager.getSelectionAreaZindex();a.dom.rselect.style.display="block";a.dom.rselect.style.position="absolute";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.style.left="0px";a.dom.rselect.style.top="0px";a.dom.rselect.style.padding="0px";a.dom.rselect.style.margin="0px";a.dom.rselect.style.visibility="hidden";window.PointerEvent?(a.dom.rselect.onpointerup=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseUp(d);
break;case "pen":a.Internal.Selection.selectionArea.mouseUp(d,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseDown(d,!0);break;default:a.Internal.Selection.selectionArea.mouseUp(d)}},a.dom.rselect.onpointerdown=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseDown(d);break;case "pen":a.Internal.Selection.selectionArea.mouseDown(d,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseDown(d,!0);break;default:a.Internal.Selection.selectionArea.mouseDown(d)}},
a.dom.rselect.onpointermove=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseMove(d);break;case "pen":a.Internal.Selection.selectionArea.mouseMove(d,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseMove(d,!0);break;default:a.Internal.Selection.selectionArea.mouseMove(d)}},a.dom.rselect.onpointerleave=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseLeave(d);break;case "pen":a.Internal.Selection.selectionArea.mouseLeave(d);
break;default:a.Internal.Selection.selectionArea.mouseLeave(d)}},a.dom.rselect.onpointerenter=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseEnter(d);break;case "pen":a.Internal.Selection.selectionArea.mouseEnter(d);break;default:a.Internal.Selection.selectionArea.mouseEnter(d)}}):(a.dom.rselect.onmouseup=function(d,e){return a.Internal.Selection.selectionArea.mouseUp(d,e)},a.dom.rselect.onmousedown=function(d,e){return a.Internal.Selection.selectionArea.mouseDown(d,
e)},a.dom.rselect.onmouseenter=function(d,e){return a.Internal.Selection.selectionArea.mouseEnter(d,e)},a.dom.rselect.onmousemove=function(d,e){return a.Internal.Selection.selectionArea.mouseMove(d,e)},a.dom.rselect.onmouseleave=function(d,e){return a.Internal.Selection.selectionArea.mouseLeave(d,e)});b.appendChild(a.dom.rselect)},reset:function(){if(3==a.events.mouseMode||4==a.events.mouseMode)this.isOver=this.isSelected=this.isMoving=!1,this.resizingMode=-1,a.dom.rselect.style.height="0px",a.dom.rselect.style.width=
"0px",a.dom.rselect.height=0,a.dom.rselect.width=0,this.hide()},show:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="visible")},hide:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="hidden")},getCornerHitTest:function(b,d,e,g){return b>=e.left-g&&b<=e.left+g&&d>=e.top-g&&d<=e.top+g?0:b>=e.right-g&&b<=e.right+g&&d>=e.top-g&&d<=e.top+g?1:b>=e.right-g&&b<=e.right+g&&d<=e.bottom+g&&d>=e.bottom-g?2:b>=e.left-g&&b<=e.left+g&&d<=e.bottom+g&&d>=e.bottom-g?3:b>=e.left-g&&b<=e.left+g?4:
d>=e.top-g&&d<=e.top+g?5:b>=e.right-g&&b<=e.right+g?6:d<=e.bottom+g&&d>=e.bottom-g?7:-1},getGripSize:function(b){return 6*(b?3:1)},getStartPosition:function(){var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage());return{x:this.startX-b.pageLeft,y:this.startY-b.pageTop}},getEndPosition:function(){var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage());return{x:this.endX-b.pageLeft,y:this.endY-b.pageTop}},getPageBounds:function(b){b=a.Internal.Pages.getRenderingState(b);var d=a.dom.viewerArea.getBoundingClientRect(),
e=a.dom.rselect.getBoundingClientRect();return{left:e.left-d.left-b.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),top:e.top-d.top-b.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:e.width,height:e.height}},setCursor:function(b){if(this.isSelected&&this.isOver||this.isSelected&&this.isMoving){if(this.isMoving)b=this.resizingMode;else{b=this.getGripSize(b);var d=a.dom.rselect.getBoundingClientRect();b=this.getCornerHitTest(a.events.mouseX,a.events.mouseY,d,b)}switch(b){case 0:a.dom.viewerArea.cursorMgr.setStdCursor("nw-resize");
break;case 1:a.dom.viewerArea.cursorMgr.setStdCursor("ne-resize");break;case 2:a.dom.viewerArea.cursorMgr.setStdCursor("nwse-resize");break;case 3:a.dom.viewerArea.cursorMgr.setStdCursor("nesw-resize");break;case 4:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");break;case 5:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;case 6:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");break;case 7:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;default:a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll")}}else this.isOver&&
!this.isDrawing?a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll"):a.dom.viewerArea.cursorMgr.setStdCursor("crosshair")},setSelectionRectangleStyle:function(b){a.dom.rselect&&(b?(a.dom.rselect.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,a.dom.rselect.style.opacity="0.25",a.dom.rselect.style.borderStyle="none",a.dom.rselect.style.borderWidth="0px"):(a.dom.rselect.style.backgroundColor="rgba(0,0,255,0.2)",a.dom.rselect.style.borderStyle="solid",a.dom.rselect.style.borderColor=
"red",a.dom.rselect.style.borderWidth="1px"))},setLineMode:function(b){this.lineMode=b},startNewAnnotBox:function(b,d){this.stopDrawingAnts();this.startX=b;this.startY=d;a.dom.rselect.style.left=b+"px";a.dom.rselect.style.top=d+"px";a.dom.rselect.style.height="1px";a.dom.rselect.style.width="1px";a.dom.rselect.height=dvJQuery(a.dom.rselect).height();a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);this.show();
this.isDrawing=!0},setAnnotBoxEndPoint:function(b,d){this.endX=null!=b?b:this.startX;this.endY=null!=d?d:this.startY},startNewSelectionBox:function(b,d,e){this.stopDrawingAnts();this.isSelected=!1;this.startX=b;this.startY=d;a.dom.rselect.style.left=b+"px";a.dom.rselect.style.top=d+"px";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.height=dvJQuery(a.dom.rselect).height();a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,
0,a.dom.rselect.width,a.dom.rselect.height);for(b=this.dashLength=this.antOffset=0;b<this.dashList.length;b++)this.dashLength+=this.dashList[b];this.drawingAnts();e||(this.isDrawing=!0)},drawingAnts:function(){a.Internal.Selection.selectionArea.antOffset++;a.Internal.Selection.selectionArea.antOffset>a.Internal.Selection.selectionArea.dashLength&&(a.Internal.Selection.selectionArea.antOffset=0);a.Internal.Selection.selectionArea.draw();a.Internal.Selection.selectionArea.drawingAntsOn=setTimeout(a.Internal.Selection.selectionArea.drawingAnts,
20)},stopDrawingAnts:function(){this.drawingAntsOn&&(clearTimeout(this.drawingAntsOn),this.drawingAntsOn=null)},draw:function(){if(3==a.events.mouseMode||4==a.events.mouseMode){var b=a.dom.rselect.getContext("2d");b.clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);b.lineWidth="1";b.strokeStyle=a.dom.UIconfig.activeSelectedColor;b.setLineDash?(b.setLineDash(this.dashList),b.lineDashOffset=-this.antOffset,b.strokeRect(0,0,a.dom.rselect.width,a.dom.rselect.height)):(b.beginPath(),this.drawDashedLine(b,
0,0,a.dom.rselect.width,0,this.dashList,this.antOffset),this.drawDashedLine(b,a.dom.rselect.width,0,a.dom.rselect.width,a.dom.rselect.height,this.dashList,this.antOffset),this.drawDashedLine(b,a.dom.rselect.width,a.dom.rselect.height,0,a.dom.rselect.height,this.dashList,this.antOffset),this.drawDashedLine(b,0,a.dom.rselect.height,0,0,this.dashList,this.antOffset),b.closePath(),b.stroke())}},drawDashedLine:function(b,d,e,g,k,p,n){var w=p.length,C=0;for(J=0;J<w;J++)C+=parseInt(p[J]);g-=d;k-=e;var K=
g?k/g:1E15;n=C*(1-n/C);n=Math.sqrt(n*n/(1+K*K));if(0>g||0>k)n=-n;d-=n;g+=n;e-=K*n;k+=K*n;b.moveTo(d,e);n=Math.sqrt(g*g+k*k);C=0;for(var F=!0;.1<=n;){var Y=p[C++%w];Y>n&&(Y=n);var aa=Math.sqrt(Y*Y/(1+K*K));if(0>g||0>k)aa=-aa;d+=aa;e+=K*aa;b[F?"lineTo":"moveTo"](d,e);n-=Y;F=!F}},mouseUp:function(b,d){if(1==a.events.mouseMode&&this.isDrawing){d=1==this.lineMode?96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*a.GetCurrentZoom():0;0!=this.straightLineMode&&(2==this.straightLineMode?
(a.dom.rselect.style.width="0px",a.dom.rselect.width=0,a.dom.rselect.style.left=a.Internal.Selection.selectionArea.startX+"px"):(a.dom.rselect.style.height="0px",a.dom.rselect.height=0,a.dom.rselect.style.top=a.Internal.Selection.selectionArea.startY+"px"));var e=a.dom.viewerArea.getBoundingClientRect(),g=a.Internal.Coordinates.getViewerScrollLeft(),k=a.Internal.Coordinates.getViewerScrollTop();g=b.clientX+g;b=b.clientY+k;0==this.straightLineMode?a.Internal.Selection.selectionArea.setAnnotBoxEndPoint(g-
e.left,b-e.top):2==this.straightLineMode?(a.Internal.Selection.selectionArea.startX-=d,a.Internal.Selection.selectionArea.setAnnotBoxEndPoint(null,b-e.top)):(a.Internal.Selection.selectionArea.startY-=d,a.Internal.Selection.selectionArea.setAnnotBoxEndPoint(g-e.left,null));this.isDrawing=!1;this.hide();a.Internal.DigiSign.isAddingSignature?a.Internal.DigiSign.addSignatureInteractive():a.Internal.Annotations.addAnnotInteractive();return!0}if(4==a.events.mouseMode&&this.isDrawing)return b=a.GetSelectionAreaCoordinates(),
this.reset(),this.isDrawing=!1,a.ZoomRect(b),!0;if(3==a.events.mouseMode&&this.isDrawing){this.isDrawing=!1;if(0==dvJQuery(a.dom.rselect).width()&&0==dvJQuery(a.dom.rselect).height())this.hide();else if(this.isSelected=!0,a.callbacks.onAreaSelected)a.callbacks.onAreaSelected();return!0}return 3==a.events.mouseMode&&this.isMoving?(this.isMoving=!1,0==dvJQuery(a.dom.rselect).width()&&0==dvJQuery(a.dom.rselect).height()&&this.hide(),-1!=this.resizingMode&&(this.resizingMode=-1,this.setCursor()),!0):
!1},mouseDown:function(b,d){a.events.mouseX=b.clientX;a.events.mouseY=b.clientY;a.events.mouseDownClientX=b.clientX;a.events.mouseDownClientY=b.clientY;this.isSelected=this.isMoving=!0;d=this.getGripSize(d);var e=a.dom.rselect.getBoundingClientRect();this.resizingMode=this.getCornerHitTest(b.clientX,b.clientY,e,d);b.stopImmediatePropagation();b.preventDefault();return!1},mouseMove:function(b,d){this.setCursor(d);if(1==a.events.mouseMode){var e=1==this.lineMode?96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*
a.GetCurrentZoom():0,g=a.dom.viewerArea.getBoundingClientRect();d=b.clientX-a.events.mouseDownX+a.Internal.Coordinates.getViewerScrollLeft();var k=b.clientY-a.events.mouseDownY+a.Internal.Coordinates.getViewerScrollTop(),p=Math.abs(d),n=Math.abs(k);1==this.lineMode&&b.ctrlKey?Math.abs(d)>Math.abs(k)?(k=0,this.straightLineMode=1,n=e):(d=0,this.straightLineMode=2,p=e):this.straightLineMode=0;a.dom.rselect.style.width=p+"px";a.dom.rselect.style.height=n+"px";a.dom.rselect.width=p;a.dom.rselect.height=
n;p=2==this.straightLineMode?-e/2:0;a.dom.rselect.style.left=0>d?p+b.clientX-g.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":p+a.events.mouseDownX-g.left+"px";p=1==this.straightLineMode?-e/2:0;a.dom.rselect.style.top=0>k?p+b.clientY-g.top+a.Internal.Coordinates.getViewerScrollTop()+"px":p+a.events.mouseDownY-g.top+"px";1==this.lineMode&&(b=a.dom.rselect.getContext("2d"),b.lineWidth=e,b.strokeStyle=a.Internal.Annotations.currentInteractiveAnnotProperties.strokeColor,b.clearRect(0,0,a.dom.rselect.width,
a.dom.rselect.height),b.beginPath(),0!=this.straightLineMode?1==this.straightLineMode?(b.moveTo(0,a.dom.rselect.height/2),b.lineTo(a.dom.rselect.width,a.dom.rselect.height/2)):(b.moveTo(a.dom.rselect.width/2,0),b.lineTo(a.dom.rselect.width/2,a.dom.rselect.height)):(b.moveTo(0<d?0:a.dom.rselect.width,0<k?0:a.dom.rselect.height),b.lineTo(0>d?0:a.dom.rselect.width,0>k?0:a.dom.rselect.height)),b.stroke());return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isDrawing){g=a.dom.viewerArea.getBoundingClientRect();
p=b.clientX-g.left+a.Internal.Coordinates.getViewerScrollLeft();n=b.clientY-g.top+a.Internal.Coordinates.getViewerScrollTop();var w=this.startX,C=this.startY+a.Internal.Coordinates.getViewerScrollTop();e=a.Internal.Pages.getRenderingState(a.GetCurrentPage());var K=null;w>=e.pageLeft&&w<=e.pageLeft+e.pageWidth?K=this.startX+g.left:w<e.pageLeft?K=g.left+e.pageLeft:w>e.pageLeft+e.pageWidth&&(K=g.left+e.pageLeft+e.pageWidth);var F=null;C>=a.Internal.Coordinates.getViewerScrollTop()+e.pageTop&&C<=a.Internal.Coordinates.getViewerScrollTop()+
e.pageTop+e.pageHeight?F=this.startY+g.top:C<a.Internal.Coordinates.getViewerScrollTop()+e.pageTop?F=g.top+e.pageTop:C>a.Internal.Coordinates.getViewerScrollTop()+e.pageTop+e.pageHeight&&(F=g.top+e.pageTop+e.pageHeight);K&&F&&(d=b.clientX-K+a.Internal.Coordinates.getViewerScrollLeft(),k=b.clientY-F+a.Internal.Coordinates.getViewerScrollTop(),p<=e.pageLeft+e.pageWidth?a.dom.rselect.style.width=p>=e.pageLeft?Math.abs(d)+"px":dvJQuery(a.dom.rselect).position().left+dvJQuery(a.dom.rselect).width()-e.pageLeft+
"px":w<=a.Internal.Coordinates.getViewerScrollLeft()+e.pageLeft+e.pageWidth?a.dom.rselect.style.width=e.pageLeft+e.pageWidth-dvJQuery(a.dom.rselect).position().left+"px":a.dom.rselect.style.width="0px",n<=e.pageTop+e.pageHeight?a.dom.rselect.style.height=n>=e.pageTop?Math.abs(k)+"px":dvJQuery(a.dom.rselect).position().top+dvJQuery(a.dom.rselect).height()-e.pageTop+"px":C<=a.Internal.Coordinates.getViewerScrollTop()+e.pageTop+e.pageHeight?a.dom.rselect.style.height=e.pageTop+e.pageHeight-dvJQuery(a.dom.rselect).position().top+
"px":a.dom.rselect.style.height="0px",a.dom.rselect.style.left=0>d?p>=e.pageLeft?b.clientX-g.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":e.pageLeft+"px":K-g.left+"px",a.dom.rselect.style.top=0>k?n>=e.pageTop?b.clientY-g.top+a.Internal.Coordinates.getViewerScrollTop()+"px":e.pageTop+"px":F-g.top+"px");a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.height=dvJQuery(a.dom.rselect).height();0<dvJQuery(a.dom.rselect).width()&&0<dvJQuery(a.dom.rselect).height()&&this.show();
return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isMoving){e=a.Internal.Pages.getRenderingState(a.GetCurrentPage());g=a.dom.viewerArea.getBoundingClientRect();p=a.dom.rselect.getBoundingClientRect();if(-1!=this.resizingMode&&8!=this.resizingMode){n=b.pageX-g.left+a.Internal.Coordinates.getViewerScrollLeft();g=b.pageY-g.top+a.Internal.Coordinates.getViewerScrollTop();d=b.clientX-p.left;k=b.clientY-p.top;switch(this.resizingMode){case 0:0<dvJQuery(a.dom.rselect).width()-d&&(n<e.pageLeft?
(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-e.pageLeft)),a.dom.rselect.style.left=e.pageLeft+"px"):(a.dom.rselect.style.left=n+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-d)));0<dvJQuery(a.dom.rselect).height()-k&&(g<e.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-e.pageTop)),a.dom.rselect.style.top=e.pageTop+"px"):(a.dom.rselect.style.top=g+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-
k)));break;case 1:d=b.clientX-p.right;0<dvJQuery(a.dom.rselect).width()+d&&(n>e.pageLeft+e.pageWidth?dvJQuery(a.dom.rselect).width(e.pageLeft+e.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+d));0<dvJQuery(a.dom.rselect).height()-k&&(g<e.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-e.pageTop)),a.dom.rselect.style.top=e.pageTop+"px"):(a.dom.rselect.style.top=g+"px",
dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-k)));break;case 2:d=b.clientX-p.right;0<dvJQuery(a.dom.rselect).width()+d&&(n>e.pageLeft+e.pageWidth?dvJQuery(a.dom.rselect).width(e.pageLeft+e.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+d));k=b.clientY-p.bottom;0<dvJQuery(a.dom.rselect).height()+k&&(g>e.pageTop+e.pageHeight?dvJQuery(a.dom.rselect).height(e.pageTop+e.pageHeight-dvJQuery(a.dom.rselect).position().top):
dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+k));break;case 3:0<dvJQuery(a.dom.rselect).width()-d&&(n<e.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-e.pageLeft)),a.dom.rselect.style.left=e.pageLeft+"px"):(a.dom.rselect.style.left=n+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-d)));k=b.clientY-p.bottom;0<dvJQuery(a.dom.rselect).height()+k&&(g>e.pageTop+e.pageHeight?dvJQuery(a.dom.rselect).height(e.pageTop+
e.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+k));break;case 4:0<dvJQuery(a.dom.rselect).width()-d&&(n<e.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-e.pageLeft)),a.dom.rselect.style.left=e.pageLeft+"px"):(a.dom.rselect.style.left=n+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-d)));break;case 5:0<dvJQuery(a.dom.rselect).height()-k&&(g<e.pageTop?
(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-e.pageTop)),a.dom.rselect.style.top=e.pageTop+"px"):(a.dom.rselect.style.top=g+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-k)));break;case 6:d=b.clientX-p.right;0<dvJQuery(a.dom.rselect).width()+d&&(n>e.pageLeft+e.pageWidth?dvJQuery(a.dom.rselect).width(e.pageLeft+e.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+
d));break;case 7:k=b.clientY-p.bottom,0<dvJQuery(a.dom.rselect).height()+k&&(g>e.pageTop+e.pageHeight?dvJQuery(a.dom.rselect).height(e.pageTop+e.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+k))}a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.height=dvJQuery(a.dom.rselect).height()}else d=b.clientX-a.events.mouseDownClientX,k=b.clientY-a.events.mouseDownClientY,dvJQuery(a.dom.rselect).position().left+d>=e.pageLeft&&
dvJQuery(a.dom.rselect).position().left+d+dvJQuery(a.dom.rselect).width()<=e.pageLeft+e.pageWidth?(a.dom.rselect.style.left=dvJQuery(a.dom.rselect).position().left+d+"px",a.events.mouseDownClientX+=d):dvJQuery(a.dom.rselect).position().left+d<=e.pageLeft?a.dom.rselect.style.left=e.pageLeft+"px":dvJQuery(a.dom.rselect).position().left+d+dvJQuery(a.dom.rselect).width()>=e.pageLeft+e.pageWidth&&(a.dom.rselect.style.left=e.pageLeft+e.pageWidth-dvJQuery(a.dom.rselect).width()+"px"),dvJQuery(a.dom.rselect).position().top+
k>=e.pageTop&&dvJQuery(a.dom.rselect).position().top+k+dvJQuery(a.dom.rselect).height()<=e.pageTop+e.pageHeight?(a.dom.rselect.style.top=dvJQuery(a.dom.rselect).position().top+k+"px",a.events.mouseDownClientY+=k):dvJQuery(a.dom.rselect).position().top+k<=e.pageTop?a.dom.rselect.style.top=e.pageTop+"px":dvJQuery(a.dom.rselect).position().top+k+dvJQuery(a.dom.rselect).height()>=e.pageTop+e.pageHeight&&(a.dom.rselect.style.top=e.pageTop+e.pageHeight-dvJQuery(a.dom.rselect).height()+"px");return!0}return!1},
mouseEnter:function(b,d){return this.isOver=!0},mouseLeave:function(b,d){this.isOver=!1;return!0}}},Pages:{getPage:function(b){if(null!=a.cache.Pages)for(var d=0;d<a.cache.Pages.length;d++)if(a.cache.Pages[d].pageNo==b)return a.cache.Pages[d];return null},selectByDestination:function(b){return a.ajax.PostBaseRequest("rundestination",{data:{destinationName:b},success:function(d){a.ajax.HandleServerContextResponse("string"===typeof d?eval("("+d+")"):d,!0,!0);a.dom.updateSelectedPageFader(0,a.GetCurrentPage())}},
!1)},getVisiblePageNumbers:function(){var b=a.Internal.Coordinates.getViewerScrollTop(),d=b+dvJQuery(a.dom.viewerArea).innerHeight();return this.getVisiblePageNumbersEx(b,d)},getVisiblePageNumbersEx:function(b,d){var e=[];if(0==a.dom.viewerArea.offsetWidth||0==a.dom.viewerArea.offsetHeight||null==a.cache.canvas)return e;if(b>d){var g=b;b=d;d=g}g=!1;for(var k=0;k<a.cache.canvas.length;k++){var p=a.cache.canvas[k],n=p.pageNo,w=p.canvas.length,C=parseFloat(p.canvas[0].tile.style.top);p=p.canvas[w-1];
p=parseFloat(p.tile.style.top)+parseFloat(p.tile.style.height);if(a.Internal.Coordinates.hasVerticalIntersection(C,p,b,d))e.push(n),g=!0;else if(g)break}0<e.length&&e.sort(function(K,F){return K-F});return e},getText:function(b){return(b=a.Internal.Pages.getPage(b))?b.text:null},getPageWidth:function(b){return(b=a.Internal.Pages.getPage(b))?b.width:0},getPageHeight:function(b){return(b=a.Internal.Pages.getPage(b))?b.height:0},isPageVisible:function(b){var d=a.cache.getPageCanvas(b);if(d){b=a.Internal.Coordinates.getViewerScrollTop();
var e=b+dvJQuery(a.dom.viewerArea).innerHeight(),g=d.canvas.length,k=parseFloat(d.canvas[0].tile.style.top);d=parseFloat(d.canvas[g-1].tile.style.top)+parseFloat(d.canvas[g-1].tile.style.height);if(a.Internal.Coordinates.hasVerticalIntersection(k,d,b,e))return!0}return!1},isPageRendered:function(b){return(b=a.Internal.Pages.getPage(b))?b.drawn||b.drawing:!1},getRenderRotation:function(b){return(b=a.Internal.Pages.getPage(b))?b.renderRotation:0},getPageRotation:function(b){return(b=a.Internal.Pages.getPage(b))?
b.pageRotation:0},getRenderingState:function(b){for(var d,e,g,k,p,n,w,C=0;C<a.cache.canvas.length;C++)if(a.cache.canvas[C].pageNo==b){d=a.cache.canvas[C].left;e=a.cache.canvas[C].top;g=a.cache.canvas[C].right-d;k=a.cache.canvas[C].bottom-e;break}if(b=a.Internal.Pages.getPage(b))p=b.contentMatrix,n=b.matrix,w=b.zoom;return{pageLeft:d,pageTop:e,pageWidth:g,pageHeight:k,zoom:w,matrix:n,contentMatrix:p}},pageView:function(b,d,e){function g(){if(null!=a.ajax.pendingPageViewRequests)for(var K=0;K<k.length;K++)for(var F=
k[K],Y=0;Y<a.ajax.pendingPageViewRequests.length;Y++)if(a.ajax.pendingPageViewRequests[Y]==F){a.ajax.pendingPageViewRequests.splice(Y,1);break}}if(!a.serverCtx.documentLoaded||!a.cache.canvas)return 0;for(var k=[],p=0;p<b.length;p++){var n=b[p],w=!1,C=a.Internal.Pages.getPage(n);C&&(C.drawn||C.drawing||C.renderStatus!=DocuViewareAPI.Status.OK&&!e)&&(w=!0);if(!w){w=!1;if(null!=a.ajax.pendingPageViewRequests)for(C=0;C<a.ajax.pendingPageViewRequests.length;C++)if(a.ajax.pendingPageViewRequests[C]==n){w=
!0;break}w||(null==a.ajax.pendingPageViewRequests&&(a.ajax.pendingPageViewRequests=[]),a.ajax.pendingPageViewRequests.push(n),k.push(n))}}0<k.length&&(d&&a.DisplayPendingActionNotification(),a.ajax.pageViewRequestNo+=1,a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,contentType:"application/json",data:JSON.stringify({requestName:"pageview",requestData:{sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,zoom:a.serverCtx.zoom,forceReload:e,
entries:k,requestNo:a.ajax.pageViewRequestNo}}),success:function(K){d&&a.HidePendingActionNotification();g();if((K="string"===typeof K?eval("("+K+")"):K)&&K.status==DocuViewareAPI.Status.OK&&K.contextID==a.ajax.contextID){var F=!0,Y=!1,aa=!1;K.checkZoom&&Math.round(1E3*a.cache.pageCanvasZoom)!=Math.round(1E3*K.zoom)&&(a.debug&&console.log("DocuVieware pageview: result ignored because of zoom inconsistency. ctxzoom: "+a.serverCtx.zoom+". response zoom: "+K.zoom+"."),aa=!0,F=!1);F&&a.serverCtx.viewRotation!=
K.viewRotation&&(a.debug&&console.log("DocuVieware pageview: page state rejected because of rotation inconsistency. Ctx view rotation: "+a.serverCtx.viewRotation+". Content view rotation: "+K.viewRotation),Y=!0);a.serverCtx.page=K.images;a.UpdateUI(!1,!0,F,!1,aa,Y)}},error:function(K){a.ajax.HandleError(K);a.debug&&console.log("DocuVieware pageview error");g()}}));return k.length}},Coordinates:{getViewerScrollLeft:function(){return a.dom.viewerArea.scrollLeft},getViewerScrollLeftMax:function(){return a.dom.viewerArea.scrollWidth-
a.dom.viewerArea.clientWidth},getViewerScrollTop:function(){return a.dom.viewerArea.scrollTop},getViewerScrollTopMax:function(){return a.dom.viewerArea.scrollHeight-a.dom.viewerArea.clientHeight},setViewerScrollLeft:function(b,d){b=Math.round(b);if(null!=d&&Math.abs(a.dom.viewerArea.scrollLeft-b)<d)return DocuViewareAPI.Status.OK;a.dom.viewerArea.scrollLeft=b;return DocuViewareAPI.Status.OK},setViewerScrollTop:function(b,d){b=Math.round(b);if(null!=d&&Math.abs(a.dom.viewerArea.scrollTop-b)<d)return DocuViewareAPI.Status.OK;
a.dom.viewerArea.scrollTop=b;return DocuViewareAPI.Status.OK},clienttodocument:function(b,d,e,g,k){b=a.Internal.Pages.getRenderingState(b);var p=a.dom.viewerArea.getBoundingClientRect();k="undefined"===typeof k?!0:k;d={x:d-p.left-b.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),y:e-p.top-b.pageTop+a.Internal.Coordinates.getViewerScrollTop()};g=1==g?1/96:1;b=b.contentMatrix;k&&(b=a.Internal.Matrix.invert(b));g=a.Internal.Matrix.scale(b,g,g,!1);a.Internal.Matrix.transformPoint(g,d);return d},
documentToViewer:function(b,d,e){b=a.Internal.Pages.getRenderingState(b);d={x:d,y:e};a.Internal.Matrix.transformPoint(b.contentMatrix,d);d.x+=b.pageLeft;d.y+=b.pageTop;return d},documentToViewerBox:function(b,d){b=a.Internal.Pages.getRenderingState(b);a.Internal.Matrix.transformBBox(b.contentMatrix,0,d);d.left+=b.pageLeft;d.top+=b.pageTop},hasVerticalIntersection:function(b,d,e,g){return Math.min(d,g)>=Math.max(b,e)},hasIntersection:function(b,d,e,g,k,p,n,w){return Math.min(e,n)>=Math.max(b,k)&&Math.min(g,
w)>=Math.max(d,p)},newRectangle:function(b,d,e,g){return{Left:b,Top:d,Right:b+e,Bottom:d+g,Width:e,Height:g}},rectUnion:function(b,d,e,g,k,p,n,w){b=Math.min(b,k);d=Math.min(d,p);return this.newRectangle(b,d,Math.max(e,n)-b,Math.max(g,w)-d)},isPointInsideRect:function(b,d,e){return b.x>=d.Left-e&&b.x<=d.Right+e&&b.y>=d.Top-e&&b.y<=d.Bottom+e}},Rotations:{getRotateFlipTypeAngle:function(b){switch(b){case 1:return 90;case 2:return 180;case 3:return 270}return 0}},Text:{_selectedText:null,clearSelection:function(){a.callbacks.onTextUnselected&&
null!==this._selectedText?(this._selectedText=null,a.callbacks.onTextUnselected()):this._selectedText=null},removeSelectedText:function(b,d){var e=this.getSelectedTextAreas(1);if(!e.length)return DocuViewareAPI.Status.GenericError;a.ajax.PostBaseRequest("removetext",{data:{areas:e},success:function(g){var k="string"===typeof g?eval("("+g+")"):g;k&&k.status===DocuViewareAPI.Status.OK?(a.ajax.HandleServerContextResponse("string"===typeof g?eval("("+g+")"):g,!1),a.dom.SelectedTextRegions.clear(),b&&
b()):(a.ajax.HandleError(g),d&&d())},error:function(g){a.ajax.HandleError(g);d&&d()}},!1);return DocuViewareAPI.Status.OK},anyWordHitTest:function(b,d,e){var g=a.Internal.Pages.getVisiblePageNumbers();if(null!=g)for(var k=0;k<g.length;k++)if(a.Internal.Pages.isPageRendered(g[k])){var p=a.Internal.Pages.getText(g[k]);if(null!=p){var n=a.Internal.Coordinates.clienttodocument(g[k],b,d,0);n.x*=p.scale;n.y*=p.scale;if(p.textBlock.Matrix){var w=a.Internal.Matrix.invert(p.textBlock.Matrix);a.Internal.Matrix.transformPoint(w,
n)}w=n.x;n=n.y;for(var C=p.textBlock.words,K=C.length,F=0;F<K;F++)if(-1!=C[F].PId&&C[F].BBox.Left-e<=w&&C[F].BBox.Right+e>=w&&C[F].BBox.Top-e<=n&&C[F].BBox.Bottom+e>=n)return{page:g[k],textRotate:p.textBlock.Rotation}}}return null},getSelectedText:function(){return this._selectedText},getSelectedTextCoordinatesOnDocument:function(b){var d=[];if(0<a.dom.SelectedTextRegions._cache.length)for(var e=0;e<a.dom.SelectedTextRegions._cache.length;e++)if(!Number.isInteger(b)||b===a.dom.SelectedTextRegions._cache[e].category){var g=
a.Internal.Pages.getRenderingState(a.dom.SelectedTextRegions._cache[e].pageNo),k={left:a.dom.SelectedTextRegions._cache[e].offsetLeft-g.pageLeft,top:a.dom.SelectedTextRegions._cache[e].offsetTop-g.pageTop,width:a.dom.SelectedTextRegions._cache[e].offsetWidth,height:a.dom.SelectedTextRegions._cache[e].offsetHeight};g=a.Internal.Matrix.scale(a.Internal.Matrix.invert(g.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(g,0,k);k={pageNo:a.dom.SelectedTextRegions._cache[e].pageNo,left:a.Internal.Utilities.roundEx(k.left,
7),top:a.Internal.Utilities.roundEx(k.top,7),height:a.Internal.Utilities.roundEx(k.height,7),width:a.Internal.Utilities.roundEx(k.width,7)};d.push(k)}return d},getSelectedTextAreas:function(b){b=a.Internal.Text.getSelectedTextCoordinatesOnDocument(b);var d=[];if(0<b.length)for(var e=0;e<b.length;e++)d.push({pageNo:b[e].pageNo,coordinates:{left:b[e].left,top:b[e].top,height:b[e].height,width:b[e].width}});return d},captureSelectedText:function(b,d,e,g,k,p){function n(Ja,Fb,v){var xb=Ja._selectedText.length;
0<xb&&(v?Ja._selectedText+="\r\n":" "!=Ja._selectedText[xb-1]&&"\t"!=Ja._selectedText[xb-1]&&" "!=Fb[0]&&"\t"!=Fb[0]&&(Ja._selectedText+=" "))}function w(Ja,Fb){for(var v=[],xb=Ja.Paragraphs.length,Eb=0;Eb<xb;Eb++){var Ob=Ja.Paragraphs[Eb];a.Internal.Coordinates.hasIntersection(Fb.Left,Fb.Top,Fb.Right,Fb.Bottom,Ob.BBox.Left,Ob.BBox.Top,Ob.BBox.Right,Ob.BBox.Bottom)&&v.push(Ob.Id)}return v}this._selectedText="";var C=[],K=a.dom.viewerArea.getBoundingClientRect(),F=a.Internal.Coordinates.getViewerScrollTop()-
K.top;F=(K=-1==b&&-1==e&&-1==d&&-1==g)?[a.GetCurrentPage()]:a.Internal.Pages.getVisiblePageNumbersEx(d+F,g+F);if(null!=F)for(var Y=!0,aa=1==F.length,ha=-1,da=-1,la=0;la<F.length;la++){var Ha=0==la,wa=la==F.length-1,va=F[la];if(a.Internal.Pages.isPageRendered(va)){var ua=[],Da=[],Ua=a.Internal.Pages.getText(va);if(null!=Ua){var Ka=p;0==Ua.textBlock.Rotation||K||(Ka=!0);var pa=a.Internal.Coordinates.clienttodocument(va,b,d,0);pa.x*=Ua.scale;pa.y*=Ua.scale;var Fa=a.Internal.Coordinates.clienttodocument(va,
e,g,0);Fa.x*=Ua.scale;Fa.y*=Ua.scale;if(Ua.textBlock.Matrix){var gb=a.Internal.Matrix.invert(Ua.textBlock.Matrix);a.Internal.Matrix.transformPoint(gb,pa);a.Internal.Matrix.transformPoint(gb,Fa)}gb=pa.x;var sb=pa.y;pa=Fa.x;Fa=Fa.y;if(sb>Fa){var mb=gb;gb=pa;pa=mb;mb=sb;sb=Fa;Fa=mb}Fa=a.Internal.Coordinates.newRectangle(Math.min(gb,pa),Math.min(sb,Fa),Math.abs(gb-pa),Math.abs(sb-Fa));Fa.Right=Fa.Left+Fa.Width;Fa.Bottom=Fa.Top+Fa.Height;sb=w(Ua.textBlock,Fa);mb=Ua.textBlock.words;for(var Va=mb.length,
Ya=-1,jb=0,Ma=!1,kb=null,Hb=0;Hb<Va;Hb++){var ba=mb[Hb];if(-1!=ba.PId&&(K||-1!=sb.indexOf(ba.PId)))if(Ka){if(a.Internal.Coordinates.hasIntersection(Fa.Left,Fa.Top,Fa.Right,Fa.Bottom,ba.BBox.Left,ba.BBox.Top,ba.BBox.Right,ba.BBox.Bottom)){null!=kb?(Ma=kb.LineNo==ba.LineNo,xa=!Ma):xa=Ma=!1;if(Ma&&Da[Da.length-1]===ba.PId){var za=ua[ua.length-1];ua[ua.length-1]=a.Internal.Coordinates.rectUnion(za.Left,za.Top,za.Right,za.Bottom,ba.BBox.Left,ba.BBox.Top,ba.BBox.Right,ba.BBox.Bottom)}else ua.push(a.Internal.Coordinates.newRectangle(ba.BBox.Left,
ba.BBox.Top,ba.BBox.Width,ba.BBox.Height)),Da.push(ba.PId);n(this,ba.Content,xa);this._selectedText+=ba.Content;Ma=!0;kb=ba}}else{var xa=jb!=ba.LineNo;xa&&(jb=ba.LineNo,Ma=!1,Ya=-1);if(K||!Ha||-1!=ha&&ha!=ba.LineNo||-1!=Ya){if(K)Ya=ba.LineNo;else if(-1==Ya||-1!=Ya&&ba.LineNo!=Ya&&-1==da)Ya=ba.BBox.Bottom<Fa.Bottom?ba.LineNo:-1;if(-1!=Ya)xa||Da[Da.length-1]!==ba.PId?(ua.push(a.Internal.Coordinates.newRectangle(ba.BBox.Left,ba.BBox.Top,ba.BBox.Width,ba.BBox.Height)),Da.push(ba.PId)):(za=ua[ua.length-
1],ua[ua.length-1]=a.Internal.Coordinates.rectUnion(za.Left,za.Top,za.Right,za.Bottom,ba.BBox.Left,ba.BBox.Top,ba.BBox.Right,ba.BBox.Bottom)),n(this,ba.Content,xa),this._selectedText+=ba.Content;else if(-1==da||da==ba.LineNo){if(ba.BBox.Top<Fa.Bottom)if(ba.BBox.Right<pa)Ma&&Da[Da.length-1]===ba.PId?(za=ua[ua.length-1],ua[ua.length-1]=a.Internal.Coordinates.rectUnion(za.Left,za.Top,za.Right,za.Bottom,ba.BBox.Left,ba.BBox.Top,ba.BBox.Right,ba.BBox.Bottom)):(ua.push(a.Internal.Coordinates.newRectangle(ba.BBox.Left,
ba.BBox.Top,ba.BBox.Width,ba.BBox.Height)),Da.push(ba.PId)),n(this,ba.Content,xa),this._selectedText+=ba.Content,Ma=!0;else{if(a.Internal.Coordinates.hasIntersection(Fa.Left,Fa.Top,Fa.Right,Fa.Bottom,ba.BBox.Left,ba.BBox.Top,ba.BBox.Right,ba.BBox.Bottom))for(n(this,ba.Content,xa),xa=0;xa<=ba.GlyphBoxes.length-1;xa++)ba.GlyphBoxes[xa].x+ba.GlyphBoxes[xa].width/2<pa&&(Ma&&Da[Da.length-1]===ba.PId?(Ma=ua[ua.length-1],ua[ua.length-1]=a.Internal.Coordinates.rectUnion(Ma.Left,Ma.Top,Ma.Right,Ma.Bottom,
ba.GlyphBoxes[xa].x,ba.GlyphBoxes[xa].y,ba.GlyphBoxes[xa].x+ba.GlyphBoxes[xa].width,ba.GlyphBoxes[xa].y+ba.GlyphBoxes[xa].height)):(ua.push(a.Internal.Coordinates.newRectangle(ba.GlyphBoxes[xa].x,ba.GlyphBoxes[xa].y,ba.GlyphBoxes[xa].width,ba.GlyphBoxes[xa].height)),Da.push(ba.PId)),Ma=!0,this._selectedText+=ba.GlyphBoxes[xa].glyph);break}else break;-1==da&&wa&&(da=ba.LineNo)}else break}else if(a.Internal.Coordinates.hasIntersection(Fa.Left,Fa.Top,Fa.Right,Fa.Bottom,ba.BBox.Left,ba.BBox.Top,ba.BBox.Right,
ba.BBox.Bottom)){if(Y&&1==F.length){for(Y=Hb;Y<Va;){if(mb[Y].LineNo!=jb){aa=mb[Y].BBox.Top>Fa.Bottom;break}Y+=1}Y=!1}n(this,ba.Content,xa);for(xa=0;xa<=ba.GlyphBoxes.length-1;xa++)k?za=!0:aa?Ma?(za=ba.GlyphBoxes[xa].x+ba.GlyphBoxes[xa].width/2,za=a.Internal.Coordinates.hasIntersection(Fa.Left,Fa.Top,Fa.Right,Fa.Bottom,ba.GlyphBoxes[xa].x,ba.GlyphBoxes[xa].y,ba.GlyphBoxes[xa].x+ba.GlyphBoxes[xa].width,ba.GlyphBoxes[xa].y+ba.GlyphBoxes[xa].height)&&za<Fa.Right):za=a.Internal.Coordinates.hasIntersection(Fa.Left,
Fa.Top,Fa.Right,Fa.Bottom,ba.GlyphBoxes[xa].x,ba.GlyphBoxes[xa].y,ba.GlyphBoxes[xa].x+ba.GlyphBoxes[xa].width,ba.GlyphBoxes[xa].y+ba.GlyphBoxes[xa].height):(za=-1!=Ya?!0:(Ma?ba.GlyphBoxes[xa].x+ba.GlyphBoxes[xa].width/2:ba.GlyphBoxes[xa].x+ba.GlyphBoxes[xa].width)>gb)&&-1==ha&&(ha=ba.LineNo,Ya=ba.BBox.Bottom<Fa.Bottom?ba.LineNo:-1),za&&(Ma&&Da[Da.length-1]===ba.PId?(Ma=ua[ua.length-1],ua[ua.length-1]=a.Internal.Coordinates.rectUnion(Ma.Left,Ma.Top,Ma.Right,Ma.Bottom,ba.GlyphBoxes[xa].x,ba.GlyphBoxes[xa].y,
ba.GlyphBoxes[xa].x+ba.GlyphBoxes[xa].width,ba.GlyphBoxes[xa].y+ba.GlyphBoxes[xa].height)):(ua.push(a.Internal.Coordinates.newRectangle(ba.GlyphBoxes[xa].x,ba.GlyphBoxes[xa].y,ba.GlyphBoxes[xa].width,ba.GlyphBoxes[xa].height)),Da.push(ba.PId)),this._selectedText+=ba.GlyphBoxes[xa].glyph,Ma=!0)}}}if(null!=Ua.textBlock.Matrix)for(Ha=0;Ha<ua.length;Ha++)a.Internal.Matrix.transformRect(Ua.textBlock.Matrix,ua[Ha]);C.push({regions:ua,regionPids:Da,pageNo:va,scale:Ua.scale})}}}return C},captureAndHighlightSelectedText:function(b,
d,e,g,k,p){if((b=a.Internal.Text.captureSelectedText(b,d,e,g,k,p))&&0<b.length){for(d=0;d<b.length;d++)for(e=0;e<b[d].regions.length;e++)a.dom.SelectedTextRegions.addNew(b[d].pageNo,{left:b[d].regions[e].Left/b[d].scale,top:b[d].regions[e].Top/b[d].scale,width:b[d].regions[e].Width/b[d].scale,height:b[d].regions[e].Height/b[d].scale},"rgba(0,0,201,0.3)",null,1);a.callbacks.onTextSelected&&(b=a.Internal.Text.getSelectedTextAreas(),a.callbacks.onTextSelected(b))}}},Matrix:{transformPoint:function(b,
d){var e=b.b*d.x+b.d*d.y+b.f;d.x=b.a*d.x+b.c*d.y+b.e;d.y=e},equal:function(b,d){return b.a===d.a&&b.b===d.b&&b.c===d.c&&b.d===d.d&&b.e===d.e&&b.f===d.f},combine:function(b,d){return{a:b.a*d.a+b.b*d.c,b:b.a*d.b+b.b*d.d,c:b.c*d.a+b.d*d.c,d:b.c*d.b+b.d*d.d,e:b.e*d.a+b.f*d.c+d.e,f:b.e*d.b+b.f*d.d+d.f}},invert:function(b){var d=1/(b.a*b.d-b.b*b.c);d={a:b.d*d,b:-b.b*d,c:-b.c*d,d:b.a*d};d.e=-b.e*d.a-b.f*d.c;d.f=-b.e*d.b-b.f*d.d;return d},translate:function(b,d,e){return this.combine(b,{a:1,b:0,c:0,d:1,e:d,
f:e})},isRotatedOrFlipped:function(b){return 0!=b.b||0!=b.c||0>b.a||0>b.d},scale:function(b,d,e,g){return g?this.combine({a:d,b:0,c:0,d:e,e:0,f:0},b):this.combine(b,{a:d,b:0,c:0,d:e,e:0,f:0})},rotateAt:function(b,d,e,g,k){d=Math.PI*d/180;d={a:Math.cos(d),b:Math.sin(d),c:-Math.sin(d),d:Math.cos(d),e:e,f:g};if(k)return e=this.combine({a:1,b:0,c:0,d:1,e:-e,f:-g},d),this.combine(e,b);b=this.combine(b,{a:1,b:0,c:0,d:1,e:-e,f:-g});return this.combine(b,d)},transformBBox:function(b,d,e,g){var k=0==d?b:null==
g?this.rotateAt(b,d,e.left+e.width/2,e.top+e.height/2,!0):this.rotateAt(b,d,g.x,g.y,!0);b={x:e.left,y:e.top};d={x:e.left+e.width,y:e.top};g={x:e.left+e.width,y:e.top+e.height};var p={x:e.left,y:e.top+e.height};this.transformPoint(k,b);this.transformPoint(k,d);this.transformPoint(k,g);this.transformPoint(k,p);k=Math.min(b.x,d.x,g.x,p.x);var n=Math.max(b.x,d.x,g.x,p.x),w=Math.min(b.y,d.y,g.y,p.y);b=Math.max(b.y,d.y,g.y,p.y);e.left=k;e.top=w;e.width=n-k;e.height=b-w},transformRect:function(b,d){var e=
{x:d.Left,y:d.Top},g={x:d.Left+d.Width,y:d.Top},k={x:d.Left+d.Width,y:d.Top+d.Height},p={x:d.Left,y:d.Top+d.Height};this.transformPoint(b,e);this.transformPoint(b,g);this.transformPoint(b,k);this.transformPoint(b,p);b=Math.min(e.x,g.x,k.x,p.x);var n=Math.max(e.x,g.x,k.x,p.x),w=Math.min(e.y,g.y,k.y,p.y);e=Math.max(e.y,g.y,k.y,p.y);d.Left=b;d.Top=w;d.Width=n-b;d.Height=e-w}},Search:{_currentOccurence:null,_occurences:null,_firstResult:null,clearResults:function(){this._currentOccurence=this._occurences=
this._firstResult=null;if(a.dom.searchResults&&a.dom.searchResults.hasChildNodes())for(var b=a.dom.searchResults.children.length-1;0<=b;b--)a.dom.searchResults.removeChild(a.dom.searchResults.children[b]);a.dom.SelectedTextRegions.clear(2)},addResults:function(b,d){this.clearResults();this._occurences=d;a.dom.SelectedTextRegions.clear(2);this.occurences=d;var e=null!=d?d.length:0;if(0<e)for(var g=1,k,p=0,n=0;n<e;n++){var w=document.createElement("div");w.id=a.uniqueID+"searchResultItem"+n;w.setAttribute("data-idx",
n);0==n?this._firstResult=w:d[n].page!=k&&(g=1);k=d[n].page;w.pageOccurence=g++;w.className="searchResultItem";var C=d[n].context.content,K=d[n].context.resultStart,F=d[n].context.resultLen;w.innerHTML=C.substr(0,K)+'<strong style="color:'+a.dom.UIconfig.activeSelectedColor+';">'+C.substr(K,F)+"</strong>"+C.substr(K+F);w.pageNo=d[n].page;C=d[n].resultBoxes[d[n].resultBoxes.length-1];w.wordLeft=C.Left;w.wordTop=C.Top;w.wordWidth=C.Width;w.wordHeight=C.Height;w.searchedValue=b;a.dom.searchArea&&(w.onmouseenter=
this.resultOnMouseEnterHandler,w.onmouseleave=this.resultOnMouseLeaveHandler,w.onclick=this.resultOnClickHandler);if(a.dom.searchArea&&p!=k){C=d.slice(n+1);p=1;if(0!==C.length)for(K=0;C[K]&&C[K].page===k;K++)p++;C=document.createElement("div");C.className="searchResultItemPage";C.style.backgroundColor=a.dom.UIconfig.panelDarkerBackColor;K=document.createElement("span");K.className="matches";K.innerText=p.toString()+" "+(1===p?a.Localize("label_match"):a.Localize("label_matches"));p=document.createElement("span");
p.className="pageNumber";p.innerText=a.Localize("label_page")+" "+k;F=document.createElement("div");F.className="separator";C.appendChild(K);C.appendChild(p);C.appendChild(F);p=k;a.dom.searchResults.appendChild(C)}a.dom.searchArea&&a.dom.searchResults.appendChild(w)}},highlightResults:function(b){a.dom.SelectedTextRegions.clear(2,b);if(null!=this._occurences){var d=this._occurences.length;if(0<d)for(var e=1,g=0;g<d;g++)if(this._occurences[g].page==b){var k=this._occurences[g].resultBoxes.map(function(p){return{left:96*
p.Left,top:96*p.Top,width:96*p.Width,height:96*p.Height}});null!=this._currentOccurence&&this._currentOccurence.pageNo==b&&this._currentOccurence.pageOccurence==e?a.dom.SelectedTextRegions.addNews(this._occurences[g].page,k,a.dom.UIconfig.searchResultBackColor,a.dom.UIconfig.searchResultBorderColor,2):a.dom.SelectedTextRegions.addNews(this._occurences[g].page,k,a.dom.UIconfig.searchResultBackColor,null,2);e++}}},navigateToFirstResult:function(){this._firstResult&&(this.navigateToResult(this._firstResult),
a.dom.searchResults.parentElement.scrollTop=0)},resultOnClickHandler:function(b){a.Internal.Search.navigateToResult(b.currentTarget)},resultOnMouseEnterHandler:function(b){b.target.style.borderColor=a.dom.UIconfig.activeSelectedColor},resultOnMouseLeaveHandler:function(b){b.target.style.borderLeftColor="transparent";b.target.style.borderRightColor="transparent";b.target.style.borderTopColor="transparent";b.target.style.borderBottomColor=a.dom.UIconfig.miscBorderColor},navigateToResult:function(b){a.Internal.Search._currentOccurence=
b;a.dom.searchArea&&(dvJQuery(a.dom.searchResults).find(".searchResultItem").each(function(){dvJQuery(this).removeClass("active");dvJQuery(this).css("border-left-color","transparent");dvJQuery(this).css("border-right-color","transparent");dvJQuery(this).css("border-top-color","transparent");dvJQuery(this).css("border-bottom-color",a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-color","transparent")}),b.style.borderColor="transparent",b.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,
dvJQuery(b).addClass("active"),a.Internal.Search.scrollContainerToItem(b));a.SelectPageEx(b.pageNo,!0,!0,!0,!1,!0,function(){a.EnsurePageRegionVisibility(b.pageNo,b.wordLeft,b.wordTop,b.wordWidth,b.wordHeight)})},scrollContainerToItem:function(b){var d=a.dom.searchResultsContainer.getBoundingClientRect(),e=a.dom.searchResultsContainer.clientHeight;b=b.getBoundingClientRect();b.top>=d.top&&b.top<=d.top+e||(a.dom.searchResultsContainer.scrollTop=b.top+a.dom.searchResultsContainer.scrollTop-d.top)}},
FormFields:{existFormField:function(b){if(!b.control)return!1;if(a.dom.viewerArea.hasChildNodes())for(var d=a.dom.viewerArea.children.length-1;0<=d;d--)if(a.dom.viewerArea.children[d]===b.control)return!0;return!1},removePageFormFields:function(b){if(null!=a.cache.FormFields)for(var d=0;d<a.cache.FormFields.length;d++){var e=a.cache.FormFields[d];e.formFieldApp.pageNo==b&&(this.removeFormField(e),a.cache.FormFields.splice(d,1),d--)}},removeAll:function(b){if(null!=a.cache.FormFields){for(b=0;b<a.cache.FormFields.length;b++)this.removeFormField(a.cache.FormFields[b]);
a.cache.FormFields=null}},removeFormField:function(b){b.control&&b.control.parentNode==a.dom.viewerArea&&a.dom.viewerArea.removeChild(b.control);if(b.children)for(var d=0;d<b.children.length;d++)this.removeFormField(b.children[d])},removeFormFieldFromCache:function(b){if(null!=a.cache.FormFields)for(var d=0;d<a.cache.FormFields.length;d++)a.cache.FormFields[d].formFieldApp.id===b&&(a.cache.FormFields.splice(d,1),d--)},newController:function(b){var d={};d.formFieldApp=b;d.updateNo=0;d.pendingUpdate=
0;d.stopEditing=function(){this.isEditing()&&this.isModified()&&this.updateFormField(null)};d.updateFormField=function(k){if(a.hasPendingAction(!0,!0))return DocuViewareAPI.Status.GenericError;var p={};p.properties=this.formFieldApp.properties;p.sessionID=a.ajax.sessionID;p.contextID=a.ajax.contextID;p.pageNo=this.formFieldApp.pageNo;p.id=this.formFieldApp.id;k&&(dvJQuery.extend(!0,p.properties,k),p.rotation=k.rotation);this.updateNo+=1;this.pendingUpdate+=1;p.updateNo=this.updateNo;var n=this;0!==
p.properties.parentId&&3===p.properties.type&&(p.id=p.properties.parentId,p.properties.id=p.properties.parentId,p.properties.parentId=0);a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/formfieldupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify(p),contentType:"application/json",success:function(w){--n.pendingUpdate;if((w="string"===typeof w?eval("("+w+")"):w)&&null!=w.formFieldApp){if(n.isEditing()||w.updateNo!=n.updateNo||(n.formFieldApp=w.formFieldApp,n.render(),
a.updateThumbnails([n.formFieldApp.pageNo])),a.callbacks.onFormFieldChanged)a.callbacks.onFormFieldChanged({id:w.formFieldApp.id,pageNo:w.formFieldApp.pageNo})}else a.ajax.HandleError(w)},error:function(w){a.ajax.HandleError(w);--n.pendingUpdate}});return DocuViewareAPI.Status.OK};d.isEditing=function(){return document.activeElement==this.control};d.hasPendingUpdate=function(){return 0<this.pendingUpdate};d.isModified=function(){var k=!1;switch(this.formFieldApp.properties.type){case 2:k=this.formFieldApp.properties.isChecked!=
this.control.checked;break;case 4:k=this.formFieldApp.properties.value!=this.control.value;break;case 3:k=!0;break;case 7:k=this.formFieldApp.properties.value!=this.control.options[this.control.selectedIndex].value;break;case 8:k=this.formFieldApp.properties.value!=this.control.options[this.control.selectedIndex].value}return k};d.blur=function(){this.control.style.backgroundColor="#CCD7FF";this.isModified()&&(this.setCurrentValue(),this.updateFormField(null))};d.focus=function(){this.control.style.backgroundColor=
this.formFieldApp.properties.backgroundColor};d.setCurrentValue=function(){switch(this.formFieldApp.properties.type){case 2:this.formFieldApp.properties.isChecked=this.control.checked;break;case 4:this.formFieldApp.properties.value=this.control.value;break;case 3:this.formFieldApp.properties.value=dvJQuery('input[name="'+a.uniqueID+"_formfield_"+this.formFieldApp.properties.parentId+'"]:checked').val();break;case 7:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value;
break;case 8:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value}};d.render=function(){if(this.children)for(var k=0;k<this.children.length;k++)this.children[k].render();if(this.control){k={left:this.formFieldApp.properties.left,top:this.formFieldApp.properties.top,width:this.formFieldApp.properties.width,height:this.formFieldApp.properties.height};var p=a.Internal.Pages.getRenderingState(this.formFieldApp.pageNo);k.left*=96;k.top*=96;k.width*=96;k.height*=96;
var n=a.Internal.Pages.getRenderRotation(this.formFieldApp.pageNo),w=0;switch(n){case 2:w=180;break;case 3:w=270;break;case 1:w=90}a.Internal.Matrix.transformBBox(p.contentMatrix,-w,k);k.left+=p.pageLeft;k.top+=p.pageTop;this.control.style.display=0==this.formFieldApp.properties.visibility||2==this.formFieldApp.properties.visibility?"block":"none";this.control.style.position="absolute";this.control.style.padding="0px";this.control.style.margin="0px";this.control.style.outline="0";this.control.style.backgroundColor=
this.formFieldApp.properties.readOnly?"transparent":"rgba(204,215,255,0.7)";this.control.style.fontSize=0!=this.formFieldApp.properties.fontSize?this.formFieldApp.properties.fontSize*a.GetCurrentZoom()+"pt":12*a.GetCurrentZoom()+"pt";this.control.style.color=this.formFieldApp.properties.fontColor;this.formFieldApp.properties.fontFamily&&(this.control.style.fontFamily='"'+this.formFieldApp.properties.fontFamily+'"');switch(this.formFieldApp.properties.fontStyle){case 0:this.control.style.fontStyle=
"normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 1:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 2:this.control.style.fontStyle="italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 3:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 4:this.control.style.fontStyle=
"normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 5:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;case 6:this.control.style.fontStyle="italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 7:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;
case 8:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";break;case 9:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="line-through";break;case 10:this.control.style.fontStyle="italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";break;case 11:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration=
"line-through";break;case 12:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 13:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 14:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 15:this.control.style.fontStyle="normal",this.control.style.fontWeight="normal",
this.control.style.textDecoration="none"}switch(this.formFieldApp.properties.borderStyle){case 0:this.control.style.borderStyle="solid";break;case 1:this.control.style.borderStyle="dashed";break;case 2:this.control.style.borderStyle="outset";break;case 3:this.control.style.borderStyle="inset";break;case 4:this.control.style.borderStyle="none";this.control.style.borderBottomStyle="solid";break;default:this.control.style.borderStyle="none"}this.control.style.borderWidth=96*this.formFieldApp.properties.borderWidth*
a.GetCurrentZoom()+"px";this.control.style.borderColor=this.formFieldApp.properties.borderColor;if(2==this.formFieldApp.properties.type||3==this.formFieldApp.properties.type){p="";switch(this.formFieldApp.properties.appearance){case "checkbox":p="10003";break;case "circle":p="11044";break;case "cross":p="9587";break;case "diamond":p="9670";break;case "square":p="9632";break;case "star":p="9733";break;default:2==this.formFieldApp.properties.type?p="10003":3==this.formFieldApp.properties.type&&(p="9679")}this.control.setAttribute("data-appearance",
String.fromCharCode(p))}3===this.formFieldApp.properties.type&&"checkbox"===this.formFieldApp.properties.appearance&&this.control.classList.add("dvFormFieldCheckbox");this.control.alt=this.formFieldApp.properties.title;this.formFieldApp.properties.alternateTitle&&(this.control.title=this.formFieldApp.properties.alternateTitle);switch(this.formFieldApp.properties.textAlignment){case 0:this.control.style.textAlign="left";break;case 1:this.control.style.textAlign="center";break;case 2:this.control.style.textAlign=
"right"}this.control.disabled=this.formFieldApp.properties.readOnly;this.control.style.top=k.top+"px";this.control.style.left=k.left+"px";this.control.style.height=k.height+"px";3===b.properties.type?(this.control.style.marginLeft=k.width/2-k.height/2+"px",this.control.style.width=k.height+"px"):this.control.style.width=k.width+"px";this.formFieldApp.properties.combs&&0<b.properties.maxLength&&!b.properties.isMultiline&&!b.properties.password&&(this.control.style.letterSpacing="calc("+k.width/b.properties.maxLength+
"px - 1ch)",this.control.style.fontFamily="monospace, "+this.control.style.fontFamily,this.control.style.paddingLeft="2px",this.control.style.paddingRight="0px");this.control.style.transform=0!=w?"rotate("+w+"deg)":"none";this.control.style.cursor=4!=this.formFieldApp.properties.type||1!=n&&3!=n&&5!=n&&7!=n?"auto":"vertical-text"}};switch(b.properties.type){case 2:d.control=document.createElement("input");d.control.type="checkbox";d.control.checked=b.properties.isChecked;break;case 4:b.properties.isMultiline?
(d.control=document.createElement("textarea"),d.control.value=b.properties.value,d.control.style.resize="none"):(d.control=document.createElement("input"),d.control.type=b.properties.password?"password":"text",d.control.value=b.properties.value);b.properties.maxLength&&0<b.properties.maxLength&&(d.control.maxLength=b.properties.maxLength);break;case 3:if(b.properties.children){d.children=[];for(var e=0;e<b.properties.children.length;e++){var g=this.newController(b.properties.children[e]);g.control.checked=
g.control&&g.formFieldApp.properties.value==b.properties.value?!0:!1;d.children.push(g)}}else d.control=document.createElement("input"),d.control.type="radio",d.control.value=b.properties.value,d.control.checked="Off"!==b.properties.value;break;case 7:d.control=document.createElement("select");b.properties.isMultiSelect&&(d.control.multiple=!0);if(null!=b.properties.items)for(d.control.size=b.properties.items.length,e=0;e<b.properties.items.length;e++)g=document.createElement("option"),g.text=b.properties.items[e].Value,
g.value=b.properties.items[e].Key,b.properties.value==g.value&&(g.selected=!0),d.control.appendChild(g);break;case 8:if(d.control=document.createElement("select"),null!=b.properties.items)for(e=0;e<b.properties.items.length;e++)g=document.createElement("option"),g.text=b.properties.items[e].Value,g.value=b.properties.items[e].Key,b.properties.value==g.value&&(g.selected=!0),d.control.appendChild(g)}d.control&&(d.control.style.display="none",d.control.owner=d,d.control.name=0==b.properties.parentId?
a.uniqueID+"_formfield_"+b.properties.id:a.uniqueID+"_formfield_"+b.properties.parentId,d.control.id=a.uniqueID+"_formfield_"+b.properties.id,d.control.classList.add("dvFormField"),d.control.style.zIndex=a.dom.zindexManager.getFirstFormFieldZindex(),d.control.onblur=function(k){this.owner.blur()},d.control.onfocus=function(k){this.owner.focus()});null==a.cache.FormFields?a.cache.FormFields=[d]:a.cache.FormFields.push(d);d.control&&a.dom.viewerArea.appendChild(d.control);return d}},Twain:{Status:{OK:0,
WARNING:1,ERROR:2,BAD_VERSION:3,NOT_RESPONDING:4},updateStatusBar:function(b,d){d=d?d:"";switch(b){case a.Internal.Twain.Status.OK:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #3c763d";a.dom.twainAcquisitionStatusBarMessage.style.color="#3c763d";break;case a.Internal.Twain.Status.WARNING:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #cc5500";a.dom.twainAcquisitionStatusBarMessage.style.color="#cc5500";break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:a.dom.twainAcquisitionStatusBarMessage.style.border=
"1px solid #a94442";a.dom.twainAcquisitionStatusBarMessage.style.color="#a94442";break;default:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid transparent",a.dom.twainAcquisitionStatusBarMessage.style.color="#000000"}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(d=d+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+
a.Localize("_twain_connector_donwload_here")+"</a>");a.dom.twainAcquisitionStatusBarMessage.innerHTML=d},updateTwainAcquisitionDialogMessageBox:function(b,d){d=d?d:"";switch(b){case a.Internal.Twain.Status.OK:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #3c763d");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#3c763d");break;case a.Internal.Twain.Status.WARNING:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+
a.uniqueID).css("border","1px solid #cc5500");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#cc5500");break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #a94442");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#a94442");
break;default:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid transparent"),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#000000")}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(d=d+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+
a.Localize("_twain_connector_donwload_here")+"</a>");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).html(d)},acquire:function(b,d,e){if(!b||!d)return DocuViewareAPI.Status.GenericError;var g=b.endsWith("(64-bit)");g&&(b=b.substring(0,b.length-9));b={url:(g?a.twainServiceUri64:a.twainServiceUri32)+"TWAINAcquire2/",timeout:999999999,data:JSON.stringify({source:{sourceName:b,outputFormat:a.twainSourceConfig.acquisitionFormat,sourceConfig:a.twainSourceConfig}}),success:function(k){(k=
k.TwainAcquire2Result)&&k.status===DocuViewareAPI.Status.OK?d(k):(e&&e(k),a.ajax.HandleError(k))},error:function(){var k={status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),throwError:!1};e&&e(k);a.ajax.HandleError(k)}};a.ajax.PostAjaxRequestForLocalService(b);return DocuViewareAPI.Status.OK}},DigiSign:{isAddingSignature:!1,signatureAppearance:{image:null,isFreehandDrawn:!1,text:null,pageNo:0,coordinates:{top:0,width:0,left:0,height:0},textApearance:{fontName:"Arial",
fontSize:14,fontStyle:0,fontLineWidth:.1,verticalAlignment:0,horizontalAlignment:1,fontColor:"#000000"}},signatureCertificat:{data:null,displayedName:null,password:null},signatureTimeStamp:{server:null,username:null,password:null},setSignatureAppearanceTextInteractive:function(){dvJQuery(a.dom.signatureTextDialogForm).find("select[name='signature_font_name_select"+a.uniqueID+"']").find("option[value='"+a.Internal.DigiSign.signatureAppearance.textApearance.fontName+"']").prop("selected",!0);a.DisplayDialogForm(dvJQuery(a.dom.signatureTextDialogForm),
a.Localize("label_signature_text"),function(){dvJQuery(document).ready(function(){dvJQuery("input[name='signature_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogSignatureAlignmentPropertiesPreview()});dvJQuery("input[name='signature_line_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogSignatureLineAlignmentPropertiesPreview()});dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height",dvJQuery(a.dom.signatureDialogFormTextInput).height());
dvJQuery(a.dom.signatureDialogFormFontSizeInput).val(a.Internal.DigiSign.signatureAppearance.textApearance.fontSize);dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("value",a.Internal.DigiSign.signatureAppearance.textApearance.fontColor)})},function(){var b=dvJQuery(a.dom.signatureDialogFormFontSizeInput).val();dvJQuery.isNumeric(b)&&0!==parseInt(b)||dvJQuery(a.dom.signatureDialogFormFontSizeInput).val(a.Internal.DigiSign.signatureAppearance.textApearance.fontSize);dvJQuery(a.dom.signatureTextDialogForm).show()},
function(){dvJQuery(a.dom.signatureTextDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.signatureTextDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){a.Internal.DigiSign.signatureAppearance.text=dvJQuery(a.dom.signatureDialogFormTextInput).val();a.Internal.DigiSign.signatureAppearance.textApearance.fontName=dvJQuery(a.dom.signatureDialogFormFontNameSelect).find("option:selected").val();a.Internal.DigiSign.signatureAppearance.textApearance.fontSize=
parseInt(dvJQuery(a.dom.signatureDialogFormFontSizeInput).val())||a.Internal.DigiSign.signatureAppearance.textApearance.fontSize;a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle=dvJQuery(a.dom.signatureDialogFormFontStyleSelect).find("option:selected").val();a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment=parseInt(dvJQuery(a.dom.signatureDialogFormAlignmentSelect).filter(":checked").val());a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment=
parseInt(dvJQuery("[name='signature_line_alignment_select"+a.uniqueID+"']:checked").val());a.Internal.DigiSign.signatureAppearance.textApearance.fontColor=dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("rgbaString");a.Internal.DigiSign.setSignatureAppearanceText(a.Internal.DigiSign.signatureAppearance.text,{fontName:a.Internal.DigiSign.signatureAppearance.textApearance.fontName,fontStyle:a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle,fontSize:a.Internal.DigiSign.signatureAppearance.textApearance.fontSize,
fontLineWidth:a.Internal.DigiSign.signatureAppearance.textApearance.fontLineWidth,horizontalAlignment:a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment,verticalAlignment:a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment,fontColor:a.Internal.DigiSign.signatureAppearance.textApearance.fontColor});dvJQuery(a.dom.signatureTextDialogForm).dvDialog("close")}}])},setSignatureAppearanceImgInteractive:function(){dvJQuery(a.dom.digisignAppearanceInputImg).on("change",
function(){if(this.files&&this.files[0]){var b=this,d=new FileReader;d.addEventListener("load",function(e){a.Internal.DigiSign.isFreehandDrawn=!1;dvJQuery(b).val("");a.Internal.DigiSign.setSignatureAppearanceImage(e.target.result)});d.readAsDataURL(this.files[0])}});dvJQuery(a.dom.digisignAppearanceInputImg).trigger("click")},setSignatureAppearanceFreehandInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.signatureFreehandDialogForm),a.Localize("label_signature_pad"),function(){dvJQuery(document).ready(function(){dvJQuery(a.dom.signatureFreehandPad).jSignature()})},
function(){dvJQuery(a.dom.signatureFreehandDialogForm).show()},function(){dvJQuery(a.dom.signatureFreehandDialogForm).hide()},[{text:a.Localize("text_reset"),style:"float: left;",click:function(){dvJQuery(a.dom.signatureFreehandPad).jSignature("clear")}},{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.signatureFreehandDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){if(0!=dvJQuery(a.dom.signatureFreehandPad).jSignature("getData",
"native").length){var b=dvJQuery(a.dom.signatureFreehandPad).jSignature("getData","svgbase64");a.Internal.DigiSign.isFreehandDrawn=!0;a.Internal.DigiSign.setSignatureAppearanceImage("data:"+b[0]+","+b[1])}dvJQuery(a.dom.signatureFreehandDialogForm).dvDialog("close")}}])},setCertificateInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.digisignCertificateDialogForm),a.Localize("label_add_certificate"),this.signatureUiSetCertificateDialog,function(){dvJQuery(a.dom.digisignCertificateDialogForm).show()},
function(){dvJQuery(a.dom.digisignCertificateDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.digisignCertificateName).val(),d=dvJQuery(a.dom.digisignCertificatePasswordInput).val();a.dom.digisignInputCertificateFile.files&&a.dom.digisignInputCertificateFile.files[0]?(b=new FileReader,b.addEventListener("load",
function(e){e=e.target.result;a.dom.digisignCertificateCertificateLabel.style.color=e?"black":"red";a.dom.digisignCertificatePasswordLabel.style.color=d?"black":"red";e&&d&&(a.Internal.DigiSign.setCertificate(e,null,d),dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close"))}),b.readAsDataURL(a.dom.digisignInputCertificateFile.files[0])):(a.dom.digisignCertificateCertificateLabel.style.color=b?"black":"red",b&&(a.Internal.DigiSign.setCertificate(null,b,null),dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close")))}}])},
setTimeStampInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.digisignTimeStampDialogForm),a.Localize("label_add_time_stamp"),function(){},function(){dvJQuery(a.dom.digisignTimeStampDialogForm).show()},function(){dvJQuery(a.dom.digisignTimeStampDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.digisignTimeStampDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.digisignTimestampServerInput).val(),
d=dvJQuery(a.dom.digisignTimestampLoginInput).val(),e=dvJQuery(a.dom.digisignTimestampPasswordInput).val();a.dom.digisignTimestampServerLabel.style.color=b?"black":"red";b&&(a.Internal.DigiSign.setTimeStamp(b,d,e),dvJQuery(a.dom.digisignTimeStampDialogForm).dvDialog("close"))}}])},setCertificate:function(b,d,e){this.signatureCertificat.data=b;this.signatureCertificat.displayedName=d;this.signatureCertificat.password=e;this.refreshSignatureUi()},setTimeStamp:function(b,d,e){this.signatureTimeStamp.server=
b;this.signatureTimeStamp.username=d;this.signatureTimeStamp.password=e;this.refreshSignatureUi()},setSignatureAppearanceText:function(b,d){this.signatureAppearance.text=b;this.signatureAppearance.textApearance={fontName:d.fontName,fontSize:d.fontSize,fontStyle:d.fontStyle,fontLineWidth:d.fontLineWidth,verticalAlignment:d.verticalAlignment,horizontalAlignment:d.horizontalAlignment,fontColor:d.fontColor};this.refreshSignatureUi()},setSignatureAppearanceImage:function(b){this.signatureAppearance.text=
null;this.signatureAppearance.image=b;this.refreshSignatureUi()},resetSignatureConfiguration:function(){this.signatureAppearance.text=null;this.signatureAppearance.image=null;this.refreshSignatureUi()},refreshSignatureUi:function(){dvJQuery(a.dom.digisignAppearancePreview)&&dvJQuery(a.dom.digisignAppearancePreviewText)&&(this.signatureAppearance.text?(this.signatureUiSetText(this.signatureAppearance.text),this.signatureUiHighlineTextButton(),a.dom.digisignAppearancePreviewDelete.style.display="block"):
this.signatureAppearance.image?(this.signatureUiSetImage(this.signatureAppearance.image),this.isFreehandDrawn?this.signatureUiHighlinePadButton():this.signatureUiHighlineImageButton(),a.dom.digisignAppearancePreviewDelete.style.display="block"):(this.signatureUiUnselectAllButtons(),a.dom.digisignAppearancePreviewDelete.style.display="none",dvJQuery(a.dom.digisignAppearancePreviewText).html(a.Localize("label_invisible_signature")),dvJQuery(a.dom.digisignAppearancePreview).css("background-image","")));
dvJQuery(a.dom.digisignCertificateButton)&&(this.signatureCertificat.data&&this.signatureCertificat.password||this.signatureCertificat.displayedName?this.signatureUiValidateCertificateButton():this.signatureUiUnvalidateCertificateButton());dvJQuery(a.dom.digisignTimeStampButton)&&(this.signatureTimeStamp.server?this.signatureUiValidateTimestampButton():this.signatureUiUnvalidateTimestampButton());a.dom.digisignButtonSubmit.disabled=!this.areSignatureRequiredDataSet()},areSignatureRequiredDataSet:function(){return this.signatureAppearance.text||
this.signatureAppearance.image?!0:this.signatureCertificat.data&&this.signatureCertificat.password?!0:this.signatureCertificat.displayedName?!0:!1},beginAddSignatureInteractive:function(){a.Internal.DigiSign.isAddingSignature=!0;a.SetMouseMode(1);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;return DocuViewareAPI.Status.OK},stopAddSignatureInteractive:function(){a.Internal.DigiSign.isAddingSignature=!1;a.SetMouseMode(0);a.events.ownMouseEvents=!1},sendSignatureRequest:function(b,
d){var e={};if(a.Internal.DigiSign.areSignatureRequiredDataSet()){e.signaturePageNo=a.Internal.DigiSign.signatureAppearance.pageNo;e.signatureLeft=a.Internal.DigiSign.signatureAppearance.coordinates.left;e.signatureTop=a.Internal.DigiSign.signatureAppearance.coordinates.top;e.signatureWidth=a.Internal.DigiSign.signatureAppearance.coordinates.width;e.signatureHeight=a.Internal.DigiSign.signatureAppearance.coordinates.height;null!=a.Internal.DigiSign.signatureAppearance.text?(e.signatureText=a.Internal.DigiSign.signatureAppearance.text,
e.signatureFontName=a.Internal.DigiSign.signatureAppearance.textApearance.fontName,e.signatureFontStyle=a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle,e.signatureFontSize=a.Internal.DigiSign.signatureAppearance.textApearance.fontSize,e.signatureFontLineWidth=a.Internal.DigiSign.signatureAppearance.textApearance.fontLineWidth,e.signatureVerticalAlignment=a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment||0,e.signatureHorizontalAlignment=a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment||
0,e.signatureFontColor=a.Internal.DigiSign.signatureAppearance.textApearance.fontColor):null!=a.Internal.DigiSign.signatureAppearance.image&&(e.signatureImageData=a.Internal.DigiSign.signatureAppearance.image);if(a.Internal.DigiSign.signatureCertificat.data&&a.Internal.DigiSign.signatureCertificat.password||a.Internal.DigiSign.signatureCertificat.displayedName)e.certificateData=a.Internal.DigiSign.signatureCertificat.data||"",e.certificateDisplayName=a.Internal.DigiSign.signatureCertificat.displayedName||
"",e.certificatePassword=a.Internal.DigiSign.signatureCertificat.password||"";a.Internal.DigiSign.signatureTimeStamp.server?(e.includeTimestamp=!0,e.timeStampServer=a.Internal.DigiSign.signatureTimeStamp.server,e.timeStampUserName=a.Internal.DigiSign.signatureTimeStamp.username||"",e.timeStampPassword=a.Internal.DigiSign.signatureTimeStamp.password||""):e.includeTimestamp=!1;return a.ajax.PostBaseRequest("digisign",{data:e,success:function(g){var k="string"===typeof g?eval("("+g+")"):g;if(k&&k.status===
DocuViewareAPI.Status.OK){if(g="string"===typeof g?eval("("+g+")"):g,a.ajax.HandleServerContextResponse(g,!1),g={certificate:a.Internal.DigiSign.signatureCertificat.data||a.Internal.DigiSign.signatureCertificat.displayedName,image:null!=a.Internal.DigiSign.signatureAppearance.image,text:null!=a.Internal.DigiSign.signatureAppearance.text},b&&b(g),a.callbacks.onDocumentSigned)a.callbacks.onDocumentSigned(g)}else a.ajax.HandleError(g),d&&d()},error:function(g){a.ajax.HandleError(g);d&&d()}},!1)}a.DisplayError("Digsign appearance or certificate must be set to place the signature")},
addSignatureInteractive:function(){a.SetMouseMode(0);a.events.ownMouseEvents=!1;var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),d=a.Internal.Selection.selectionArea.getPageBounds(a.GetCurrentPage());b=a.Internal.Matrix.scale(a.Internal.Matrix.invert(b.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(b,0,d);a.Internal.DigiSign.signatureAppearance.coordinates.left=a.Internal.Utilities.roundEx(d.left,7);a.Internal.DigiSign.signatureAppearance.coordinates.top=a.Internal.Utilities.roundEx(d.top,
7);a.Internal.DigiSign.signatureAppearance.coordinates.width=a.Internal.Utilities.roundEx(d.width,7);a.Internal.DigiSign.signatureAppearance.coordinates.height=a.Internal.Utilities.roundEx(d.height,7);a.Internal.DigiSign.signatureAppearance.pageNo=a.GetCurrentPage();a.Internal.DigiSign.sendSignatureRequest();a.Internal.DigiSign.stopAddSignatureInteractive()},addSignature:function(b,d){a.Internal.DigiSign.signatureAppearance.pageNo=b;a.Internal.DigiSign.signatureAppearance.coordinates=d;a.Internal.DigiSign.sendSignatureRequest()},
signatureUiSetCertificateDialog:function(){dvJQuery(a.dom.digisignCertificateName).empty();if(null!=a.certificateNames&&0<a.certificateNames.length){for(var b=0;b<a.certificateNames.length;b++){var d=document.createElement("option");d.text=a.certificateNames[b];a.dom.digisignCertificateName.add(d)}a.dom.digisignCertificateNameContainer.style.marginRight="15px";a.dom.digisignCertificateNameContainer.style.display="block";a.dom.digisignCertificateInputContainer.style.display="none";a.dom.digisignCertificatePasswordContainer.style.display=
"none"}else a.dom.digisignCertificateNameContainer.style.display="none",a.dom.digisignCertificateInputContainer.style.display="block",a.dom.digisignCertificatePasswordContainer.style.display="block"},signatureUiValidateCertificateButton:function(){a.dom.digisignCertificateIconValidate.style.display="block";a.dom.digisignCertificateIconUnvalidate.style.display="none";a.dom.digisignCertificateButton.style.backgroundColor=a.dom.UIconfig.activeSelectedColor+"10";a.dom.digisignCertificateButtonDelete.style.display=
"block"},signatureUiUnvalidateCertificateButton:function(){a.dom.digisignCertificateIconValidate.style.display="none";a.dom.digisignCertificateIconUnvalidate.style.display="block";a.dom.digisignCertificateButton.style.backgroundColor=a.dom.UIconfig.panelBackColor;a.dom.digisignCertificateButtonDelete.style.display="none"},signatureUiValidateTimestampButton:function(){a.dom.digisignTimeStampIconValidate.style.display="block";a.dom.digisignTimeStampIconUnvalidate.style.display="none";a.dom.digisignTimeStampButtonDelete.style.display=
"block";a.dom.digisignTimeStampButton.style.backgroundColor=a.dom.UIconfig.activeSelectedColor+"10"},signatureUiUnvalidateTimestampButton:function(){a.dom.digisignTimeStampIconValidate.style.display="none";a.dom.digisignTimeStampIconUnvalidate.style.display="block";a.dom.digisignTimeStampButton.style.backgroundColor=a.dom.UIconfig.panelBackColor;a.dom.digisignTimeStampButtonDelete.style.display="none"},signatureUiUnselectAllButtons:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor=
"";a.dom.digisignAppearanceButtonText.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.fill=a.dom.UIconfig.activeSelectedColor},signatureUiHighlineTextButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor=a.dom.UIconfig.activeSelectedColor;
a.dom.digisignAppearanceButtonText.style.fill="#fff";a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.fill=a.dom.UIconfig.activeSelectedColor},signatureUiHighlineImageButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.fill=a.dom.UIconfig.activeSelectedColor;
a.dom.digisignAppearanceButtonImg.style.backgroundColor=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.fill="#fff";a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.fill=a.dom.UIconfig.activeSelectedColor},signatureUiHighlinePadButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor=
"";a.dom.digisignAppearanceButtonImg.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.fill="#fff"},signatureUiSetText:function(b){dvJQuery(a.dom.digisignAppearancePreviewText).html(b);dvJQuery(a.dom.digisignAppearancePreview).css("background-image","")},signatureUiSetImage:function(b){dvJQuery(a.dom.digisignAppearancePreview).css("background-image","url("+b+")");
dvJQuery(a.dom.digisignAppearancePreviewText).html("")}},Redaction:{selectRedactionSelectorById:function(b,d){var e=a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea");b=document.getElementById("redactionAreaButton"+t+"_"+b);if(!d)for(;0<e.length;)e[0].style.backgroundColor="rgb(255, 255, 255)",e[0].classList.remove("activeRedactionArea");null!=b&&(b.classList.contains("activeRedactionArea")?(b.style.backgroundColor="rgb(255, 255, 255)",b.classList.remove("activeRedactionArea")):(b.style.backgroundColor=
"rgb(200, 200, 200)",b.classList.add("activeRedactionArea")));1<a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea").length?a.dom.redactionRemoveAllSelectedButton.style.display="block":a.dom.redactionRemoveAllSelectedButton.style.display="none"},refreshRedactionPanel:function(b){var d=null==a.cache.AnnotsRedactionReferences?0:a.cache.AnnotsRedactionReferences.length;for(1<a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea").length?a.dom.redactionRemoveAllSelectedButton.style.display=
"block":a.dom.redactionRemoveAllSelectedButton.style.display="none";a.dom.redactionAreaButtonsList.firstChild;)a.dom.redactionAreaButtonsList.removeChild(a.dom.redactionAreaButtonsList.firstChild);if(0==d)a.dom.redactionAreaFoundText.innerHTML=a.Localize("label_redaction_panel_no_mark"),a.dom.redactionApplyButton.disabled=!0,a.dom.redactionRemoveAllButton.style.display="none";else for(a.dom.redactionApplyButton.disabled=!1,1==d?(a.dom.redactionRemoveAllButton.style.display="none",a.dom.redactionAreaFoundText.innerHTML=
a.Localize("label_redaction_panel_one_mark").replace("#",d)):(a.dom.redactionAreaFoundText.innerHTML=a.Localize("label_redaction_panel_several_marks").replace("#",d),a.dom.redactionRemoveAllButton.style.display="block"),d=0;d<a.cache.AnnotsRedactionReferences.length;d++)this.addReadactionMarkSelector(a.cache.AnnotsRedactionReferences[d]);b&&a.events.isAddingRedactionMarksMode&&(b=dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors("value"),
a.AddAnnotInteractive(17,{autoCreate:!0,fillColor:b}))},addReadactionMarkSelector:function(b){var d=a.dom.redactionAreaButtonModel.cloneNode(!0),e="";d.id="redactionAreaButton"+t+"_"+b.id;d.style.display="block";e=b.title&&""!=b.title?"Page "+b.pageNo+": "+b.title:"Page "+b.pageNo+": "+a.Localize("label_redaction_title_none");d.getElementsByClassName("redactionAreaSelectionText")[0].innerHTML=e;d.getElementsByClassName("redactionSelectorToolTipText")[0].innerHTML=e;d.getElementsByClassName("redactionAreaColorSquare")[0].style.backgroundColor=
b.fillColor;d.addEventListener("click",function(g){a.Internal.Redaction.disableAddRedactionMarksMode();a.Internal.Redaction.selectAnnotFromRedactionSelector(b.id,!0);g.ctrlKey?a.Internal.Redaction.selectRedactionSelectorById(b.id,!0):a.Internal.Redaction.selectRedactionSelectorById(b.id,!1)});d.addEventListener("dblclick",function(){a.Internal.Annotations.editSelectedAnnotation()});d.addEventListener("mouseenter",function(){"rgb(255, 255, 255)"==this.style.backgroundColor&&(this.style.backgroundColor=
"rgb(242, 242, 242)")});d.addEventListener("mouseleave",function(){"rgb(242, 242, 242)"==this.style.backgroundColor&&(this.style.backgroundColor="rgb(255, 255, 255)")});d.getElementsByClassName("redactionAreaDeleteIconDiv")[0].addEventListener("click",function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_redaction_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redaction_warning"))},null,[{text:a.Localize("_label_no"),
click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Redaction.deleteRedactionMarkById(b.id);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])});a.dom.redactionAreaButtonsList.appendChild(d);dvJQuery("#"+d.id+" .redactionSelectorToolTipText").hide();dvJQuery("#"+d.id+" .redactionAreaSelectionText").bind("mouseenter",function(){this.offsetWidth<this.scrollWidth?dvJQuery("#"+
d.id+" .redactionSelectorToolTipText").show():dvJQuery("#"+d.id+" .redactionSelectorToolTipText").hide()})},selectAnnotFromRedactionSelector:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var d=0;d<a.cache.AnnotsRedactionReferences.length;d++){var e=a.cache.AnnotsRedactionReferences[d];if(e.id===b){var g=e.pageNo;a.SelectPage(g,function(){for(var k,p=0;p<a.cache.Annots.length;p++){var n=a.cache.Annots[p];if(n.annotApp.id==b){k=n.annotApp;break}}null!=k&&(k.visible&&a.Internal.Annotations.selectById(k.id),
a.EnsurePageRegionVisibility(g,k.bbox.Left,k.bbox.Top,k.bbox.Width,k.bbox.Height))});break}}},deleteRedactionMarkSelector:function(b){var d=document.getElementById("redactionAreaButton"+t+"_"+b);a.Internal.Annotations.deleteAnnotsRedactionReferencesById(b);d.parentNode.removeChild(d);this.refreshRedactionPanel(!1)},enableAddRedactionMarksMode:function(){if(a.dom.redactionsPanel&&!a.events.isAddingRedactionMarksMode){if(a.hasPendingAction(!0,!1,!1,!0))return DocuViewareAPI.Status.GenericError;var b=
dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors("value");b=a.AddAnnotInteractive(17,{autoCreate:!0,fillColor:b});b===DocuViewareAPI.Status.OK&&(a.dom.redactionAddAreasButton.classList.add("addRedactionActiveMode"),a.dom.redactionAddAreasButton.style.color=a.dom.UIconfig.primaryButtonTextColor,a.dom.redactionAddAreasButton.style.border="3px solid #FFFFFF78",a.dom.redactionAddAreasButton.style.margin="5px 0px 10px -3px",a.dom.redactionAddAreasButton.getElementsByClassName("stopAddAreasButtonIcon")[0].style.display=
"block",a.dom.redactionAddAreasButton.getElementsByClassName("addAreasButtonIcon")[0].style.display="none",a.events.isAddingRedactionMarksMode=!0,dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").attr("disabled",!0));return b}return DocuViewareAPI.Status.OK},disableAddRedactionMarksMode:function(){a.events.isAddingRedactionMarksMode&&(a.dom.redactionAddAreasButton.classList.remove("addRedactionActiveMode"),a.dom.redactionAddAreasButton.style.margin="5px 0px 10px -1px",
a.dom.redactionAddAreasButton.style.border="none",a.dom.redactionAddAreasButton.getElementsByClassName("addAreasButtonIcon")[0].style.display="block",a.dom.redactionAddAreasButton.getElementsByClassName("stopAddAreasButtonIcon")[0].style.display="none",a.Internal.Annotations.stopAnnotInteractiveAdd(),a.events.isAddingRedactionMarksMode=!1,dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").attr("disabled",!1));return DocuViewareAPI.Status.OK},deleteRedactionMarkById:function(b){if(null!=
a.cache.AnnotsRedactionReferences)for(var d=0;d<a.cache.AnnotsRedactionReferences.length;d++){var e=a.cache.AnnotsRedactionReferences[d];if(e.id===b){a.SelectPage(e.pageNo,function(){for(var g,k=0;k<a.cache.Annots.length;k++){var p=a.cache.Annots[k];if(p.annotApp.id==b){g=p.annotApp;break}}null!=g&&g.visible&&a.DeleteAnnotationById(g.id)});break}}},hasPendingRedactionMark:function(){return null!=a.cache.AnnotsRedactionReferences&&0<a.cache.AnnotsRedactionReferences.length},removeAllRedactionMarks:function(){if(null!=
a.cache.AnnotsRedactionReferences&&0<a.cache.AnnotsRedactionReferences.length){var b=a.cache.AnnotsRedactionReferences[0];a.SelectPage(b.pageNo,function(){for(var d,e=0;e<a.cache.Annots.length;e++){var g=a.cache.Annots[e];if(g.annotApp.id==b.id){d=g.annotApp;break}}if(null!=d&&d.visible)return a.DeleteAnnotationById(d.id),a.Internal.Redaction.removeAllRedactionMarks()})}}},Annotations:{DEFAULT_GRIP_SIZE:6,CANVAS_PADDING:19,RECT_OUTER_MARGIN:1,currentInteractiveAnnotProperties:null,currentInteractiveAnnotPageNo:0,
annotationsVisibility:"visible",interactionEnabled:!0,multiSelectionEnabled:!0,selected:[],cached:[],hoveredAnnot:null,annotEdit:null,defaultAuthor:null,getMaxZindex:function(){var b=0;if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];null!=e&&null!=e.canvas&&(b=Math.max(b,e.canvas.style.zIndex))}return b},defaultProperties:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(0),1:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(1),
2:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2),3:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(3),4:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(4),5:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(5),6:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(7),8:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(8),9:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(9),
10:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(11),12:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(12),13:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(13),14:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(14),15:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(15),16:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(16),17:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(17),
2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2048)},defaultPropertiesDisplay:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(0),1:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(1),2:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2),3:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(3),4:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(4),5:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(5),
6:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(7),8:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(8),9:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(9),10:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(11),12:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(12),
13:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(13),14:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(14),15:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(15),16:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(16),17:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(17),2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2048)},setDefaultPropertiesValues:function(b,
d){this.defaultProperties[b]=this.mergeAnnotationProperties(b,d)},setDefaultPropertiesToDisplay:function(b,d){this.defaultPropertiesDisplay[b]=d},setDefaultAuthor:function(b){this.defaultAuthor=b},getAnnotPropertiesValues:function(b){b=a.Internal.Annotations.defaultProperties[b];delete b.autoCreate;delete b.left;delete b.top;delete b.width;delete b.height;delete b.startX;delete b.startY;delete b.endX;delete b.endY;return b},getAnnotationTitleFromType:function(b){var d="";switch(b){case 0:d=a.Localize("_label_rubber_stamp_properties");
break;case 1:d=a.Localize("_label_rectangle_properties");break;case 2:d=a.Localize("_label_rectangle_highlighter_properties");break;case 3:d=a.Localize("_label_line_properties");break;case 4:d=a.Localize("_label_line_arrow_properties");break;case 5:d=a.Localize("_label_connected_line_properties");break;case 6:d=a.Localize("_label_ellipse_properties");break;case 7:d=a.Localize("_label_embedded_image_properties");break;case 8:d=a.Localize("_label_text_properties");break;case 9:d=a.Localize("_label_stickynote_properties");
break;case 10:d=a.Localize("_label_freehand_properties");break;case 11:d=a.Localize("_label_freehand_highlighter_properties");break;case 12:d=a.Localize("_label_freehand_polygon_properties");break;case 13:d=a.Localize("_label_link_properties");break;case 14:d=a.Localize("_label_polygon_properties");break;case 15:d=a.Localize("_label_ruler_properties");break;case 16:d=a.Localize("_label_polyruler_properties");break;case 17:d=a.Localize("_label_redaction_properties")}return d},editSelectedAnnotation:function(){if(null!=
a.dom.selectedAnnotation&&a.dom.selectedAnnotation.annotApp.canEdit){var b=a.dom.selectedAnnotation;a.EditAnnotInteractive(b,this.defaultPropertiesDisplay[b.annotApp.properties.type])}},getAllFirstAnnotationComments:function(b){var d=[];if(null!=a.cache.AnnotsComments)for(var e=0;e<a.cache.AnnotsComments.length;e++){var g=!1,k=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(a.cache.AnnotsComments[e].annotApp.id);if(null!=k){for(var p=0;p<d.length;p++)if(d[p].comment.annotApp.id===k.annotApp.id){g=
!0;break}g||d.push({comment:k})}}null!=b&&b(d);return d},getFirstAnnotationCommentOfAnnotationFromId:function(b,d){if(null!=b&&""!=b&&(d=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy),null!=d))for(var e=0;e<d.length;e++)if(d[e].comment.annotApp.properties.previousGuid===b)return d[e];return null},getAnnotationCommentFromId:function(b){if(null!=b&&""!=b)for(var d=0;d<a.cache.AnnotsComments.length;d++)if(a.cache.AnnotsComments[d].annotApp.id===b)return a.cache.AnnotsComments[d];
return null},getFirstAnnotationCommentOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);if(null!=b){for(;;){var d=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);if(null!=d)b=d;else break}return b}return null},getFirstAnnotationCommentAnswerOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);return null!=b&&(b=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id),null!=b)?a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid):
null},getLastAnnotationCommentAnswerOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);if(null!=b){for(;;){var d=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid);if(null!=d)b=d;else break}return b}return null},getAnnotationCommentOwnerAnnotApp:function(b,d){if(null==b||2048!=b.properties.type)return null;if(d)for(;;)if(d=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(b,!1),null!=d)if(2048==d.properties.type)b=d;else return d;
else break;if(null!=a.cache.AnnotsComments)for(d=0;d<a.cache.AnnotsComments.length;d++){var e=a.cache.AnnotsComments[d];if(e.annotApp.id==b.properties.previousGuid)return e.annotApp}if(null!=a.cache.Annots)for(d=0;d<a.cache.Annots.length;d++)if(e=a.cache.Annots[d],e.annotApp.id==b.properties.previousGuid)return e.annotApp;return null},deleteAnnotationComment:function(b,d){var e=!1;if(null!=a.cache.AnnotsComments)for(var g=0;g<a.cache.AnnotsComments.length;g++)if(a.cache.AnnotsComments[g].annotApp.id===
b){b=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[g].annotApp.properties.nextGuid);e=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[g].annotApp.properties.previousGuid);null==b?null!=e&&(e.annotApp.properties.nextGuid=null):null!=e?(e.annotApp.properties.nextGuid=b.annotApp.id,b.annotApp.properties.previousGuid=e.annotApp.id):b.annotApp.properties.previousGuid=null;a.cache.AnnotsComments.splice(g,1);e=!0;break}return e?(d&&a.refreshCommentsPanel(),
DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},scrollToSelectedAnnotationCommentVisibility:function(b){var d=dvJQuery(a.dom.commentsContainer),e=d.innerHeight(),g=dvJQuery("#dvcomment-"+b+"-"+a.uniqueID);b=g.position().top;g=g.children(".dvcomment-header").outerHeight()+g.children(".dvcomment-content").children(".dvcomment-message").outerHeight();0>b?d.animate({scrollTop:d.scrollTop()+b},600):b>e&&d.animate({scrollTop:d.scrollTop()+(g+(b-e))},600)},resetAnnotationCommentSelection:function(){var b=
a.Internal.Annotations.getSelectedAnnotationComment();b&&dvJQuery(b).removeClass("dvcomment-selected");dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).children(".dvcomment").children().each(function(){dvJQuery(this).find(".dvcomment-header").css({border:"","padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});dvJQuery(this).find(".dvcomment-message").css({"border-bottom":"","border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""});
dvJQuery(this).children(".dvcomment-content").children(".dvanswer").each(function(){dvJQuery(this).find(".dvcomment-header").css({border:"","padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});dvJQuery(this).find(".dvcomment-message").css({"border-bottom":"","border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""})})})},getSelectedAnnotationComment:function(){return dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).find(".dvcomment-selected")},
selectAnnotationCommentById:function(b,d,e){var g=a.Internal.Annotations.getSelectedAnnotationComment();dvJQuery(g).attr("id")!=="dvcomment-"+b+"-"+a.uniqueID&&(a.Internal.Annotations.resetAnnotationCommentSelection(),g=document.getElementById("dvcomment-"+b+"-"+a.uniqueID),dvJQuery(g).addClass("dvcomment-selected"),dvJQuery(g).children(".dvcomment-header").css({border:"3px solid "+a.dom.UIconfig.headerColor,"padding-left":"7px","padding-top":"7px","padding-bottom":"7px","padding-right":"7px"}),dvJQuery(g).children(".dvcomment-content").children(".dvcomment-message").css({"border-bottom":"3px solid "+
a.dom.UIconfig.headerColor,"border-left":"3px solid "+a.dom.UIconfig.headerColor,"border-right":"3px solid "+a.dom.UIconfig.headerColor,"background-color":a.dom.UIconfig.panelBackColor,color:a.dom.UIconfig.textColor,"padding-left":"8px","padding-right":"8px","padding-bottom":"8px"}));d&&a.Internal.Annotations.scrollToSelectedAnnotationCommentVisibility(b);e&&a.SelectSnapIn("comments",!0)},removeSelectedAnnotations:function(){for(var b=[],d=0;d<a.Internal.Annotations.selected.length;d++)a.Internal.Annotations.selected[d].annotApp.canDelete&&
b.push(a.Internal.Annotations.selected[d]);if(0<b.length){var e=1<b.length;a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize(e?"_title_confirm_annotations_removal":"_title_confirm_annotation_removal"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize(e?"_message_confirm_annotations_removal":"_message_confirm_annotation_removal")+(1<b.length?" ("+b.length.toString()+")":""))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},
{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Annotations.unselectAll();a.DeleteAnnotations(b);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])}},stopAnnotInteractiveAdd:function(){null!=this.currentInteractiveAnnotProperties&&(this.currentInteractiveAnnotProperties=null,this.currentInteractiveAnnotPageNo=0,a.events.pathPoints=null,a.events.isDrawingPath=!1,a.SetMouseMode(0),a.events.ownMouseEvents=!1)},beginAddAnnotInteractive:function(b){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;
this.unselectAll();this.currentInteractiveAnnotProperties=b;5==b.type||10==b.type||11==b.type||16==b.type?a.SetMouseMode(2):(a.SetMouseMode(1),3==b.type||4==b.type||15==b.type?a.Internal.Selection.selectionArea.setLineMode(1):a.Internal.Selection.selectionArea.setLineMode(0));a.events.ownMouseEvents=!0;a.dom.removeViewAreaTouchAction();return DocuViewareAPI.Status.OK},addAnnotInteractive:function(){a.SetMouseMode(0);a.events.ownMouseEvents=!1;if(0!==Math.abs(a.events.mouseX-a.events.mouseDownX)&&
0!==Math.abs(a.events.mouseY-a.events.mouseDownY)||17!==this.currentInteractiveAnnotProperties.type){var b=this.currentInteractiveAnnotPageNo,d=a.Internal.Pages.getRenderingState(b),e=a.Internal.Selection.selectionArea.getPageBounds(b),g=a.Internal.Matrix.scale(a.Internal.Matrix.invert(d.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(g,0,e);this.currentInteractiveAnnotProperties.left=a.Internal.Utilities.roundEx(e.left,7);this.currentInteractiveAnnotProperties.top=a.Internal.Utilities.roundEx(e.top,
7);this.currentInteractiveAnnotProperties.width=a.Internal.Utilities.roundEx(e.width,7);this.currentInteractiveAnnotProperties.height=a.Internal.Utilities.roundEx(e.height,7);e=a.Internal.Selection.selectionArea.getStartPosition();var k=a.Internal.Selection.selectionArea.getEndPosition();a.Internal.Matrix.transformPoint(g,e);a.Internal.Matrix.transformPoint(g,k);if(5==this.currentInteractiveAnnotProperties.type||10==this.currentInteractiveAnnotProperties.type||11==this.currentInteractiveAnnotProperties.type||
16==this.currentInteractiveAnnotProperties.type){if(null==a.events.pathPoints)return;this.currentInteractiveAnnotProperties.startX=-1;this.currentInteractiveAnnotProperties.startY=-1;this.currentInteractiveAnnotProperties.endX=-1;this.currentInteractiveAnnotProperties.endY=-1;this.currentInteractiveAnnotProperties.pathData=[];for(e=0;e<a.events.pathPoints.length;e++)131072!=a.events.pathPoints[e].x&&131072!=a.events.pathPoints[e].x?(k={x:a.events.pathPoints[e].x-d.pageLeft,y:a.events.pathPoints[e].y-
d.pageTop},a.Internal.Matrix.transformPoint(g,k),this.currentInteractiveAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(k.x,7)),this.currentInteractiveAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(k.y,7))):(this.currentInteractiveAnnotProperties.pathData.push(131072),this.currentInteractiveAnnotProperties.pathData.push(131072))}else this.currentInteractiveAnnotProperties.startX=a.Internal.Utilities.roundEx(e.x,7),this.currentInteractiveAnnotProperties.startY=a.Internal.Utilities.roundEx(e.y,
7),this.currentInteractiveAnnotProperties.endX=a.Internal.Utilities.roundEx(k.x,7),this.currentInteractiveAnnotProperties.endY=a.Internal.Utilities.roundEx(k.y,7);d=a.Internal.Annotations.defaultAuthor;g=null;null!=d&&(g={author:d});a.ajax.PostBaseRequest("newannotation",{data:{annots:[{extProperties:g,properties:this.currentInteractiveAnnotProperties,pageNo:b}]},success:function(p){if((p="string"===typeof p?eval("("+p+")"):p)&&null!=p.annots)for(var n=0;n<p.annots.length;n++){var w=p.annots[n].annotApp,
C=a.Internal.Pages.getRenderingState(w.pageNo);C=a.Internal.Annotations.newController(w,C.pageLeft,C.pageTop,C.contentMatrix);a.dom.singlePageView&&w.pageNo!=a.GetCurrentPage()||C.render();a.updateThumbnails([w.pageNo]);if(a.callbacks.onAnnotationAdded)a.callbacks.onAnnotationAdded({id:w.id,pageNo:w.pageNo});17==w.properties.type&&(a.Internal.Annotations.addAnnotsRedactionReferences({id:w.id,pageNo:w.pageNo,title:w.properties.title,fillColor:w.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!0))}else a.ajax.HandleError(p)}},
!1);a.Internal.Annotations.stopAnnotInteractiveAdd()}else a.Internal.Redaction.disableAddRedactionMarksMode()},setAnnotationsComments:function(b){a.cache.AnnotsComments=b},addAnnotationComment:function(b){if(null!=b&&(null==a.cache.AnnotsComments?a.cache.AnnotsComments=[b]:a.cache.AnnotsComments.push(b),null!=b.annotApp.properties.previousGuid&&""!=b.annotApp.properties.previousGuid)){var d=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);null!=d&&(d.annotApp.properties.nextGuid=
b.annotApp.id)}},setAnnotsRedactionReferences:function(b){a.cache.AnnotsRedactionReferences=b},addAnnotsRedactionReferences:function(b){null!=b&&(null==a.cache.AnnotsRedactionReferences?a.cache.AnnotsRedactionReferences=[b]:a.cache.AnnotsRedactionReferences.push(b))},updateAnnotRedactionReferences:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var d=0;d<a.cache.AnnotsRedactionReferences.length;d++)if(a.cache.AnnotsRedactionReferences[d].id===b.id){a.cache.AnnotsRedactionReferences[d]=
b;break}},deleteAnnotsRedactionReferencesById:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var d=0;d<a.cache.AnnotsRedactionReferences.length;d++)if(a.cache.AnnotsRedactionReferences[d].id===b){a.cache.AnnotsRedactionReferences.splice(d,1);break}},addAnnotation:function(b){null==a.cache.Annots?a.cache.Annots=[b]:a.cache.Annots.push(b)},getAnnotationFromCanvas:function(b){if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.canvas===b)return e}return null},
removePageAnnots:function(b){this.unselectAll(b);if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];e.annotApp.pageNo==b&&(e.canvas.parentNode==a.dom.viewerArea&&a.dom.viewerArea.removeChild(e.canvas),a.cache.Annots.splice(d,1),d--)}},removeAll:function(){this.unselectAll();a.cache.Annots=null;a.cache.AnnotsComments=null},disableAll:function(){if(null!=a.cache.Annots)for(var b=0;b<a.cache.Annots.length;b++){var d=a.cache.Annots[b];null!=d&&null!=d.canvas&&(d.canvas.style.pointerEvents=
"none")}this.interactionEnabled=!1},enableAll:function(){if(null!=a.cache.Annots)for(var b=0;b<a.cache.Annots.length;b++){var d=a.cache.Annots[b];null!=d&&null!=d.canvas&&(d.canvas.style.pointerEvents="")}this.interactionEnabled=!0},unselectAll:function(b){if(!b||null!=a.dom.selectedAnnotation&&a.dom.selectedAnnotation.annotApp.pageNo==b)null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide(),a.dom.selectedAnnotation=null;for(var d=this.selected.length-1;0<=d;d--)b&&
this.selected[d].annotApp.pageNo!=b||this.selected[d].setSelectState(!1)},selectById:function(b){a.Internal.Annotations.multiSelectionEnabled||a.Internal.Annotations.unselectAll();if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id===b)return e.setSelectState(!0),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},unselectById:function(b){if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id===
b)return e.setSelectState(!1),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},computeEditToolsCoordinates:function(b){if(0!=b.annotApp.properties.rotation){b.EditToolsMat=a.Internal.Matrix.rotateAt({a:1,b:0,c:0,d:1,e:0,f:0},b.annotApp.properties.rotation,b.annotrectNew.width/2,b.annotrectNew.height/2,!0);var d=b.getBBoxOnViewer(!0,!0);b.EditToolsMat.e+=b.annotrectNew.left-d.left;b.EditToolsMat.f+=b.annotrectNew.top-d.top}else b.EditToolsMat={a:1,b:0,c:0,d:1,e:b.annotrect.left-
b.annotbox.left,f:b.annotrect.top-b.annotbox.top};b.EditToolsMat.e+=this.CANVAS_PADDING;b.EditToolsMat.f+=this.CANVAS_PADDING;b.EditToolsTopLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsTopRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+b.annotrectNew.width-b.gripSize/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsBottomRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+
b.annotrectNew.width-b.gripSize/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsBottomLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsTopMiddleGrip=a.Internal.Coordinates.newRectangle(-b.gripSize/2+b.annotrectNew.width/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsMiddleRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+
b.annotrectNew.width-b.gripSize/2,-b.gripSize/2+b.annotrectNew.height/2,b.gripSize,b.gripSize);b.EditToolsBottomMiddleGrip=a.Internal.Coordinates.newRectangle(-b.gripSize/2+b.annotrectNew.width/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsMiddleLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/2,-b.gripSize/2+b.annotrectNew.height/2,b.gripSize,b.gripSize);d=b.gripSize/2;b.EditToolsRotateGrip=a.Internal.Coordinates.newRectangle(b.annotrectNew.width/
2-d,b.annotrectNew.height/2-d,b.gripSize,b.gripSize)},subrender:function(b,d,e){for(var g=0,k=b;k<e.annotApp.commands.length;k++)switch(e.annotApp.commands[k]){case 0:d.save();break;case 1:d.restore();break;case 2:d.transform(e.annotApp.args[k][0],e.annotApp.args[k][1],e.annotApp.args[k][2],e.annotApp.args[k][3],e.annotApp.args[k][4],e.annotApp.args[k][5]);break;case 3:d.fillStyle="rgba("+e.annotApp.args[k][1]+","+e.annotApp.args[k][2]+","+e.annotApp.args[k][3]+","+e.annotApp.args[k][0]/255+")";break;
case 4:d.beginPath();d.moveTo(e.annotApp.args[k][0],e.annotApp.args[k][1]);d.lineTo(e.annotApp.args[k][0]+e.annotApp.args[k][2],e.annotApp.args[k][1]);d.lineTo(e.annotApp.args[k][0]+e.annotApp.args[k][2],e.annotApp.args[k][1]+e.annotApp.args[k][3]);d.lineTo(e.annotApp.args[k][0],e.annotApp.args[k][1]+e.annotApp.args[k][3]);d.closePath();d.clip();break;case 5:d.globalAlpha=.5;break;case 6:d.globalAlpha=e.annotApp.args[k][0]/255;break;case 7:for(var p=DocuViewareEncodingUtilities.base64.decode(e.annotApp.data[k]),
n=p.length,w=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(n),C=0;C<n;C++)w[C]=p.charCodeAt(C);p=e.annotApp.args[k].length/2;n=[{x:0,y:0},{x:0,y:0},{x:0,y:0}];var K=0;d.beginPath();for(C=0;C<p;C++){var F=128<=w[C];F&&(w[C]-=128);switch(w[C]){case 0:d.moveTo(e.annotApp.args[k][2*C],e.annotApp.args[k][2*C+1]);K=0;break;case 1:d.lineTo(e.annotApp.args[k][2*C],e.annotApp.args[k][2*C+1]);K=0;break;case 3:n[K].x=e.annotApp.args[k][2*C],n[K].y=e.annotApp.args[k][2*C+1],K+=1,3==K&&(d.bezierCurveTo(n[0].x,
n[0].y,n[1].x,n[1].y,n[2].x,n[2].y),K=0)}F&&d.closePath()}d.fill();break;case 8:var Y=e.annotApp.args[k][0],aa=e.annotApp.args[k][1],ha=e.annotApp.args[k][2],da=e.annotApp.args[k][3];g++;if(0==b&&e.cachedImages.length>=g)d.drawImage(e.cachedImages[g-1],Y,aa,ha,da);else{var la=new Image;la.onload=function(){d.drawImage(la,Y,aa,ha,da);a.Internal.Annotations.subrender(k+1,d,e)};la.src=null==e.annotApp.data[k]?"data:image/png;base64,"+e.annotApp.properties.bitmapData:"data:image/png;base64,"+e.annotApp.data[k];
e.cachedImages.push(la);return}}d.restore();e.isSelected&&(d.save(),d.strokeStyle="rgba(153, 209, 255, 0.5)",d.beginPath(),d.moveTo(e.canvas.width-this.CANVAS_PADDING,this.CANVAS_PADDING),d.lineTo(this.CANVAS_PADDING,this.CANVAS_PADDING),d.lineTo(this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),d.stroke(),d.beginPath(),d.moveTo(this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),d.lineTo(e.canvas.width-this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),d.lineTo(e.canvas.width-this.CANVAS_PADDING,
this.CANVAS_PADDING),d.stroke(),d.restore(),d.save(),d.globalCompositeOperation="destination-over",d.fillStyle="rgba(204, 232, 255, 0.2)",d.fillRect(this.CANVAS_PADDING+1,this.CANVAS_PADDING+1,e.canvas.width-2*(1+this.CANVAS_PADDING),e.canvas.height-2*(1+this.CANVAS_PADDING)),d.restore(),d.save(),d.lineWidth=1,d.strokeStyle="rgba(100, 100, 100, 1.0)",d.setLineDash([5,2]),this.computeEditToolsCoordinates(e),b=e.EditToolsMat,d.transform(b.a,b.b,b.c,b.d,b.e,b.f),d.strokeRect(-a.Internal.Annotations.RECT_OUTER_MARGIN,
-a.Internal.Annotations.RECT_OUTER_MARGIN,e.annotrectNew.width+2*a.Internal.Annotations.RECT_OUTER_MARGIN,e.annotrectNew.height+2*a.Internal.Annotations.RECT_OUTER_MARGIN),e.annotApp.canResize&&!e.annotApp.properties.autoSize&&(e.annotApp.properties.keepAspectRatio||e.annotApp.properties.squaredBox||(d.fillRect(e.EditToolsTopLeftGrip.Left,e.EditToolsTopLeftGrip.Top,e.EditToolsTopLeftGrip.Width,e.EditToolsTopLeftGrip.Height),d.fillRect(e.EditToolsTopRightGrip.Left,e.EditToolsTopRightGrip.Top,e.EditToolsTopRightGrip.Width,
e.EditToolsTopRightGrip.Height),d.fillRect(e.EditToolsBottomRightGrip.Left,e.EditToolsBottomRightGrip.Top,e.EditToolsBottomRightGrip.Width,e.EditToolsBottomRightGrip.Height),d.fillRect(e.EditToolsBottomLeftGrip.Left,e.EditToolsBottomLeftGrip.Top,e.EditToolsBottomLeftGrip.Width,e.EditToolsBottomLeftGrip.Height)),d.fillRect(e.EditToolsTopMiddleGrip.Left,e.EditToolsTopMiddleGrip.Top,e.EditToolsTopMiddleGrip.Width,e.EditToolsTopMiddleGrip.Height),d.fillRect(e.EditToolsMiddleRightGrip.Left,e.EditToolsMiddleRightGrip.Top,
e.EditToolsMiddleRightGrip.Width,e.EditToolsMiddleRightGrip.Height),d.fillRect(e.EditToolsBottomMiddleGrip.Left,e.EditToolsBottomMiddleGrip.Top,e.EditToolsBottomMiddleGrip.Width,e.EditToolsBottomMiddleGrip.Height),d.fillRect(e.EditToolsMiddleLeftGrip.Left,e.EditToolsMiddleLeftGrip.Top,e.EditToolsMiddleLeftGrip.Width,e.EditToolsMiddleLeftGrip.Height)),e.annotApp.canRotate&&(b=e.gripSize/2,d.beginPath(),d.arc(e.EditToolsRotateGrip.Left+b,e.EditToolsRotateGrip.Top+b,b,0,2*Math.PI,!1),d.fill()),d.restore());
d=null},prerenderPendingFreenhandAnnot:function(b){var d=5===a.Internal.Annotations.currentInteractiveAnnotProperties.type||16===a.Internal.Annotations.currentInteractiveAnnotProperties.type,e=parseFloat(a.dom.freehandCan.style.top),g=parseFloat(a.dom.freehandCan.style.left),k=a.dom.freehandCan.getContext("2d");k.clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height);k.lineWidth=96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*a.GetCurrentZoom();k.strokeStyle=a.Internal.Annotations.currentInteractiveAnnotProperties.strokeColor;
k.globalAlpha=11==a.Internal.Annotations.currentInteractiveAnnotProperties.type?.5:a.Internal.Annotations.currentInteractiveAnnotProperties.opacity;k.beginPath();d||(k.lineJoin="round",k.lineCap="round");var p=a.events.pathPoints;if(null!==p){for(var n=0;n<p.length;n++)131072===p[n].x&&131072===p[n].y?(k.stroke(),k.beginPath(),d||(k.lineJoin="round",k.lineCap="round")):k.lineTo(p[n].x-g,p[n].y-e);d&&null!=b&&k.lineTo(b.x-g,b.y-e);k.stroke()}},dropPendingFreenhandAnnotLastSubPath:function(){var b=
a.events.pathPoints;if(null!==b){for(var d=b.length-1;0!==d&&(131072!==b[d].x||131072!==b[d].y)&&5!==a.Internal.Annotations.currentInteractiveAnnotProperties.type&&16!==a.Internal.Annotations.currentInteractiveAnnotProperties.type;)d--;a.events.pathPoints=0===d?null:b.slice(0,d);this.prerenderPendingFreenhandAnnot()}},setAnnotationsVisibility:function(b){a.Internal.Annotations.annotationsVisibility=b;if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++)a.cache.Annots[d].canvas.style.visibility=
b;return DocuViewareAPI.Status.OK},newController:function(b,d,e,g){var k={cachedImages:[]};k.annotApp=b;k.updateNo=0;k.pendingUpdate=0;k.isMoving=!1;k.isRotating=!1;k.resizingMode=-1;k.isSelected=!1;k.stopMoving=function(){this.isMoving&&(this.isMoving=!1)};k.stopResizing=function(){-1!=this.resizingMode&&(this.resizingMode=-1)};k.stopRotating=function(){this.isRotating&&(this.isRotating=!1)};k.stopEditing=function(){this.isEditing()&&(this.stopMoving(),this.stopResizing(),this.stopRotating(),this.isModified()&&
this.updateAnnotation(!1,null,a.Internal.Annotations.multiSelectionEnabled))};k.hasPendingUpdate=function(){return 0<this.pendingUpdate};k.isEditing=function(){return this.isRotating||this.isMoving||-1!=this.resizingMode};k.setSelectState=function(n,w){if(n!=this.isSelected){if(n)this.gripSize=a.Internal.Annotations.DEFAULT_GRIP_SIZE*(w?3:1),this.canvas.bakzIndex=this.canvas.style.zIndex,this.canvas.style.zIndex=a.Internal.Annotations.getMaxZindex()+1,this.canvas.tabIndex=1,a.Internal.Annotations.selected.push(this);
else for(this.canvas.style.zIndex=this.canvas.bakzIndex,this.canvas.removeAttribute("tabindex"),this.stopEditing(),w=a.Internal.Annotations.selected.length-1;0<=w;w--)if(a.Internal.Annotations.selected[w]===this){a.Internal.Annotations.selected.splice(w,1);break}this.isSelected=n;this.render(!1,n);if(a.callbacks.onAnnotationSelectedStateChanged)a.callbacks.onAnnotationSelectedStateChanged({id:this.annotApp.id,state:n})}};k.editPointsHitTest=function(n,w,C){if(a.serverCtx.annotationEditorMode&&this.annotApp.canMove&&
this.annotApp.canSelect&&this.annotApp.pageNo==a.GetCurrentPage()){C=this.canvas.getBoundingClientRect();n={x:n-C.left,y:w-C.top};a.Internal.Annotations.computeEditToolsCoordinates(this);a.Internal.Matrix.transformPoint(a.Internal.Matrix.invert(this.EditToolsMat),n);if(!this.annotApp.properties.keepAspectRatio&&!this.annotApp.properties.squaredBox){if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsTopLeftGrip,2))return 1;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsTopRightGrip,
2))return 3;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsBottomRightGrip,2))return 5;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsBottomLeftGrip,2))return 7}if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsMiddleLeftGrip,2))return 0;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsTopMiddleGrip,2))return 2;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsMiddleRightGrip,2))return 4;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsBottomMiddleGrip,
2))return 6;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsRotateGrip,2))return 8}return-1};k.isModified=function(){return this.rotationinit!=this.annotApp.properties.rotation||this.annotrect.left!=this.annotrectNew.left||this.annotrect.top!=this.annotrectNew.top||this.annotrect.width!=this.annotrectNew.width||this.annotrect.height!=this.annotrectNew.height};k.hasPendingRotateUpdate=function(){return this.rotationinit!=this.annotApp.properties.rotation};k.hasPendingResizeUpdate=function(){return this.annotrectNew.width!=
this.annotrect.width||this.annotrectNew.height!=this.annotrect.height};k.hasPendingMoveUpdate=function(){return this.annotrectNew.left!=this.annotrect.left||this.annotrectNew.top!=this.annotrect.top};k.addWidth=function(n,w){this.annotrectNew.width+=n;this.annotApp.properties.squaredBox?this.annotrectNew.height+=n:this.annotApp.properties.keepAspectRatio&&(this.annotrectNew.height=this.annotrectNew.width/this.annotApp.properties.aspectRatio);w&&this.render(!1)};k.addHeight=function(n,w){this.annotrectNew.height+=
n;this.annotApp.properties.squaredBox?this.annotrectNew.width+=n:this.annotApp.properties.keepAspectRatio&&(this.annotrectNew.width=this.annotrectNew.height*this.annotApp.properties.aspectRatio);w&&this.render(!1)};k.updateCursor=function(n){if(!this.isEditing())if(this.annotApp.canSelect&&!n&&a.serverCtx.annotationEditorMode)if(this.annotApp.pageNo!=a.GetCurrentPage())this.cursorMgr.setStdCursor("not-allowed");else{n=this.editPointsHitTest(a.events.mouseX,a.events.mouseY,a.Internal.Annotations.DEFAULT_GRIP_SIZE);
if(this.isSelected){0<=n&&7>=n&&(n+=Math.trunc((this.annotApp.properties.rotation+22.5)/45),n%=8);if(0<=n&&7>=n&&this.annotApp.canResize&&!this.annotApp.properties.autoSize){if(this.hasPendingRotateUpdate()||this.hasPendingMoveUpdate()){this.cursorMgr.setStdCursor("wait");return}if(0==n){this.cursorMgr.setStdCursor("w-resize");return}if(1==n){this.cursorMgr.setStdCursor("nw-resize");return}if(2==n){this.cursorMgr.setStdCursor("n-resize");return}if(3==n){this.cursorMgr.setStdCursor("ne-resize");return}if(4==
n){this.cursorMgr.setStdCursor("w-resize");return}if(5==n){this.cursorMgr.setStdCursor("nwse-resize");return}if(6==n){this.cursorMgr.setStdCursor("n-resize");return}if(7==n){this.cursorMgr.setStdCursor("nesw-resize");return}}if(this.annotApp.canRotate&&8==n){this.hasPendingResizeUpdate()?this.cursorMgr.setStdCursor("wait"):this.cursorMgr.setCustomCursorClass("rotateCursor");return}}this.annotApp.canMove?this.hasPendingResizeUpdate()&&0!=this.annotApp.properties.rotation?this.cursorMgr.setStdCursor("wait"):
13===this.annotApp.properties.type&&a.serverCtx.annotationEditorMode&&2==a.dom.UIconfig.linkAnnotationClickBehaviour?this.cursorMgr.setStdCursor("pointer"):this.cursorMgr.setStdCursor("all-scroll"):this.cursorMgr.setStdCursor("default")}else this.cursorMgr.setStdCursor("")};k.getBBoxOnViewer=function(n,w){var C=n?0:this.pageLeft;n=n?0:this.pageTop;var K=this.annotrectNew.left-this.annotrect.left,F=this.annotrectNew.top-this.annotrect.top;K={left:this.annotbox.left+C+K,top:this.annotbox.top+n+F,width:this.annotbox.width+
(this.annotrectNew.left+this.annotrectNew.width-(this.annotrect.left+this.annotrect.width)-K),height:this.annotbox.height+(this.annotrectNew.top+this.annotrectNew.height-(this.annotrect.top+this.annotrect.height)-F)};0!=this.annotApp.properties.rotation&&(w=!this.hasPendingResizeUpdate()||w?{x:this.annotrectNew.left+C+this.annotrectNew.width/2,y:this.annotrectNew.top+n+this.annotrectNew.height/2}:{x:this.annotrect.left+C+this.annotrect.width/2,y:this.annotrect.top+n+this.annotrect.height/2},a.Internal.Matrix.transformBBox({a:1,
b:0,c:0,d:1,e:0,f:0},this.annotApp.properties.rotation,K,w));return K};k.render=function(n,w){var C=this.getBBoxOnViewer(),K=Math.round(C.left-a.Internal.Annotations.CANVAS_PADDING),F=Math.round(C.top-a.Internal.Annotations.CANVAS_PADDING),Y=Math.round(C.width+2*a.Internal.Annotations.CANVAS_PADDING),aa=Math.round(C.height+2*a.Internal.Annotations.CANVAS_PADDING);this.canvas.style.left=K+"px";this.canvas.style.top=F+"px";if(this.isSelected){if(null!=a.dom.annotationsActionButtons)if("legacy"===a.dom.mainArea.attributes["data-theme-layout"].value)if(null!=
a.dom.commentsArea&&a.IsSnapInAvailable("comments")?this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+
a.uniqueID).show()):this.annotApp.canEdit&&!this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+
a.uniqueID).hide()):!this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+
a.uniqueID).show()):(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):
this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+
a.uniqueID).show()):this.annotApp.canEdit&&!this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+
a.uniqueID).hide()):!this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+
a.uniqueID).show()):(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()),
1===a.Internal.Annotations.selected.length){dvJQuery(a.dom.annotationsActionButtons).show();var ha=dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationActionButtonsSplitter']:visible").length,da=dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationAction']:visible").length-ha;dvJQuery(a.dom.annotationsActionButtons).width(17*ha+17*da);0===da&&0===ha?dvJQuery(a.dom.annotationsActionButtons).hide():(dvJQuery(a.dom.annotationsActionButtons).css("left",K+Y-dvJQuery(a.dom.annotationsActionButtons).outerWidth()-
a.Internal.Annotations.CANVAS_PADDING+"px"),dvJQuery(a.dom.annotationsActionButtons).css("top",F+aa+"px"))}else dvJQuery(a.dom.annotationsActionButtons).hide();else null!=a.dom.commentsArea&&a.IsSnapInAvailable("comments")?dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show():dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),this.annotApp.canDelete?dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+
a.uniqueID).show():dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide(),this.annotApp.canEdit?dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show():dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),1===a.Internal.Annotations.selected.length?(dvJQuery(a.dom.annotationsActionButtons).show(),0===dvJQuery(a.dom.annotationsActionButtons).children(":visible").length?dvJQuery(a.dom.annotationsActionButtons).hide():
(dvJQuery(a.dom.annotationsActionButtons).css("left",K+Y-dvJQuery(a.dom.annotationsActionButtons).outerWidth()-a.Internal.Annotations.CANVAS_PADDING+"px"),dvJQuery(a.dom.annotationsActionButtons).css("top",F+aa+"px"))):dvJQuery(a.dom.annotationsActionButtons).hide();w&&(a.dom.selectedAnnotation=this)}n||(this.canvas.width!=Y&&(this.canvas.width=Y),this.canvas.height!=aa&&(this.canvas.height=aa),n=this.annotrectNew.width/this.annotrect.width,w=this.annotrectNew.height/this.annotrect.height,1<n&&1>
this.annotrect.width&&(n=1),1<w&&1>this.annotrect.height&&(w=1),K=this.canvas.getContext("2d"),K.clearRect(0,0,this.canvas.width,this.canvas.height),K.save(),F=this.annotmat,F=a.Internal.Matrix.translate(F,-this.annotbox.left,-this.annotbox.top),F=a.Internal.Matrix.scale(F,n,w,!1),0!=this.annotApp.properties.rotation&&(F=a.Internal.Matrix.rotateAt(F,this.annotApp.properties.rotation,this.annotbox.width/2*n,this.annotbox.height/2*w,!1),F=a.Internal.Matrix.translate(F,(C.width-this.annotbox.width*n)/
2,(C.height-this.annotbox.height*w)/2)),F=a.Internal.Matrix.translate(F,a.Internal.Annotations.CANVAS_PADDING,a.Internal.Annotations.CANVAS_PADDING),K.transform(F.a,F.b,F.c,F.d,F.e,F.f),a.dom.UIconfig.annotsDropShadow&&this.annotApp.supportShadow&&(K.shadowOffsetX=2,K.shadowOffsetY=2,K.shadowBlur=4,K.shadowColor="rgba(100, 100, 100, 0.6)"),a.Internal.Annotations.subrender(0,K,this))};k.canvas=document.createElement("canvas");k.canvas.style.display="block";k.canvas.style.position="absolute";k.canvas.style.padding=
"0px";k.canvas.style.margin="0px";k.canvas.style.outline="0";a.Internal.Annotations.interactionEnabled||(k.canvas.style.pointerEvents="none");k.canvas.style.visibility=a.Internal.Annotations.annotationsVisibility;var p=Math.min(Math.max(k.annotApp.zorder,0),65535);k.canvas.style.zIndex=a.dom.zindexManager.getFirstAnnotZindex()+p;k.cursorMgr=CreateDocuViewareCursorManager(k.canvas,a.isIEorEdge);k.updateAnnotationDeferred=function(n,w){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);var C=
this;this.timeout=setTimeout(function(){C.updateAnnotation(n,w,!1)},300);return DocuViewareAPI.Status.OK};k.getPendingAnnotationUpdateData=function(n,w,C){var K={x:this.annotrectNew.left+this.annotrectNew.width/2,y:this.annotrectNew.top+this.annotrectNew.height/2},F={x:this.annotrectNew.width,y:this.annotrectNew.height};if(0!=this.annotApp.properties.rotation&&this.hasPendingResizeUpdate()){var Y=a.Internal.Matrix.rotateAt({a:1,b:0,c:0,d:1,e:0,f:0},this.annotApp.properties.rotation,this.annotrect.left+
this.annotrect.width/2,this.annotrect.top+this.annotrect.height/2,!0);a.Internal.Matrix.transformPoint(Y,K)}Y=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,e:0,f:0}),1/96,1/96,!1);var aa=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,e:this.annotmat.e,f:this.annotmat.f}),1/96,1/96,!1);a.Internal.Matrix.transformPoint(aa,K);a.Internal.Matrix.transformPoint(Y,
F);C&&(this.updateNo+=1,this.pendingUpdate+=1);n={clientTag:this.annotApp.clientTag,properties:this.annotApp.properties,"delete":n,pageNo:this.annotApp.pageNo,id:this.annotApp.id,updateNo:this.updateNo};n.properties.left=a.Internal.Utilities.roundEx(K.x,7);n.properties.top=a.Internal.Utilities.roundEx(K.y,7);n.properties.width=a.Internal.Utilities.roundEx(Math.abs(F.x),7);n.properties.height=a.Internal.Utilities.roundEx(Math.abs(F.y),7);w&&dvJQuery.extend(!0,n.properties,w);null!=n.properties&&null!=
n.properties.bitmapData&&(n.properties.bitmapData=null);return n};k.updateAnnotation=function(n,w,C,K){if(a.hasPendingAction(!0,!0))return DocuViewareAPI.Status.GenericError;var F=this.getPendingAnnotationUpdateData(n,w,!0),Y={annots:[F],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID};if(C)for(C=a.Internal.Annotations.selected.length-1;0<=C;C--){var aa=a.Internal.Annotations.selected[C];aa!=this&&Y.annots.push(aa.getPendingAnnotationUpdateData(n,w,!1))}if(null!=K)for(C=0;C<K.length;C++)aa=
K[C],aa!=this&&Y.annots.push(aa.getPendingAnnotationUpdateData(n,w,!1));var ha=this;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!n,data:JSON.stringify(Y),contentType:"application/json",success:function(da){--ha.pendingUpdate;da="string"===typeof da?eval("("+da+")"):da;var la=[];if(da&&null!=da.annots){for(var Ha=!1,wa=0;wa<da.annots.length;wa++)if(n){if(null!=da.annots[wa].deletedAnnotsCommentId)for(var va=da.annots[wa].deletedAnnotsCommentId.length,
ua=0;ua<va;ua++)a.Internal.Annotations.deleteAnnotationComment(da.annots[wa].deletedAnnotsCommentId[ua],ua==va-1);17==da.annots[wa].annotType&&(a.Internal.Annotations.deleteAnnotsRedactionReferencesById(da.annots[wa].id),a.dom.redactionsPanel&&(a.Internal.Redaction.deleteRedactionMarkSelector(da.annots[wa].id),a.Internal.Redaction.refreshRedactionPanel(!1)));null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide();a.updateThumbnails([da.annots[wa].pageNo]);if(null!=a.cache.Annots)for(ua=
0;ua<a.cache.Annots.length;ua++)va=a.cache.Annots[ua],va.annotApp.pageNo===da.annots[wa].pageNo&&(va.annotApp.id===da.annots[wa].id?(a.dom.viewerArea.removeChild(va.canvas),a.cache.Annots.splice(ua,1),ua--):va.annotApp.idx>F.idx&&va.annotApp.idx--);if(a.callbacks.onAnnotationDeleted)a.callbacks.onAnnotationDeleted({id:da.annots[wa].id,pageNo:da.annots[wa].pageNo})}else{if(!ha.isEditing()&&(Ha||da.annots[wa].updateNo==ha.updateNo)&&(0==wa&&1<da.annots.length&&(Ha=!0),null!=a.cache.Annots))for(ua=0;ua<
a.cache.Annots.length;ua++)if(va=a.cache.Annots[ua],va.annotApp.pageNo===da.annots[wa].pageNo&&va.annotApp.id===da.annots[wa].id){var Da=null!=va.annotApp.properties&&null!=va.annotApp.properties.bitmapData?va.annotApp.properties.bitmapData:null;va.annotApp=da.annots[wa].annotApp;if(null==va.annotApp.properties||null==va.annotApp.properties.bitmapData)ha.annotApp.properties.bitmapData=Da;va.reset();va.render();-1===la.indexOf(da.annots[wa].pageNo)&&la.push(da.annots[wa].pageNo)}if(a.callbacks.onAnnotationEdited)a.callbacks.onAnnotationEdited({id:da.annots[wa].id,
pageNo:da.annots[wa].pageNo});ua=da.annots[wa].annotApp;17==ua.properties.type&&(a.Internal.Annotations.updateAnnotRedactionReferences({id:ua.id,pageNo:ua.pageNo,title:ua.properties.title,fillColor:ua.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!1))}0<la.length&&a.updateThumbnails(la)}else a.ajax.HandleError(da)},error:function(da){a.ajax.HandleError(da);--ha.pendingUpdate}});return DocuViewareAPI.Status.OK};a.serverCtx.annotationEditorMode&&(window.PointerEvent?
(dvJQuery(k.canvas).css("touch-action","none"),k.canvas.onpointerdown=function(n){switch(n.pointerType){case "mouse":this.mousedown(n);break;case "pen":this.mousedown(n,!0);n.preventDefault();break;case "touch":this.mousedown(n,!0);n.preventDefault();break;default:this.mousedown(n)}},k.canvas.onpointermove=function(n){switch(n.pointerType){case "mouse":this.mousemove(n);break;case "pen":this.mousemove(n);n.preventDefault();break;case "touch":this.mousemove(n);n.preventDefault();break;default:this.mousemove(n)}},
k.canvas.onpointerup=function(n){switch(n.pointerType){case "mouse":this.mouseup(n);break;case "pen":this.mouseup(n);n.preventDefault();break;case "touch":this.mouseup(n);n.preventDefault();break;default:this.mouseup(n)}},k.canvas.onpointerenter=function(n){switch(n.pointerType){case "mouse":this.mouseenter(n);break;case "pen":this.mouseenter(n);break;default:this.mouseenter(n)}},k.canvas.onpointerleave=function(n){switch(n.pointerType){case "mouse":this.mouseleave(n);break;case "pen":this.mouseleave(n);
break;default:this.mouseleave(n)}}):(k.canvas.ontouchstart=function(n){1==n.changedTouches.length&&(this.mousedown(n.changedTouches[0],!0),n.cancelable&&n.preventDefault())},k.canvas.ontouchmove=function(n){1==n.changedTouches.length&&(this.mousemove(n.changedTouches[0]),n.cancelable&&n.preventDefault())},k.canvas.ontouchend=function(n){1==n.changedTouches.length&&(this.mouseup(n.changedTouches[0]),n.cancelable&&n.preventDefault())},k.canvas.onmousedown=function(n){this.mousedown(n)},k.canvas.onmousemove=
function(n){this.mousemove(n)},k.canvas.onmouseup=function(n){this.mouseup(n)},k.canvas.onmouseenter=function(n){this.mouseenter(n)},k.canvas.onmouseleave=function(n){this.mouseleave(n)}),k.canvas.onkeyup=function(n){this.keyup(n)},k.canvas.ondblclick=function(n){this.dblClick(n)},k.canvas.mouseenter=function(n){n=a.Internal.Annotations.getAnnotationFromCanvas(this);a.Internal.Annotations.hoveredAnnot=n;if(a.callbacks.onAnnotationMouseEnter)a.callbacks.onAnnotationMouseEnter({id:n.annotApp.id})},
k.canvas.mouseleave=function(n){a.Internal.Annotations.hoveredAnnot=null;a.callbacks.onAnnotationMouseLeave&&(n=a.Internal.Annotations.getAnnotationFromCanvas(this),a.callbacks.onAnnotationMouseLeave({id:n.annotApp.id}))},k.canvas.mouseup=function(n,w){a.events.mouseup(n,w)},k.canvas.mousedown=function(n,w){if(a.events.ownMouseEvents)a.events.mousedown(n,w);else{var C=a.Internal.Annotations.getAnnotationFromCanvas(this),K=C.annotApp.pageNo!=a.GetCurrentPage();if(!K){if(C.annotApp.canSelect){if(a.Internal.Annotations.multiSelectionEnabled)if(!n.ctrlKey){var F=
!0;C.isSelected&&1<a.Internal.Annotations.selected.length&&(F=!1);F&&a.Internal.Annotations.unselectAll()}else{if(C.isSelected){C.setSelectState(!1,w);return}}else a.Internal.Annotations.unselectAll();F=!0;13===C.annotApp.properties.type&&(a.serverCtx.annotationEditorMode&&2!=a.dom.UIconfig.linkAnnotationClickBehaviour||(F=!1));F&&(C.setSelectState(!0,w),F=C.editPointsHitTest(n.clientX,n.clientY,a.Internal.Annotations.DEFAULT_GRIP_SIZE*(w?3:1)),C.annotApp.canResize&&!C.annotApp.properties.autoSize&&
-1!=F&&8!=F?C.hasPendingRotateUpdate()||C.hasPendingMoveUpdate()||(C.resizingMode=F):C.annotApp.canRotate&&8==F?C.hasPendingResizeUpdate()||(C.isRotating=!0):!C.annotApp.canMove||C.hasPendingResizeUpdate()&&0!=C.annotApp.properties.rotation||(C.isMoving=!0))}a.cache.AnnotsComments&&(F=a.Internal.Annotations.getFirstAnnotationCommentOfAnnotationFromId(C.annotApp.id),null!=F?a.Internal.Annotations.selectAnnotationCommentById(F.comment.annotApp.id,!0,!1):a.Internal.Annotations.resetAnnotationCommentSelection())}a.events.mouseX=
n.clientX;a.events.mouseY=n.clientY;C.updateCursor();K&&3!=a.events.mouseMode&&4!=a.events.mouseMode&&a.events.mousedown(n,w)}},k.canvas.mousemove=function(n){if(a.events.ownMouseEvents){var w=a.Internal.Annotations.getAnnotationFromCanvas(this);w.updateCursor(!0);a.events.mousemove(n)}else a.events.mousemove(n),w=a.Internal.Annotations.getAnnotationFromCanvas(this),w.updateCursor()},k.canvas.keyup=function(n){13==n.keyCode?a.Internal.Annotations.editSelectedAnnotation():46==n.keyCode&&a.Internal.Annotations.removeSelectedAnnotations()},
k.canvas.dblClick=function(n){!a.dom.enableAnnotEditionOnDblClick||13===k.annotApp.properties.type&&a.serverCtx.annotationEditorMode&&3==a.dom.UIconfig.linkAnnotationClickBehaviour||a.Internal.Annotations.editSelectedAnnotation()});k.updatePageInfo=function(n,w,C){null!=C&&(this.annotmat=C);this.pageLeft=n;this.pageTop=w;this.reset()};k.runLinkDestination=function(){a.Internal.Destinations.followLink(k.annotApp.properties.link)};k.reset=function(){this.rotationinit=this.annotApp.properties.rotation;
this.annotrect={left:this.annotApp.rect.Left,top:this.annotApp.rect.Top,width:this.annotApp.rect.Right-this.annotApp.rect.Left,height:this.annotApp.rect.Bottom-this.annotApp.rect.Top};this.annotbox={left:this.annotApp.bbox.Left,top:this.annotApp.bbox.Top,width:this.annotApp.bbox.Right-this.annotApp.bbox.Left,height:this.annotApp.bbox.Bottom-this.annotApp.bbox.Top};null!=this.annotmat&&(a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,96,96,!0),0,this.annotrect),a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,
96,96,!0),0,this.annotbox));this.annotrectNew={left:this.annotrect.left,top:this.annotrect.top,width:this.annotrect.width,height:this.annotrect.height};var n=Math.min(this.annotrect.left,this.annotbox.left),w=Math.min(this.annotrect.top,this.annotbox.top),C=Math.max(this.annotrect.top+this.annotrect.height,this.annotbox.top+this.annotbox.height),K=Math.max(this.annotrect.left+this.annotrect.width,this.annotbox.left+this.annotbox.width);this.annotbox.left=n;this.annotbox.top=w;this.annotbox.width=
K-n;this.annotbox.height=C-w};a.Internal.Annotations.addAnnotation(k);k.updatePageInfo(d,e,g);if(b.visible){a.serverCtx.annotationEditorMode||(dvJQuery(k.canvas).mouseenter(function(){if(a.callbacks.onAnnotationMouseEnter){var n=a.Internal.Annotations.getAnnotationFromCanvas(this);a.callbacks.onAnnotationMouseEnter({id:n.annotApp.id})}}),dvJQuery(k.canvas).mouseleave(function(){if(a.callbacks.onAnnotationMouseLeave){var n=a.Internal.Annotations.getAnnotationFromCanvas(this);a.callbacks.onAnnotationMouseLeave({id:n.annotApp.id})}}));
if(13===k.annotApp.properties.type)if(b=a.serverCtx.annotationEditorMode&&3==a.dom.UIconfig.linkAnnotationClickBehaviour,!a.serverCtx.annotationEditorMode||2==a.dom.UIconfig.linkAnnotationClickBehaviour)dvJQuery(k.canvas).hover(function(){dvJQuery(this).css("cursor","pointer")}),dvJQuery(k.canvas).on("click",function(n){n.preventDefault();k.runLinkDestination()});else if(b)dvJQuery(k.canvas).on("dblclick",function(n){n.preventDefault();k.runLinkDestination()});a.dom.viewerArea.appendChild(k.canvas)}return k},
mergeAnnotationProperties:function(b,d){var e=dvJQuery.extend(!0,{},a.Internal.Annotations.getAnnotPropertiesValues(b));"object"===typeof d&&dvJQuery.each(d,function(g,k){g in e&&(e[g]=k)});return e},showAnnotationPropertiesUI:function(b,d,e,g){a.Internal.Annotations.annotEdit=e;dvJQuery(a.dom.annotationDialogFormContainer).find(".dv-annotation-control").hide();dvJQuery(a.dom.annotationDialogFormContainer).find("#annotation_auto_creation"+a.uniqueID).hide();dvJQuery(a.dom.annotationDialogFormContainer).children().find(":disabled").prop("disabled",
!1);dvJQuery.each(b,function(k,p){switch(k){case "fill":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+a.uniqueID+"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fill"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_control"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+
a.uniqueID).css("display","inline-block");break;case "fillColor":k=1;-1!=p.indexOf("rgba")&&(k=p.replace(/^.*,(.+)\)/,"$1"),k=parseFloat(k).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").attr("data-opacity",k);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(p));dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(n){dvJQuery(n.target).parents().add(n.target).hasClass("minicolors")||
dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("margin-bottom","0px")});dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery("#annotation_fill_color_control"+a.uniqueID).find("input").is(":disabled")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("margin-bottom","175px");event.stopPropagation()});if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fillColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_color_control"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","inline-block");break;case "dashCap":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+a.uniqueID+"'][value='"+p+"']:radio").prop("checked",!0);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("dashCap"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_cap"+a.uniqueID).css("display","inline-block");break;case "dashStyle":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("dashStyle"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_style"+
a.uniqueID).css("display","inline-block");break;case "stroke":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("stroke"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_control"+
a.uniqueID).css("display","inline-block");break;case "strokeColor":k=1;-1!=p.indexOf("rgba")&&(k=p.replace(/^.*,(.+)\)/,"$1"),k=parseFloat(k).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").attr("data-opacity",k);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(p));dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(n){dvJQuery(n.target).parents().add(n.target).hasClass("minicolors")||
dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("margin-bottom","0px")});dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery("#annotation_stroke_color_control"+a.uniqueID).find("input").is(":disabled")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("margin-bottom","175px");event.stopPropagation()});if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("strokeColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_color_control"+a.uniqueID).css("display","inline-block");break;case "borderWidth":0==b.type||11==b.type||17==b.type?(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val(Number((96*p).toFixed(2).replace(".00",""))),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+
a.uniqueID+" label").html(a.Localize("label_annotation_property_border_width"))):(k=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+a.uniqueID+"']").find("option[value='"+Number((9600*p).toFixed(2).replace(".00",""))+"']").val())||0,dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+a.uniqueID+"']").find("option[value='"+k+"']").prop("selected",!0).trigger("change"),0==k&&dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+
a.uniqueID+"']").val(Number((96*p).toFixed(2).replace(".00",""))),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+a.uniqueID+" label").html("&nbsp;"));if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("borderWidth"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),0==b.type||11==b.type?(dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom"+a.uniqueID).css("display","inline-block"),
dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+a.uniqueID).hide()):dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+a.uniqueID).css("display","inline-block");break;case "opacity":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+a.uniqueID+"']").val(Number((100*p).toFixed(2).replace(".00","")));(!g||g&&Array.isArray(g)&&-1!=g.indexOf("opacity"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_opacity"+a.uniqueID).css("display",
"inline-block");break;case "link":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+a.uniqueID+"']").val(p);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("link"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_link"+a.uniqueID).css("display","inline-block");break;case "radiusFactor":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+
a.uniqueID+"']").val(Number((100*p).toFixed(2).replace(".00","")));if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("radiusFactor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_radius_factor"+a.uniqueID).css("display","inline-block");break;case "rotation":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val(Number(p.toFixed(2).replace(".00",
"")));(!g||g&&Array.isArray(g)&&-1!=g.indexOf("rotation"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_rotation"+a.uniqueID).css("display","inline-block");break;case "squaredBox":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+a.uniqueID+"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("squaredBox"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),
dvJQuery(a.dom.annotationDialogForm).find("#annotation_squared_box"+a.uniqueID).css("display","inline-block");break;case "text":dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+a.uniqueID+"']").val(p);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("text"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_control"+a.uniqueID).css("display","inline-block");
b.canEditText||8!=b.type&&9!=b.type||dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+a.uniqueID+"']").prop("disabled",!0);break;case "fontName":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);a.setDialogAnnotationFontNamePropertiesPreview();if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fontName"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_name_control"+a.uniqueID).css("display","table-cell");break;case "fontStyle":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);a.setDialogAnnotationFontStylePropertiesPreview();if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fontStyle"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_style_control"+a.uniqueID).css("display","table-cell");break;case "foreColor":k=1;0<=p.indexOf("rgba")&&(k=p.replace(/^.*,(.+)\)/,"$1"),k=parseFloat(k).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").attr("data-opacity",k);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(p));
if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("foreColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fore_color_control"+a.uniqueID).css("display","table-cell");break;case "alignment":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+a.uniqueID+"'][value='"+p+"']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!g||g&&
Array.isArray(g)&&-1!=g.indexOf("alignment"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_alignment_control"+a.uniqueID).css("display","table-cell");break;case "autoSize":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+a.uniqueID+"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("autoSize"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_size"+a.uniqueID).css("display","inline-block");break;case "fontSize":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val(Number(p.toFixed(2).replace(".00","")));if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fontSize"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_size_control"+
a.uniqueID).css("display","table-cell");break;case "lineAlignment":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+a.uniqueID+"'][value='"+p+"']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("lineAlignment"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_line_alignment_control"+
a.uniqueID).css("display","table-cell");break;case "arrowFilled":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("arrowFilled"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_filled"+a.uniqueID).css("display","inline-block");break;case "arrowHeight":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+
a.uniqueID+"']").val(p);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("arrowHeight"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_height"+a.uniqueID).css("display","inline-block");break;case "arrowWidth":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+a.uniqueID+"']").val(p);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("arrowWidth"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_width"+a.uniqueID).css("display","inline-block");break;case "endCap":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);(!g||g&&Array.isArray(g)&&-1!=g.indexOf("endCap"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_end_cap"+a.uniqueID).css("display","inline-block");break;case "startCap":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+
a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);(!g||g&&Array.isArray(g)&&-1!=g.indexOf("startCap"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_start_cap"+a.uniqueID).css("display","inline-block");break;case "measurementUnit":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("measurementUnit"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_measurement_unit"+a.uniqueID).css("display","inline-block");break;case "scale":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+"']").val(Number(p.toFixed(2).replace(".00","")));(!g||g&&Array.isArray(g)&&-1!=g.indexOf("scale"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_scale"+a.uniqueID).css("display","inline-block");break;case "autoCreate":d||(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+
a.uniqueID+"']").prop("checked",p).trigger("change"),g||dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_creation"+a.uniqueID).css("display","inline-block"));break;case "title":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_title_input"+a.uniqueID+"']").val(p),(!g||g&&Array.isArray(g)&&-1!=g.indexOf("title"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_title"+a.uniqueID).css("display","inline-block")}});a.DisplayDialogForm(dvJQuery(a.dom.annotationDialogForm),
a.Internal.Annotations.getAnnotationTitleFromType(b.type),function(){dvJQuery("input[name='annotation_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationAlignmentPropertiesPreview()});dvJQuery("input[name='annotation_line_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationLineAlignmentPropertiesPreview()});dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height",dvJQuery(a.dom.annotationDialogFormTextInput).height())},null,
null,[{text:a.Localize("_label_button_annotation_cancel"),click:function(){a.ExitAnnotationDrawingMode();dvJQuery(a.dom.annotationDialogForm).dvDialog("close")}},{text:d?a.Localize("_label_button_annotation_edit"):a.Localize("_label_button_annotation_add"),"class":"btn-valid",click:function(){dvJQuery.each(b,function(k,p){switch(k){case "fill":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+a.uniqueID+"']").is(":checked");break;case "fillColor":b[k]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+
a.uniqueID+"']")).minicolors("rgbaString");break;case "dashCap":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+a.uniqueID+"']:checked").val());break;case "dashStyle":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+a.uniqueID+"']").find("option:selected").val());break;case "stroke":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").is(":checked");break;
case "strokeColor":b[k]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']")).minicolors("rgbaString");break;case "borderWidth":b[k]=parseFloat(100*dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val())/96/100||0;break;case "opacity":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+a.uniqueID+"']").val()/100);break;case "link":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+
a.uniqueID+"']").val();break;case "radiusFactor":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+a.uniqueID+"']").val()/100);break;case "rotation":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val())||0;break;case "squaredBox":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+a.uniqueID+"']").is(":checked");break;case "text":b[k]=dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+
a.uniqueID+"']").val();break;case "fontName":b[k]=dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+a.uniqueID+"']").find("option:selected").val();break;case "fontStyle":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option:selected").val());break;case "foreColor":b[k]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']")).minicolors("rgbaString");
break;case "alignment":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+a.uniqueID+"']:checked").val());break;case "autoSize":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+a.uniqueID+"']").is(":checked");break;case "fontSize":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val())||parseFloat(b[k]);break;case "lineAlignment":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+
a.uniqueID+"']:checked").val());break;case "arrowFilled":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").is(":checked");break;case "arrowHeight":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+a.uniqueID+"']").val())||0;break;case "arrowWidth":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+a.uniqueID+"']").val())||0;break;case "endCap":b[k]=
parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+a.uniqueID+"']").find("option:selected").val());break;case "startCap":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+a.uniqueID+"']").find("option:selected").val());break;case "measurementUnit":b[k]=dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+a.uniqueID+"']").find("option:selected").val();break;case "scale":b[k]=
parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+"']").val())||1;break;case "autoCreate":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+a.uniqueID+"']").is(":checked");break;case "title":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_title_input"+a.uniqueID+"']").val()}});dvJQuery(a.dom.annotationDialogForm).dvDialog("close");return d?a.Internal.Annotations.annotEdit.updateAnnotation(!1,
b,!1):a.Internal.Annotations.beginAddAnnotInteractive(b)}}]);return DocuViewareAPI.Status.GenericError}},Magnifier:{isMagnifying:!1,zoomContext:1,currentMagnifyingContext:{pageNo:-1,pageState:null,zoom:-1,magnifyZoom:-1,pixelRatio:-1,magnifierClientRect:null,img:null,cursorX:-1,cursorY:-1},hasContextChanged:function(){var b=a.GetCurrentPage();if(b!==a.Internal.Magnifier.currentMagnifyingContext.pageNo)return!0;b=a.Internal.Pages.getRenderingState(b);return b.pageWidth!==a.Internal.Magnifier.currentMagnifyingContext.pageState.pageWidth||
b.pageHeigth!==a.Internal.Magnifier.currentMagnifyingContext.pageState.pageHeigth||a.Internal.Magnifier.zoomContext*b.zoom!==a.Internal.Magnifier.currentMagnifyingContext.zoom?!0:!1},resetPosition:function(){a.dom.magnifierDiv.style.left="-999px";a.dom.magnifierDiv.style.top="-999px";a.dom.magnifierDiv.style.display="none"},enable:function(){if(a.isIE)return DocuViewareAPI.Status.GenericError;var b=a.dom.magnifierTemplateDiv.cloneNode(!0);b.id="magnifierDiv"+a.uniqueID;a.dom.magnifierDiv=a.dom.viewerArea.appendChild(b);
a.dom.magnifierDiv.style.display="block";a.dom.magnifierDiv.style.zIndex=a.dom.zindexManager.getMagnifierZindex();a.SetMouseMode(5);this.updateContext();b=a.dom.getViewerContainer();b.addEventListener("mousemove",this.magnify);a.dom.magnifierDiv.addEventListener("mousemove",this.magnify,!1);b.addEventListener("mouseout",this.resetPosition);window.addEventListener("resize",this.changeMagnifierPageContext);a.Internal.Magnifier.isMagnifying=!0;return DocuViewareAPI.Status.OK},disable:function(){var b=
a.dom.getViewerContainer();b.removeEventListener("mousemove",this.magnify);b.removeEventListener("mouseout",this.resetPosition);window.removeEventListener("resize",this.changeMagnifierPageContext);a.dom.magnifierDiv.remove();a.Internal.Magnifier.isMagnifying=!1;return DocuViewareAPI.Status.OK},toggle:function(){this.isMagnifying?this.disable():this.enable()},updateContext:function(){var b=a.GetCurrentPage(),d=a.Internal.Pages.getRenderingState(b),e=a.Internal.Magnifier.zoomContext*d.zoom,g=a.cache.getPageObject(b).bitmap,
k=a.getConfig(),p=a.dom.magnifierDiv.getBoundingClientRect();a.Internal.Magnifier.currentMagnifyingContext={pageNo:b,pageState:d,zoom:e,pixelRatio:k.devicePixelRatio,img:g,magnifierClientRect:p,magnifyZoom:a.Internal.Magnifier.zoomContext};k=d.pageWidth*e;d=d.pageHeight*e;a.dom.magnifierDiv.style.backgroundImage="url('"+g.src+"')";a.dom.magnifierDiv.style.backgroundSize=k+"px "+d+"px";switch(a.Internal.Pages.getRenderRotation(b)){case DocuViewareAPI.RotateFlipType.Rotate90FlipNone:a.dom.magnifierDiv.style.transform=
"rotate(90deg)";a.dom.magnifierDiv.style.backgroundSize=d+"px "+k+"px";break;case DocuViewareAPI.RotateFlipType.Rotate180FlipNone:a.dom.magnifierDiv.style.transform="rotate(180deg)";break;case DocuViewareAPI.RotateFlipType.Rotate270FlipNone:a.dom.magnifierDiv.style.transform="rotate(270deg)",a.dom.magnifierDiv.style.backgroundSize=d+"px "+k+"px"}},magnify:function(b){var d=a.dom.viewerArea.getBoundingClientRect();if(d.top>b.clientY||d.left>b.clientX)a.Internal.Magnifier.resetPosition();else{a.dom.magnifierDiv.style.display=
"block";a.Internal.Magnifier.hasContextChanged()&&a.Internal.Magnifier.updateContext();"mousemove"===b.type&&(a.Internal.Magnifier.currentMagnifyingContext.cursorX=b.clientX,a.Internal.Magnifier.currentMagnifyingContext.cursorY=b.clientY);var e=a.Internal.Magnifier.currentMagnifyingContextPostAjaxRequestForLocalService,g=a.Internal.Coordinates.clienttodocument(a.GetCurrentPage(),b.clientX,b.clientY,0,!1);a.dom.magnifierDiv.style.backgroundPosition="-"+(g.x*e.magnifyZoom-e.magnifierClientRect.width/
2)+"px -"+(g.y*e.magnifyZoom-e.magnifierClientRect.height/2)+"px";a.dom.magnifierDiv.style.left=b.clientX-d.left-e.magnifierClientRect.width/2+"px";a.dom.magnifierDiv.style.top=b.clientY-d.top-e.magnifierClientRect.height/2+"px"}}},Destinations:{followLink:function(b){if(15<b.length&&"fileattachment:"===b.substring(0,15)){var d=b.split(":")[1],e={fileName:b.split(":")[2],cancel:!1,id:d};if(a.callbacks.onAttachmentClick)a.callbacks.onAttachmentClick(e);e.cancel||isNaN(d)||isNaN(parseInt(d,10))||a.Save(b,
".","*",!1,!1)}else if(DocuViewareUtilities.isValidURL(b)){e={uri:b,cancel:!1};if(a.callbacks.onURINavigation)a.callbacks.onURINavigation(e);!0!==e.cancel&&window.open(b,"_blank")}else if(5<b.length&&"page:"===b.substring(0,5))b=b.split(":")[1],isNaN(b)||isNaN(parseInt(b,10))||b<=a.serverCtx.pageCount&&a.SelectPage(b);else if(a.callbacks.onUnknownLinkNavigation)a.callbacks.onUnknownLinkNavigation({link:b})}}},getConfig:function(){var b=a.dom.getViewerContainer();return{devicePixelRatio:DocuViewareUtilities.getDevicePixelRatio(),
viewerWidth:null!=b?b.offsetWidth:0,viewerHeight:null!=b?b.offsetHeight:0,scrollBarWidth:this.dom.sbWidth,hasWebPSupport:this.Internal.Capabilities.hasWebPSupport(),hasTiffSupport:this.Internal.Capabilities.hasTiffSupport()}},hasPendingResize:function(){return null!=a.NewViewerSizeTimeout},checkDocumentLoaded:function(b){return this.serverCtx&&0==this.serverCtx.documentLoaded?(b||this.DisplayError(this.Localize("error__no_document_loaded")),!1):!0},hasPendingAction:function(b,d,e,g){if(b&&!this.checkDocumentLoaded(e))return!0;
if(1==this.Internal.Files.uploading)return e||this.DisplayError(this.Localize("label__uploading_document")),!0;if(1==this.ajax.downloading)return e||this.DisplayError(this.Localize("label__downloading_document")),!0;if(0<this.ajax.pendingRequests)return g&&this.DisplayError(this.Localize("transferring_data")),!0;if(this.waitForInit)return e||this.DisplayError(this.Localize("label__initializing")),!0;if(!d&&null!=a.cache.Annots)for(b=0;b<a.cache.Annots.length;b++)if(a.cache.Annots[b].hasPendingUpdate())return e||
this.DisplayError(this.Localize("transferring_annotation_data")),!0;return!1},Localize:function(b){var d=JSON.parse(this.localization);if(d&&0<d.length)for(var e=0;e<d.length;e++)if(b==d[e].id)return d[e].message;return b},DisplayError:function(b){this.ShowMessage({text:b,backgroundColor:a.dom.UIconfig.headerColor,icon:16,delay:5E3})},ShowMessage:function(b){var d=dvJQuery(this.dom.infoDiv),e=dvJQuery(this.dom.infoMessage);e.css("font-size",b.fontSize?b.fontSize:"130%");e.css("font-weight",b.fontWeight?
b.fontWeight:"normal");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?(d.css("background-color",b.backgroundColor?b.backgroundColor:a.dom.UIconfig.headerColor),e.css("color",b.fontColor?b.fontColor:"#FFFFFF")):(d.css("background-color",a.dom.UIconfig.notificationBackgroundColor),e.css("color",a.dom.UIconfig.notificationTextColor));e.css("text-decoration",b.textDecoration?b.textDecoration:"none");e.css("text-transform",b.textTransform?b.textTransform:"none");e.css("height",b.messageBoxHeight?
b.messageBoxHeight:a.dom.UIconfig.defaultMessageBoxHeight);b.isHtmlText?e.html(b.text):e.text(b.text);d.find(".message_icon").hide();switch(b.icon){case 0:b.customIcon&&d.find(".message_icon_custom").html(b.customIcon).css("display","inline-block");break;case 16:d.find(".message_icon_error").css("display","inline-block");break;case 32:d.find(".message_icon_question").css("display","inline-block");break;case 48:d.find(".message_icon_warning").css("display","inline-block");break;case 64:d.find(".message_icon_info").css("display",
"inline-block");break;case 128:d.find(".message_icon_ok").css("display","inline-block")}d.finish().slideDown(b.slideDown?b.slideDown:300).delay(b.delay?b.delay:2500).slideUp(b.slideUp?b.slideUp:300)},DisplayPendingActionNotification:function(){a.ajax.pendingRequestsWithIndicator++;1==a.ajax.pendingRequestsWithIndicator&&a.dom.UIconfig.showLoadingSpinner&&dvJQuery(this.dom.pendingActionDiv).show()},HidePendingActionNotification:function(){a.ajax.pendingRequestsWithIndicator--;0>=a.ajax.pendingRequestsWithIndicator&&
(a.dom.UIconfig.showLoadingSpinner&&dvJQuery(this.dom.pendingActionDiv).hide(),a.ajax.pendingRequestsWithIndicator=0)},DisplayDialogForm:function(b,d,e,g,k,p){b.dvDialog({dialogClass:"dv-main",appendTo:dvJQuery(a.dom.mainArea),minWidth:510+a.dom.sbWidth,maxHeight:dvJQuery(a.dom.controlArea).height(),position:{my:"center",at:"center",of:dvJQuery(a.dom.mainArea)},title:d,resizable:!1,draggable:!0,create:function(n,w){null!=e&&"function"==typeof e&&e();dvJQuery(this).css("overflow-x","hidden");dvJQuery(this).css("overflow-y",
"auto");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?(dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor),dvJQuery(this).parent().find(".dvUi-dialog-spacer").css("background-color",a.dom.UIconfig.miscBorderColor),dvJQuery(this).parent().css("border","1px solid "+a.dom.UIconfig.strokeColor),dvJQuery(this).parent().find('input[type="text"]:not(".dv-color")').css("border-color",a.dom.UIconfig.strokeColor)):(dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",
a.dom.UIconfig.dialogHeaderBackgroundColor),dvJQuery(this).parent().css("border","1px solid black"),dvJQuery(this).parent().find('input[type="text"]:not(".dv-color")').css("border-color",a.dom.UIconfig.miscBorderColor));dvJQuery(this).parent().css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().css("background-color",a.dom.UIconfig.panelBackColor);dvJQuery(this).parent().find('input[type="text"]').css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find("select").css("border-color",
a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find("select").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-content").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-content a").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-header a").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dv-annotationOptionText:not(:last-child)").css("border-right","1px solid "+a.dom.UIconfig.miscBorderColor)},
open:function(n,w){var C=this;"legacy"!==a.dom.mainArea.attributes["data-theme-layout"].value&&(dvJQuery(this).parent().find("input").css("background-color",a.dom.UIconfig.inputBackgroundColor),dvJQuery(this).parent().find("input, .dvUi-button-text-only").css("color",a.dom.UIconfig.textColor),"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor):dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",
a.dom.UIconfig.dialogHeaderBackgroundColor),dvJQuery(this).parent().find(".dvUi-dialog-spacer").css("background-color",a.dom.UIconfig.miscBorderColor),dvJQuery(this).parent().find("fieldset").css("border-color",a.dom.UIconfig.miscBorderColor));var K=-1;dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button").each(function(){K++});if(-1<K)for(n=0;n<=K;n++)n===K?dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+n+")").focus():dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+
n+")").blur();null!=g&&"function"==typeof g&&g();dvJQuery(this).parent().find(".dv-jquerySelect").each(function(F){dvJQuery(this).dvSelectmenu({change:function(){dvJQuery(this).trigger("change")}});dvJQuery(this).hasClass("dv-jquerySelectOverflow")&&dvJQuery(this).dvSelectmenu("menuWidget").addClass("overflow")});dvJQuery(this).parent().find(".dv-jqueryRadio").each(function(F){dvJQuery(this).dvButtonset({setActive:function(){dvJQuery(C).parent().find(".dvUi-button").css("border","1px solid transparent");
dvJQuery(C).parent().find(".dvUi-state-active").css("border","1px solid "+a.dom.UIconfig.miscBorderColor)}})});dvJQuery(this).parent().find(".dvUi-selectmenu-button").css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".dvUi-selectmenu-menu .dvUi-menu").css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".dvUi-selectmenu-menu").css("background-color",a.dom.UIconfig.inputBackgroundColor);dvJQuery(this).parent().find(".dvUi-selectmenu-button").click(function(){dvJQuery(".dvUi-selectmenu-menu .dvUi-menu-item").hover(function(){dvJQuery(this).css("background-color",
a.dom.UIconfig.miscBorderColor)},function(){dvJQuery(this).css("background-color","")})});dvJQuery(this).parent().find(".dv-color").each(function(){dvJQuery(this).minicolors({control:"hue",defaultValue:dvJQuery(this).val(),inline:!1,letterCase:"uppercase",opacity:!0,position:"bottom left"})});"legacy"!==a.dom.mainArea.attributes["data-theme-layout"].value?(dvJQuery(this).parent().find(".btn-valid").css("background-color",a.dom.UIconfig.primaryButtonColor),dvJQuery(this).parent().find(".btn-valid").css("color",
a.dom.UIconfig.primaryButtonTextColor),dvJQuery(this).parent().find(".btn-valid").hover(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.primaryButtonHoverColor);dvJQuery(this).css("color",a.dom.UIconfig.primaryButtonTextHoverColor)},function(){dvJQuery(this).css("background-color",a.dom.UIconfig.primaryButtonColor);dvJQuery(this).css("color",a.dom.UIconfig.primaryButtonTextColor)})):(dvJQuery(this).parent().find(".btn-valid").css("background-color",a.dom.UIconfig.primaryButtonColor),
dvJQuery(this).parent().find(".btn-valid .dvUi-button-text").css("color",a.dom.UIconfig.primaryButtonTextColor),dvJQuery(this).parent().find(".btn-valid").hover(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.primaryButtonHoverColor)},function(){dvJQuery(this).css("background-color",a.dom.UIconfig.primaryButtonColor)}));dvJQuery(a.dom.modalOverlayArea).show()},close:function(n,w){null!=k&&"function"==typeof k&&k();dvJQuery(a.dom.modalOverlayArea).hide();dvJQuery(this).parent().find(".dv-jquerySelect").each(function(){dvJQuery(this).dvSelectmenu("destroy")});
dvJQuery(this).parent().find(".dv-jqueryRadio").each(function(){dvJQuery(this).dvButtonset("destroy")});dvJQuery(this).parent().find(".dv-color").each(function(){dvJQuery(this).minicolors("destroy")})},buttons:p});b.dvDialog("option","position",{my:"center",at:"center",of:dvJQuery(a.dom.mainArea)})},l10n:null,cache:{Annots:null,AnnotsComments:null,AnnotsRedactionReferences:null,Pages:null,canvas:null,pageCanvasSize:null,pageCanvasZoom:0,viewRotation:0,addedSelectedTextContextMenuItem:[],emptyCanvas:function(){a.dom.SelectedTextRegions.clear();
if(a.dom.viewerArea.hasChildNodes())for(var b=a.dom.viewerArea.children.length-1;0<=b;b--){var d=a.dom.viewerArea.children[b];d!=a.dom.panDiv&&a.dom.viewerArea.removeChild(d)}if(null!=this.Pages)for(b=0;b<this.Pages.length;b++)this.Pages[b].drawn=!1,this.Pages[b].drawnPreview=!1},getPageCanvas:function(b){if(null!=this.canvas)for(var d=0;d<this.canvas.length;d++)if(this.canvas[d].pageNo==b)return this.canvas[d];return null},getPageObject:function(b){if(null!=this.Pages)for(var d=0;d<this.Pages.length;d++)if(this.Pages[d].pageNo==
b)return this.Pages[d];return null},clearCachedPages:function(){this.Pages=null;a.ajax.pendingPageViewRequests=null;"function"==typeof CollectGarbage&&CollectGarbage()},clearCachedBitmap:function(){if(null!=this.Pages)for(var b=0;b<this.Pages.length;b++)this.Pages[b].bitmap=null,this.Pages[b].drawn=!1,this.Pages[b].drawnPreview=!1;a.ajax.pendingPageViewRequests=null;"function"==typeof CollectGarbage&&CollectGarbage()},clearBitmap:function(b){if(null!==this.Pages)for(var d=0;d<this.Pages.length;d++)if(this.Pages[d].pageNo===
b){this.Pages[d].bitmap=null;break}},clearPage:function(b){if(null!==this.Pages)for(var d=0;d<this.Pages.length;d++)if(this.Pages[d].pageNo===b){this.Pages[d].bitmap=null;this.Pages[d].drawn=!1;this.Pages[d].drawnPreview=!1;break}d=this.getPageCanvas(b);if(null!=d)for(var e=0;e<d.canvas.length;e++){var g=d.canvas[e].tile;null!=g&&(g.style.backgroundColor="white",g.getContext("2d").clearRect(0,0,g.width,g.height))}a.Internal.Annotations.removePageAnnots(b);a.Internal.FormFields.removePageFormFields(b);
a.dom.thumbnailArea&&(b=a.Internal.Thumbnails.getThumbnailFromPageNo(b),null!=b&&(b.attr("data-loaded","false"),b.attr("data-loading","false")))},cachePage:function(b){null==this.Pages&&(this.Pages=[]);this.Pages.push(b)},cachePageBitmap:function(b,d,e,g,k){var p=new Image;p.src="data:"+d+";base64,"+e;if(null!=this.Pages)for(d=0;d<this.Pages.length;d++)if(this.Pages[d].pageNo==b){this.Pages[d].drawn=!1;this.Pages[d].drawnPreview=!1;this.attachImageToPage(this.Pages[d],p,g,k);return}b={pageNo:b,drawn:!1,
drawnPreview:!1};this.attachImageToPage(b,p,g,k);this.cachePage(b)},attachImageToPage:function(b,d,e,g){b.bitmap=d;b.scale=e;b.hasTransparency=g}},ajax:{sessionID:M,requestNo:0,pageViewRequestNo:0,thumbnailRequestNo:0,transferID:0,downloading:!1,pendingRequests:0,pendingPageViewRequests:null,pendingRequestsWithIndicator:0,latestSelectedPage:0,contextID:u,customHeaders:eval(ka),AjaxRequestTimeout:ma,hasPendingPageViewRequests:function(){return null!=this.pendingPageViewRequests&&0<this.pendingPageViewRequests.length},
SetNewServerCtx:function(b,d,e,g){var k=a.GetCurrentPage(),p=a.GetCurrentZoom(),n=a.ajax.contextID,w=a.serverCtx.documentLoaded,C=a.IsZoomSynchronized();null===b?(a.resetServerCtx(),a.ajax.contextID=""):(a.serverCtx=b,a.ajax.contextID=b.contextID);var K=null!==b&&b.documentLoaded&&n!==a.ajax.contextID||null!==b&&b.reloadDocument,F=null!=b&&b.documentLoaded;p=p!=a.GetCurrentZoom();n=w&&a.ajax.contextID!==n;w=a.dom.selectedSnapin;var Y=!1;if(null===b||K||n||a.serverCtx.reloadDocument)Y=!0;Y&&(a.cache.emptyCanvas(),
a.Internal.Thumbnails.removeAllThumbnails(),a.dom.bookmarksArea&&dvJQuery(a.dom.bookmarksTree).empty(),a.Internal.Text.clearSelection(),a.ClearSearch(),a.Internal.FormFields.removeAll(),a.Internal.Annotations.removeAll(),a.refreshCommentsPanel(),a.cache.Pages=null);if(n&&(K||(null!=a.dom.pageNavBox&&(a.dom.pageNavBox.style.width="36px"),null!==a.dom.pageNavBoxMobile&&(a.dom.pageNavBoxMobile.style.width="36px"),a.dom.UIconfig.collapseSnapinOnDocumentClosed&&a.SetSnapinsPanelVisibility(!1)),a.callbacks.onDocumentClosed))a.callbacks.onDocumentClosed();
p&&!1===C&&(a.serverCtx.vScrollbarVal=a.Internal.Coordinates.getViewerScrollTop(),a.serverCtx.hScrollbarVal=a.Internal.Coordinates.getViewerScrollLeft());K&&(a.cache.pageCanvasSize=null,a.dom.viewerContextMenuRemoveTextButton&&a.serverCtx.hasTextRemovalSupport?dvJQuery(a.dom.viewerContextMenuRemoveTextButton).show():a.dom.viewerContextMenuRemoveTextButton&&dvJQuery(a.dom.viewerContextMenuRemoveTextButton).hide(),a.dom.viewerContextMenuRedactButton&&a.serverCtx.hasRedactionSupport?dvJQuery(a.dom.viewerContextMenuRedactButton).show():
a.dom.viewerContextMenuRedactButton&&dvJQuery(a.dom.viewerContextMenuRedactButton).hide());a.UpdateUI(K,e,null!==b,n,!1,!1,g);null!==b&&b.hasUserPassword&&b.newDocument&&a.Internal.FilePassword.createAndShowDialog(function(aa){""==aa||null==aa?a.Internal.FilePassword.showError(a.Localize("dialog_password_missing")):a.Internal.FilePassword.setPassword(aa,!0)},function(){a.Internal.FilePassword.destroyDialog()});K&&a.IsSnapinsPanelVisible()&&(null===a.dom.selectedSnapin||a.SelectSnapIn(w,!0)!==DocuViewareAPI.Status.OK)&&
a.SelectFirstAvailableSnapin(null);b=k!==a.GetCurrentPage();if(K||b)a.Internal.Annotations.unselectAll(),a.dom.pageCountBox&&a.dom.pageNavBox&&(a.dom.pageCountBox.innerHTML=a.GetPageCount(),a.dom.pageNavBox.value=a.GetCurrentPage()),a.dom.pageCountBoxMobile&&a.dom.pageNavBoxMobile&&(a.dom.pageCountBoxMobile.innerHTML=a.GetPageCount(),a.dom.pageNavBoxMobile.value=a.GetCurrentPage()),a.Internal.Redaction.disableAddRedactionMarksMode();if(!d){if(K&&(a.dom.adjustPageNavBoxWidthForMaxPages(a.GetPageCount()),
a.callbacks.onNewDocumentLoaded))a.callbacks.onNewDocumentLoaded();if(b&&a.callbacks.onPageChanged)a.callbacks.onPageChanged();if(p&&(a.dom.zoomButtonValue&&a.dom.updateZoomValue(a.GetCurrentZoom()),a.callbacks.onZoomChanged))a.callbacks.onZoomChanged()}null!=a.dom.previousPageButton&&(a.dom.previousPageButton.disabled=1>=a.GetCurrentPage()||!F);null!=a.dom.previousPageButtonMobile&&(a.dom.previousPageButtonMobile.disabled=1>=a.GetCurrentPage()||!F);null!=a.dom.nextPageButton&&(a.dom.nextPageButton.disabled=
a.GetCurrentPage()>=a.GetPageCount()||!F);null!=a.dom.nextPageButtonMobile&&(a.dom.nextPageButtonMobile.disabled=a.GetCurrentPage()>=a.GetPageCount()||!F);null!=a.dom.firstPageButtonMobile&&(a.dom.firstPageButtonMobile.disabled=1>=a.GetCurrentPage()||!F);null!=a.dom.lastPageButtonMobile&&(a.dom.lastPageButtonMobile.disabled=a.GetCurrentPage()>=a.GetPageCount()||!F);null!=a.dom.rotateLeftButton&&(a.dom.rotateLeftButton.disable=!F);null!=a.dom.rotateRightButton&&(a.dom.rotateRightButton.disable=!F);
null!=a.dom.rotateLeftButtonMobile&&(a.dom.rotateLeftButtonMobile.disable=!F);null!=a.dom.rotateRightButtonMobile&&(a.dom.rotateRightButtonMobile.disable=!F);null!=a.dom.zoomInButton&&(a.GetCurrentZoom()>=a.serverCtx.zoomMax||!F?a.dom.zoomInButton.disabled=!0:a.dom.zoomInButton.disabled=!1);null!=a.dom.zoomInButtonMobile&&(a.GetCurrentZoom()>=a.serverCtx.zoomMax||!F?a.dom.zoomInButtonMobile.disabled=!0:a.dom.zoomInButtonMobile.disabled=!1);null!=a.dom.zoomOutButton&&(a.GetCurrentZoom()<=a.serverCtx.zoomMin||
!F?a.dom.zoomOutButton.disabled=!0:a.dom.zoomOutButton.disabled=!1);null!=a.dom.zoomOutButtonMobile&&(a.GetCurrentZoom()<=a.serverCtx.zoomMin||!F?a.dom.zoomOutButtonMobile.disabled=!0:a.dom.zoomOutButtonMobile.disabled=!1)},PostCustomServerAction:function(b,d,e,g,k){if(a.waitForInit)return setTimeout(function(){a.ajax.PostCustomServerAction(b,d,e,g,k)},100),DocuViewareAPI.Status.OK;if(a.hasPendingAction())return DocuViewareAPI.Status.GenericError;var p={data:{actionName:d,args:e,clientConfiguration:a.getConfig()},
success:function(w){"string"===typeof w&&(w=eval("("+w+")"));a.ajax.HandleServerContextResponse(w,!1,!0);g&&g(w.result)},error:function(){k&&k()}},n={};n.customactionname=d;return a.ajax.PostBaseRequest("customaction",p,!b,!0,n)},PostAjaxRequestForLocalService:function(b){b.cache=!1;b.processData=!1;b.timeout||(b.timeout=a.ajax.AjaxRequestTimeout);b.crossDomain=!0;b.type="POST";b.contentType="application/json";b.dataType="json";dvJQuery.ajax(b)},PostAjaxRequestForDocuViewareAction:function(b,d){null===
b.error&&alert("Please specify an error object!");b.cache=!1;b.processData=!1;this.customHeaders&&"null"!==this.customHeaders&&"undefined"!==this.customHeaders&&(ka=this.customHeaders,dvJQuery.each(this.customHeaders,function(g,k){k&&""!=k||delete ka[g]}),dvJQuery.isEmptyObject(ka)||(b.headers=ka));null!=d&&(null==b.headers&&(b.headers={}),dvJQuery.extend(b.headers,d));b.timeout||(b.timeout=a.ajax.AjaxRequestTimeout);b.crossDomain=!0;b.type="POST";b.dataType="json";var e=b.success;b.success=function(g){null!=
e&&e(g)};dvJQuery.ajax(b)},PostBaseRequest:function(b,d,e,g,k){if(!g&&a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;null!=d.beforeStart&&d.beforeStart();2==a.events.mouseMode&&a.events.isDrawingPath&&a.ExitAnnotationDrawingMode();this.pendingRequests+=1;this.requestNo+=1;null==d.data&&(d.data={});d.data.vScrollbarVal=a.Internal.Coordinates.getViewerScrollTop();d.data.vScrollbarMax=a.Internal.Coordinates.getViewerScrollTopMax();d.data.hScrollbarVal=a.Internal.Coordinates.getViewerScrollLeft();
d.data.hScrollbarMax=a.Internal.Coordinates.getViewerScrollLeftMax();d.data.sessionID=this.sessionID;d.data.contextID=this.contextID;d.data.requestNo=this.requestNo;a.DisplayPendingActionNotification();null==k&&(k={});k.docuviewarerequest=b;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!e,data:JSON.stringify({requestName:b,requestData:d.data}),contentType:"application/json",success:function(p){--a.ajax.pendingRequests;a.HidePendingActionNotification();
d.success&&d.success(p)},error:function(p){a.ajax.HandleError(p);--a.ajax.pendingRequests;null!=d.error&&d.error(p)},complete:function(p){null!=d.complete&&d.complete(p)}},k);return DocuViewareAPI.Status.OK},HandleError:function(b){if(b){if(null!=b.responseType&&"DocuVieware"==b.responseType){var d="";null!=b.action&&""!=b.action&&(d+=b.action+": ");d+=b.message;console.log("DocuVieware: "+d);b.throwError&&a.DisplayError(d)}else null!=b.readyState&&null!=b.statusText&&(d="DocuVieware XMLHttpRequest error.\nStatus: "+
(b.status+"."),d+="\nReadyState: ",d=0==b.readyState?d+"uninitialized.":1==b.readyState?d+"loading.":2==b.readyState?d+"loaded.":3==b.readyState?d+"interactive.":4==b.readyState?d+"completed.":d+(b.readyState+"."),d+="\nDescription: "+b.statusText+".",null!=b.responseText&&""!=b.responseText&&(d+="\nResponse text: "+b.responseText),"timeout"!=b.statusText&&null!=b.status&&"0"==b.status&&null!=b.readyState&&0==b.readyState?a.debug&&console.log(d):(console.log(d),a.debug&&alert(d))),dvJQuery(a.dom.mainSpinner).hide(),
a.HidePendingActionNotification();b.resetClientUI&&a.ClearUI();if(1==b.reloadServerContext)a.events.onLoad(!0)}},HandleServerContextResponse:function(b,d,e,g){if(b&&b.status==DocuViewareAPI.Status.OK){var k=a.GetCurrentPage();b.message&&a.ShowMessage(b.message);if(b.contextID<a.ajax.contextID)return;a.ajax.SetNewServerCtx(b,g,d);!e||k==a.GetCurrentPage()&&a.GetCurrentPage()==a.GetLastPageNoRequest()||(a.ajax.latestSelectedPage=a.GetCurrentPage(),a.EnsureCurrentPageVisibility());return!0}a.ajax.HandleError(b);
return!1},SetCustomHeaders:function(b,d){function e(k){a.ajax.customHeaders=d?Object.assign({},a.ajax.customHeaders,k):k}if(Array.isArray(b)){var g={};try{g=Object.fromEntries(b)}catch(k){return DocuViewareAPI.Status.GenericError}e(g)}else if("string"===typeof b){g={};try{g=JSON.parse(b)}catch(k){return DocuViewareAPI.Status.GenericError}e(g)}else if("object"===typeof b)e(b);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK}},callbacks:{onFileOpenSuccess:null,onFileOpenError:null,
onURIOpenSuccess:null,onURIOpenError:null,onPageChanged:null,onRotationChanged:null,onAnnotationSelectedStateChanged:null,onAnnotationAdded:null,onAnnotationEdited:null,onAnnotationDeleted:null,onAnnotationMouseEnter:null,onAnnotationMouseLeave:null,onAnnotationMoved:null,onCommentAdded:null,onCommentEdited:null,onCommentDeleted:null,onFormFieldChanged:null,onZoomChanged:null,onNewDocumentLoaded:null,onDocumentClosed:null,onDocumentPrinted:null,onDocumentSaved:null,onDocumentSigned:null,onTwainAcquisitionDialogAcquireButtonClick:null,
onTwainAcquisitionDialogCancelButtonClick:null,onThumbnailsOrderChanged:null,onTextSelected:null,onTextUnselected:null,onTextAnnotated:null,onAreaSelected:null,onFullscreenModeChanged:null,onThumbnailsSnapInSelected:null,onBookmarksSnapInSelected:null,onSearchSnapInSelected:null,onAnnotationsSnapInSelected:null,onCommentsSnapInSelected:null,onSnapInPanelResized:null,onSnapInPanelToggle:null,onRedactionMarksApplied:null,onViewerScroll:null,onURINavigation:null,onUnknownLinkNavigation:null,onAttachmentClick:null,
onPageDeleted:null},serverCtx:{},dom:{getViewerContainer:function(){return document.getElementById("viewerContainer"+a.uniqueID)},zindexManager:{getFirstAnnotZindex:function(){return 65535},getFirstFormFieldZindex:function(){return 65535},getSelectionAreaZindex:function(){return 16777271},getFreehandDrawingCanvasZindex:function(){return 16777271},getMagnifierZindex:function(){return 16777271}},visibleToolbar:DocuViewareAPI.Toolbar.None,enableAnnotEditionOnDblClick:!0,selectedAnnotation:null,selectedSnapin:null,
isLoadFromUriDialogVisible:!1,sbWidth:DocuViewareUtilities.getScrollbarWidth(),toolbarLogo:document.getElementById("docuViewareLogo"+t),mobileToolbarArea:document.getElementById("mobileToolbar"+t),mobileToolbarTop:document.getElementById("mobileToolbarTop"+t),mobileToolbarContainer:document.getElementById("mobileToolbarContainer"+t),subMenuZoomModeMobile:document.getElementById("subMenuZoomModeMobile"+t),subMenuMouseModeMobile:document.getElementById("subMenuMouseModeMobile"+t),pageNavBoxMobile:document.getElementById("pageNavBoxMobile"+
t),pageCountBoxMobile:document.getElementById("pageCountBoxMobile"+t),openFromFileButtonMobile:document.getElementById("openFromFileButtonMobile"+t),twainAcquisitionButtonMobile:document.getElementById("twainAcquisitionButtonMobile"+t),fullscreenButtonMobile:document.getElementById("fullscreenButtonMobile"+t),singlePageModeButtonMobile:document.getElementById("singlePageModeButtonMobile"+t),panMouseModeButtonMobile:document.getElementById("panMouseModeButtonMobile"+t),selectMouseModeButtonMobile:document.getElementById("selectMouseModeButtonMobile"+
t),zoomAreaMouseModeButtonMobile:document.getElementById("zoomAreaMouseModeButtonMobile"+t),openfile:document.getElementById("openfile"+t),twainAcquisitionButton:document.getElementById("twainAcquisitionButton"+t),openFromFileButton:document.getElementById("openFromFileButton"+t),rotateLeftButton:document.getElementById("rotateLeftButton"+t),rotateRightButton:document.getElementById("rotateRightButton"+t),rotateLeftButtonMobile:document.getElementById("rotateLeftButtonMobile"+t),rotateRightButtonMobile:document.getElementById("rotateRightButtonMobile"+
t),zoomInButton:document.getElementById("zoomInButton"+t),zoomInButtonMobile:document.getElementById("zoomInButtonMobile"+t),zoomOutButton:document.getElementById("zoomOutButton"+t),zoomOutButtonMobile:document.getElementById("zoomOutButtonMobile"+t),zoomModeButton:document.getElementById("zoomModeButton"+t),zoomButtonValue:document.getElementById("zoomButtonValue"+t),mouseModeButton:document.getElementById("mouseModeButton"+t),subMenuZoomMode:document.getElementById("subMenuZoomMode"+t),subMenuMouseMode:document.getElementById("subMenuMouseMode"+
t),pendingActionDiv:document.getElementById("pendingActionDiv"+t),openFromUriArea:document.getElementById("openuri"+t),openFromUriButton:document.getElementById("openFromUriButton"+t),singlePageModeButton:document.getElementById("singlePageModeButton"+t),fullscreenButton:document.getElementById("fullscreenButton"+t),magnifierButton:document.getElementById("magnifierButton"+t),magnifierTemplateDiv:document.getElementById("magnifierTemplateDiv"+t),panMouseModeButton:document.getElementById("panMouseModeButton"+
t),selectMouseModeButton:document.getElementById("selectMouseModeButton"+t),zoomAreaMouseModeButton:document.getElementById("zoomAreaMouseModeButton"+t),infoDiv:document.getElementById("infoDiv"+t),infoMessage:document.getElementById("infoMessage"+t),addressBar:document.getElementById("openuriinput"+t),mainArea:document.getElementById("main"+t),containerArea:document.getElementById(t),mainSpinner:document.getElementById("mainSpinner"+t),mainSpinnerContent:document.getElementById("mainSpinnerContent"+
t),leftSideArea:document.getElementById("leftside"+t),leftSideResizeBar:document.getElementById("leftSideResizeBar"+t),snapinButtonStrip:document.getElementById("snapinButtonStrip"+t),leftsideContainer:document.getElementById("leftsideContainer"+t),leftSideContainerPanelsArea:document.getElementById("leftsideContainerPanels"+t),snapinsHeader:document.getElementById("snapinsHeader"+t),snapinTabControl:document.getElementById("leftsidePanels"+t),snapinsHeaderLabel:document.getElementById("snapinsHeaderLabel"+
t),thumbnailArea:document.getElementById("thumbnailsPanel"+t),commentsArea:document.getElementById("commentsPanel"+t),commentsAuthorInput:document.getElementById("commentAuthorInput"+t),commentsSearchArea:document.getElementById("commentsContainer"+t),commentsSearchValueInput:document.getElementById("commentsSearchValueInput"+t),commentsSearchClearResultsButton:document.getElementById("commentsSearchClearResultsButton"+t),commentsSortBySelect:document.getElementById("commentsSortBySelect"+t),commentsSearchActionContainerOverlayDisable:document.getElementById("commentsSearchActionContainerOverlayDisable"+
t),commentsSortBySelectContainer:document.getElementById("commentsSortBySelectContainer"+t),commentsContainer:document.getElementById("commentsContainer"+t),commentAnswerBox:document.getElementById("commentAnswerBox"+t),commentContentBox:document.getElementById("commentContentBox"+t),commentStatusBox:document.getElementById("commentStatusBox"+t),commentMessageInput:document.getElementById("commentMessageInput"+t),commentAnswerInput:document.getElementById("commentAnswerInput"+t),commentStatusSelect:document.getElementById("commentStatusSelect"+
t),commentsCollapseExpandAllButton:document.getElementById("commentsCollapseExpandAllButton"+t),bookmarksArea:document.getElementById("bookmarksPanel"+t),bookmarksTree:document.getElementById("bookmarksTree"+t),searchArea:document.getElementById("searchPanel"+t),searchPanelForm:document.getElementById("searchPanelForm"+t),searchValueInput:document.getElementById("searchValueInput"+t),searchCaseSensitiveInput:document.getElementById("searchCaseSensitiveInput"+t),searchAnyWordInput:document.getElementById("searchAnyWordInput"+
t),searchPageSelect:document.getElementsByName("searchPageSelect"+t),searchWholeWordInput:document.getElementById("searchWholeWordInput"+t),searchResultsContainer:document.getElementById("searchResultsContainer"+t),searchClearResultsButton:document.getElementById("searchClearResultsButton"+t),annotationsArea:document.getElementById("annotationsPanel"+t),searchResults:document.getElementById("searchResults"+t),viewerArea:document.getElementById("viewer"+t),panDiv:null,controlArea:document.getElementById("control"+
t),toolBarArea:document.getElementById("toolbar"+t),pageNavBox:document.getElementById("pageNavBox"+t),previousPageButton:document.getElementById("previousPageButton"+t),nextPageButton:document.getElementById("nextPageButton"+t),firstPageButtonMobile:document.getElementById("firstPageButtonMobile"+t),previousPageButtonMobile:document.getElementById("previousPageButtonMobile"+t),nextPageButtonMobile:document.getElementById("nextPageButtonMobile"+t),lastPageButtonMobile:document.getElementById("lastPageButtonMobile"+
t),pageCountBox:document.getElementById("pageCountBox"+t),dvpassword:document.getElementById("dvpassword"+t),dvpasswordInput:document.getElementById("dvpassword-input"+t),dvpasswordError:document.getElementById("dvpassword-error"+t),annotationsActionButtons:document.getElementById("annotationActionButtons"+t),annotationDialogFormTextInput:document.getElementById("annotation_text_input"+t),annotationDialogFormFontSizeInput:document.getElementById("annotation_font_size_input"+t),annotationDialogFormForeColorInput:document.getElementById("annotation_fore_color_input"+
t),annotationDialogFormFontNameSelect:document.querySelectorAll("select[name='annotation_font_name_select"+t+"']"),annotationDialogFormAlignmentSelect:document.querySelectorAll("input[name='annotation_alignment_select"+t+"']"),annotationDialogFormFontStyleSelect:document.querySelectorAll("select[name='annotation_font_style_select"+t+"']"),annotationDialogFormContainer:document.getElementById("annotationDialogFormContainer"+t),annotationDialogForm:document.getElementById("annotationDialogForm"+t),
annotationActionRemoveConfirm:document.getElementById("annotationActionRemoveConfirm"+t),pageActionRemoveConfirm:document.getElementById("pageActionRemoveConfirm"+t),annotationRemoveConfirmMessage:document.getElementById("annotationRemoveConfirmMessage"+t),pageActionRemoveConfirmMessage:document.getElementById("pageRemoveConfirmMessage"+t),redactionAddAreasButton:document.getElementById("redactionAddAreas"+t),redactionApplyButton:document.getElementById("redactionApply"+t),redactionsPanel:document.getElementById("redactionsPanel"+
t),redactionFill:document.getElementById("redaction_fill"+t),redactionAreaButtonsList:document.getElementById("redactionAreaButtonsList"+t),redactionAreaButtonModel:document.getElementById("redactionAreaButtonModel"+t),redactionAreaFoundText:document.getElementById("redactionAreaFoundText"+t),redactionRemoveAllButton:document.getElementById("redactionRemoveAllButton"+t),redactionRemoveAllSelectedButton:document.getElementById("redactionRemoveAllSelectedButton"+t),digisignAppearanceMenuToggle:document.getElementById("digisignAppearanceMenuToggle"+
t),digisignCertificateMenuToggle:document.getElementById("digisignCertificateMenuToggle"+t),digisignAppearanceMenuContent:document.getElementById("digisignAppearanceMenuContent"+t),digisignCertificateMenuContent:document.getElementById("digisignCertificateMenuContent"+t),digisignAppearanceButtonText:document.getElementById("digisignAppearanceButtonText"+t),digisignAppearanceButtonImg:document.getElementById("digisignAppearanceButtonImg"+t),digisignAppearanceButtonFreehand:document.getElementById("digisignAppearanceButtonFreehand"+
t),digisignAppearanceInputImg:document.getElementById("digisignAppearanceInputImg"+t),digisignAppearancePreview:document.getElementById("digisignAppearancePreview"+t),digisignAppearancePreviewText:document.getElementById("digisignAppearancePreviewText"+t),digisignAppearancePreviewDelete:document.getElementById("digisignAppearancePreviewDelete"+t),digisignCertificateButton:document.getElementById("digisignCertificateButton"+t),digisignCertificateIconValidate:document.getElementById("digisignCertificateIconValidate"+
t),digisignCertificateIconUnvalidate:document.getElementById("digisignCertificateIconUnvalidate"+t),digisignTimeStampButton:document.getElementById("digisignTimeStampButton"+t),digisignTimeStampIconValidate:document.getElementById("digisignTimeStampIconValidate"+t),digisignTimeStampIconUnvalidate:document.getElementById("digisignTimeStampIconUnvalidate"+t),digisignCertificateDialogForm:document.getElementById("digisignCertificateDialogForm"+t),digisignCertificateName:document.getElementById("digisignCertificateName"+
t),digisignInputCertificateFile:document.getElementById("digisign_input_certificate_file"+t),digisignTimeStampDialogForm:document.getElementById("digisignTimeStampDialogForm"+t),digisignCertificateNameContainer:document.getElementById("digisignCertificateNameContainer"+t),digisignCertificateInputContainer:document.getElementById("digisignCertificateInputContainer"+t),digisignCertificatePasswordContainer:document.getElementById("digisignCertificatePasswordContainer"+t),digisignButtonSubmit:document.getElementById("digisignSubmit"+
t),digisignCertificateButtonDelete:document.getElementById("digisignCertificateButtonDelete"+t),digisignTimeStampButtonDelete:document.getElementById("digisignTimeStampButtonDelete"+t),signatureTextDialogForm:document.getElementById("signatureTextDialogForm"+t),signatureDialogFormTextInput:document.getElementById("signature_text_input"+t),signatureDialogFormFontSizeInput:document.getElementById("signature_font_size_input"+t),signatureDialogFormForeColorInput:document.getElementById("signature_fore_color_input"+
t),signatureDialogFormFontNameSelect:document.querySelectorAll("select[name='signature_font_name_select"+t+"']"),signatureDialogFormAlignmentSelect:document.querySelectorAll("input[name='signature_alignment_select"+t+"']"),signatureDialogFormFontStyleSelect:document.querySelectorAll("select[name='signature_font_style_select"+t+"']"),signatureFreehandDialogForm:document.getElementById("signatureFreehandDialogForm"+t),signatureFreehandPad:document.getElementById("signatureFreehandPad"+t),digisignCertificatePasswordInput:document.getElementById("digisign_certificate_password"+
t),digisignCertificateCertificateLabel:document.getElementById("digisign_certificate_certificate_label"+t),digisignCertificatePasswordLabel:document.getElementById("digisign_certificate_password_label"+t),digisignTimestampServerInput:document.getElementById("digisign_timestamp_server"+t),digisignTimestampLoginInput:document.getElementById("digisign_timestamp_login"+t),digisignTimestampPasswordInput:document.getElementById("digisign_timestamp_password"+t),digisignTimestampServerLabel:document.getElementById("digisign_timestamp_server_label"+
t),signaturesContainer:document.getElementById("signaturesContainer"+t),drawingModeArea:document.getElementById("drawingMode"+t),modalOverlayArea:document.getElementById("modalOverlayDiv"+t),commentDialogModalOverlay:document.getElementById("commentDialogModalOverlayDiv"+t),saveDialog:document.getElementById("saveDialog"+t),twainAcquisitionDialog:document.getElementById("twainAcquisitionDialog"+t),twainAcquisitionDialogPanel:document.getElementById("twainAcquisitionDialogPanel"+t),twainAcquisitionDialogAcquireButton:document.getElementById("twainAcquisitionDialogAcquireButton"+
t),twainAcquisitionDestinationAppendDocBox:document.getElementById("twainAcquisitionDestinationAppendDocBox"+t),commentDialog:document.getElementById("commentDialog"+t),printDialog:document.getElementById("printDialog"+t),printPageRangeInput:document.getElementById("printPageRangeInput"+t),printProgressbarDiv:document.getElementById("printProgressbarDiv"+t),printDialogPrintButton:document.getElementById("printDialogPrintButton"+t),copyDialog:document.getElementById("copyDialog"+t),copyTextInput:document.getElementById("copy_text_input"+
t),viewerContextMenu:document.getElementById("viewerContextMenu"+t),viewerContextMenuRedactButton:document.getElementById("viewerContextMenuRedactButton"+t),viewerContextMenuRemoveTextButton:document.getElementById("viewerContextMenuRemoveTextButton"+t),faderArea:document.getElementById("label-fader__"+t),freehandAnnotButton:document.getElementById("annotButtonfreehand"+t),freehandhighlighterAnnotButton:document.getElementById("annotButtonfreehandhighlighter"+t),connectedLinesAnnotButton:document.getElementById("annotButtonconnectedline"+
t),polyRulerAnnotButton:document.getElementById("annotButtonpolyruler"+t),maxUploadSize:l,packetSize:q,UIconfig:eval("("+N+")"),singlePageView:null,thumbnailSelectBox:null,thumbnailSelectBoxOrigin:{left:0,top:0},checkLinkAt:function(b,d){if(0===a.Internal.Annotations.selected.length&&null===a.Internal.Annotations.hoveredAnnot){var e=a.Internal.Pages.getVisiblePageNumbers();if(null!=e)for(var g=0;g<e.length;g++){var k=e[g];if(a.Internal.Pages.isPageRendered(k)){var p=a.cache.getPageObject(k);if(null!=
p&&null!=p.links){k=a.Internal.Pages.getRenderingState(k);for(var n=0;n<p.links.length;n++){var w={left:96*p.links[n].x,top:96*p.links[n].y,width:96*p.links[n].width,height:96*p.links[n].height};a.Internal.Matrix.transformBBox(k.contentMatrix,0,w);w.left+=k.pageLeft;w.top+=k.pageTop;var C=a.dom.viewerArea.getBoundingClientRect(),K=b-C.left+a.Internal.Coordinates.getViewerScrollLeft();C=d-C.top+a.Internal.Coordinates.getViewerScrollTop();if(K>=w.left&&K<=w.left+w.width&&C>=w.top&&C<=w.top+w.height)return a.dom.rlink.style.height=
w.height+"px",a.dom.rlink.style.width=w.width+"px",a.dom.rlink.style.left=w.left+"px",a.dom.rlink.style.top=w.top+"px",a.events.overLink=p.links[n],!0}}}}}return!1},handleLinkRectVisibility:function(){a.dom.UIconfig.enableLinkRect&&a.events.overLink?"none"==a.dom.rlink.style.display&&a.IsZoomSynchronized()&&(a.dom.rlink.style.display="block",a.events.setCursor()):"block"==a.dom.rlink.style.display&&(a.dom.rlink.style.display="none",a.events.setCursor())},adjustPageNavBoxWidthForMaxPages:function(b){null!=
a.dom.pageNavBox&&(a.dom.pageNavBox.style.width=(12*b.toString().length).toString()+"px")},updateSelectedPageFader:function(b,d){if(0!=a.dom.viewerArea.offsetWidth&&0!=a.dom.viewerArea.offsetHeight){var e=dvJQuery(a.dom.faderArea),g=a.Localize("_label__fader_page");g=g.replace("#",d);g=g.replace("@",a.serverCtx.pageCount);e.find("div:first-child").text()!=g&&(e.find("div:first-child").text(g),d=100,g=g.length,15<g&&(d=100/15*g),e.width()!=d&&e.width(d),e.finish().animate({opacity:1},{duration:b,start:function(){e.css("z-index",
16777270)}}).delay(1E3).animate({opacity:0},{duration:800,complete:function(){e.css("z-index","")}}))}},ensureSelectedThumbnailVisibility:function(b){if(a.serverCtx.documentLoaded&&a.dom.thumbnailArea){var d=document.getElementById(a.FindSnapIn("thumbnails").snapInID),e=a.GetLastPageNoRequest();e=a.Internal.Thumbnails.getThumbnailFromPageNo(e);null!=e&&(e=d.scrollTop+Math.floor(e.position().top),e!=d.scrollTop?d.scrollTop=e:b&&a.showVisibleThumbnails())}},updateThumbsStyle:function(b,d){if(d){if(a.dom.thumbnailArea)for(a.Internal.Thumbnails.lastUpdatedPageThumbnail=
a.GetLastPageNoRequest(),d=0;d<a.dom.thumbnailArea.childElementCount;d++){var e=a.dom.thumbnailArea.children[d],g=dvJQuery(e);e=a.Internal.Thumbnails.getThumbnailPage(e);0!=e&&this.resetThumbStyle(g,e==a.GetLastPageNoRequest())}}else a.Internal.Thumbnails.lastUpdatedPageThumbnail!=a.GetLastPageNoRequest()&&(0<a.Internal.Thumbnails.lastUpdatedPageThumbnail&&a.dom.thumbnailArea&&this.updateThumbStyle(a.Internal.Thumbnails.lastUpdatedPageThumbnail),0<a.GetLastPageNoRequest()&&a.dom.thumbnailArea&&this.updateThumbStyle(a.GetLastPageNoRequest()),
a.Internal.Thumbnails.lastUpdatedPageThumbnail=a.GetLastPageNoRequest());b&&this.ensureSelectedThumbnailVisibility(!1)},resetThumbStyle:function(b,d){b.css({display:"inline-block","border-style":d?"dotted":"solid","border-width":"1px",margin:"8px 8px 8px 8px",padding:"5px 5px 0px 5px","text-align":"center",position:"relative","border-color":d?a.dom.UIconfig.strokeColor:"transparent","background-color":"transparent"})},updateThumbStyle:function(b){if(a.dom.thumbnailArea){var d=a.Internal.Thumbnails.getThumbnailFromPageNo(b);
if(null!=d){var e=d[0].getAttribute("mouse-over");e=null!=e&&"true"===e;var g=a.Internal.Thumbnails.isThumbnailSelected(b);b=b==a.GetLastPageNoRequest();g?d.addClass("active"):d.removeClass("active");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?d.css({"border-color":e?a.dom.UIconfig.activeSelectedColor:b?a.dom.UIconfig.strokeColor:"transparent","border-style":e?"solid":"dotted","background-color":g?a.dom.UIconfig.activeSelectedBackgroundColor:"transparent"}):d.css({"border-color":e?
a.dom.UIconfig.activeSelectedColor:b?a.dom.UIconfig.miscBorderColor:"transparent","border-style":"solid","background-color":g?a.dom.UIconfig.activeSelectedBackgroundColor:"transparent"})}}},updateResizeBarVisibility:function(){!a.isMobileOrTablet()&&a.IsSnapinsPanelVisible()?(dvJQuery(a.dom.leftSideArea).css("padding-right","14px"),dvJQuery(a.dom.leftSideResizeBar).css("display","flex")):(dvJQuery(a.dom.leftSideArea).css("padding-right","0"),dvJQuery(a.dom.leftSideResizeBar).css("display","none"))},
updateZoomValue:function(b){a.dom.zoomButtonValue&&(b&&null!==b?(b*=100,b=1<b?b.toFixed(0):.1<b?b.toFixed(1):.01<b?b.toFixed(2):b.toFixed(3),a.dom.zoomButtonValue.textContent=b+" %"):a.dom.zoomButtonValue.textContent="- %")},updateHoverBordersOnDisableToggle:function(b){b.style.border="1px solid transparent"},updateSinglePageModeButton:function(){var b=a.dom.singlePageModeButton?dvJQuery(a.dom.singlePageModeButton):null,d=a.dom.singlePageModeButtonMobile?dvJQuery(a.dom.singlePageModeButtonMobile):
null;this.singlePageView?(b&&("legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?b.removeClass("button_active"):"material"===a.dom.mainArea.attributes["data-theme-icon"].value?b.html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M172.3 388.5h167.2v31.2H172.3v-31.2z"/><path d="M120.9 469V339.1h270.2V469h31.2V308H89.7v161h31.2zm51.4-376.6h167.2v31.2H172.3V92.4z"/><path d="M391.1 43v129.9H120.9V43H89.7v161h332.6V43h-31.2zM89.7 245.6h31.2v31.2H89.7v-31.2zm301.4 0h31.2v31.2h-31.2v-31.2zm-60.3 0H362v31.2h-31.2v-31.2zm-60.3 0h31.2v31.2h-31.2v-31.2zm-60.2 0h31.2v31.2h-31.2v-31.2zm-60.3 0h31.2v31.2H150v-31.2z"/></svg>'):
"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&b.html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M133.5 43c-26.3 0-47.9 21.6-47.9 47.9v330.2c0 26.3 21.6 47.9 47.9 47.9h245c26.3 0 47.9-21.6 47.9-47.9V90.9c0-26.3-21.6-47.9-47.9-47.9h-245zm0 31.9h245c9 0 16 7 16 16v330.2c0 9-7 16-16 16h-245c-9 0-16-7-16-16V90.9c.1-9 7-16 16-16zm32 53.3c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.5c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.5zm0 74.6c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.5c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.5zm0 74.5c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.5c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.5zm0 74.6c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.5c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.5z"/></svg>')),
d&&("legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?d.removeClass("button_active"):d.html('<svg viewBox="0 0 512 512" width="100%" height="100%"><path class="dv-icon-accent-color" d="M386.5 327.5H125.9c-5.9 0-10.7-4.8-10.7-10.7s4.8-10.7 10.7-10.7h260.6c5.9 0 10.7 4.8 10.7 10.7s-4.8 10.7-10.7 10.7zM386.5 411.9H125.9c-5.9 0-10.7-4.8-10.7-10.7 0-5.9 4.8-10.7 10.7-10.7h260.6c5.9 0 10.7 4.8 10.7 10.7 0 6-4.8 10.7-10.7 10.7zM264.5 158.7H125.9c-5.9 0-10.7-4.8-10.7-10.7 0-5.9 4.8-10.7 10.7-10.7h138.6c5.9 0 10.7 4.8 10.7 10.7-.1 5.9-4.8 10.7-10.7 10.7zM386.5 243.1H125.9c-5.9 0-10.7-4.8-10.7-10.7s4.8-10.7 10.7-10.7h260.6c5.9 0 10.7 4.8 10.7 10.7s-4.8 10.7-10.7 10.7z"/><path d="M448.8 168.1 290.6 9.4C284.5 3.3 276.5 0 267.9 0H88.4C69.3 0 53.8 18.5 53.8 41.3v429.3c0 22.8 15.5 41.3 34.6 41.3h335.1c19.1 0 34.6-18.5 34.6-41.3v-280c.1-8.5-3.2-16.5-9.3-22.5zm-26.9 10.2-146.2-.2.2-145.7 146 145.9zm1.7 312.4H88.4c-7.1 0-13.3-9.3-13.3-20V41.3c0-10.7 6.2-20 13.3-20h166.5c-.3 1.6-.5 3.2-.5 4.9v151.9c0 11.9 8.8 21.5 19.6 21.5h154c3.2 0 6.2-.9 8.9-2.4v273.4c-.1 10.7-6.3 20.1-13.3 20.1z"/></svg>'))):
(b&&("legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?b.addClass("button_active"):"material"===a.dom.mainArea.attributes["data-theme-icon"].value?b.html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M170.1 378.7h171.7v-32H170.1v32zm0-90.7h171.7v-32H170.1v32zM85.3 469.3V42.7h224.5l116.8 116.8v309.9H85.3zm208.6-295.4V74.7H117.3v362.7h277.3V173.9H293.9zM117.3 74.7v99.2-99.2 362.7V74.7z"/></svg>'):"bitonal"===
a.dom.mainArea.attributes["data-theme-icon"].value&&b.html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M101.5 43c-8.8.1-15.8 7.4-15.7 16.2v127.7c0 26.3 21.6 47.9 47.9 47.9h244.7c26.3 0 47.9-21.6 47.9-47.9V59.2c.1-8.8-6.9-16.1-15.7-16.2-8.8-.1-16.1 6.9-16.2 15.7v128.2c0 9-7 16-16 16H133.7c-9 0-16-7-16-16V59.2c.1-8.8-6.9-16.1-15.7-16.2h-.5zm64.1.2c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.4c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.6zm0 74.5c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.4c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.6zm-31.9 159.6c-26.3 0-47.9 21.6-47.9 47.9v127.7c-.1 8.8 6.9 16.1 15.7 16.2s16.1-6.9 16.2-15.7V325.2c0-9 7-16 16-16h244.7c9 0 16 7 16 16v127.7c-.1 8.8 6.9 16.1 15.7 16.2s16.1-6.9 16.2-15.7V325.2c0-26.3-21.6-47.9-47.9-47.9H133.7zm31.9 85.1c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.4c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.6zm0 74.5c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.4c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.6z"/></svg>')),
d&&("legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?d.addClass("button_active"):d.html('<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M426.7 219.1H85.3c-17.6 0-32-14.4-32-32.1V10.7C53.3 4.8 58.1 0 64 0s10.7 4.8 10.7 10.7V187c0 5.9 4.8 10.8 10.7 10.8h341.3c5.9 0 10.7-4.8 10.7-10.8V10.7C437.3 4.8 442.1 0 448 0s10.7 4.8 10.7 10.7V187c0 17.7-14.4 32.1-32 32.1zM448 512c-5.9 0-10.7-4.8-10.7-10.7V325c0-5.9-4.8-10.8-10.7-10.8H85.3c-5.9 0-10.7 4.8-10.7 10.8v176.4c0 5.9-4.8 10.7-10.7 10.7s-10.7-4.8-10.7-10.7V325c0-17.7 14.4-32.1 32-32.1h341.3c17.6 0 32 14.4 32 32.1v176.4c.2 5.8-4.6 10.6-10.5 10.6z"></path><path class="dv-icon-accent-color" d="M362.7 21.3H149.3c-5.9 0-10.7-4.8-10.7-10.7S143.4 0 149.3 0h213.3c5.9 0 10.7 4.8 10.7 10.7s-4.7 10.6-10.6 10.6zm0 93H149.3c-5.9 0-10.7-4.8-10.7-10.7s4.8-10.7 10.7-10.7h213.3c5.9 0 10.7 4.8 10.7 10.7s-4.7 10.7-10.6 10.7zM362.7 512H149.3c-5.9 0-10.7-4.8-10.7-10.7 0-5.9 4.8-10.7 10.7-10.7h213.3c5.9 0 10.7 4.8 10.7 10.7 0 5.9-4.7 10.7-10.6 10.7zm0-92.9H149.3c-5.9 0-10.7-4.8-10.7-10.7 0-5.9 4.8-10.7 10.7-10.7h213.3c5.9 0 10.7 4.8 10.7 10.7 0 5.9-4.7 10.7-10.6 10.7z"></path></svg>')));
this.updateButtons()},udpateMouseModeButtons:function(b){var d=a.dom.panMouseModeButton?dvJQuery(a.dom.panMouseModeButton):null,e=a.dom.selectMouseModeButton?dvJQuery(a.dom.selectMouseModeButton):null,g=a.dom.zoomAreaMouseModeButton?dvJQuery(a.dom.zoomAreaMouseModeButton):null,k=a.dom.magnifierButton?dvJQuery(a.dom.magnifierButton):null,p=a.dom.panMouseModeButtonMobile?dvJQuery(a.dom.panMouseModeButtonMobile):null,n=a.dom.selectMouseModeButtonMobile?dvJQuery(a.dom.selectMouseModeButtonMobile):null,
w=a.dom.zoomAreaMouseModeButtonMobile?dvJQuery(a.dom.zoomAreaMouseModeButtonMobile):null;d&&d.removeClass("button_active");e&&e.removeClass("button_active");g&&g.removeClass("button_active");k&&k.removeClass("button_active");p&&p.removeClass("button_active");n&&n.removeClass("button_active");w&&w.removeClass("button_active");switch(b){case 0:case 1:d&&d.addClass("button_active");p&&p.addClass("button_active");break;case 3:e&&e.addClass("button_active");n&&n.addClass("button_active");break;case 4:g&&
g.addClass("button_active");w&&w.addClass("button_active");break;case 5:k&&k.addClass("button_active")}},updateButtons:function(){"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?(dvJQuery(a.dom.mainArea).find(".dv-button").each(function(){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),dvJQuery(a.dom.mainArea).find(".dv-button.button_active").each(function(){dvJQuery(this).css("border",
"1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","-webkit-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+" 0%,"+a.dom.UIconfig.buttonActiveGradientColorEnd+
" 100%)");dvJQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)}),dvJQuery(a.dom.mainArea).find(".dv-button.button_hover").each(function(){dvJQuery(this).css("border",
"1px solid");dvJQuery(this).css("-webkit-border-radius","2px");dvJQuery(this).css("-moz-border-radius","2px");dvJQuery(this).css("border-radius","2px");dvJQuery(this).css("border-color",a.dom.UIconfig.miscBorderColor)})):(dvJQuery(a.dom.mainArea).find(".dv-button").each(function(){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor);dvJQuery(this).css("color",a.dom.UIconfig.strokeColor)}),dvJQuery(a.dom.toolBarArea).find(".dv-button").not(".dv-submenu-zoom-mode .dv-button, .dv-submenu-mouse-mode .dv-button").not(":first").each(function(){dvJQuery(this).css("border-left",
"1px solid "+a.dom.UIconfig.miscBorderColor)}),dvJQuery(a.dom.mainArea).find(".dv-button.button_active").each(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.toolbarIconActiveColor);dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor);dvJQuery(this).css("color",a.dom.UIconfig.activeSelectedColor)}),dvJQuery(a.dom.mainArea).find(".dv-button.button_hover").each(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.toolbarIconActiveColor)}))},autoSelectToolbar:function(){if(a.dom.mobileToolbarArea&&
0!==dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").length){var b=0;dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").children(".dv-buttons-container").each(function(){b+=dvJQuery(this).outerWidth()});var d=dvJQuery(a.dom.mainArea).width();a.dom.toolbarLogo&&(d-=dvJQuery(a.dom.toolbarLogo).width());b>d?(dvJQuery(a.dom.toolBarArea).css({position:"absolute",left:"-300%"}),dvJQuery(a.dom.mobileToolbarArea).css("display","block"),dvJQuery(a.dom.mobileToolbarTop).css("display","block"),a.dom.visibleToolbar=
DocuViewareAPI.Toolbar.Mobile):(dvJQuery(a.dom.mobileToolbarArea).css("display","none"),dvJQuery(a.dom.mobileToolbarTop).css("display","none"),dvJQuery(a.dom.toolBarArea).css({position:"relative",left:""}),a.dom.visibleToolbar=DocuViewareAPI.Toolbar.Standard)}else a.dom.visibleToolbar=a.dom.UIconfig.docuViewareLiteMode?DocuViewareAPI.Toolbar.Standard:DocuViewareAPI.Toolbar.None;a.dom.updateResizeBarVisibility()},resizeControlArea:function(){if(dvJQuery(a.dom.containerArea).is(":visible")){a.dom.autoSelectToolbar();
var b=a.dom.mainArea.offsetHeight;a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Mobile?b-=dvJQuery(a.dom.mobileToolbarTop).height()+a.dom.mobileToolbarArea.clientHeight:a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Standard&&(b-=a.dom.toolBarArea.offsetHeight);b!==a.dom.controlArea.offsetHeight&&(a.dom.controlArea.style.height=b+"px");a.dom.mobileToolbarContainer&&a.dom.resizeMobileToolbarMenu()}},resizeMobileToolbarMenu:function(){var b=0;dvJQuery(a.dom.mobileToolbarContainer).children(".dv-button").each(function(){b+=
dvJQuery(this).height();b+=parseInt(dvJQuery(this).css("padding-top"),10);b+=parseInt(dvJQuery(this).css("padding-bottom"),10);b+=parseInt(dvJQuery(this).css("border-top"),10);b+=parseInt(dvJQuery(this).css("border-bottom"),10);b+=parseInt(dvJQuery(this).css("margin-top"),10);b+=parseInt(dvJQuery(this).css("margin-bottom"),10)});b>=dvJQuery(a.dom.controlArea).height()?dvJQuery(a.dom.mobileToolbarContainer).width()===DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH&&dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH):
dvJQuery(a.dom.mobileToolbarContainer).width()===DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH&&dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH)},SelectedTextRegions:{_cache:[],count:function(b){if(b){for(var d=0,e=0;e<this._cache.length;e++)this._cache[e].category==b&&d++;return d}return this._cache.length},addNew:function(b,d,e,g,k,p){var n=document.createElement("div"),w=document.createAttribute("data-dv-sel-type");1===k?w.value="us":
2===k&&(w.value="tr");n.attributes.setNamedItem(w);n.coordinates={left:d.left,top:d.top,width:d.width,height:d.height};a.Internal.Coordinates.documentToViewerBox(b,d);n.category=k;n.pageNo=b;n.style.display="block";n.style.position="absolute";n.style.padding="0px";n.style.margin="0px";n.style.outline="0";n.style.left=d.left+"px";n.style.top=d.top+"px";n.style.width=d.width+"px";n.style.height=d.height+"px";n.style.backgroundColor=e;g&&(n.style.borderColor=g,n.style.borderWidth="1px",n.style.borderStyle=
"solid");a.events.forwardMouseEventsToViewer(n);p?p.appendChild(n):a.dom.viewerArea.appendChild(n);this._cache.push(n)},addNews:function(b,d,e,g,k,p){d.forEach(function(n){this.addNew(b,n,e,g,k,p)},this)},clear:function(b,d){if(0<this._cache.length)if(b||d)for(var e=0;e<this._cache.length;e++)b&&this._cache[e].category!=b||d&&this._cache[e].pageNo!=d||(a.dom.viewerArea.removeChild(this._cache[e]),this._cache.splice(e--,1));else{for(e=0;e<this._cache.length;e++)a.dom.viewerArea.removeChild(this._cache[e]);
this._cache=[]}},onPageBoundsChanged:function(){if(0<this._cache.length)for(var b=0;b<this._cache.length;b++){var d=this._cache[b],e={left:d.coordinates.left,top:d.coordinates.top,width:d.coordinates.width,height:d.coordinates.height};a.Internal.Coordinates.documentToViewerBox(d.pageNo,e);d.style.left=e.left+"px";d.style.top=e.top+"px";d.style.width=e.width+"px";d.style.height=e.height+"px"}}},createBookmarkNode:function(b,d){if(d){var e=document.createElement("li");e.bookmarkID=d.bookmarkID;if(d.hasChildren){e.className=
"hasChildren";var g=document.createElement("div");g.className="hitarea collapsed";g.bookmarkID=d.bookmarkID;g.onclick=a.events.onBookmarkTogglerClickHandler;g.onmouseover=a.events.onBookmarkItemMouseOverHandler;g.onmouseout=a.events.onBookmarkItemMouseOutHandler;dvJQuery(e).append(g)}g=document.createElement("span");g.action=d.action;g.onmouseover=a.events.onBookmarkItemMouseOverHandler;g.onmouseout=a.events.onBookmarkItemMouseOutHandler;d.action&&-1<d.action.indexOf("PdfPageDest")&&(g.className=
"internal");g.onclick=a.events.onBookmarkItemClickHandler;g.innerHTML=d.text;g.style.color="legacy"===a.dom.mainArea.attributes["data-theme-layout"].value&&d.foreColor?d.foreColor:a.dom.UIconfig.textColor;if(1==d.textAttribute||3==d.textAttribute)g.style.fontStyle="italic";if(2==d.textAttribute||3==d.textAttribute)g.style.fontWeight="bold";dvJQuery(e).append(g);d.hasChildren&&dvJQuery(e).append('<ul><li><span class="placeholder">&nbsp;</span></li></ul>');b.append(e)}},setBookmarkOverStyle:function(b,
d){dvJQuery(b).parent().find("span:first").css("text-decoration",d?"underline":"none")},selectBookmark:function(b){this.resetBookmarkStyle();dvJQuery(b).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).addClass("selected")},resetBookmarkStyle:function(){a.dom.bookmarksTree&&dvJQuery(a.dom.bookmarksTree).find("span.selected").removeClass("selected").css("background-color","transparent")},createCommentItem:function(b,d,e){if(b&&b.annotApp.visible){var g=!1;e&&(g=e.find(".dvtoggle:first").hasClass("dvcolapsed"));
var k=document.createElement("div");k.className="dvcomment";var p=document.createElement("div");p.className="dvcomment-wrapper";p.id="dvcomment-"+b.annotApp.id+"-"+a.uniqueID;var n=this.generateCommentHeaderMarkup(b,g);p.appendChild(n);b=this.generateCommentContentMarkup(b,g);if(null!=d)for(g=0;g<d.length;g++){var w=d[g],C="dvcomment-"+w.annotApp.id+"-"+a.uniqueID,K=e.find("#"+C+" .dvtoggle").hasClass("dvcolapsed");w.annotApp.visible&&(n=document.createElement("div"),n.className="dvcomment-wrapper dvanswer",
n.id=C,C=this.generateCommentHeaderMarkup(w,K),w=this.generateCommentContentMarkup(w,K),n.appendChild(C),n.appendChild(w),b.appendChild(n))}p.appendChild(b);k.appendChild(p);dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).append(k)}},generateCommentHeaderMarkup:function(b,d){var e=document.createElement("div");e.className="dvcomment-header";e.addEventListener("click",function(p){p.stopPropagation();(p=document.getElementById(a.uniqueID))&&p.control.CommentHeader_Click(b.annotApp.id)});
b.annotApp.canEdit&&e.addEventListener("dblclick",function(p){p.stopPropagation();(p=document.getElementById(a.uniqueID))&&p.control.CommentProperties_Click(b.annotApp.id)});e.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer")});e.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default")});switch(b.annotApp.properties.reviewStatus){case 0:e.className+=" status-none";break;case 1:e.className+=" status-approved";break;case 2:e.className+=" status-canceled";
break;case 3:e.className+=" status-finished";break;case 4:e.className+=" status-rejected"}var g=document.createElement("div");g.className="dvcomment-user";var k=document.createElement("span");k.className="dvtoggle";d&&(k.className+=" dvcolapsed");g.appendChild(k);d=document.createElement("span");d.innerText=b.annotApp.author;g.appendChild(d);d=document.createElement("div");d.className="dvcomment-date";k=document.createElement("span");k.innerText=DocuViewareUtilities.getLocaleDateTimeFormat(b.annotApp.creationTime,
a.dom.UIconfig.locale);d.appendChild(k);e.appendChild(g);e.appendChild(d);return e},generateCommentContentMarkup:function(b,d){var e=document.createElement("div");e.className="dvcomment-content";d&&(e.style="display: none;");e.addEventListener("click",function(w){w.stopPropagation();(w=document.getElementById(a.uniqueID))&&w.control.CommentHeader_Click(b.annotApp.id)});b.annotApp.canEdit&&e.addEventListener("dblclick",function(w){w.stopPropagation();(w=document.getElementById(a.uniqueID))&&w.control.CommentProperties_Click(b.annotApp.id)});
e.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer")});e.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default")});d=document.createElement("div");d.className="dvcomment-message";b.annotApp.properties.fill&&null!=b.annotApp.properties.fillColor&&(d.style.backgroundColor=b.annotApp.properties.fillColor);var g=document.createElement("p");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value&&(g.style.color=b.annotApp.properties.foreColor);
g.style.fontFamily=b.annotApp.properties.fontName;switch(b.annotApp.properties.fontStyle){case 0:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 1:g.style.fontStyle="normal";g.style.fontWeight="bold";g.style.textDecoration="none";break;case 2:g.style.fontStyle="italic";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 3:g.style.fontStyle="italic";g.style.fontWeight="bold";g.style.textDecoration="none";break;case 4:g.style.fontStyle=
"normal";g.style.fontWeight="normal";g.style.textDecoration="underline";break;case 5:g.style.fontStyle="normal";g.style.fontWeight="bold";g.style.textDecoration="underline";break;case 6:g.style.fontStyle="italic";g.style.fontWeight="normal";g.style.textDecoration="underline";break;case 7:g.style.fontStyle="italic";g.style.fontWeight="bold";g.style.textDecoration="underline";break;case 8:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="line-through";break;case 9:g.style.fontStyle=
"normal";g.style.fontWeight="bold";g.style.textDecoration="line-through";break;case 10:g.style.fontStyle="italic";g.style.fontWeight="normal";g.style.textDecoration="line-through";break;case 11:g.style.fontStyle="italic";g.style.fontWeight="bold";g.style.textDecoration="line-through";break;case 12:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 13:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 14:g.style.fontStyle=
"normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 15:g.style.fontStyle="normal",g.style.fontWeight="normal",g.style.textDecoration="none"}g.style.fontSize=b.annotApp.properties.fontSize+"pt";g.innerText=b.annotApp.properties.text;d.appendChild(g);g=document.createElement("div");g.className="dvcomment-options";g.style.borderTop="1px solid"+a.dom.UIconfig.strokeColor;g.style.paddingTop="10px";g.style.height="20px";g.style.lineHeight="18px";g.style.display="inline-block";
g.style.width="100%";g.style.fill=a.dom.UIconfig.strokeColor;var k=document.createElement("div");k.style.height="20px";k.style.width="16px";k.style.display="inline-block";k.style.float="left";k.style.marginRight="5px";switch(b.ownerAnnotType){case 0:k.title=a.Localize("annotation_rubberstamp");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M256 64c-35.3 0-64 28.7-64 64 0 64 106.7 149.3-64 149.3-23.6 0-42.7 19.1-42.7 42.7v42.7h341.3V320c0-23.6-19.1-42.7-42.7-42.7-170.7 0-64-85.3-64-149.3.1-42.7-28.5-64-63.9-64M128 405.3V448h256v-42.7H128z"/></svg>';
break;case 1:k.title=a.Localize("annotation_rectangle");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M42.7 429V83h426.7v346H42.7zm35.2-35.5h356.3v-275H77.9v275z"/></svg>';break;case 2:k.title=a.Localize("annotation_highlighter");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M382.8 44.5c-10.3 0-20.2 3.7-27.8 11.3L241.8 169.1l110 110L465.1 166c15-15.2 15-39.7 0-55.1l-55.3-55.1c-7.6-7.6-17.3-11.3-27-11.3M223.1 187.6l-116 116c-15.2 15.2-15.2 39.7.4 55.5-23.8 24-47.9 47.9-71.9 71.9h110.2l16.7-16.7c15.2 14.8 39.5 14.6 54.7-.4l115.9-116M35.6 449.2h440.8v18.3H35.6z"/></svg>';
break;case 3:k.title=a.Localize("annotation_line");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="m43.044 403.345 401.088-325.23 24.877 30.68-401.088 325.23z"/></svg>';break;case 4:k.title=a.Localize("annotation_arrow");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="m43 426.1 322.2-322.2H164.7V43H469v304.3h-60.8V146.8L85.9 469 43 426.1z"/></svg>';
break;case 5:k.title=a.Localize("annotation_connectedline");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M48.212 438.111 155.22 241.217l36.901 20.055L85.114 458.166zM331.983 315.52l93.622-255.381 39.434 14.456-93.622 255.381z"/><path d="m165.981 270.749 15.3-39.115 178.438 69.8-15.3 39.115z"/><circle cx="173.7" cy="251.2" r="44.7"/><circle cx="351.7" cy="322.7" r="44.7"/><circle cx="445.3" cy="67.3" r="44.7"/><circle cx="66.7" cy="444.7" r="44.7"/></svg>';
break;case 6:k.title=a.Localize("annotation_ellipse");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M256 394.4c-94.3 0-170.7-62-170.7-138.4S161.7 117.6 256 117.6s170.7 62 170.7 138.4S350.3 394.4 256 394.4M256 83C138.2 83 42.7 160.5 42.7 256S138.2 429 256 429s213.3-77.5 213.3-173S373.8 83 256 83z"/></svg>';break;case 7:k.title=a.Localize("annotation_image");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="m181.3 288 53.3 64 74.7-96 96 128H106.7M448 405.3V106.7C448 83 428.8 64 405.3 64H106.7C83.1 64 64 83.1 64 106.7v298.7c0 23.6 19.1 42.7 42.7 42.7h298.7c23.5-.1 42.6-19.2 42.6-42.8z"/></svg>';
break;case 8:k.title=a.Localize("annotation_text");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="m436.7 47.4 32.3 121-26.7 7.2c-12.5-24.2-25.3-48.4-40-60.7-14.7-12-32-12-48.9-12h-69.6v292c0 13.9 0 27.8 9.2 34.8 9.5 7 27.8 7 46.4 7v27.8H172.5v-27.8c18.6 0 36.9 0 46.4-7 9.2-7 9.2-20.9 9.2-34.8V103.1h-69.5c-17 0-34.2 0-48.9 12-14.7 12.2-27.5 36.4-40 60.7L43 168.4l32.3-121h361.4z"/></svg>';break;case 9:k.title=
a.Localize("annotation_stickynote");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M78.5 433.5h236.6V315.2h118.3V78.5H78.5v355zm0 35.5c-9.9 0-18.2-3.4-25.1-10.3-7-6.9-10.4-15.3-10.4-25.2v-355c0-9.9 3.4-18.2 10.3-25.1S68.6 43 78.5 43h355c9.9 0 18.2 3.4 25.1 10.3 6.9 6.9 10.3 15.3 10.3 25.1V327L327 469H78.5zm71-177.5V256h100.6v35.5H149.5zm0-94.7v-35.5h213v35.5h-213zm-71 236.7v-355 355z"/></svg>';break;
case 10:k.title=a.Localize("annotation_freehand");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M208.8 494.4c48-18.9 37.4-70.9 13.2-103.7-24-33.7-57.1-56.8-90.5-79.2-23.7-15.1-45.5-33.9-63-55.5-7.5-8.9-22.9-25.3-7.3-28.6 15.9-3.2 43.4 12.4 57.4 18.3 24.5 10.2 48.8 22.1 71.4 36.1l27.2-45.8c-42-27.8-95.9-52.3-146-59.5-28.6-4.3-58.7 1.6-68.4 32.6-8.6 26.7 5.1 53.6 20.7 74.6 36.9 49.3 94.3 73 137.1 115.6 9.2 8.9 20.2 19.4 25.6 31.8 5.7 11.9 4.3 12.7-8.4 12.7-33.4 0-75.2-26.1-102.4-43.4l-27.2 45.8c41.2 25.3 110.2 64.9 160.6 48.2M507.6 74.1c5.9-5.9 5.9-15.6 0-21.3l-35-35c-5.7-5.7-15.4-5.7-21 0L424 45.3l56 56M242.4 226.9v56h56l165.7-165.7-56-56-165.7 165.7z"/></svg>';
break;case 11:k.title=a.Localize("annotation_freehandhighlighter");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M382.8 44.5c-10.3 0-20.2 3.7-27.8 11.3L241.8 169.1l110 110L465.1 166c15-15.2 15-39.7 0-55.1l-55.3-55.1c-7.6-7.6-17.3-11.3-27-11.3M223.1 187.6l-116 116c-15.2 15.2-15.2 39.7.4 55.5-23.8 24-47.9 47.9-71.9 71.9h110.2l16.7-16.7c15.2 14.8 39.5 14.6 54.7-.4l115.9-116"/><path d="M455.2 230v216.3c0 1.1-.9 2-2 2h-49.4c-1.1 0-2-.9-2-2V344.5c0-12.1-9.9-22-22-22h-49.4c-12.1 0-22 9.9-22 22v101.9c0 1.1-.9 2-2 2H35.6v20h270.8c12.1 0 22-9.9 22-22V344.5c0-1.1.9-2 2-2h49.4c1.1 0 2 .9 2 2v101.9c0 12.1 9.9 22 22 22h49.4c12.1 0 22-9.9 22-22V230h-20z"/></svg>';
break;case 12:k.title=a.Localize("annotation_freehandpolygon");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M512 455.1V0H341.3v42.7h56.9v42.7h-56.9V128h113.8v42.7H341.3v42.7h56.9V256h-56.9v42.7h113.8v42.7H341.3v113.8h-42.7V341.3H256v56.9h-42.7v-56.9h-42.7v113.8H128V341.3H85.3v56.9H42.7v-56.9H0V512h455.1c31.4 0 56.9-25.5 56.9-56.9m-85.3-56.9c15.7 0 28.4 12.7 28.4 28.4S442.4 455 426.7 455s-28.4-12.7-28.4-28.4c-.1-15.6 12.7-28.4 28.4-28.4z"/></svg>';
break;case 13:k.title=a.Localize("annotation_link");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M223.5 288.5c9.5 9 9.5 23.7 0 32.7-9 9-23.7 9-32.7 0-44.9-44.9-44.9-118 0-162.9l81.6-81.6c44.9-44.9 118-44.9 162.9 0s44.9 118 0 162.9L400.9 274c.2-18.9-2.7-37.8-9.2-55.7l10.8-11.1c27.2-27 27.2-70.7 0-97.7-27-27.2-70.7-27.2-97.7 0l-81.4 81.4c-27.1 26.8-27.1 70.6.1 97.6m65-97.7c9-9 23.7-9 32.7 0 44.9 44.9 44.9 118 0 162.9l-81.6 81.6c-44.9 44.9-118 44.9-162.9 0s-44.9-118 0-162.9l34.4-34.4c-.2 18.9 2.7 37.8 9.2 56l-10.8 10.8c-27.2 27-27.2 70.7 0 97.7 27 27.2 70.7 27.2 97.7 0l81.4-81.4c27.2-27 27.2-70.7 0-97.7-9.6-8.9-9.6-23.6-.1-32.6z"/></svg>';
break;case 14:k.title=a.Localize("annotation_polygon");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M512 455.1V0H341.3v42.7h56.9v42.7h-56.9V128h113.8v42.7H341.3v42.7h56.9V256h-56.9v42.7h113.8v42.7H341.3v113.8h-42.7V341.3H256v56.9h-42.7v-56.9h-42.7v113.8H128V341.3H85.3v56.9H42.7v-56.9H0V512h455.1c31.4 0 56.9-25.5 56.9-56.9m-85.3-56.9c15.7 0 28.4 12.7 28.4 28.4S442.4 455 426.7 455s-28.4-12.7-28.4-28.4c-.1-15.6 12.7-28.4 28.4-28.4z"/></svg>';
break;case 15:k.title=a.Localize("annotation_ruler");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M0 409.5 42.7 367 77 400.8l25.6-25.3-34.3-34 34.3-34.3 59.6 59.8 25.6-25.6-59.6-59.8 34-34 34.3 34L222 256l-34.3-34 34.3-34.3 59.6 59.8 25.6-25.6-59.6-59.8 34-34 34 34 25.8-25.6-34.3-34 34.3-34.3 59.4 59.8 25.8-25.6L367 42.7 409.5 0 512 102.5 102.5 512 0 409.5z"/></svg>';break;case 16:k.title=a.Localize("annotation_polyruler"),
k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M512 455.1V0H341.3v42.7h56.9v42.7h-56.9V128h113.8v42.7H341.3v42.7h56.9V256h-56.9v42.7h113.8v42.7H341.3v113.8h-42.7V341.3H256v56.9h-42.7v-56.9h-42.7v113.8H128V341.3H85.3v56.9H42.7v-56.9H0V512h455.1c31.4 0 56.9-25.5 56.9-56.9m-85.3-56.9c15.7 0 28.4 12.7 28.4 28.4S442.4 455 426.7 455s-28.4-12.7-28.4-28.4c-.1-15.6 12.7-28.4 28.4-28.4z"/></svg>'}g.appendChild(k);
k=document.createElement("div");k.style.fontSize="smaller";k.style.lineHeight="20px";k.style.display="inline-block";k.innerText=a.Localize("label_page")+" "+b.annotApp.pageNo;g.appendChild(k);if(b.annotApp.canEdit){var p=document.createElement("div");p.title=a.Localize("annotation_action_edit");p.style.height="20px";p.style.width="16px";p.style.marginLeft="15px";p.style.display="inline-block";p.style.float="right";p.addEventListener("click",function(){var w=document.getElementById(a.uniqueID);w&&
w.control.CommentProperties_Click(b.annotApp.id)});p.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor):dvJQuery(this).css("fill",a.dom.UIconfig.secondaryButtonHoverColor)});p.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?
p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M441.8 150.2c8.3-8.3 8.3-22.2 0-30.1l-49.9-49.9c-7.9-8.3-21.8-8.3-30.1 0l-39.3 39 80 80M64 368v80h80l235.9-236.2-80-80L64 368z"/></svg>':"material"===a.dom.mainArea.attributes["data-theme-icon"].value?p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M441.8 150.2c8.3-8.3 8.3-22.2 0-30.1l-49.9-49.9c-7.9-8.3-21.8-8.3-30.1 0l-39.3 39 80 80M64 368v80h80l235.9-236.2-80-80L64 368z"/></svg>':
"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&(p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M390.6 43c-20.1 0-40.2 7.6-55.5 22.9L86.9 314.1c-4.7 4.7-8.2 10.6-10 17L43.6 447.5c-2.5 8.9 2.6 18.2 11.6 20.8 3 .9 6.2.9 9.2 0L180.9 435c6.4-1.8 12.2-5.2 17-10l248.2-248.2c30.5-30.5 30.5-80.5 0-111C430.9 50.6 410.7 43 390.6 43zm0 33.4c11.4 0 22.9 4.4 31.7 13.2 17.7 17.7 17.7 45.8 0 63.4l-21.7 21.7-63.4-63.4 21.7-21.7c8.8-8.7 20.3-13.2 31.7-13.2zm-77.2 58.8 63.4 63.4-202.7 202.6c-.7.7-1.5 1.2-2.4 1.4l-87.4 25 25-87.4c.3-.9.7-1.7 1.4-2.4l202.7-202.6z"/></svg>');
g.appendChild(p)}k=a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id===b.annotApp.id;var n=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id).annotApp.id===b.annotApp.id;(k||n)&&b.annotApp.properties.allowAnswer&&(k=document.createElement("div"),k.title=a.Localize("label_comment_answer"),k.style.height="20px",k.style.width="16px",k.style.display="inline-block",k.style.float="right",k.addEventListener("click",function(){var w=document.getElementById(a.uniqueID);
w&&(n?w.control.CommentAnswer_Click(a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id):w.control.CommentAnswer_Click(b.annotApp.id))}),k.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor):dvJQuery(this).css("fill",a.dom.UIconfig.secondaryButtonHoverColor)}),k.addEventListener("mouseout",function(){dvJQuery(this).css("cursor",
"default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M213.3 192v-85.3L64 256l149.3 149.3v-87.5C320 317.9 394.7 352 448 426.7 426.7 320 362.7 213.3 213.3 192z"/></svg>':"material"===a.dom.mainArea.attributes["data-theme-icon"].value?k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M213.3 192v-85.3L64 256l149.3 149.3v-87.5C320 317.9 394.7 352 448 426.7 426.7 320 362.7 213.3 213.3 192z"/></svg>':
"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&(k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M217.3 61c-4.2.1-8.2 1.9-11.1 5L52.8 226.6c-6.4 6.8-6.4 17.6 0 24.3l153.3 160.5c6.4 6.8 16.8 6.8 23.2 0 3-3.3 4.8-7.6 4.8-12.2v-87.7c23.9-1.3 61-1.3 98.9 11.8 44.9 15.4 85.4 45.6 98.4 113.8 1.8 9.3 10.4 15.3 19.3 13.5 7.6-1.6 13.2-8.7 13.2-16.9 0-1.2-.4-2.1-.4-3.4 0-.1-.1-.1-.1-.2-1.2-112.5-49.7-180.8-104.4-217.8-48.1-32.6-96-41.4-125.1-44.8V78.2c0-9.5-7.3-17.2-16.4-17.2h-.2zm-16.1 58.7v62.2c0 9 6.6 16.5 15.2 17.2 22 1.7 76.9 9.6 124.9 42 29.1 19.7 54.7 49.7 71.4 92.3-20.8-20.2-45-34.4-69.3-42.8-52.1-18-104.4-15.3-127.1-13.1-8.4.8-14.8 8.3-14.8 17.2v63l-113.8-119 113.5-119z"/></svg>'),
g.appendChild(k));k=document.createElement("div");k.style.height="20px";k.style.width="16px";k.style.display="inline-block";k.style.marginRight="15px";k.style.float="right";if(0!==b.annotApp.properties.reviewStatus)switch(b.annotApp.properties.reviewStatus){case 1:k.style.fill="#8fb962";k.title=a.Localize("label_comment_status_approved");"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M469 236.6c0-21.5-17.4-38.7-38.7-38.7H307.9l18.6-88.5c.4-1.9.6-4.1.6-6.2 0-7.9-3.3-15.3-8.5-20.5L298 62.4 170.6 189.8c-7.2 7.2-11.4 16.8-11.4 27.5v193.6c0 21.4 17.3 38.7 38.7 38.7h174.3c16.1 0 29.8-9.7 35.6-23.6l58.5-136.5c1.7-4.5 2.7-9.1 2.7-14.1v-38.8m-426 213h77.5V217.3H43v232.3z"/></svg>':
"material"===a.dom.mainArea.attributes["data-theme-icon"].value?k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M469 236.6c0-21.5-17.4-38.7-38.7-38.7H307.9l18.6-88.5c.4-1.9.6-4.1.6-6.2 0-7.9-3.3-15.3-8.5-20.5L298 62.4 170.6 189.8c-7.2 7.2-11.4 16.8-11.4 27.5v193.6c0 21.4 17.3 38.7 38.7 38.7h174.3c16.1 0 29.8-9.7 35.6-23.6l58.5-136.5c1.7-4.5 2.7-9.1 2.7-14.1v-38.8m-426 213h77.5V217.3H43v232.3z"/></svg>':
"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&(p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M285 48.1c-4.6.3-9.1 1.4-13.3 3.6-8.5 4.5-13.6 12.4-16.5 20.8-.8 2.1-.4 1.1-.5 1.7-.2.5-.4 1.2-.6 2-.5 1.7-1.1 3.9-1.9 6.6-1.6 5.4-3.7 12.5-5.7 19.6-4.1 14.2-8.2 28.1-8.2 28.1-1.2 4-2.1 6.2-2.5 6.7-15 22.8-31 45.7-46.7 69h-69.7c-24.9 0-45.5 20.1-45.5 44.5v158.5c0 24.4 20.5 44.5 45.5 44.5h40.5c12.8 0 24.2-5.3 32.5-13.7 23.3 5 49.4 10.5 70.6 14.8 11.2 2.3 20.9 4.3 28.3 5.8 7.4 1.5 10.1 2.2 15 2.7 3.1.3 6.2.5 9.3.5 43.3 0 81.6-28.8 92.6-70.8 8.5-32 25.8-98.6 25.9-98.9 1.4-5.1 3.4-11.9 3.8-20.1 1-17.7-5.3-35-17.6-47.8-12.6-13-30.1-20.1-48.6-20.2h-40.2c3.6-12.5 7.1-24.5 9.6-34.3 6.1-23.4 7.6-44.4 3.8-64.6-1.9-10.1-5.4-24.7-16-38.2-7.7-9.8-18.3-16.9-30.3-19.8-4.6-.7-9.1-1.3-13.6-1zm2 29.6c.7 0 2 .1 4.1.6 5.4 1.4 9.6 4 13.7 9.2 6.1 7.6 8.6 16.9 10.2 25.3 2.8 15.3 2 31.5-3.4 52-3.7 14-14.8 52.5-14.8 52.5-2.3 7.9 2.4 16.1 10.5 18.4 1.3.4 2.7.6 4.1.6h60.1c10.7 0 19.8 3.9 26.5 10.9 6.6 6.8 10 15.7 9.4 25.7-.2 4.3-1.4 8.9-2.8 14 0 .1 0 .1-.1.2 0 0-17.4 66.9-25.9 99-7.7 29.2-33.6 48.4-63.3 48.4-2.1 0-4.2-.1-6.4-.3 2.3.2-4.6-.8-11.9-2.2-7.2-1.5-16.9-3.4-28-5.7-19.3-4-42.8-9-64.5-13.6.1-1.1.7-2.1.7-3.1V236.2c17.9-27.4 37.5-54.6 55.9-82.7 3.3-5.1 4.8-10 6.2-14.8 0 0 4.1-14 8.2-28.1 2.1-7 4.1-14.2 5.7-19.5.8-2.7 1.5-5 1.9-6.5.2-.8.4-1.5.6-1.9 1.6-4.3 2.7-4.8 2.5-4.7 0-.2.1-.3.8-.3zM119.3 236.1h55.6v173.4c0 8.4-6.6 14.8-15.2 14.8h-40.5c-8.6 0-15.2-6.4-15.2-14.8V251c.1-8.4 6.7-14.9 15.3-14.9z"/></svg>');
break;case 2:k.style.fill="#dc584a";k.title=a.Localize("label_comment_status_canceled");"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="m405.3 136.7-30.1-30.1L256 225.9 136.7 106.7l-30.1 30.1L225.9 256 106.7 375.3l30.1 30.1L256 286.1l119.3 119.3 30.1-30.1L286.1 256l119.2-119.3z"/></svg>':"material"===a.dom.mainArea.attributes["data-theme-icon"].value?
k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="m405.3 136.7-30.1-30.1L256 225.9 136.7 106.7l-30.1 30.1L225.9 256 106.7 375.3l30.1 30.1L256 286.1l119.3 119.3 30.1-30.1L286.1 256l119.2-119.3z"/></svg>':"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&(k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M445.3 48c-4.9.1-9.4 2.2-12.8 5.6L256 230.1 79.6 53.6c-3.5-3.6-8.2-5.5-13.2-5.5-10.1 0-18.3 8.2-18.3 18.3 0 5 2 9.7 5.5 13.2L230 256 53.6 432.4c-7.3 7-7.5 18.6-.5 26s18.6 7.5 26 .5l.5-.5L256 282l176.4 176.4c7 7.3 18.6 7.5 26 .5 7.3-7 7.5-18.6.5-26l-.5-.5L282 256 458.4 79.6c7.3-7 7.5-18.6.5-26-3.6-3.7-8.6-5.7-13.6-5.6z"/></svg>');
break;case 3:k.style.fill="#decc6b";k.title=a.Localize("label_comment_status_finished");"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="m448 149.3-256 256L74.7 288l30.1-30.1 87.3 87L418 119.2l30 30.1z"/></svg>':"material"===a.dom.mainArea.attributes["data-theme-icon"].value?k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="m448 149.3-256 256L74.7 288l30.1-30.1 87.3 87L418 119.2l30 30.1z"/></svg>':
"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&(k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M448.8 100c-3.8.1-7.5 1.8-10.3 4.7L181.8 374.4 73.6 260.7c-5.7-6.3-15-6.5-21-.4s-6.2 15.8-.4 22.1l.4.4 118.8 124.7c5.8 6.1 15.2 6.1 21 0l267.2-280.7c5.9-6.1 6-15.9.3-22.1-3-3.1-7-4.8-11.1-4.7z"/></svg>');break;case 4:k.style.fill="#dc584a",k.title=a.Localize("label_comment_status_rejected"),
"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M391.5 294.7H469V62.4h-77.5m-77.4 0H139.8c-16.1 0-29.8 9.7-35.6 23.6L45.7 222.5C44 227 43 231.6 43 236.6v38.7c0 21.4 17.3 38.7 38.7 38.7h122.2l-18.4 88.5c-.4 1.9-.6 3.9-.6 6 0 8.1 3.3 15.3 8.5 20.5l20.5 20.5L341.4 322c7.2-7 11.4-16.7 11.4-27.3V101.1c0-21.5-17.4-38.7-38.7-38.7z"/></svg>':"material"===
a.dom.mainArea.attributes["data-theme-icon"].value?k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M391.5 294.7H469V62.4h-77.5m-77.4 0H139.8c-16.1 0-29.8 9.7-35.6 23.6L45.7 222.5C44 227 43 231.6 43 236.6v38.7c0 21.4 17.3 38.7 38.7 38.7h122.2l-18.4 88.5c-.4 1.9-.6 3.9-.6 6 0 8.1 3.3 15.3 8.5 20.5l20.5 20.5L341.4 322c7.2-7 11.4-16.7 11.4-27.3V101.1c0-21.5-17.4-38.7-38.7-38.7z"/></svg>':"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&
(k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><path d="M227 463.9c4.6-.3 9.1-1.4 13.3-3.6 8.5-4.5 13.6-12.4 16.5-20.8.8-2.1.4-1.1.5-1.7.2-.5.4-1.2.6-2 .5-1.7 1.1-3.9 1.9-6.6 1.6-5.4 3.7-12.5 5.7-19.6 4.1-14.2 8.2-28.1 8.2-28.1 1.2-4 2.1-6.2 2.5-6.7 15-22.8 31-45.7 46.7-69h69.7c24.9 0 45.5-20.1 45.5-44.5V102.7c0-24.4-20.5-44.5-45.5-44.5h-40.5c-12.8 0-24.2 5.3-32.5 13.7-23.3-5-49.4-10.5-70.6-14.8-11.2-2.3-20.9-4.3-28.3-5.8s-10.1-2.2-15-2.7c-3.1-.3-6.2-.5-9.3-.5-43.3 0-81.6 28.8-92.6 70.8-8.5 32-25.8 98.6-25.9 98.9-1.4 5.1-3.4 11.9-3.8 20.1-1 17.7 5.3 35 17.6 47.8 12.6 13 30.1 20.1 48.6 20.2h40.2c-3.6 12.5-7.1 24.5-9.6 34.3-6.1 23.4-7.6 44.4-3.8 64.6 1.9 10.1 5.4 24.7 16 38.2 7.7 9.8 18.3 16.9 30.3 19.8 4.6.8 9.1 1.4 13.6 1.1zm-2-29.6c-.7 0-2-.1-4.1-.6-5.4-1.4-9.6-4-13.7-9.2-6.1-7.6-8.6-16.9-10.2-25.3-2.8-15.3-2-31.5 3.4-52 3.7-14 14.8-52.5 14.8-52.5 2.3-7.9-2.4-16.1-10.5-18.4-1.3-.4-2.7-.6-4.1-.6h-60.1c-10.7 0-19.8-3.9-26.5-10.9-6.6-6.8-10-15.7-9.4-25.7.2-4.3 1.4-8.9 2.8-14 0-.1 0-.1.1-.2 0 0 17.4-66.9 25.9-99 7.7-29.2 33.6-48.4 63.3-48.4 2.1 0 4.2.1 6.4.3-2.3-.2 4.6.8 11.9 2.2 7.2 1.5 16.9 3.4 28 5.7 19.3 4 42.8 9 64.5 13.6-.1 1.1-.7 2.1-.7 3.1v173.2c-17.9 27.4-37.5 54.6-55.9 82.7-3.3 5.1-4.8 10-6.2 14.8 0 0-4.1 14-8.2 28.1-2.1 7-4.1 14.2-5.7 19.5-.8 2.7-1.5 5-1.9 6.5-.2.8-.4 1.5-.6 1.9-1.6 4.3-2.7 4.8-2.5 4.7 0 .4-.1.5-.8.5zm167.7-158.4h-55.6V102.5c0-8.4 6.6-14.8 15.2-14.8h40.5c8.6 0 15.2 6.4 15.2 14.8V261c-.1 8.4-6.7 14.9-15.3 14.9z"/></svg>')}g.appendChild(k);
d.appendChild(g);e.appendChild(d);return e},sidePanelResized:function(){if(a.callbacks.onSnapInPanelResized)a.callbacks.onSnapInPanelResized(dvJQuery(a.dom.leftSideArea).width())},sidePanelToggled:function(b){if(a.callbacks.onSnapInPanelToggle)a.callbacks.onSnapInPanelToggle(b)},removeViewAreaTouchAction:function(){var b=a.dom.viewerArea.getAttribute("style");-1!=b.indexOf("touch-action: auto;")?a.dom.viewerArea.setAttribute("style",b.replace("touch-action: auto;","touch-action: none;")):-1!=!b.indexOf("touch-action:")&&
a.dom.viewerArea.setAttribute("style",b+"touch-action: none;")},addViewAreaTouchAction:function(){var b=a.dom.viewerArea.getAttribute("style");-1!=b.indexOf("touch-action: none;")?a.dom.viewerArea.setAttribute("style",b.replace("touch-action: none;","touch-action: auto;")):-1!=!b.indexOf("touch-action:")&&a.dom.viewerArea.setAttribute("style",b+"touch-action: auto;")}},events:{ownMouseEvents:!1,overLink:null,overPageText:null,overAnnotEditable:!1,mouseMode:0,mouseX:0,mouseY:0,mouseDownX:0,mouseDownY:0,
mouseDownViewerScrollLeft:0,mouseDownViewerScrollTop:0,mouseDownClientX:0,mouseDownClientY:0,isAddingRedactionMarksMode:!1,isDrawingPath:!1,isMouseDown:!1,pathPoints:null,isPanning:!1,isZoomingPreview:!1,freezeScrollEvents:!1,canPan:function(){return!0},isResizingUI:!1,isSelectingText:!1,isDragMultipleSelecting:!1,UIStateVerifier:function(){if(null==a.NewViewerSizeTimeout){var b=a.dom.getViewerContainer();if(null!=b&&(a.viewerWidth!=b.offsetWidth||a.viewerHeight!=b.offsetHeight)&&!a.events.isResizingUI)a.events.onResize()}a.events.isZoomingPreview||
a.hasPendingAction(!0,!1,!0,!1)||a.IsZoomSynchronized()||a.SetCurrentZoom(a.cache.pageCanvasZoom);setTimeout(a.events.UIStateVerifier,300)},restartZoomPreviewAutoSubmitter:function(b){var d=function(){a.events.isZoomingPreview&&(a.events.isZoomingPreviewTouchMode=null,a.events.zoomPreviewWheelValue=null,a.events.isZoomingPreview=!1,a.events.disableSingleInputEvents=!1,a.SetCurrentZoom(a.cache.pageCanvasZoom));clearTimeout(a.EnableZoomPreviewAutoSubmitterTimeout);a.EnableZoomPreviewAutoSubmitterTimeout=
null};if(b||null!=a.EnableZoomPreviewAutoSubmitterTimeout)null!=a.EnableZoomPreviewAutoSubmitterTimeout&&clearTimeout(a.EnableZoomPreviewAutoSubmitterTimeout),a.EnableZoomPreviewAutoSubmitterTimeout=setTimeout(d,2E3)},enableZoomPreviewAutoSubmitter:function(){a.events.restartZoomPreviewAutoSubmitter(!0)},onNewViewerSize:function(){a.NewViewerSizeTimeout&&(clearTimeout(a.NewViewerSizeTimeout),a.NewViewerSizeTimeout=null);a.dom.resizeControlArea();a.dom.searchArea&&dvJQuery(a.dom.searchArea.parentElement).hasClass("active")&&
(a.dom.searchResultsContainer.style.height=dvJQuery(a.dom.searchArea).outerHeight(!0)-dvJQuery(a.dom.searchPanelForm).outerHeight(!0)+"px");var b={sessionID:a.ajax.sessionID,reuseSessionContext:!0,clientConfiguration:a.getConfig(),newViewerSize:!0};a.viewerWidth==b.clientConfiguration.viewerWidth&&a.viewerHeight==b.clientConfiguration.viewerHeight||0===b.clientConfiguration.viewerWidth||0===b.clientConfiguration.viewerHeight||(a.NewViewerSizePreview(),a.NewViewerSizeTimeout=setTimeout(function(){if(a.hasPendingAction(!1,
!1,!0))a.events.onNewViewerSize();else{var d=a.getConfig();b.clientConfiguration.viewerWidth==d.viewerWidth&&b.clientConfiguration.viewerHeight==d.viewerHeight&&(a.viewerWidth=b.clientConfiguration.viewerWidth,a.viewerHeight=b.clientConfiguration.viewerHeight,a.ajax.PostBaseRequest("init",{data:b,success:function(e){var g="string"===typeof e?eval("("+e+")"):e;g&&g.status===DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(g,!1,!1,!0),a.showVisibleThumbnails()):a.ajax.HandleError(e);a.NewViewerSizeTimeout=
null},error:function(){a.NewViewerSizeTimeout=null}},!1,!0))}},300),a.serverCtx.vScrollbarVisible?dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth-a.dom.sbWidth):dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth),dvJQuery(a.dom.mainArea).find(".dvUi-dialog:visible").not(".dvPassword-dialog").find(".dvUi-dialog-content").dvDialog("refresh",dvJQuery(a.dom.controlArea).height()))},onLoad:function(b){if(a.isSafari||a.isIOS||a.isIE10||a.isIE9)null!=a.dom.fullscreenButton&&dvJQuery(a.dom.fullscreenButton).remove(),
null!=a.dom.fullscreenButtonMobile&&dvJQuery(a.dom.fullscreenButtonMobile).remove();a.IsTwainSupportAvailable()||(null!=a.dom.twainAcquisitionButton&&dvJQuery(a.dom.twainAcquisitionButton).remove(),null!=a.dom.twainAcquisitionButtonMobile&&dvJQuery(a.dom.twainAcquisitionButtonMobile).remove());!a.isIE||a.isIE10||a.isIE11||(null!=a.dom.openFromFileButton&&dvJQuery(a.dom.openFromFileButton).remove(),null!=a.dom.openFromFileButtonMobile&&dvJQuery(a.dom.openFromFileButtonMobile).remove());a.isIE&&!a.isIE11&&
null!=a.dom.snapinTabControl&&(a.dom.snapinTabControl.style.position="static");a.isIE&&null!=a.dom.snapinTabControl&&(a.dom.snapinTabControl.style.display="block");a.SetMouseMode(0);1==b&&(a.waitForInit=!0);window.setTimeout(function(){a.dom.resizeControlArea();var d=a.dom.getViewerContainer();a.viewerWidth=d.offsetWidth;a.viewerHeight=d.offsetHeight;a.dom.mainArea.style.visibility="visible";1==b?(d={sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,clientConfiguration:a.getConfig(),reuseSessionContext:!1,
newViewerSize:!1},a.DisplayPendingActionNotification(),a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({requestName:"init",requestData:d}),contentType:"application/json",success:function(e){a.waitForInit=!1;a.HidePendingActionNotification();var g="string"===typeof e?eval("("+e+")"):e;g&&g.status===DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(g),g.documentLoaded&&!a.dom.singlePageView&&(e=a.GetCurrentPage(),
a.Internal.Pages.isPageVisible(e)||a.EnsureCurrentPageVisibility())):a.ajax.HandleError(e)},error:function(e){a.ajax.HandleError(e)}})):2==b&&a.LoadFromUri("","")},100)},onResize:function(){a.events.onNewViewerSize()},forwardMouseEventsToViewer:function(b){window.PointerEvent?(b.onpointerup=function(d){switch(d.pointerType){case "mouse":a.events.mouseup(d);break;case "pen":a.events.mouseup(d);d.preventDefault();break;case "touch":a.events.mouseup(d);d.preventDefault();break;default:a.events.mouseup(d)}},
b.onpointerdown=function(d){switch(d.pointerType){case "mouse":a.events.mousedown(d);break;case "pen":a.events.mousedown(d,!0);case "touch":a.events.mousedown(d,!0);break;default:a.events.mousedown(d)}},b.onpointermove=function(d){switch(d.pointerType){case "mouse":a.events.mousemove(d);break;case "pen":a.events.mousemove(d,!0);d.preventDefault();break;case "touch":a.events.mousemove(d,!0)&&d.preventDefault();break;default:a.events.mousemove(d)}},b.onpointerleave=function(d){switch(d.pointerType){case "mouse":a.events.mouseleave(d);
break;case "pen":a.events.mouseleave(d);break;default:a.events.mouseleave(d)}},b.onpointerenter=function(d){switch(d.pointerType){case "mouse":a.events.mouseenter(d);break;case "pen":a.events.mouseenter(d);break;default:a.events.mouseenter(d)}}):(b.onmouseup=function(d){a.events.mouseup(d)},b.onmousedown=function(d){a.events.mousedown(d)},b.onmousemove=function(d){a.events.mousemove(d)},b.onmouseleave=function(d){a.events.mouseleave(d)},b.onmouseenter=function(d){a.events.mouseenter(d)},b.ontouchstart=
function(d){1==d.changedTouches.length&&a.events.mousedown(d.changedTouches[0],!0)},b.ontouchmove=function(d){1==d.changedTouches.length&&a.events.mousemove(d.changedTouches[0],!0)&&d.preventDefault()},b.ontouchend=function(d){1==d.changedTouches.length&&(a.events.mouseup(d.changedTouches[0]),d.preventDefault())});b.ondblclick=function(d){a.events.dblclick(d)}},dblclick:function(b){if(null==a.dom.drawingModeArea||"block"!=a.dom.drawingModeArea.style.display)a.ExitAnnotationDrawingMode(),this.overPageText&&
0==a.dom.SelectedTextRegions.count(1)&&a.Internal.Text.captureAndHighlightSelectedText(this.mouseDownClientX,this.mouseDownClientY,this.mouseDownClientX,this.mouseDownClientY,!0,!1)},mousedown:function(b,d,e){if(!a.events.disableSingleInputEvents&&3!=b.which){this.isMouseDown=!0;this.mouseX=b.clientX;this.mouseY=b.clientY;this.mouseDownViewerScrollLeft=a.Internal.Coordinates.getViewerScrollLeft();this.mouseDownViewerScrollTop=a.Internal.Coordinates.getViewerScrollTop();this.mouseDownX=b.clientX+this.mouseDownViewerScrollLeft;
this.mouseDownY=b.clientY+this.mouseDownViewerScrollTop;this.mouseDownClientX=b.clientX;this.mouseDownClientY=b.clientY;var g=a.dom.viewerArea.getBoundingClientRect(),k=this.mouseDownX-g.left,p=this.mouseDownY-g.top;e=-1;for(var n=1;n<=a.GetPageCount();n++){var w=a.Internal.Pages.getRenderingState(n),C=w.pageLeft+w.pageWidth,K=w.pageTop+w.pageHeight;if(k>=w.pageLeft&&k<=C&&p>=w.pageTop&&p<=K){e=n;break}}if(1==this.mouseMode)null!=a.Internal.Annotations.hoveredAnnot&&17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type?
a.Internal.Redaction.disableAddRedactionMarksMode():(a.Internal.Annotations.currentInteractiveAnnotPageNo=-1==e?a.GetCurrentPage():e,a.Internal.Selection.selectionArea.startNewAnnotBox(this.mouseDownX-g.left,this.mouseDownY-g.top));else if(2==this.mouseMode)b={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-g.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-g.top},a.Internal.Annotations.currentInteractiveAnnotPageNo=-1==e?a.GetCurrentPage():e,(5==a.Internal.Annotations.currentInteractiveAnnotProperties.type||
16==a.Internal.Annotations.currentInteractiveAnnotProperties.type||a.dom.UIconfig.freeHandContinuousDrawingMode&&10==a.Internal.Annotations.currentInteractiveAnnotProperties.type)&&!a.dom.UIconfig.disableAnnotationDrawingModePanel&&(a.dom.drawingModeArea.style.display="block",a.dom.modalOverlayArea.style.display="block",a.dom.controlArea.style.zIndex="auto"),null==this.pathPoints?(e=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),a.dom.freehandCan.style.left=e.pageLeft+"px",a.dom.freehandCan.style.top=
e.pageTop+"px",a.dom.freehandCan.width=e.pageWidth,a.dom.freehandCan.height=e.pageHeight,a.dom.freehandCan.getContext("2d").clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height),a.dom.freehandCan.style.display="block",this.pathPoints=[b]):(5!=a.Internal.Annotations.currentInteractiveAnnotProperties.type&&16!=a.Internal.Annotations.currentInteractiveAnnotProperties.type&&this.pathPoints.push({x:131072,y:131072}),this.pathPoints.push(b)),d&&a.Internal.Annotations.prerenderPendingFreenhandAnnot(b),
this.isDrawingPath=!0;else if(3==this.mouseMode||4==this.mouseMode)a.Internal.Selection.selectionArea.startNewSelectionBox(this.mouseDownX-g.left,this.mouseDownY-g.top);else{a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);if(!d&&(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,b.clientY,5),null!=this.overPageText)){this.isSelectingText=!0;this.setCursor();return}this.overLink||(1==this.canPan()&&(this.isPanning=!0,a.dom.viewerArea.cursorMgr.setCustomCursorClass("closedHandCursor")),
d&&(this.overLink=!1,a.dom.checkLinkAt(b.clientX,b.clientY)),a.dom.handleLinkRectVisibility())}}},mouseup:function(b){if(!a.events.disableSingleInputEvents){var d=this.isSelectingText;this.isPanning=this.isSelectingText=this.isMouseDown=!1;if(d&&0<a.dom.SelectedTextRegions.count(1))this.setCursor(),a.callbacks.onTextSelected&&(d=a.Internal.Text.getSelectedTextAreas(),a.callbacks.onTextSelected(d)),b=dvJQuery.Event("contextmenu.dv-context-menu-viewerContextMenu"+a.uniqueID,{clientX:b.clientX,clientY:b.clientY,
skipNextCloseEvent:!0}),dvJQuery(a.dom.viewerArea).trigger(b);else if(this.overLink)3!=b.which&&a.IsZoomSynchronized()&&(b=this.overLink.destPage,d=this.overLink.destUri,this.overLink=null,a.dom.handleLinkRectVisibility(),"unknown"!==d&&0===b?a.Internal.Destinations.followLink(d):a.SelectPageEx(b,!0,!0,!0,!1),this.setCursor());else if(1!=this.mouseMode&&3!=this.mouseMode&&4!=this.mouseMode||!a.Internal.Selection.selectionArea.mouseUp(b))if(2==this.mouseMode&&this.isDrawingPath)a.dom.UIconfig.freeHandContinuousDrawingMode&&
10==a.Internal.Annotations.currentInteractiveAnnotProperties.type||5==a.Internal.Annotations.currentInteractiveAnnotProperties.type||16==a.Internal.Annotations.currentInteractiveAnnotProperties.type||(a.dom.freehandCan.style.display="none",this.isDrawingPath=!1,a.Internal.Annotations.addAnnotInteractive());else if(0<a.Internal.Annotations.selected.length)for(b=a.Internal.Annotations.selected.length-1;0<=b;b--)a.Internal.Annotations.selected[b].stopEditing(),a.Internal.Annotations.selected[b].updateCursor();
else this.overPageText||0==this.mouseMode&&1==this.canPan()&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor")}},mousemove:function(b,d){if(!a.events.disableSingleInputEvents)if(this.isSelectingText){a.dom.SelectedTextRegions.clear(1);var e=this.mouseDownViewerScrollLeft-a.Internal.Coordinates.getViewerScrollLeft(),g=this.mouseDownViewerScrollTop-a.Internal.Coordinates.getViewerScrollTop();if((this.mouseDownClientX+e!=b.clientX||this.mouseDownClientY+g!=b.clientY)&&(b=a.Internal.Text.captureSelectedText(this.mouseDownClientX+
e,this.mouseDownClientY+g,b.clientX,b.clientY,!1,b.altKey))&&0<b.length){d=document.createDocumentFragment();for(var k=0;k<b.length;k++)for(var p=0;p<b[k].regions.length;p++)a.dom.SelectedTextRegions.addNew(b[k].pageNo,{left:b[k].regions[p].Left/b[k].scale,top:b[k].regions[p].Top/b[k].scale,width:b[k].regions[p].Width/b[k].scale,height:b[k].regions[p].Height/b[k].scale},"rgba(0,0,201,0.3)",null,1,d);a.dom.viewerArea.appendChild(d)}}else{k=!1;this.overPageText=null;p=!1;1==this.mouseMode&&null!=a.Internal.Annotations.hoveredAnnot&&
17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type&&(p=!0);if(1==this.mouseMode&&!p||3==this.mouseMode||4==this.mouseMode)k=a.Internal.Selection.selectionArea.mouseMove(b,d);2===this.mouseMode&&this.isDrawingPath&&(p=a.dom.viewerArea.getBoundingClientRect(),k=5===a.Internal.Annotations.currentInteractiveAnnotProperties.type||16===a.Internal.Annotations.currentInteractiveAnnotProperties.type,p={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-p.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-
p.top},this.isMouseDown&&!k&&(e=!0,k=this.pathPoints.length,1<k&&(e=this.pathPoints[k-2],g=this.pathPoints[k-1],e=1.5<=Math.sqrt(Math.abs((e.y-g.y)*(e.x-p.x)-(e.y-p.y)*(e.x-g.x)))),e?this.pathPoints.push(p):this.pathPoints[k-1]=p),a.Internal.Annotations.prerenderPendingFreenhandAnnot(p),k=!0);if(!k&&0<a.Internal.Annotations.selected.length)for(e=b.clientX-this.mouseX,g=b.clientY-this.mouseY,p=a.Internal.Annotations.selected.length-1;0<=p;p--){var n=a.Internal.Annotations.selected[p];k|=n.isEditing();
if(n.isMoving){n.annotrectNew.left+=e;n.annotrectNew.top+=g;n.render(!0);if(a.callbacks.onAnnotationMoved)a.callbacks.onAnnotationMoved({id:n.annotApp.id});if(a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(var w=a.Internal.Annotations.selected.length-1;0<=w;w--){var C=a.Internal.Annotations.selected[w];if(C!=n&&(C.annotrectNew.left+=e,C.annotrectNew.top+=g,C.render(!0),a.callbacks.onAnnotationMoved))a.callbacks.onAnnotationMoved({id:C.annotApp.id})}}else if(n.isRotating){if(n.annotApp.properties.rotation=
a.Internal.Utilities.normalizeRotation(n.annotApp.properties.rotation+e),n.render(!1),a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(w=a.Internal.Annotations.selected.length-1;0<=w;w--)C=a.Internal.Annotations.selected[w],C!=n&&(C.annotApp.properties.rotation=a.Internal.Utilities.normalizeRotation(C.annotApp.properties.rotation+e),C.render(!1))}else if(-1!=n.resizingMode){C=-n.annotApp.properties.rotation*Math.PI/180;w=Math.cos(C);C=Math.sin(C);var K=e;
e=e*w-g*C;g=K*C+g*w;K=function(F,Y,aa,ha){switch(Y){case 0:0<F.annotrectNew.width-aa&&(F.annotrectNew.left+=aa,F.addWidth(-aa));F.render(!1);break;case 1:0<F.annotrectNew.width-aa&&(F.annotrectNew.left+=aa,F.addWidth(-aa));0<F.annotrectNew.height-ha&&(F.annotrectNew.top+=ha,F.addHeight(-ha));F.render(!1);break;case 2:0<F.annotrectNew.height-ha&&(F.annotrectNew.top+=ha,F.addHeight(-ha));F.render(!1);break;case 3:0<F.annotrectNew.width+aa&&F.addWidth(aa);0<F.annotrectNew.height-ha&&(F.annotrectNew.top+=
ha,F.addHeight(-ha));F.render(!1);break;case 4:0<F.annotrectNew.width+aa&&F.addWidth(aa);F.render(!1);break;case 5:0<F.annotrectNew.width+aa&&F.addWidth(aa);0<F.annotrectNew.height+ha&&F.addHeight(ha);F.render(!1);break;case 6:0<F.annotrectNew.height+ha&&F.addHeight(ha);F.render(!1);break;case 7:0<F.annotrectNew.width-aa&&(F.annotrectNew.left+=aa,F.addWidth(-aa)),0<F.annotrectNew.height+ha&&F.addHeight(ha),F.render(!1)}};K(n,n.resizingMode,e,g);if(a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(w=
a.Internal.Annotations.selected.length-1;0<=w;w--)C=a.Internal.Annotations.selected[w],C!=n&&K(C,n.resizingMode,e,g)}n.updateCursor()}k||0!=this.mouseMode||d||1!=this.canPan()||1!=this.isPanning||(k=!0,dvJQuery(a.dom.viewerArea).scrollLeft(this.mouseDownViewerScrollLeft-(b.clientX-this.mouseDownClientX)),dvJQuery(a.dom.viewerArea).scrollTop(this.mouseDownViewerScrollTop-(b.clientY-this.mouseDownClientY)));this.overLink=!1;3!=this.mouseMode&&4!=this.mouseMode&&(k||(a.dom.checkLinkAt(b.clientX,b.clientY)||
(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,b.clientY,5)),this.setCursor()),a.dom.handleLinkRectVisibility());this.mouseX=b.clientX;this.mouseY=b.clientY;return k}},mouseleave:function(b){a.events.disableSingleInputEvents||this.isResizingUI||this.isSelectingText||(this.isPanning=!1,0==this.mouseMode&&a.dom.viewerArea.cursorMgr.setStdCursor("default"),this.overLink=null,a.dom.handleLinkRectVisibility())},mouseenter:function(b){this.isResizingUI||this.isSelectingText||this.setCursor()},
setCursor:function(){if(this.isResizingUI)a.dom.viewerArea.cursorMgr.setStdCursor("col-resize");else switch(this.mouseMode){case 0:if(null!=this.overPageText){var b=a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getRenderRotation(this.overPageText.page)),d=a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getPageRotation(this.overPageText.page)),e=a.Internal.Rotations.getRotateFlipTypeAngle(this.overPageText.textRotate);b=b+e-d;360<b?b-=360:0>b&&(b+=360);90==b||270==b?a.dom.viewerArea.cursorMgr.setStdCursor("vertical-text"):
a.dom.viewerArea.cursorMgr.setStdCursor("text");break}if(this.overLink){a.dom.viewerArea.cursorMgr.setStdCursor("pointer");break}1==this.canPan()?1==!this.isPanning&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor"):a.dom.viewerArea.cursorMgr.setStdCursor("default");break;case 1:null!=a.Internal.Annotations.hoveredAnnot&&17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type?a.dom.viewerArea.cursorMgr.setStdCursor("default"):a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");
break;case 2:a.dom.viewerArea.cursorMgr.setCustomCursorClass("pencilCursor");break;case 3:case 4:a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");break;case 5:a.dom.viewerArea.cursorMgr.setStdCursor("none")}},onSnapInButtonMouseEnter:function(b){dvJQuery(b).hasClass("active")||(b.style.backgroundColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.cursor="pointer")},onSnapInButtonMouseLeave:function(b){dvJQuery(b).hasClass("active")||
(b.style.backgroundColor=a.dom.UIconfig.headerColor,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderTop,b.style.cursor="default")},onThumbnailAreaMouseDownHandler:function(b){if(b.target==document.getElementById(a.FindSnapIn("thumbnails").snapInID)||b.target==a.dom.thumbnailArea){var d=document.getElementById(a.FindSnapIn("thumbnails").snapInID);d=dvJQuery(d).offset().left+dvJQuery(d).width()-a.dom.sbWidth;b.pageX>d||(b.ctrlKey||(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.dom.updateThumbsStyle(!1,
!0)),a.dom.thumbnailSelectBox&&(a.dom.thumbnailSelectBoxOrigin.left=b.pageX-dvJQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,a.dom.thumbnailSelectBoxOrigin.top=b.pageY-dvJQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,b={display:"block",left:a.dom.thumbnailSelectBoxOrigin.left+"px",top:a.dom.thumbnailSelectBoxOrigin.top+"px",width:"1px",height:"1px"},a.dom.thumbnailSelectBox.addClass("active").css(b),a.events.isDragMultipleSelecting=!0))}},onThumbnailAreaMouseMoveHandler:function(b){if(a.dom.thumbnailSelectBox.is(".active")){var d=
b.pageX-dvJQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,e=b.pageY-dvJQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,g=d,k=e,p=a.dom.thumbnailSelectBoxOrigin.left-g,n=a.dom.thumbnailSelectBoxOrigin.top-k;d>a.dom.thumbnailSelectBoxOrigin.left&&(g=a.dom.thumbnailSelectBoxOrigin.left,p=d-a.dom.thumbnailSelectBoxOrigin.left);e>a.dom.thumbnailSelectBoxOrigin.top&&(k=a.dom.thumbnailSelectBoxOrigin.top,n=e-a.dom.thumbnailSelectBoxOrigin.top);a.dom.thumbnailSelectBox.css({left:g+
"px",top:k+"px",width:p+"px",height:n+"px"});d=a.getVisibleThumbnails(!1);p=dvJQuery(a.dom.thumbnailSelectBox).position();e=p.left;g=p.top;k=p.left+dvJQuery(a.dom.thumbnailSelectBox).width();p=p.top+dvJQuery(a.dom.thumbnailSelectBox).height();for(n=0;n<d.length;n++){var w=dvJQuery(a.dom.thumbnailArea.children[d[n]-1]),C=w.position(),K=C.left,F=C.top,Y=C.left+w.width();C=C.top+w.height();(w=a.Internal.Thumbnails.getThumbnailPage(w.get(0)))&&(a.Internal.Coordinates.hasIntersection(e,g,k,p,K,F,Y,C)?
a.Internal.Thumbnails.selectThumbnail(w):b.ctrlKey||a.Internal.Thumbnails.unselectThumbnail(w))}d=document.getElementById(a.FindSnapIn("thumbnails").snapInID);b.pageY+20>dvJQuery(d).offset().top+dvJQuery(d).height()&&(d.scrollTop+=20);b.pageY-20<dvJQuery(d).offset().top&&(d.scrollTop-=20);b.preventDefault()}},onThumbnailAreaMouseUpHandler:function(b){a.dom.thumbnailSelectBox.is(".active")&&(a.dom.thumbnailSelectBox.removeClass("active").css("display","none"),a.events.isDragMultipleSelecting=!1);b.preventDefault()},
onThumbnailItemClickHandler:function(b){if(!a.events.isResizingUI&&(b.stopImmediatePropagation(),b&&b.target)){var d=a.Internal.Thumbnails.getThumbnailPage(b.target);d&&a.serverCtx.documentLoaded&&0<d&&d<=a.serverCtx.pageCount&&(a.dom.UIconfig.enableMultipleThumbnailSelection&&b.ctrlKey?a.Internal.Thumbnails.toggleThumbnailSelection(d):0==a.dom.viewerArea.offsetWidth||0==a.dom.viewerArea.offsetHeight?(a.ajax.latestSelectedPage=d,a.dom.updateThumbsStyle(!1,!1)):(b=a.Internal.Thumbnails.isThumbnailSelected(d),
a.SelectPageEx(d,!1,!0,!0,!0),a.Internal.Thumbnails.setThumbnailSelected(d,!b)))}},onThumbnailItemMouseOverHandler:function(b){!a.events.isResizingUI&&!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over","true"),a.dom.updateThumbStyle(b))},onThumbnailItemMouseOutHandler:function(b){!a.events.isResizingUI&&!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&
(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over","false"),a.dom.updateThumbStyle(b))},onBookmarkItemClickHandler:function(b){!a.events.isResizingUI&&b&&b.target&&(a.dom.selectBookmark(b.target),b.target.action&&(-1<b.target.action.indexOf("PdfPageDest")?a.Internal.Pages.selectByDestination(b.target.action):-1<b.target.action.indexOf("uri")&&window.open(b.target.action.replace("uri:","").trim(),"_blank")))},onBookmarkItemMouseOverHandler:function(b){a.events.isResizingUI||
(b.stopPropagation(),b&&b.currentTarget&&a.dom.setBookmarkOverStyle(b.currentTarget,!0))},onBookmarkItemMouseOutHandler:function(b){a.events.isResizingUI||b&&b.currentTarget&&a.dom.setBookmarkOverStyle(b.currentTarget,!1)},onBookmarkTogglerClickHandler:function(b){if(!a.events.isResizingUI&&b&&b.target){var d=dvJQuery(b.target).parent().find("ul");dvJQuery(b.target).hasClass("collapsed")?(dvJQuery(b.target).removeClass("collapsed").addClass("expanded"),d.show(),0!=dvJQuery(b.target).parent().children("ul").children("li").children("span.placeholder").length&&
b.target.bookmarkID&&(b={url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),data:JSON.stringify({requestName:"bookmarks",requestData:{sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,bookmarkID:b.target.bookmarkID}}),contentType:"application/json",success:function(e){var g="string"===typeof e?eval("("+e+")"):e;if(g&&g.status===DocuViewareAPI.Status.OK){if(d.empty(),g.bookmarks)for(e=0;e<g.bookmarks.length;e++)a.dom.createBookmarkNode(d,g.bookmarks[e])}else a.ajax.HandleError(e)},
error:function(e){a.ajax.HandleError(e)}},a.ajax.PostAjaxRequestForDocuViewareAction(b,!1,!0))):(dvJQuery(b.target).removeClass("expanded").addClass("collapsed"),d.hide())}}},doNextPageViewProcess:function(){if(!this.serverCtx.documentLoaded||!this.cache.canvas)return DocuViewareAPI.Status.GenericError;if(!a.IsZoomSynchronized())return 0;var b=0;this.serverCtx.singlePageView||(b=this.showVisiblePages(a.GetCurrentPage()));if(!(0==this.serverCtx.pagePreload||this.serverCtx.hasVariableZoomRange&&this.serverCtx.singlePageView)){var d=
this.serverCtx.minPagesPreloadPerRequest,e=this.serverCtx.maxPagesForAllPagesPreloadingMode,g=[];if(0==b&&1==(this.serverCtx.pagePreload&1)){var k=this.Internal.Pages.getVisiblePageNumbers();if(0<k.length){var p=k[k.length-1]+1;k=k[0]-1;var n=0==k,w=p==this.serverCtx.pageCount+1;if(null!=a.cache.Pages)for(var C=0;C<a.cache.Pages.length&&(0==n&&a.cache.Pages[C].pageNo==k?(a.cache.Pages[C].bitmap||a.cache.Pages[C].renderStatus==DocuViewareAPI.Status.OK&&g.push(k),n=!0):a.cache.Pages[C].pageNo==p&&(a.cache.Pages[C].bitmap||
a.cache.Pages[C].renderStatus==DocuViewareAPI.Status.OK&&g.push(p),w=!0),!n||!w);C++);n||g.push(k);w||g.push(p)}}if(g.length<d&&2==(this.serverCtx.pagePreload&2)&&e>=this.serverCtx.pageCount)for(e=1;e<=this.serverCtx.pageCount&&(p=!1,(k=a.Internal.Pages.getPage(e))&&(k.bitmap||k.renderStatus!=DocuViewareAPI.Status.OK)&&(p=!0),p||(g.push(e),g.length!=d));e++);0<g.length&&(b=this.Internal.Pages.pageView(g,!1,!1))}return b},showVisiblePages:function(b){var d=this.Internal.Pages.getVisiblePageNumbers();
if(null!=b)for(var e=0;e<d.length;e++)if(d[e]==b){d.splice(e,1);break}return this.Internal.Pages.pageView(d,!0,!1)},previewVisiblePages:function(){for(var b=this.Internal.Pages.getVisiblePageNumbers(),d=0;d<b.length;d++){var e=a.Internal.Pages.getPage(b[d]);e&&(!e.bitmap||e.drawing||e.drawn||e.drawnPreview||a.DrawPage(e,!0))}},showVisibleThumbnails:function(){this.Internal.Files.uploading||this.ajax.downloading||a.events.isResizingUI||this.dom.thumbnailArea&&1==this.serverCtx.documentLoaded&&this.updateThumbnails(a.getVisibleThumbnails(!0))},
getVisibleThumbnails:function(b){var d=this.dom.thumbnailArea,e=this.dom.thumbnailArea.scrollLeft,g=this.dom.thumbnailArea.scrollTop,k=e+dvJQuery(d).innerWidth();d=g+dvJQuery(d).innerHeight();for(var p=this.dom.thumbnailArea.childElementCount,n=[],w=!1,C=0;C<p;C++){var K=this.dom.thumbnailArea.children[C];if(0!=a.Internal.Thumbnails.getThumbnailPage(K)){var F=dvJQuery(K).position().left,Y=dvJQuery(K).position().top,aa=F+dvJQuery(K).innerWidth(),ha=Y+dvJQuery(K).innerHeight();if(a.Internal.Coordinates.hasIntersection(e,
g,k,d,F,Y,aa,ha))b?"false"==K.getAttribute("data-moving")&&"false"==K.getAttribute("data-loaded")&&"false"==K.getAttribute("data-loading")&&n.push(C+1):n.push(C+1),w=!0;else if(w)break}}return n},sortCommentsBy:function(b){var d=function(e,g,k,p){var n=function(C,K){if(K){K=K.split(".");for(var F=0,Y=K.length-1;F<Y;F++)C=C[K[F]];return C[K[Y]]}return C},w=function(C){return k?k(n(C,e)):n(C,e)};return function(C,K){var F=w(C),Y=w(K);return(F<Y?-1:F>Y?1:"function"===typeof p?p(C,K):0)*[1,-1][+!!g]}};
switch(dvJQuery(a.dom.commentsSortBySelect).find("option:selected").val()){case "page":b.sort(d("comment.annotApp.pageNo",!1,null,d("comment.annotApp.zorder",!1,parseFloat)));break;case "author":b.sort(d("comment.annotApp.author",!1,function(e){return e.toUpperCase()}));break;case "date":b.sort(d("comment.annotApp.creationTime",!1,function(e){return new Date(e)}))}},refreshCommentsPanel:function(){null!=a.cache.AnnotsComments&&0<a.cache.AnnotsComments.length?(dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display",
"none"),dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity","1")):(dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display","block"),dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity","0.5"));var b=dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID),d=b.clone();b.empty();b=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy);for(var e=0;e<b.length;e++)for(var g=a.Internal.Annotations.getFirstAnnotationCommentAnswerOfDiscussion(b[e].comment.annotApp.id);null!=
g;)null==b[e].answers?b[e].answers=[g]:b[e].answers.push(g),g=a.Internal.Annotations.getAnnotationCommentFromId(g.annotApp.properties.nextGuid);for(e=0;e<b.length;e++)a.dom.createCommentItem(b[e].comment,b[e].answers,d.find("#dvcomment-"+b[e].comment.annotApp.id+"-"+a.uniqueID));dvJQuery(function(){dvJQuery(".dvtoggle").off();dvJQuery(".dvtoggle").click(function(k){k.stopPropagation();dvJQuery(this).parents(".dvcomment-header").next(".dvcomment-content").slideToggle();dvJQuery(this).toggleClass("dvcolapsed")})})},
updateThumbnails:function(b,d){if(0!=b.length&&a.dom.thumbnailArea&&a.dom.thumbnailArea.children){if(d){for(var e=0;e<b.length;e++){var g=a.Internal.Thumbnails.getThumbnailFromPageNo(b[e]);if(null==g||null!=g&&("false"==g.attr("data-loaded")||"true"==g.attr("data-loading")))b.splice(e,1),e--}if(0==b.length)return}for(e=0;e<b.length;e++)g=a.Internal.Thumbnails.getThumbnailFromPageNo(b[e]),null!=g&&g.attr("data-loading","true");var k=function(){if(a.dom.thumbnailArea&&a.dom.thumbnailArea.children)for(var p=
0;p<b.length;p++){var n=a.Internal.Thumbnails.getThumbnailFromPageNo(b[p]);null!=n&&(n.attr("data-loaded","false"),n.attr("data-loading","false"))}};a.debug&&console.log("DocuVieware: showing visible thumbnails: "+JSON.stringify(b)+"onlyIfLoaded "+(d?"true":"false"));this.ajax.thumbnailRequestNo+=1;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({requestName:"thumbnails",requestData:{sessionID:this.ajax.sessionID,
contextID:this.ajax.contextID,entries:b,requestNo:this.ajax.thumbnailRequestNo}}),contentType:"application/json",success:function(p){if((p="string"===typeof p?eval("("+p+")"):p)&&p.status==DocuViewareAPI.Status.OK){if(p.contextID==a.ajax.contextID&&a.dom.thumbnailArea&&(p=p.images)&&0<p.length){for(var n=0;n<p.length;n++){var w=a.Internal.Thumbnails.getThumbnailFromPageNo(p[n].pageNo);if(null!=w){w.attr("data-loaded","true");w.attr("data-loading","false");w=w.children("canvas");w.removeClass("spinner-thumb");
w.css("backgroundColor","rgba(0,0,0,0)");var C=new Image;C.owner=w.get(0);C.setAttribute("data-pageNo",p[n].pageNo);C.src="data:"+p[n].mime+";base64,"+p[n].data;var K=p[n].scale;C.onload=function(){var F=this.owner.getContext("2d");F.clearRect(0,0,this.owner.width,this.owner.height);F.save();1==K?(F.mozImageSmoothingEnabled=!1,F.msImageSmoothingEnabled=!1,F.imageSmoothingEnabled=!1):F.transform(1/K,0,0,1/K,0,0);F.shadowColor=a.Internal.Thumbnails.THUMBNAIL_SHADOW_COLOR;F.shadowBlur=a.Internal.Thumbnails.THUMBNAIL_SHADOW_BLUR;
F.shadowOffsetX=a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSETX;F.shadowOffsetY=a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSETY;if(a.isIE9){var Y=this;window.setTimeout(function(){F.drawImage(Y,0,0);F.restore();F=null},100)}else F.drawImage(this,0,0),F.restore(),F=null}}}a.dom.updateThumbsStyle(!1,!1)}}else k()},error:function(p){a.ajax.HandleError(p);k()}})}},ResetScrollConfig:function(b){a.isIOS?a.dom.viewerArea.style.overflow="auto":a.serverCtx.scrollBars?a.dom.viewerArea.style.overflow="auto":(a.dom.viewerArea.style.overflowY=
"hidden",a.dom.viewerArea.style.overflowX="hidden")},ClearUI:function(){a.ajax.SetNewServerCtx(null)},IsZoomSynchronized:function(){return Math.round(1E3*a.serverCtx.zoom)===Math.round(1E3*a.cache.pageCanvasZoom)},SetupViewerArea:function(b,d,e,g){var k=Math.round(1E3*a.serverCtx.zoom)!=Math.round(1E3*d);k||g||(a.cache.pageCanvasSizeNoPreview=DocuViewareUtilities.clonePageCanvasSizes(b));var p=!0;if(Math.round(1E3*a.cache.pageCanvasZoom)==Math.round(1E3*d)&&null!=b&&null!=a.cache.pageCanvasSize&&
a.cache.pageCanvasSize.length==b.length){p=!1;g=!0;for(var n=0;n<b.length;n++){var w=b[n].PageNo==a.cache.pageCanvasSize[n].PageNo&&1>=Math.abs(b[n].Width-a.cache.pageCanvasSize[n].Width)&&1>=Math.abs(b[n].Height-a.cache.pageCanvasSize[n].Height);w||(p=!0);if(!w||1<Math.abs(b[n].OffsetX-a.cache.pageCanvasSize[n].OffsetX)||1<Math.abs(b[n].OffsetY-a.cache.pageCanvasSize[n].OffsetY))g=!1}if(g)return}g=a.isIOS?1024:2048;e=!p||e&&Math.round(1E3*a.cache.pageCanvasZoom)==Math.round(1E3*d);e||(a.cache.emptyCanvas(),
a.cache.canvas=[],a.cache.pageCanvasZoom=d);a.cache.pageCanvasSize=b;n=DocuViewareUtilities.getPageCanvasSize(a.cache.pageCanvasSize);d=a.dom.viewerArea.clientWidth;p=a.dom.viewerArea.clientHeight;w=d<n.width;p<n.height&&(d-=a.dom.sbWidth);w&&(p-=a.dom.sbWidth);a.dom.panDiv.style.width=Math.round(Math.max(n.width,d)-2).toString()+"px";a.dom.panDiv.style.height=Math.round(Math.max(n.height,p)-2).toString()+"px";d=e?null:document.createDocumentFragment();for(n=0;n<b.length;n++){p=b[n].OffsetX;w=b[n].OffsetY;
var C=b[n].Width+p,K=b[n].Height+w,F=e?a.cache.canvas[n]:[],Y=Math.ceil(b[n].Width/g),aa=Math.ceil(b[n].Height/g),ha=b[n].Width*b[n].Height>g*g,da=DocuViewareUtilities.getDevicePixelRatio();if(ha&&(1<Y||1<aa))for(var la=ha=0,Ha=0;Ha<aa;Ha++){la+=g;la-1>b[n].Height&&(la=b[n].Height-1);var wa=la-ha;if(0>=wa)break;for(var va=0,ua=0,Da=0;Da<Y;Da++){ua+=g;ua-1>b[n].Width&&(ua=b[n].Width-1);var Ua=ua-va,Ka=e?F.canvas[Ha*Y+Da].tile:document.createElement("canvas");e||(Ka.width=Ua*da,Ka.height=wa*da,Ka.style.width=
Ua+"px",Ka.style.height=wa+"px",Ka.style.display="block",Ka.style.position="absolute",Ka.style.padding="0px",Ka.style.margin="0px",Ka.style.backgroundColor="white");Ka.style.left=p+va+"px";Ka.style.top=w+ha+"px";e?(F.canvas[Ha*Y+Da].tx=-(va*da),F.canvas[Ha*Y+Da].ty=-(ha*da)):(d.appendChild(Ka),F.push({tile:Ka,tx:-(va*da),ty:-(ha*da)}));va+=Ua}ha+=wa}else Ka=e?F.canvas[0].tile:document.createElement("canvas"),e||(Ka.width=Math.ceil(b[n].Width*da),Ka.height=Math.ceil(b[n].Height*da),Ka.style.width=
Math.ceil(b[n].Width)+"px",Ka.style.height=Math.ceil(b[n].Height)+"px",Ka.style.display="block",Ka.style.position="absolute",Ka.style.padding="0px",Ka.style.margin="0px",Ka.style.backgroundColor="white",Ka.style.boxShadow="3px 3px 8px rgba(0,0,0,.1)",d.appendChild(Ka),F.push({tile:Ka,tx:0,ty:0})),Ka.style.left=p+"px",Ka.style.top=w+"px";e?(a.cache.canvas[n].top=w,a.cache.canvas[n].left=p,a.cache.canvas[n].right=C,a.cache.canvas[n].bottom=K):a.cache.canvas.push({canvas:F,top:w,left:p,right:C,bottom:K,
pageNo:b[n].PageNo})}e||(a.SetMouseMode(a.events.mouseMode),a.dom.viewerArea.insertBefore(d,a.dom.panDiv),a.dom.freehandCan||(a.dom.freehandCan=document.createElement("canvas")),a.dom.freehandCan.style.position="absolute",a.dom.freehandCan.style.padding="0px",a.dom.freehandCan.style.margin="0px",a.dom.freehandCan.style.display="none",a.dom.freehandCan.style.zIndex=a.dom.zindexManager.getFreehandDrawingCanvasZindex(),window.PointerEvent?(dvJQuery(a.dom.freehandCan).css("touch-action","none"),a.dom.freehandCan.onpointerup=
function(pa){switch(pa.pointerType){case "mouse":a.events.mouseup(pa);break;case "pen":a.events.mouseup(pa);break;case "touch":a.events.mouseup(pa);break;default:a.events.mouseup(pa)}},a.dom.freehandCan.onpointerdown=function(pa){switch(pa.pointerType){case "mouse":a.events.mousedown(pa,!1,!1);break;case "pen":a.events.mousedown(pa,!1,!0);break;case "touch":a.events.mousedown(pa,!0,!1);break;default:a.events.mousedown(pa,!1,!1)}},a.dom.freehandCan.onpointermove=function(pa){switch(pa.pointerType){case "mouse":a.events.mousemove(pa,
!1);break;case "pen":pa.preventDefault();a.events.mousemove(pa,!0);break;case "touch":pa.preventDefault();a.events.mousemove(pa,!0);break;default:a.events.mousemove(pa,!1)}},a.dom.freehandCan.onpointerleave=function(pa){switch(pa.pointerType){case "mouse":a.events.mouseleave(pa);break;case "pen":a.events.mouseleave(pa);break;default:a.events.mouseleave(pa)}},a.dom.freehandCan.onpointerenter=function(pa){switch(pa.pointerType){case "mouse":a.events.mouseenter(pa);break;case "pen":a.events.mouseenter(pa);
break;default:a.events.mouseenter(pa)}}):(a.dom.freehandCan.onmouseup=function(pa){a.events.mouseup(pa)},a.dom.freehandCan.onmousedown=function(pa){a.events.mousedown(pa)},a.dom.freehandCan.onmousemove=function(pa){a.events.mousemove(pa)},a.dom.freehandCan.onmouseleave=function(pa){a.events.mouseleave(pa)},a.dom.freehandCan.onmouseenter=function(pa){a.events.mouseenter(pa)},a.dom.freehandCan.ontouchstart=function(pa){1==pa.changedTouches.length&&a.events.mousedown(pa.changedTouches[0])},a.dom.freehandCan.ontouchmove=
function(pa){1==pa.changedTouches.length&&(pa.preventDefault(),a.events.mousemove(pa.changedTouches[0],!0))},a.dom.freehandCan.ontouchend=function(pa){1==pa.changedTouches.length&&a.events.mouseup(pa.changedTouches[0])}),a.dom.freehandCan.ondblclick=function(pa){a.events.dblclick(pa)},a.dom.viewerArea.appendChild(a.dom.freehandCan),null!=a.dom.annotationsActionButtons&&a.dom.viewerArea.appendChild(a.dom.annotationsActionButtons));a.Internal.Selection.clearSelectionArea();a.UpdatePageBoundsDiv(a.GetCurrentPage());
a.dom.SelectedTextRegions.onPageBoundsChanged();a.dom.handleLinkRectVisibility();if(k)null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide();else if(null!=a.cache.Annots)for(b=0;b<a.cache.Annots.length;b++)k=a.cache.Annots[b],k.annotApp.visible&&(g=a.cache.getPageCanvas(k.annotApp.pageNo),null!=g&&(k.updatePageInfo(g.left,g.top,null),k.render()));if(null!=a.cache.FormFields)for(b=0;b<a.cache.FormFields.length;b++)a.cache.FormFields[b].render()},UpdateUI:function(b,d,
e,g,k,p,n){a.Internal.Annotations.hoveredAnnot=null;var w=null!=a.serverCtx&&a.serverCtx.documentLoaded;b&&(this.ajax.latestSelectedPage=this.serverCtx.selectedPage);this.dom.singlePageView!=this.serverCtx.singlePageView&&(this.dom.singlePageView=this.serverCtx.singlePageView,this.dom.updateSinglePageModeButton());k||!a.serverCtx.clearCachedBitmap&&!a.serverCtx.clearCachedPages||(a.serverCtx.clearCachedPages?(a.debug&&console.log("DocuVieware: Cached pages removed. zoom: "+a.serverCtx.zoom),a.cache.clearCachedPages()):
a.serverCtx.clearCachedBitmap&&(a.debug&&console.log("DocuVieware: Cached bitmap removed. zoom: "+a.serverCtx.zoom),a.cache.clearCachedBitmap()),a.serverCtx.clearCachedBitmap=!1,a.serverCtx.clearCachedPages=!1);this.ResetScrollConfig(!1);if(w){var C=[];if(null!=a.serverCtx.pageCanvasSize){a.SetupViewerArea(a.serverCtx.pageCanvasSize,a.serverCtx.zoom,n);a.serverCtx.pageCanvasSize=null;if(a.cache.viewRotation!=a.serverCtx.viewRotation&&a.serverCtx.applyViewRotationToThumbnails)for(n=1;n<=a.serverCtx.pageCount;n++)a.Internal.Thumbnails.resetThumbnailFromPageNo(n);
if(a.serverCtx.thumbnailsReset){for(n=0;n<a.serverCtx.thumbnailsReset.length;n++)a.Internal.Thumbnails.resetThumbnailFromPageNo(a.serverCtx.thumbnailsReset[n]);a.serverCtx.thumbnailsReset=null}a.cache.viewRotation=a.serverCtx.viewRotation}if(a.serverCtx.pagesReset){for(n=0;n<a.serverCtx.pagesReset.length;n++)a.cache.clearPage(a.serverCtx.pagesReset[n]);a.serverCtx.pagesReset=null}d||(a.debug&&console.log("DocuVieware: Setting scrollbar values of page: "+a.GetCurrentPage()+" / "+a.GetLastPageNoRequest()+
" v: "+a.serverCtx.vScrollbarVal.toString()),a.events.freezeScrollEvents=!0,setTimeout(function(){a.events.freezeScrollEvents=!1},1E3),a.serverCtx.vScrollbarVisible&&a.serverCtx.hScrollbarVisible?(a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal,2),a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal,2)):a.serverCtx.vScrollbarVisible?a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal,2):a.serverCtx.hScrollbarVisible&&a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal,
2));null!=a.serverCtx.annotsComments&&a.dom.commentsArea&&(a.Internal.Annotations.setAnnotationsComments(a.serverCtx.annotsComments),a.refreshCommentsPanel());null!=a.serverCtx.annotsRedactionReferences&&a.dom.redactionsPanel&&(a.Internal.Annotations.setAnnotsRedactionReferences(a.serverCtx.annotsRedactionReferences),a.Internal.Redaction.refreshRedactionPanel(!1));if(null!=a.serverCtx.page)for(n=0;n<a.serverCtx.page.length;n++){var K=!1;d=a.serverCtx.page[n].pageNo;var F=a.Internal.Pages.getPage(d);
F&&(K=!0,!k&&a.serverCtx.page[n].data&&(F.bitmap=null));K||(F={pageNo:d,drawn:!1,drawnPreview:!1,drawing:!1},a.cache.cachePage(F));F.renderStatus=a.serverCtx.page[n].renderStatus;k||(p||(F.renderRotation=a.serverCtx.page[n].renderRotation,F.pageRotation=a.serverCtx.page[n].pageRotation,F.viewRotation=a.serverCtx.page[n].viewRotation,F.drawn&&!a.Internal.Matrix.equal(F.matrix,a.serverCtx.page[n].matrix)&&(F.drawn=!1),F.matrix=a.serverCtx.page[n].matrix,F.contentMatrix=a.serverCtx.page[n].contentMatrix,
F.zoom=a.serverCtx.page[n].zoom,F.viewRotation=a.serverCtx.page[n].viewRotation),F.width=a.serverCtx.page[n].width,F.height=a.serverCtx.page[n].height);if(a.serverCtx.page[n].formFields&&(K=a.serverCtx.page[n].formFields,K.firstAccess&&(a.Internal.FormFields.removePageFormFields(F.pageNo),F.drawn&&(F.drawn=!1)),K.formFieldsApp)){for(var Y=0;Y<K.formFieldsApp.length;Y++)a.Internal.FormFields.newController(K.formFieldsApp[Y]);F.drawn&&(F.drawn=!1)}if(a.serverCtx.page[n].annots&&(K=a.serverCtx.page[n].annots,
K.firstAccess&&(a.Internal.Annotations.removePageAnnots(F.pageNo),F.drawn&&(F.drawn=!1)),K.annotsApp)){Y=a.cache.getPageCanvas(F.pageNo);for(var aa=0;aa<K.annotsApp.length;aa++)a.Internal.Annotations.newController(K.annotsApp[aa],null!=Y?Y.left:0,null!=Y?Y.top:0,F.contentMatrix);F.drawn&&(F.drawn=!1)}a.serverCtx.page[n].text&&(F.text=a.serverCtx.page[n].text);a.serverCtx.page[n].links&&(F.links=a.serverCtx.page[n].links);a.GetCurrentPage()===F.pageNo&&a.UpdatePageBoundsDiv(F.pageNo);k||(a.serverCtx.page[n].data?
(K=new Image,K.src="data:"+a.serverCtx.page[n].mime+";base64,"+a.serverCtx.page[n].data,a.cache.attachImageToPage(F,K,a.serverCtx.page[n].scale,a.serverCtx.page[n].hasTransparency),F.drawn=!1,K.setAttribute("data-pageNo",d),e&&(F.drawing=!0,K.onload=function(ha){ha=parseInt(this.getAttribute("data-pageNo"));a.DrawPage(a.cache.getPageObject(ha),!1)})):e&&(null!=F.bitmap?a.Internal.Pages.isPageVisible(F.pageNo)&&(F.drawing=!0,a.DrawPage(F,!1)):(a.debug&&console.log("DocuVieware: draw page request without attached bitmap "+
d+". render status: "+F.renderStatus),F.renderStatus==DocuViewareAPI.Status.OK&&(F.renderStatus=DocuViewareAPI.Status.GenericError))),a.serverCtx.page[n].updateThumbnail&&C.push(d));a.serverCtx.page[n]=null;null==F.bitmap&&(F.TransferRetries||(F.TransferRetries=0),F.TransferRetries++<DocuViewareConstants.MAX_PAGE_TRANSFER_RETRIES&&(a.debug&&console.log("DocuVieware: new page content received without attached bitmap "+d+". Total retries: "+parseFloat(F.TransferRetries)),a.Internal.Pages.pageView([F.pageNo],
!1,!0)))}a.updateThumbnails(C,!0)}if(b){if(0<a.serverCtx.pageCount&&a.dom.thumbnailArea){e=document.createDocumentFragment();for(k=0;k<a.serverCtx.pageCount;k++)e.appendChild(a.Internal.Thumbnails.createThumbnail(k+1));a.dom.thumbnailArea.appendChild(e);a.dom.updateThumbsStyle(!0,!0);a.Internal.Thumbnails.setThumbnailSelected(this.serverCtx.selectedPage,!0)}if(null!=a.serverCtx.bookmarks&&a.dom.bookmarksArea){for(n=0;n<a.serverCtx.bookmarks.length;n++)e=a.serverCtx.bookmarks[n],a.dom.createBookmarkNode(dvJQuery(a.dom.bookmarksTree),
e);a.SetSnapInVisibility("bookmarks",!0)}}if(!w||b||g)a.SetSnapInVisibility("annotations",w&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("comments",w&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("thumbnails",w),a.SetSnapInVisibility("bookmarks",w&&0<dvJQuery(a.dom.bookmarksTree).children().length),a.SetSnapInVisibility("search",w&&a.serverCtx.enableTextSearch),a.SetSnapInVisibility("redaction",w&&a.serverCtx.hasRedactionSupport),a.SetSnapInVisibility("digisign",w&&a.serverCtx.enableDigiSign&&
3===a.serverCtx.documentType);a.dom.leftSideArea&&(a.isIE9||a.isIE10)&&dvJQuery(a.dom.leftSideContainerPanelsArea).height(dvJQuery(a.dom.controlArea).height()-dvJQuery(a.dom.snapinsHeader).height());w&&(a.isIEorEdge&&!a.serverCtx.singlePageView&&a.serverCtx.vScrollbarMax>DocuViewareConstants.IE_MAX_SCROLL_TOP_LIMIT?a.ToggleSinglePageViewMode():(a.showVisibleThumbnails(),a.doNextPageViewProcess()))},UpdatePageBoundsDiv:function(b){a.dom.pageBoundsDiv.style.display="none"},DrawPage:function(b,d){if(null!==
b&&null!==b.matrix&&null!=b.bitmap){var e=a.cache.getPageCanvas(b.pageNo);b.drawing=!1;if(null!==e){var g=b.zoom,k=Math.round(1E3*g)!==Math.round(1E3*a.cache.pageCanvasZoom),p;(p=d?!b.drawnPreview:!b.drawn)&&b.viewRotation!==a.cache.viewRotation&&(p=!1);if(p){var n=null;p=b.matrix;var w=DocuViewareUtilities.getDevicePixelRatio(),C=a.serverCtx.enableSmoothing,K=!(a.isIE||a.isFirefox),F="high";k&&(C=!0,1!==w&&(F="medium"),g=a.cache.pageCanvasZoom/g,p=a.Internal.Matrix.combine(p,{a:g,b:0,c:0,d:g,e:0,
f:0}));1!==w&&a.Internal.Matrix.isRotatedOrFlipped(p)&&(p=a.Internal.Matrix.combine({a:1/w,b:0,c:0,d:1/w,e:0,f:0},p),p=a.Internal.Matrix.combine(p,{a:w,b:0,c:0,d:w,e:0,f:0}));g=b.scale;1!==g&&(p=a.Internal.Matrix.combine({a:1/g,b:0,c:0,d:1/g,e:0,f:0},p));a.debug&&console.log("DocuVieware: drawing page: "+b.pageNo+". mat: "+JSON.stringify(p)+" previewmode: "+(d?"true":"false"));var Y=Math.abs(p.a)+Math.abs(p.c),aa=Math.abs(p.b)+Math.abs(p.d);try{var ha=C&&!K?.15>=Math.min(Y,aa)?3:.5>=Math.min(Y,aa)?
2:1:1;if(1!==ha){var da=b.bitmap.width,la=b.bitmap.height;if(a.attachedDebugger&&a.isIE)if(9437184>b.bitmap.width*b.bitmap.height)if(p={a:p.a*Math.pow(2,ha-1),b:p.b*Math.pow(2,ha-1),c:p.c*Math.pow(2,ha-1),d:p.d*Math.pow(2,ha-1),e:p.e,f:p.f},b.hasTransparency)if(2==ha)va=document.createElement("canvas"),va.width=da/2,va.height=la/2,ua=va.getContext("2d"),ua.drawImage(b.bitmap,0,0,da/2,la/2),ua=null,n=va;else{va=document.createElement("canvas");va.width=da/2;va.height=la/2;ua=va.getContext("2d");ua.drawImage(b.bitmap,
0,0,da/2,la/2);ua=null;var Ha=document.createElement("canvas");Ha.width=da/4;Ha.height=la/4;var wa=Ha.getContext("2d");wa.drawImage(va,0,0,da/4,la/4);wa=null;n=Ha}else{var va=document.createElement("canvas");va.width=da/2;va.height=la/2;for(var ua=va.getContext("2d"),Da=0;Da<ha-1;Da++)ua.drawImage(0==Da?b.bitmap:va,0,0,da/Math.pow(2,Da+1),la/Math.pow(2,Da+1));n=va}else n=b.bitmap;else{var Ua=document.createElement("canvas");Ua.width=da;Ua.height=la;var Ka=Ua.getContext("2d");Ka.mozImageSmoothingEnabled=
!1;Ka.msImageSmoothingEnabled=!1;Ka.imageSmoothingEnabled=!1;Ka.drawImage(b.bitmap,0,0,da,la);var pa=document.createElement("canvas");pa.width=Math.ceil(da*Y);pa.height=Math.ceil(la*aa);var Fa=pa.getContext("2d"),gb=Fa.getImageData(0,0,pa.width,pa.height);p=a.Internal.Matrix.combine({a:1/Y,b:0,c:0,d:1/aa,e:0,f:0},p);var sb=Ka.getImageData(0,0,Ua.width,Ua.height).data;Ka=null;a.Internal.Libs.pica.resize({src:sb,dest:gb.data,width:Ua.width,height:Ua.height,toWidth:pa.width,toHeight:pa.height,alpha:b.hasTransparency,
quality:ha-2});Fa.putImageData(gb,0,0);sb=Ua=Fa=gb=null;n=pa}}else n=b.bitmap;if(n){for(Da=0;Da<e.canvas.length;Da++){var mb=e.canvas[Da].tile;if(null!==mb){mb.style.backgroundColor="transparent";var Va=mb.getContext("2d");if(null===Va)console.log("Can not obtain 2d context for the tile "+(Da+1).toString()+"\r\nTile count: "+e.canvas.length.toString());else if(Va.save(),Va.clearRect(0,0,mb.width,mb.height),Va.mozImageSmoothingEnabled=C,Va.msImageSmoothingEnabled=C,(Va.imageSmoothingEnabled=C)&&K&&
(Va.imageSmoothingQuality=F),1===p.a&&0===p.b&&0===p.c&&1===p.d&&0===p.e+e.canvas[Da].tx&&0===p.f+e.canvas[Da].ty||Va.transform(p.a,p.b,p.c,p.d,p.e+e.canvas[Da].tx,p.f+e.canvas[Da].ty),a.isIE9)window.setTimeout(function(){if(9437184<n.width*n.height){var Ma=Math.round(n.width/2),kb=Math.round(n.height/2),Hb=1/Y,ba=1/aa;Va.drawImage(n,0,0,Ma,kb,0,0,Ma,kb);Va.drawImage(n,Ma,0,Ma,kb,Ma-Hb,0,Ma,kb);Va.drawImage(n,0,kb,Ma,kb,0,kb-ba,Ma,kb);Va.drawImage(n,Ma,kb,Ma,kb,Ma-Hb,kb-ba,Ma,kb)}else Va.drawImage(n,
0,0);Va.restore();Va=null},100);else{if(9437184<=n.width*n.height){var Ya=Math.round(n.width/2),jb=Math.round(n.height/2);da=1/Y;la=1/aa;Va.drawImage(n,0,0,Ya,jb,0,0,Ya,jb);Va.drawImage(n,Ya,0,Ya,jb,Ya-da,0,Ya,jb);Va.drawImage(n,0,jb,Ya,jb,0,jb-la,Ya,jb);Va.drawImage(n,Ya,jb,Ya,jb,Ya-da,jb-la,Ya,jb)}else Va.drawImage(n,0,0);Va.restore();Va=null}}}d?b.drawnPreview=!0:b.drawn=!0}}catch(Ma){Da="DocuVieware page drawing exception: "+Ma.message+"\r\nDownscales: "+ha.toString(),a.debug?alert(Da):console.log(Da)}}if(!k){if(null!=
a.cache.FormFields)for(Da=0;Da<a.cache.FormFields.length;Da++)k=a.cache.FormFields[Da],k.control&&k.formFieldApp.pageNo==b.pageNo&&(a.Internal.FormFields.existFormField(k)||a.dom.viewerArea.appendChild(k.control),k.render());if(null!=a.cache.Annots)for(Da=0;Da<a.cache.Annots.length;Da++)if(k=a.cache.Annots[Da],k.annotApp.pageNo==b.pageNo&&(k.updatePageInfo(e.left,e.top,b.contentMatrix),k.annotApp.visible)){d=!0;if(a.dom.viewerArea.hasChildNodes())for(ha=a.dom.viewerArea.children.length-1;0<=ha;ha--)if(a.dom.viewerArea.children[ha]===
k.canvas){d=!1;break}d&&a.dom.viewerArea.appendChild(k.canvas);k.render()}a.Internal.Search.highlightResults(b.pageNo)}}}},resetServerCtx:function(){this.serverCtx={zoomMode:0,zoom:0,documentLoaded:!1,pageCount:0,selectedPage:0,imageCanvasSize:null,enableSmoothing:!1,hScrollbarVal:0,hScrollbarMax:0,hScrollbarVisible:!1,vScrollbarVal:0,vScrollbarMax:0,vScrollbarVisible:!1,image:null}},setDialogAnnotationFontNamePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family",
dvJQuery(a.dom.annotationDialogFormFontNameSelect).find("option:selected").val());this.setDialogAnnotationLineAlignmentPropertiesPreview()},setDialogAnnotationFontSizePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size",dvJQuery(a.dom.annotationDialogFormFontSizeInput).val()+"px");this.setDialogAnnotationLineAlignmentPropertiesPreview()},setDialogAnnotationFontColorPropertiesPreview:function(){},setDialogAnnotationFontStylePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration",
"none");dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style","normal");dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight","normal");switch(parseInt(dvJQuery(a.dom.annotationDialogFormFontStyleSelect).find("option:selected").val())){case 0:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","none");break;case 1:dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight","bold");break;case 2:dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style","italic");
break;case 4:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","underline");break;case 8:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","line-through")}},setDialogAnnotationAlignmentPropertiesPreview:function(){switch(parseInt(dvJQuery(a.dom.annotationDialogFormAlignmentSelect).filter(":checked").val())){case 0:var b="left";break;case 1:b="center";break;case 2:b="right";break;default:b="left"}dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align",b)},
setDialogAnnotationLineAlignmentPropertiesPreview:function(){var b=dvJQuery("<div>");b.css("width",dvJQuery(a.dom.annotationDialogFormTextInput).width());b.css("font-size",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size"));b.css("font-family",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family"));b.css("font-weight",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight"));b.css("text-decoration",dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration"));
b.css("text-align",dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align"));b.css("display","none");var d=dvJQuery(a.dom.annotationDialogFormTextInput).val();b.html((d+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));dvJQuery(a.dom.annotationDialogForm).append(b);switch(parseInt(dvJQuery("[name='annotation_line_alignment_select"+a.uniqueID+"']:checked").val())){case 0:d=0;break;case 1:d=Math.max(0,(dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height")-b.height())/
2);break;case 2:d=Math.max(0,dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height")-b.height()-1);break;default:d=0}dvJQuery(a.dom.annotationDialogFormTextInput).css("height",dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height")-d+"px");b.remove()},setDialogSignatureFontNamePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("font-family",dvJQuery(a.dom.signatureDialogFormFontNameSelect).find("option:selected").val());this.setDialogSignatureLineAlignmentPropertiesPreview()},
setDialogSignatureFontSizePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("font-size",dvJQuery(a.dom.signatureDialogFormFontSizeInput).val()+"px");this.setDialogSignatureLineAlignmentPropertiesPreview()},setDialogSignatureFontColorPropertiesPreview:function(){"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value&&dvJQuery(a.dom.signatureDialogFormTextInput).css("color",dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("rgbaString"))},setDialogSignatureFontStylePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration",
"none");dvJQuery(a.dom.signatureDialogFormTextInput).css("font-style","normal");dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight","normal");switch(parseInt(dvJQuery(a.dom.signatureDialogFormFontStyleSelect).find("option:selected").val())){case 0:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","none");break;case 1:dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight","bold");break;case 2:dvJQuery(a.dom.signatureDialogFormTextInput).css("font-style","italic");
break;case 4:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","underline");break;case 8:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","line-through")}},setDialogSignatureAlignmentPropertiesPreview:function(){switch(parseInt(dvJQuery(a.dom.signatureDialogFormAlignmentSelect).filter(":checked").val())){case 0:var b="left";break;case 1:b="center";break;case 2:b="right";break;default:b="left"}dvJQuery(a.dom.signatureDialogFormTextInput).css("text-align",b)},setDialogSignatureLineAlignmentPropertiesPreview:function(){var b=
dvJQuery("<div>");b.css("width",dvJQuery(a.dom.signatureDialogFormTextInput).width());b.css("font-size",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-size"));b.css("font-family",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-family"));b.css("font-weight",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight"));b.css("text-decoration",dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration"));b.css("text-align",dvJQuery(a.dom.signatureDialogFormTextInput).css("text-align"));
b.css("display","none");var d=dvJQuery(a.dom.signatureDialogFormTextInput).val();b.html((d+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));dvJQuery(a.dom.signatureTextDialogForm).append(b);switch(parseInt(dvJQuery("[name='signature_line_alignment_select"+a.uniqueID+"']:checked").val())){case 0:d=0;break;case 1:d=Math.max(0,(dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-b.height())/2);break;case 2:d=Math.max(0,dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-
b.height()-1);break;default:d=0}dvJQuery(a.dom.signatureDialogFormTextInput).css("height",dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-d+"px");dvJQuery(a.dom.signatureDialogFormTextInput).css("padding-top",d+"px");b.remove()},inputControl:function(b,d,e,g){var k=b.val().split(""),p="",n="";if("int"==d)w=/^([0-9])$/,C=/^([0-9][0-9]*)$/;else if("float"==d)var w=/(^\d+$)|(^\d+\.\d+$)|[,\.]/,C=/^([0-9][0-9]*[,\.]?\d{0,3})$/;for(var K in k)1==w.test(k[K])&&""!=k[K]&&(n+=""+
k[K].replace(",","."),1==C.test(n)&&(p+=""+k[K].replace(",",".")));"undefined"!==typeof e&&null!==e&&p<e&&(p=e);"undefined"!==typeof g&&null!==g&&p>g&&(p=g);b.val(p)},inputPageRangeControl:function(b){var d=b.value.split(""),e=/^([0-9|;-])$/,g="",k;for(k in d)1==e.test(d[k])&&(g+=d[k]);b.value=g},ToggleSinglePageViewMode_Click:function(){this.ToggleSinglePageViewMode()},pageRangeSelection:function(b,d){switch(parseInt(b)){case 0:d.value="1-"+a.GetPageCount();d.disabled=!0;break;case 1:d.value=a.GetCurrentPage();
d.disabled=!0;break;case 2:d.disabled=!1}},SelectFirstPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,1),this.EnsurePageVisibility(1),a.SelectPage(1))},SelectNextPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectNextPageTimeout&&(clearTimeout(this.selectNextPageTimeout),this.selectNextPageTimeout=null);this.selectNextPageActions?this.selectNextPageActions++:this.selectNextPageActions=1;var b=Math.min(this.GetLastPageNoRequest()+this.selectNextPageActions,
this.serverCtx.pageCount);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);this.selectNextPageTimeout=setTimeout(function(){a.GetLastPageNoRequest()+1<=a.serverCtx.pageCount&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectNextPageActions=0},300)}},SelectPreviousPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectPreviousPageTimeout&&(clearTimeout(this.selectPreviousPageTimeout),this.selectPreviousPageTimeout=null);this.selectPreviousPageActions?this.selectPreviousPageActions++:
this.selectPreviousPageActions=1;var b=Math.max(this.GetLastPageNoRequest()-this.selectPreviousPageActions,1);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);this.selectPreviousPageTimeout=setTimeout(function(){1<a.GetLastPageNoRequest()&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectPreviousPageActions=0},300)}},SelectLastPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,a.serverCtx.pageCount),this.EnsurePageVisibility(a.serverCtx.pageCount),a.SelectPage(a.serverCtx.pageCount))},
ToggleMobileToolbar_Click:function(){a.dom.mobileToolbarContainer&&dvJQuery(a.dom.mobileToolbarContainer).slideToggle("fast")},ZoomMode_Click:function(){a.dom.subMenuZoomMode&&(a.dom.subMenuMouseMode&&dvJQuery(a.dom.subMenuMouseMode).hide(),dvJQuery(a.dom.subMenuZoomMode).show().position({my:"left top",at:"left bottom",of:dvJQuery(a.dom.zoomModeButton)}),dvJQuery(document).on("click",function(){dvJQuery(a.dom.subMenuZoomMode).hide()}));a.dom.mobileToolbarContainer&&a.dom.subMenuZoomModeMobile&&(dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+
a.uniqueID).addClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active"),"-60px"===dvJQuery(a.dom.mobileToolbarContainer).css("margin-right")?(dvJQuery(a.dom.subMenuZoomModeMobile).show(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==dvJQuery(a.dom.subMenuZoomModeMobile).css("display")?(dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),
dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active")):(dvJQuery(a.dom.subMenuZoomModeMobile).show(),dvJQuery(a.dom.subMenuMouseModeMobile).hide()),a.dom.updateButtons())},MouseMode_Click:function(){a.dom.subMenuMouseMode&&(a.dom.subMenuZoomMode&&
dvJQuery(a.dom.subMenuZoomMode).hide(),dvJQuery(a.dom.subMenuMouseMode).show().position({my:"left top",at:"left bottom",of:dvJQuery(a.dom.mouseModeButton)}),dvJQuery(document).on("click",function(){dvJQuery(a.dom.subMenuMouseMode).hide()}));a.dom.mobileToolbarContainer&&a.dom.subMenuMouseModeMobile&&(dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).addClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),
"-60px"===dvJQuery(a.dom.mobileToolbarContainer).css("margin-right")?(dvJQuery(a.dom.subMenuMouseModeMobile).show(),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==dvJQuery(a.dom.subMenuMouseModeMobile).css("display")?(dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+
a.uniqueID).removeClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active")):(dvJQuery(a.dom.subMenuMouseModeMobile).show(),dvJQuery(a.dom.subMenuZoomModeMobile).hide()),a.dom.updateButtons())},restartZoomInTimeout:function(b){b&&(a.events.enableZoomPreviewAutoSubmitter(),a.zoomInActions=1,a.ZoomINPreview(1));a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null);a.events.isZoomingPreview&&(a.zoomInTimeout=setTimeout(function(){a.zoomInActions++;
a.ZoomINPreview(a.zoomInActions);a.restartZoomInTimeout(!1)},250))},ZoomIN_MouseUp:function(){a.ZoomINMouseDown=!1;null!=a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null,a.events.isZoomingPreview=!1)},ZoomIN_MouseLeave:function(){null!=a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null,a.ZoomINMouseDown&&(a.ZoomINMouseDown=!1,a.events.isZoomingPreview=!1,a.ZoomIN_Click()))},ZoomIN_MouseDown:function(){a.ZoomINMouseDown=!0;a.events.isZoomingPreview=!0;a.restartZoomInTimeout(!0)},
ZoomIN_Click:function(){a.ZoomIN(null!=a.zoomInActions?a.zoomInActions:1,!0,!0,null,null)},ZoomOUT_MouseUp:function(){a.ZoomOUTMouseDown=!1;null!=a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null,a.events.isZoomingPreview=!1)},ZoomOUT_MouseLeave:function(){null!=a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null,a.ZoomOUTMouseDown&&(a.ZoomOUTMouseDown=!1,a.events.isZoomingPreview=!1,a.ZoomOUT_Click()))},restartZoomOutTimeout:function(b){b&&(a.events.enableZoomPreviewAutoSubmitter(),
a.zoomOutActions=1,a.ZoomOUTPreview(1));a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null);a.events.isZoomingPreview&&(a.zoomOutTimeout=setTimeout(function(){a.zoomOutActions++;a.ZoomOUTPreview(a.zoomOutActions);a.restartZoomOutTimeout(!1)},250))},ZoomOUT_MouseDown:function(){a.ZoomOUTMouseDown=!0;a.events.isZoomingPreview=!0;a.restartZoomOutTimeout(!0)},ZoomOUT_Click:function(){a.ZoomOUT(null!=a.zoomOutActions?a.zoomOutActions:1,!0,!0,null,null)},Rotate90_Click:function(){this.rotate90Timeout&&
(clearTimeout(this.rotate90Timeout),this.rotate90Timeout=null);this.rotate90Actions?this.rotate90Actions++:this.rotate90Actions=1;this.rotate90Timeout=setTimeout(function(){var b=a.rotate90Actions%4;0!=b%4&&a.Rotate(b%4,-1);a.rotate90Actions=0},300)},Rotate270_Click:function(){this.rotate270Timeout&&(clearTimeout(this.rotate270Timeout),this.rotate270Timeout=null);this.rotate270Actions?this.rotate270Actions++:this.rotate270Actions=1;this.rotate270Timeout=setTimeout(function(){var b=a.rotate270Actions%
4;0!=b%4&&a.Rotate(4-b%4,-1);a.rotate270Actions=0},300)},Print_Click:function(){this.TogglePrintDialog(null,null)},LoadFromFile_Click:function(){this.LoadFromFile(null,null)},LoadFromUriDialog_Click:function(){this.ToggleLoadFromUriDialog()},SaveDialog_Click:function(){this.ToggleSaveDialog(null,null)},TwainAcquisitionDialog_Click:function(){this.TwainToggleAcquisitionDialog(null,null)},CopyDialog_Click:function(b){b.preventDefault();this.CopySelectedTextToClipboard()},HighlightContextMenu_Click:function(b){b.preventDefault();
this.HighlightSelectedText()},StrikeoutContextMenu_Click:function(b){b.preventDefault();this.StrikeoutSelectedText()},UnderlineContextMenu_Click:function(b){b.preventDefault();this.UnderlineSelectedText()},RedactionMarkContextMenu_Click:function(b){b.preventDefault();b=a.dom.redactionFill?dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors("value"):null;this.RedactSelectedText(b)},RemoveTextContextMenu_Click:function(b){b.preventDefault();
this.Internal.Text.removeSelectedText()},LoadFromUri_Click:function(){this.LoadFromUri(dvJQuery(this.dom.addressBar).val(),"",null,null,null,!0)},ExitDrawingMode_Click:function(){this.ExitAnnotationDrawingMode()},UndoDrawing_Click:function(){this.Internal.Annotations.dropPendingFreenhandAnnotLastSubPath()},AnnotationActionEditButton_Click:function(){this.Internal.Annotations.editSelectedAnnotation()},AnnotationActionRemoveButton_Click:function(){this.Internal.Annotations.removeSelectedAnnotations()},
AnnotationActionCommentButton_Click:function(){this.ToggleCommentDialog("comment")},CommentAnswer_Click:function(b){this.ToggleCommentDialog("answer",b)},CommentProperties_Click:function(b){this.ToggleCommentDialog("edit",b)},ZoomWidth_Click:function(){this.SetZoomMode(3)},ZoomFit_Click:function(){this.SetZoomMode(2)},Fullscreen_Click:function(){this.ToggleFullscreen()},MagnifierMouseMode_Click:function(){this.EnableMagnifier()},PanMouseMode_Click:function(){this.SetMouseMode(0)},SelectMouseMode_Click:function(){this.SetMouseMode(3)},
MarqueeZoomMouseMode_Click:function(){this.SetMouseMode(4)},AddRubberStampAnnot_Click:function(){this.AddAnnotInteractive(0)},AddRectangleAnnot_Click:function(){this.AddAnnotInteractive(1)},AddRectangleHighlighterAnnot_Click:function(){this.AddAnnotInteractive(2)},AddLineAnnot_Click:function(){this.AddAnnotInteractive(3)},AddConnectedLineAnnot_Click:function(){null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(5)},
AddLineArrowAnnot_Click:function(){this.AddAnnotInteractive(4)},AddEllipseAnnot_Click:function(){this.AddAnnotInteractive(6)},AddTextAnnot_Click:function(){this.AddAnnotInteractive(8)},AddStickyNoteAnnot_Click:function(){this.AddAnnotInteractive(9)},AddFreeHandAnnot_Click:function(){null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(10)},AddFreeHandHighlighterAnnot_Click:function(){null!=a.dom.freehandhighlighterAnnotButton&&
dvJQuery(a.dom.freehandhighlighterAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(11)},AddLinkAnnot_Click:function(){this.AddAnnotInteractive(13)},AddRulerAnnot_Click:function(){this.AddAnnotInteractive(15)},AddPolyRulerAnnot_Click:function(){null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(16)},ClosePanelButton_Click:function(){this.SetSnapinsPanelVisibility(!1)},
SearchSubmit_Click:function(){var b=this.dom.searchValueInput.value,d=this.dom.searchWholeWordInput.checked,e=this.dom.searchCaseSensitiveInput.checked,g=this.dom.searchAnyWordInput.checked,k=dvJQuery(this.dom.searchPageSelect).filter(":checked").val();this.SubmitSearch(b,d,e,g,k)},DownloadTwainServiceSetup_Click:function(){this.DownloadTwainServiceSetup();dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},SearchClearResult_Click:function(){this.ClearSearch()},CommentHeader_Click:function(b){a.Internal.Annotations.selectAnnotationCommentById(b,
!1,!1);if(null!=a.cache.AnnotsComments)for(var d=0;d<a.cache.AnnotsComments.length;d++){var e=a.cache.AnnotsComments[d];if(e.annotApp.id===b){var g=e.annotApp.pageNo;a.SelectPage(g,function(){var k=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(e.annotApp,!0);null!=k&&(k.visible&&(a.Internal.Annotations.unselectAll(),a.Internal.Annotations.selectById(k.id)),a.EnsurePageRegionVisibility(g,k.bbox.Left,k.bbox.Top,k.bbox.Width,k.bbox.Height))});break}}},CommentsSearchClearResult_Click:function(){this.CommentsClearSearch()},
CommentsSearchSubmit_Click:function(){this.SubmitCommentsSearch(this.dom.commentsSearchValueInput.value)},CommentsExpandCollapseAll_Click:function(){this.CommentsExpandCollapseAll()},CommentsSortBySelect_Change:function(){this.refreshCommentsPanel()},RedactionAddAreas_Click:function(){a.events.isAddingRedactionMarksMode?a.Internal.Redaction.disableAddRedactionMarksMode():a.Internal.Redaction.enableAddRedactionMarksMode()},RedactionApply_Click:function(){var b=this;a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),
a.Localize("title_apply_redaction_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_apply_redaction_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){b.ApplyAllRedactions();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},RemoveSelectedRedactionMarks_Click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),
a.Localize("title_delete_selected_redactions_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redactions_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){for(var b=a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea"),d=[],e=0;e<b.length;e++)d.push(b[e].id.split("_").pop());for(e=0;e<
d.length;e++)a.Internal.Redaction.deleteRedactionMarkById(d[e]);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},RemoveAllRedactionMarks_Click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_redactions_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redactions_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},
{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Redaction.removeAllRedactionMarks();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},DigiSignAppearanceMenu_Click:function(){var b=a.dom.digisignAppearanceMenuToggle.getElementsByClassName("dv-signature-menu-toggle")[0];b.classList.contains("dv-signature-menu-toggle-collapsed")?(b.classList.remove("dv-signature-menu-toggle-collapsed"),a.dom.digisignAppearanceMenuContent.style.display="block"):(b.classList.add("dv-signature-menu-toggle-collapsed"),
a.dom.digisignAppearanceMenuContent.style.display="none")},DigiSignCertificateMenu_Click:function(){var b=a.dom.digisignCertificateMenuToggle.getElementsByClassName("dv-signature-menu-toggle")[0];b.classList.contains("dv-signature-menu-toggle-collapsed")?(b.classList.remove("dv-signature-menu-toggle-collapsed"),a.dom.digisignCertificateMenuContent.style.display="block"):(b.classList.add("dv-signature-menu-toggle-collapsed"),a.dom.digisignCertificateMenuContent.style.display="none")},DigiSignAppearanceText_Click:function(){a.Internal.DigiSign.setSignatureAppearanceTextInteractive()},
DigiSignAppearanceImg_Click:function(){a.Internal.DigiSign.setSignatureAppearanceImgInteractive()},DigiSignAppearanceFreehand_Click:function(){a.Internal.DigiSign.setSignatureAppearanceFreehandInteractive()},DigiSignAppearanceDeleteSignatureAppearance_Click:function(){a.Internal.DigiSign.resetSignatureConfiguration()},DigiSignAddTimeStamp_Click:function(){a.Internal.DigiSign.setTimeStampInteractive()},DigiSignAddCertificate_Click:function(){a.Internal.DigiSign.setCertificateInteractive()},DigiSignPlaceSignature_Click:function(){a.Internal.DigiSign.beginAddSignatureInteractive()},
DigiSignDeleteCertificate_Click:function(b){b.stopPropagation&&b.stopPropagation();a.Internal.DigiSign.setCertificate(null,null,null)},DigiSignDeleteTimeStamp_Click:function(b){b.stopPropagation&&b.stopPropagation();a.Internal.DigiSign.setTimeStamp(null,null,null)},SnapInButton_Click:function(b){this.SelectSnapIn(b,!1)},IsTwainSupportAvailable:function(){return this.isWindows&&5.1<this.windowsVersion},ToggleSinglePageViewMode:function(){return this.ajax.PostBaseRequest("singlepageviewmode",{data:{enabled:this.serverCtx.singlePageView},
success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}},!0)},RegisterOnViewerScroll:function(b){this.callbacks.onViewerScroll=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationSelectedStateChanged:function(b){this.callbacks.onAnnotationSelectedStateChanged=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationAdded:function(b){this.callbacks.onAnnotationAdded=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationEdited:function(b){this.callbacks.onAnnotationEdited=
b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMoved:function(b){this.callbacks.onAnnotationMoved=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationDeleted:function(b){this.callbacks.onAnnotationDeleted=b;return DocuViewareAPI.Status.OK},RegisterOnCommentAdded:function(b){this.callbacks.onCommentAdded=b;return DocuViewareAPI.Status.OK},RegisterOnCommentEdited:function(b){this.callbacks.onCommentEdited=b;return DocuViewareAPI.Status.OK},RegisterOnCommentDeleted:function(b){this.callbacks.onCommentDeleted=
b;return DocuViewareAPI.Status.OK},RegisterOnDocumentSigned:function(b){this.callbacks.onDocumentSigned=b;return DocuViewareAPI.Status.OK},RegisterOnFormFieldChanged:function(b){this.callbacks.onFormFieldChanged=b;return DocuViewareAPI.Status.OK},RegisterOnPageChanged:function(b){this.callbacks.onPageChanged=b;return DocuViewareAPI.Status.OK},RegisterOnZoomChanged:function(b){this.callbacks.onZoomChanged=b;return DocuViewareAPI.Status.OK},RegisterOnRotationChanged:function(b){this.callbacks.onRotationChanged=
b;return DocuViewareAPI.Status.OK},RegisterOnNewDocumentLoaded:function(b){this.callbacks.onNewDocumentLoaded=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentClosed:function(b){this.callbacks.onDocumentClosed=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentPrinted:function(b){this.callbacks.onDocumentPrinted=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentSaved:function(b){this.callbacks.onDocumentSaved=b;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(b){this.callbacks.onTwainAcquisitionDialogAcquireButtonClick=
b;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(b){this.callbacks.onTwainAcquisitionDialogCancelButtonClick=b;return DocuViewareAPI.Status.OK},RegisterOnThumbnailsOrderChanged:function(b){this.callbacks.onThumbnailsOrderChanged=b;return DocuViewareAPI.Status.OK},RegisterOnTextSelected:function(b){this.callbacks.onTextSelected=b;return DocuViewareAPI.Status.OK},RegisterOnTextUnselected:function(b){this.callbacks.onTextUnselected=b;return DocuViewareAPI.Status.OK},
RegisterOnTextAnnotated:function(b){this.callbacks.onTextAnnotated=b;return DocuViewareAPI.Status.OK},RegisterOnAreaSelected:function(b){this.callbacks.onAreaSelected=b;return DocuViewareAPI.Status.OK},RegisterOnFullscreenModeChanged:function(b){this.callbacks.onFullscreenModeChanged=b;return DocuViewareAPI.Status.OK},RegisterOnSearchInvoked:function(b){this.callbacks.onSearchInvoked=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMouseEnter:function(b){this.callbacks.onAnnotationMouseEnter=
b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMouseLeave:function(b){this.callbacks.onAnnotationMouseLeave=b;return DocuViewareAPI.Status.OK},RegisterOnThumbnailsSnapInSelected:function(b){this.callbacks.onThumbnailsSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnBookmarksSnapInSelected:function(b){this.callbacks.onBookmarksSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnSearchSnapInSelected:function(b){this.callbacks.onSearchSnapInSelected=b;return DocuViewareAPI.Status.OK},
RegisterOnAnnotationsSnapInSelected:function(b){this.callbacks.onAnnotationsSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnCommentsSnapInSelected:function(b){this.callbacks.onCommentsSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnSnapInPanelResized:function(b){this.callbacks.onSnapInPanelResized=b;return DocuViewareAPI.Status.OK},RegisterOnSnapInPanelToggle:function(b){this.callbacks.onSnapInPanelToggle=b;return DocuViewareAPI.Status.OK},RegisterOnRedactionMarksApplied:function(b){this.callbacks.onRedactionMarksApplied=
b;return DocuViewareAPI.Status.OK},RegisterOnUriNavigation:function(b){this.callbacks.onURINavigation=b;return DocuViewareAPI.Status.OK},RegisterOnUnknownLinkNavigation:function(b){this.callbacks.onUnknownLinkNavigation=b;return DocuViewareAPI.Status.OK},RegisterOnAttachmentClick:function(b){this.callbacks.onAttachmentClick=b;return DocuViewareAPI.Status.OK},RegisterOnPageDeleted:function(b){this.callbacks.onPageDeleted=b;return DocuViewareAPI.Status.OK},DisplayMessageBox:function(b){return"object"===
typeof b&&null!==b&&b.hasOwnProperty("text")&&b.hasOwnProperty("icon")?(this.ShowMessage(b),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},SetAjaxCustomHeaders:function(b,d){return a.ajax.SetCustomHeaders(b,d)},PostCustomServerAction:function(b,d,e,g,k){return this.ajax.PostCustomServerAction(b,d,e,g,k)},SetMaxUploadThreads:function(b){return 0<b&&16>=b?(a.Internal.Files.MAX_UPLOAD_THREADS=b,DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},LoadFromBase64:function(b,d,e,
g,k){return this.LoadFromByteArray(DocuViewareEncodingUtilities.base64.base64toArrayBuffer(b),d,e,g,k)},LoadFromByteArray:function(b,d,e,g,k){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.callbacks.onFileOpenError=k;this.callbacks.onFileOpenSuccess=g;a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b,d,e),0);return DocuViewareAPI.Status.OK},LoadFromFile:function(b,d){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.SetLoadFromUriDialogVisibility(!1);
this.callbacks.onFileOpenError=d;this.callbacks.onFileOpenSuccess=b;dvJQuery(this.dom.openfile).click();return DocuViewareAPI.Status.OK},GetDocumentType:function(){return this.serverCtx?this.serverCtx.documentType:0},GetDocumentFormat:function(){return this.serverCtx?this.serverCtx.documentFormat:0},GetDocumentName:function(){return this.serverCtx?this.serverCtx.fileName:""},GetPageCount:function(){return this.serverCtx?this.serverCtx.pageCount:0},GetCurrentPage:function(){return this.serverCtx?this.serverCtx.selectedPage:
0},GetPageWidth:function(b){return this.serverCtx?this.Internal.Pages.getPageWidth(b):0},GetPageHeight:function(b){return this.serverCtx?this.Internal.Pages.getPageHeight(b):0},GetSelectedTextArea:function(){return this.serverCtx?this.Internal.Text.getSelectedTextAreas():0},GetLastPageNoRequest:function(){return this.ajax.latestSelectedPage},GetDisplayedArea:function(){if(this.serverCtx){var b=a.dom.viewerArea.getBoundingClientRect(),d=this.GetCurrentPage(),e=a.Internal.Pages.getPageWidth(d),g=a.Internal.Pages.getPageHeight(d),
k=this.Internal.Coordinates.clienttodocument(d,b.left,b.top,1),p=this.Internal.Coordinates.clienttodocument(d,b.left+b.width,b.top,1),n=this.Internal.Coordinates.clienttodocument(d,b.left+b.width,b.top+b.height,1);b=this.Internal.Coordinates.clienttodocument(d,b.left,b.top+b.height,1);d=Math.max(Math.min(k.x,Math.min(p.x,Math.min(n.x,b.x))),0);var w=Math.max(Math.min(k.y,Math.min(p.y,Math.min(n.y,b.y))),0);return{left:d,top:w,width:Math.min(Math.max(k.x,Math.max(p.x,Math.max(n.x,b.x))),e)-d,height:Math.min(Math.max(k.y,
Math.max(p.y,Math.max(n.y,b.y))),g)-w}}return{left:0,top:0,width:0,height:0}},GetSelectionAreaCoordinates:function(){return this.serverCtx?this.Internal.Selection.getSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(b){return this.serverCtx?this.Internal.Selection.setSelectionAreaCoordinates(b):DocuViewareAPI.Status.GenericError},GetViewerScrollLeft:function(){return this.Internal.Coordinates.getViewerScrollLeft()},GetViewerScrollTop:function(){return this.Internal.Coordinates.getViewerScrollTop()},
SetViewerScrollLeft:function(b){return this.Internal.Coordinates.setViewerScrollLeft(b)},SetViewerScrollTop:function(b){return this.Internal.Coordinates.setViewerScrollTop(b)},ClearSelectionArea:function(){return this.serverCtx?(this.Internal.Selection.clearSelectionArea(),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},GetSelectedThumbnailItems:function(){return this.serverCtx?this.Internal.Thumbnails.getSelectedThumbnails(!0):null},SetThumbnailSelected:function(b,d){return this.serverCtx?
this.Internal.Thumbnails.setThumbnailSelected(b,d):DocuViewareAPI.Status.GenericError},GetCurrentZoom:function(){return this.serverCtx?this.serverCtx.zoom:0},SetCurrentZoom:function(b){return Math.round(1E3*b)===Math.round(1E3*a.serverCtx.zoom)?DocuViewareAPI.Status.OK:a.ajax.PostBaseRequest("zoomset",{data:{zoom:b},success:function(d){a.ajax.HandleServerContextResponse("string"===typeof d?eval("("+d+")"):d,!1)}},!1)},GetCurrentViewRotation:function(){return this.serverCtx?this.serverCtx.viewRotation:
0},GetCurrentPageRotation:function(){return this.serverCtx?this.serverCtx.pageRotation:0},GetCurrentPageRenderRotation:function(){return this.serverCtx?this.serverCtx.renderRotation:0},ToggleLoadFromUriDialog:function(b){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.SetLoadFromUriDialogVisibility(!this.dom.isLoadFromUriDialogVisible,b);return DocuViewareAPI.Status.OK},DirectSave:function(b,d,e){var g="*"===a.serverCtx.allowedExportFormats?"pdf":a.serverCtx.allowedExportFormats.split(",")[0];
if(null==b)b={fileName:a.serverCtx.fileName,format:g,range:"*",dropAnnotations:!1,flattenAnnotations:!1};else{if(null==b.format)b.format=g;else if(null!=b.format&&"*"!==a.serverCtx.allowedExportFormats){g=a.serverCtx.allowedExportFormats.split(",");for(var k=!1,p=0;p<g.length;p++)b.format.toLowerCase()===g[p].toLowerCase()&&(k=!0);if(!1===k)return DocuViewareAPI.Status.GenericError}null==b.range&&(b.range="*");null==b.fileName&&(b.fileName=a.serverCtx.fileName);null==b.dropAnnotations&&(b.dropAnnotations=
!1);null==b.flattenAnnotations&&(b.flattenAnnotations=!1)}return a.Save(b.fileName,b.format,b.range,b.dropAnnotations,b.flattenAnnotations,d,e)},ToggleSaveDialog:function(b,d){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(dvJQuery(a.dom.saveDialog),a.Localize("_title_save_dialog"),null,function(){dvJQuery("[name='savePageRangeInput"+a.uniqueID+"']").val("");if(1===a.dom.UIconfig.saveDefaultPageRange)dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",
!0).trigger("change");else if(2===a.dom.UIconfig.saveDefaultPageRange)dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change");else{var e=a.GetSelectedThumbnailItems();1==e.length&&e[0]===a.GetCurrentPage()?dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):0<e.length?(dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),dvJQuery("[name='savePageRangeInput"+
a.uniqueID+"']").val(e.join())):dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change")}dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+a.uniqueID+"']").val(a.serverCtx.fileName)},null,[{text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.saveDialog).dvDialog("close")}},{text:a.Localize("_label_save"),"class":"btn-valid",click:function(){var e=dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+a.uniqueID+
"']").val(),g=dvJQuery(a.dom.saveDialog).find("select[name='save_extension_select"+a.uniqueID+"']").find("option:selected").val(),k=dvJQuery(a.dom.saveDialog).find("input[name='savePageRangeInput"+a.uniqueID+"']").val(),p=1===parseInt(dvJQuery(a.dom.saveDialog).find("select[name='save_content_select"+a.uniqueID+"']").find("option:selected").val())?!0:!1,n=dvJQuery(a.dom.saveDialog).find("input[name='save_content_burn_annot"+a.uniqueID+"']").is(":checked");1==n&&(p=!0);a.Save(e,g,k,p,n,b,d)==DocuViewareAPI.Status.OK&&
dvJQuery(a.dom.saveDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainToggleAcquisitionDialog:function(b,d){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(dvJQuery(a.dom.twainAcquisitionDialog),a.Localize("button__twain_acquisition"),null,function(){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox();dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",.3).hide();
dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");var e=function(g){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(g.twainStatus,g.message);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show();dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",
!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")};a.GetTwainAcquisitionServiceInfo(function(g){parseInt(g.ServiceVersionResult)>=a.twainServiceSupportedVersion?a.GetTwainAcquisitionSources(function(k){if(k.GetTwainSourcesResult&&k.GetTwainSourcesResult.sources.length){dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!1);dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").removeClass("dvUi-state-disabled").removeClass("dvUi-dvSelectmenu-disabled").css("opacity",
1);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).find("option").remove().end();if(k.GetTwainSourcesResult.sources&&0<k.GetTwainSourcesResult.sources.length){for(var p=0;p<k.GetTwainSourcesResult.sources.length;p++){var n=dvJQuery("<option>"),w=k.GetTwainSourcesResult.sources[p];n.attr("value",w.sourceName);n.html(w.sourceName);(!k.GetTwainSourcesResult.defaultSource&&1==p||k.GetTwainSourcesResult.defaultSource&&(k.GetTwainSourcesResult.defaultSource==w.sourceName||
k.GetTwainSourcesResult.defaultSource+" (64-bit)"==w.sourceName))&&n.prop("selected",!0);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).append(n)}dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu&&dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu("destroy");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu();
dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-menu").css("background-color",a.dom.UIconfig.inputBackgroundColor);dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-text").css("text-overflow","ellipsis");dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-text").css("overflow","hidden");dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-text").parent().parent().parent().find("div").css("vertical-align","middle");dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-button").css("vertical-align",
"middle");dvJQuery(a.dom.twainAcquisitionDialog).parent().find(twainAcquisitionDestinationAppendDocBox).click(function(){dvJQuery(".dvUi-selectmenu-menu .dvUi-menu-item").hover(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.miscBorderColor)},function(){dvJQuery(this).css("background-color","")})})}a.serverCtx.enablePageAppending?dvJQuery("[name='inputTwainAcquisitionDestination"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):(dvJQuery("[name='inputTwainAcquisitionDestination"+
a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change"),dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("*").prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity",.3));dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).hide();dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled")}else a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.WARNING,
a.Localize("_twain_connector_no_sources")),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")},e):(g=a.Localize("_twain_connector_bad_version"),a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.BAD_VERSION,g),dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",
!0),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled"))},e)!=DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},null,[{text:a.Localize("_label_cancel"),click:function(){if(a.callbacks.onTwainAcquisitionDialogCancelButtonClick)a.callbacks.onTwainAcquisitionDialogCancelButtonClick();
dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}},{id:"twainAcquisitionDialogAcquireButton"+a.uniqueID,text:a.Localize("button__twain_acquire"),"class":"btn-valid",click:function(){if(a.callbacks.onTwainAcquisitionDialogAcquireButtonClick)a.callbacks.onTwainAcquisitionDialogAcquireButtonClick();var e=dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionSourceSelect"+a.uniqueID+"']").find("option:selected").val();0==dvJQuery(a.dom.twainAcquisitionDialog).find("input[name='inputTwainAcquisitionDestination"+
a.uniqueID+"']:checked").val()?a.TwainAcquireToNewDocument(e)==DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close"):a.TwainAcquireToCurrentDocument(e,dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionDestinationAppendSelect"+a.uniqueID+"']").find("option:selected").val())==DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainAcquireToNewDocument:function(b,
d,e){return a.Internal.Twain.acquire(b,function(g){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(g.fileData,"image/tiff",g.fileName),0,"",g.fileContentEncoding);d&&"function"===typeof d&&d()},function(g){e&&"function"===typeof e&&e(g)})},TwainAcquireToCurrentDocument:function(b,d,e,g){return!d||0>d||3<d||!a.serverCtx.enablePageAppending?DocuViewareAPI.Status.GenericError:a.Internal.Twain.acquire(b,function(k){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(k.fileData,
"image/tiff",k.fileName),d,"",k.fileContentEncoding);e&&"function"===typeof e&&e()},function(k){g&&"function"===typeof g&&g(k)})},TwainSetConfig:function(b,d,e,g,k,p,n,w){"boolean"===typeof b&&(a.twainSourceConfig.enableCustomConfiguration=b);"boolean"===typeof d&&(a.twainSourceConfig.selectFeeder=d);Number.isInteger(e)&&(a.twainSourceConfig.resolution=e);Number.isInteger(g)&&(a.twainSourceConfig.bitDepth=g);"boolean"===typeof k&&(a.twainSourceConfig.enableDuplex=k);"boolean"===typeof p&&(a.twainSourceConfig.hideUI=
p);Number.isInteger(w)?a.twainSourceConfig.xferCount=w:a.twainSourceConfig.xferCount=0;if(n)if(Array.isArray(n)){b=[];for(d=0;d<n.length;d++)n[d].hasOwnProperty("capability")&&n[d].hasOwnProperty("value")&&Number.isInteger(n[d].capability)&&"string"===typeof n[d].value&&b.push(n[d]);a.twainSourceConfig.extConfig=0!==b.length?b:null}else a.twainSourceConfig.extConfig=null;else a.twainSourceConfig.extConfig=null;return DocuViewareAPI.Status.OK},ToggleCommentDialog:function(b,d){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;
"comment"===b?a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog"),null,function(){var e=null!=a.Internal.Annotations.defaultAuthor?a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");dvJQuery(a.dom.commentsAuthorInput).val(e);dvJQuery(a.dom.commentAnswerBox).hide();dvJQuery(a.dom.commentContentBox).show();dvJQuery(a.dom.commentStatusBox).hide();dvJQuery(a.dom.commentMessageInput).val("").focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,
text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),"class":"btn-valid",click:function(){var e=dvJQuery(a.dom.commentsAuthorInput).val(),g=a.Internal.Annotations.defaultProperties[2048];g.previousGuid=a.dom.selectedAnnotation.annotApp.id;g.text=dvJQuery(a.dom.commentMessageInput).val();a.ajax.PostBaseRequest("newannotationcomment",{data:{annots:[{extProperties:{author:e},properties:g,
ownerAnnotType:a.dom.selectedAnnotation.annotApp.properties.type,pageNo:a.dom.selectedAnnotation.annotApp.pageNo}]},success:function(k){if((k="string"===typeof k?eval("("+k+")"):k)&&null!=k.annotApp&&k.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(k),a.refreshCommentsPanel(),a.SelectSnapIn("comments",!0),a.Internal.Annotations.selectAnnotationCommentById(k.annotApp.id,!0,!1),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:k.annotApp.id,pageNo:k.annotApp.pageNo})}else a.ajax.HandleError(k)}},
!1);dvJQuery(a.dom.commentDialog).dvDialog("close")}}]):"edit"===b?a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog_edit"),null,function(){dvJQuery(a.dom.commentAnswerBox).hide();dvJQuery(a.dom.commentContentBox).show();dvJQuery(a.dom.commentStatusBox).show();for(var e=0;e<a.cache.AnnotsComments.length;e++){var g=a.cache.AnnotsComments[e];if(g.annotApp.id===d){dvJQuery(a.dom.commentMessageInput).val(g.annotApp.properties.text);dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+
a.uniqueID+"']").find("option[value='"+g.annotApp.properties.reviewStatus+"']").prop("selected",!0);dvJQuery(a.dom.commentsAuthorInput).val(g.annotApp.author);g.annotApp.properties.allowReview?dvJQuery(a.dom.commentStatusSelect).attr("disabled",!1):dvJQuery(a.dom.commentStatusSelect).attr("disabled",!0);g.annotApp.canDelete?dvJQuery(":button:contains('"+a.Localize("_label_delete")+"')").prop("disabled",!1).removeClass("ui-state-disabled"):dvJQuery(":button:contains('"+a.Localize("_label_delete")+
"')").prop("disabled",!0).addClass("ui-state-disabled");break}}dvJQuery(a.dom.commentMessageInput).focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogDeleteButton"+a.uniqueID,text:a.Localize("_label_delete"),click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("_title_confirm_comment_removal"),null,function(){dvJQuery(a.dom.commentDialogModalOverlay).show();
dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("_message_confirm_comment_removal"))},function(){dvJQuery(a.dom.commentDialogModalOverlay).hide()},[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.commentDialogModalOverlay).hide();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");dvJQuery(a.dom.modalOverlayArea).show()}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){if(null!=a.cache.AnnotsComments)for(var e=a.GetCurrentPage(),g=0;g<a.cache.AnnotsComments.length;g++)if(a.cache.AnnotsComments[g].annotApp.pageNo===
e&&a.cache.AnnotsComments[g].annotApp.id===d){a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annots:[{properties:a.cache.AnnotsComments[g].annotApp.properties,"delete":!0,pageNo:a.cache.AnnotsComments[g].annotApp.pageNo,id:a.cache.AnnotsComments[g].annotApp.id}],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID}),contentType:"application/json",success:function(k){if((k="string"===typeof k?eval("("+k+")"):
k)&&null!=k.annots)for(var p=0;p<k.annots.length;p++){if(null!=k.annots[p].deletedAnnotsCommentId)for(var n=0;n<k.annots[p].deletedAnnotsCommentId.length;n++)a.Internal.Annotations.deleteAnnotationComment(k.annots[p].deletedAnnotsCommentId[n],!1);a.Internal.Annotations.deleteAnnotationComment(d,!0);if(a.callbacks.onCommentDeleted)a.callbacks.onCommentDeleted({id:k.annots[p].id,pageNo:k.annots[p].pageNo})}else a.ajax.HandleError(k)},error:function(k){a.ajax.HandleError(k)}});break}dvJQuery(a.dom.commentDialogModalOverlay).hide();
dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");dvJQuery(a.dom.commentDialog).dvDialog("close")}}])}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_save"),"class":"btn-valid",click:function(){var e=dvJQuery(a.dom.commentMessageInput).val(),g=dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+a.uniqueID+"']").find("option:selected").val(),k=dvJQuery(a.dom.commentsAuthorInput).val();if(null!=a.cache.AnnotsComments){for(var p=a.GetCurrentPage(),
n=null,w=0;w<a.cache.AnnotsComments.length;w++)if(a.cache.AnnotsComments[w].annotApp.pageNo===p&&a.cache.AnnotsComments[w].annotApp.id===d){n=a.cache.AnnotsComments[w].annotApp.properties;n.text=e;n.reviewStatus=parseInt(g);break}a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annots:[{extProperties:{author:k},properties:n,pageNo:p,id:d,clientTag:a.cache.AnnotsComments[w].annotApp.clientTag}],sessionID:a.ajax.sessionID,
contextID:a.ajax.contextID}),contentType:"application/json",success:function(C){if((C="string"===typeof C?eval("("+C+")"):C)&&null!=C.annots)for(var K=0;K<C.annots.length;K++){for(var F=0;F<a.cache.AnnotsComments.length;F++)if(a.cache.AnnotsComments[F].annotApp.pageNo===p&&a.cache.AnnotsComments[F].annotApp.id===d){a.cache.AnnotsComments[F].annotApp=C.annots[K].annotApp;break}a.refreshCommentsPanel();a.Internal.Annotations.selectAnnotationCommentById(C.annots[K].annotApp.id,!0,!1);if(a.callbacks.onCommentEdited)a.callbacks.onCommentEdited({id:C.annots[K].annotApp.id,
pageNo:C.annots[K].annotApp.pageNo})}else a.ajax.HandleError(C)},error:function(C){a.ajax.HandleError(C)}})}dvJQuery(a.dom.commentDialog).dvDialog("close")}}]):"answer"===b&&a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog_answer"),null,function(){var e=null!=a.Internal.Annotations.defaultAuthor?a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");dvJQuery(a.dom.commentsAuthorInput).val(e);dvJQuery(a.dom.commentContentBox).hide();dvJQuery(a.dom.commentAnswerBox).show();
dvJQuery(a.dom.commentStatusBox).hide();dvJQuery(a.dom.commentAnswerInput).val("").focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),"class":"btn-valid",click:function(){for(var e=1,g=-1,k=0;k<a.cache.AnnotsComments.length;k++)a.cache.AnnotsComments[k].annotApp.id===d&&(e=a.cache.AnnotsComments[k].annotApp.pageNo,
g=a.cache.AnnotsComments[k].ownerAnnotType);k=dvJQuery(a.dom.commentsAuthorInput).val();var p=a.Internal.Annotations.defaultProperties[2048];p.text=dvJQuery(a.dom.commentAnswerInput).val();p.pageNo=e;p.previousGuid=d;a.ajax.PostBaseRequest("newannotationcomment",{data:{annots:[{extProperties:{author:k},properties:p,ownerAnnotType:g,pageNo:e}]},success:function(n){if((n="string"===typeof n?eval("("+n+")"):n)&&null!=n.annotApp&&n.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(n),
a.refreshCommentsPanel(),a.Internal.Annotations.selectAnnotationCommentById(n.annotApp.id,!0,!1),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:n.annotApp.id,pageNo:n.annotApp.pageNo})}else a.ajax.HandleError(n)}},!1);dvJQuery(a.dom.commentDialog).dvDialog("close")}}]);return DocuViewareAPI.Status.OK},TogglePrintDialog:function(b,d){if("undefined"===typeof e)var e=null;if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(dvJQuery(a.dom.printDialog),
a.Localize("_title_print_dialog"),null,function(){dvJQuery("[name='printPageRangeInput"+a.uniqueID+"']").val("");if(1===a.dom.UIconfig.printDefaultPageRange)dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change");else if(2===a.dom.UIconfig.printDefaultPageRange)dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change");else{var g=a.GetSelectedThumbnailItems();1==g.length&&g[0]===a.GetCurrentPage()?
dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):0<g.length?(dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),dvJQuery("[name='printPageRangeInput"+a.uniqueID+"']").val(g.join())):dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change")}},null,[{id:"printDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){if(a.Internal.Print.isPrinting){a.Internal.Print.isPrinting=
!1;dvJQuery(a.dom.printProgressbarDiv).remove();var g=document.getElementById("printProgressionText"+a.uniqueID);g.parentNode.removeChild(g)}dvJQuery(a.dom.printDialog).dvDialog("close")}},{id:"printDialogPrintButton"+a.uniqueID,text:a.Localize("_label_print"),"class":"btn-valid",click:function(){null===a.dom.printDialogPrintButton&&(a.dom.printDialogPrintButton=dvJQuery("#printDialogPrintButton"+a.uniqueID));var g=dvJQuery(a.dom.printDialog).find("select[name='print_content_select"+a.uniqueID+"']").find("option:selected").val(),
k=dvJQuery(a.dom.printDialog).find("select[name='print_destination_select"+a.uniqueID+"']").find("option:selected").val(),p=a.dom.printPageRangeInput.value;dvJQuery(".dvUi-dialog-buttonset").before("<div id='printProgressionText"+a.uniqueID+"'></div>");dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");var n=dvJQuery("<div>").css({width:"100%"}).attr("id","printProgressbarDiv"+a.uniqueID).append("<div>");n.insertBefore(a.dom.printDialog);
var w=new DocuViewareProgressbar({bg:"#acf",target:n.get(0),id:"printProgressbar"+a.uniqueID});w.go(0);a.Internal.Print.printPages(0==g,p,k,function(C,K){document.getElementById("printProgressionText"+a.uniqueID).innerHTML=a.Localize("label_printing_progess").replace("#",C).replace("@",K);w.go(100*C/K)},function(){n.remove();var C=document.getElementById("printProgressionText"+a.uniqueID);C.parentNode.removeChild(C);dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");
dvJQuery(a.dom.printDialog).dvDialog("close");b&&b()},function(){n.remove();var C=document.getElementById("printProgressionText"+a.uniqueID);C.parentNode.removeChild(C);dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");dvJQuery(a.dom.printDialog).dvDialog("close");d&&d()})!=DocuViewareAPI.Status.OK&&(n.remove(),g=document.getElementById("printProgressionText"+a.uniqueID),g.parentNode.removeChild(g),dvJQuery(a.dom.printDialogPrintButton).prop("disabled",
!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled"))}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},LaunchDirectPrint:function(b,d,e){"undefined"===typeof b&&(b={removeAnnontations:!1,range:"*",destination:0});var g=b.removeAnnontations||!1,k=b.range||"*";b=b.destination||0;a.DisplayPendingActionNotification();a.Internal.Print.printPages(!g,k,b,function(p,n){p===n&&a.HidePendingActionNotification()},d,e)},CopySelectedTextToClipboard:function(){var b=this.GetSelectedText();
if(null!=b&&""!=b){var d=dvJQuery("<textarea>");d.css({position:"absolute",left:"-1000px",top:"-1000px"});d.addClass("dvTemporaryTextToCopy"+a.uniqueID);d.text(b);dvJQuery(a.dom.mainArea).append(d);document.querySelector(".dvTemporaryTextToCopy"+a.uniqueID).select();try{var e=document.execCommand("copy");d.remove();if(!e)throw"failed";}catch(g){a.dom.copyTextInput.value=b,a.DisplayDialogForm(dvJQuery(a.dom.copyDialog),a.Localize("_title_copy_dialog"),null,function(){a.dom.copyTextInput.focus()},null,
[{text:a.Localize("_label_close"),"class":"btn-valid",click:function(){dvJQuery(a.dom.copyDialog).dvDialog("close")}}])}this.dom.updateButtons();return DocuViewareAPI.Status.OK}},HighlightSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var d=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<d.length){for(var e=[],g=0;g<d.length;g++)e.push({type:2,pageNo:d[g].pageNo,coordinates:{left:d[g].left,top:d[g].top,height:d[g].height,width:d[g].width},
appearance:{fillColor:null!=b?b:"#FFFF00",rotation:0,squaredBox:!1},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:""}});this.AddAnnot(e,!1,null,null,"highlight");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},
StrikeoutSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var d=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<d.length){for(var e=[],g=0;g<d.length;g++)e.push({type:3,pageNo:d[g].pageNo,coordinates:{left:d[g].left,top:d[g].top+d[g].height/2,height:.001,width:d[g].width},appearance:{borderWidth:.02,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:null!=b?b:"#FF0000"},common:{canResize:!1,canMove:!1,canRotate:!1,
canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:"",publicTag:""}});this.AddAnnot(e,!1,null,null,"strikeout");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},UnderlineSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;
var d=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<d.length){for(var e=[],g=0;g<d.length;g++)e.push({type:3,pageNo:d[g].pageNo,coordinates:{left:d[g].left,top:d[g].top+d[g].height,height:.001,width:d[g].width},appearance:{borderWidth:.02,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:null!=b?b:"#FF0000"},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,
canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:"",publicTag:""}});this.AddAnnot(e,!1,null,null,"underline");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},RedactSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var d=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<d.length){for(var e=[],g=0;g<d.length;g++){var k={type:17,
pageNo:d[g].pageNo,coordinates:{left:d[g].left,top:d[g].top,height:d[g].height,width:d[g].width},appearance:null,common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:""}};k.appearance=a.Internal.Annotations.getAnnotPropertiesValues(17);b&&(k.appearance.fillColor=b);e.push(k)}this.AddAnnot(e,!1,null,null,"redaction mark");
this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},GetSelectedText:function(){return a.Internal.Text.getSelectedText()},AddSelectedTextContextMenuItem:function(b,d,e){if(b&&"function"===typeof d&&this.dom.viewerContextMenu){var g=document.createElement("a");g.href="#";g.className="dv-list-group-item";g.title=b;g.style.color=this.dom.UIconfig.strokeColor;var k=document.createElement("span");k.className=
"context-menu-icon";e&&e.nodeName&&"svg"===e.nodeName?(e.setAttribute("width","100%"),e.setAttribute("height","100%"),k.appendChild(e)):k.innerHTML="string"===typeof e?e:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M71.6,110.7h60.3v76.1H71.6L71.6,110.7z M296.4,81.6h39.8v49.8h-39.8V81.6z M141.5,275.4h43.9v55.4h-43.9V275.4z\t M321.1,435.9H354v41.5h-32.9V435.9z M295.1,27.7h23.3v29.1h-23.3V27.7z M177.2,142.5h38.4v49.8h-38.4V142.5z M256.7,357h50.7v65\th-50.7V357z M78.5,345.9h23.3V375H78.5V345.9z M192.3,365.3h34.3v42.9h-34.3V365.3z M345.8,351.5h20.6v26.3h-20.6V351.5z\t M207.3,232.5h23.3v29.1h-23.3V232.5z M400.6,182.7h23.3v29.1h-23.3V182.7z M129.2,408.2h34.3v42.9h-34.3V408.2z M114.1,47h23.3\tv29.1h-23.3V47z M386.9,390.2h35.6v44.3h-35.6V390.2z M256.7,0h-60.3v92.7H269V11.1C269,11.1,256.7,0,256.7,0z M247.1,76.1h-38.4V72\th38.4V76.1z M256.7,59.5h-48V54h48V59.5z M256.7,41.5h-48V36h48C256.7,36,256.7,41.5,256.7,41.5z M256.7,23.5h-48V18h48V23.5z\t M256.7,11.1V2.8l9.6,8.3C266.3,11.1,256.7,11.1,256.7,11.1z M94.9,215.9H34.6v92.7h72.7v-81.6C107.3,226.9,94.9,215.9,94.9,215.9z\t M86.7,293.4H48.3v-5.5h38.4V293.4z M94.9,275.4h-48v-5.5h48V275.4z M94.9,257.4h-48v-5.5h48V257.4z M94.9,240.8h-48v-5.5h48\tC94.9,235.2,94.9,240.8,94.9,240.8z M94.9,226.9v-8.3l9.6,8.3H94.9z M374.6,177.1l-21.9-19.4H240.2v171.6h134.4\tC374.6,329.3,374.6,177.1,374.6,177.1z M336.2,296.1h-71.3v-5.5h71.3C336.2,290.6,336.2,296.1,336.2,296.1z M352.7,272.6h-87.7v-5.5\th87.7V272.6z M352.7,247.7h-87.7v-5.5h87.7V247.7z M352.7,222.8h-87.7v-5.5h87.7V222.8z M352.7,197.9h-87.7v-4.2h87.7\tC352.7,193.7,352.7,197.9,352.7,197.9z M352.7,177.1v-15.2l17.8,15.2H352.7z M465.1,244.9h-60.3v92.7h72.7V256\tC477.4,256,465.1,244.9,465.1,244.9z M455.5,322.4h-38.4v-5.5h38.4V322.4z M465.1,304.4h-48v-5.5h48V304.4z M465.1,286.4h-48v-5.5\th48V286.4z M465.1,268.5h-48v-5.5h48C465.1,262.9,465.1,268.5,465.1,268.5z M465.1,256v-8.3l9.6,8.3H465.1z M402,96.9h-35.6v54H413\tv-44.3C413,106.6,402,96.9,402,96.9z M393.8,139.8h-19.2v-5.5h19.2V139.8z M404.7,128.7h-30.2v-5.5h30.2V128.7z M404.7,116.2h-30.2\tv-5.5h30.2C404.7,110.7,404.7,116.2,404.7,116.2z M402,106.6v-8.3l9.6,8.3H402z M260.8,458h-35.6v54h46.6v-44.3\tC271.8,467.7,260.8,458,260.8,458z M252.6,500.9h-19.2v-5.5h19.2V500.9z M263.5,489.9h-30.2v-5.5h30.2 C263.5,484.3,263.5,489.9,263.5,489.9z M263.5,477.4h-30.2v-5.5h30.2V477.4z M259.4,467.7v-8.3l9.6,8.3H259.4z"/></svg>';
g.appendChild(k);e=document.createElement("span");e.className="context-menu-label";e.innerText=b;g.appendChild(e);g.addEventListener("click",function(){var p=a.Internal.Text.getSelectedTextAreas(1);d(p);a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1)});a.cache.addedSelectedTextContextMenuItem.push(g);this.dom.viewerContextMenu.firstChild.appendChild(g);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},ResetSelectedTextContextMenu:function(){for(;0!=a.cache.addedSelectedTextContextMenuItem.length;)a.cache.addedSelectedTextContextMenuItem[0].parentNode.removeChild(a.cache.addedSelectedTextContextMenuItem[0]),
a.cache.addedSelectedTextContextMenuItem.splice(0,1);return DocuViewareAPI.Status.OK},AddAnnotationsActionButton:function(b,d,e){if(b&&d&&"function"===typeof e&&this.dom.annotationsActionButtons){var g=0,k=document.createElement("div"),p=dvJQuery("div[id^='annotationActionButtonsSplitter']").length+1;k.id="annotationActionButtonsSplitter"+p+this.uniqueID;k.style.fill=this.dom.UIconfig.strokeColor;k.style.height="16px";k.style.width="1px";k.style.marginLeft="8px";k.style.marginRight="8px";k.style.float=
"left";k.style.borderRight="solid";k.style.borderRightWidth="1px";k.style.borderRightColor=this.UIconfig.strokeColor;g+=dvJQuery(k).outerWidth()+2;this.dom.annotationsActionButtons.appendChild(k);g=document.createElement("div");p=dvJQuery("div[id^='annotationActionCustomButtons']").length+1;g.id="annotationActionCustom"+p+this.uniqueID;g.title=b;g.style.fill=this.dom.UIconfig.strokeColor;g.style.height="16px";g.style.width="16px";g.style.float="left";g.innerHTML=d;g.addEventListener("mouseenter",
function(){dvJQuery(this).css("cursor","pointer");dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor)});g.addEventListener("mouseleave",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});g.addEventListener("click",function(){e({id:a.dom.selectedAnnotation.annotApp.id})});this.dom.annotationsActionButtons.appendChild(g);this.Internal.Annotations.unselectAll();return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},ShowThumbnailsSnapIn:function(){return this.dom.thumbnailArea?
this.SelectSnapIn("thumbnails",!1):DocuViewareAPI.Status.GenericError},ShowBookmarksSnapIn:function(){return this.dom.bookmarksArea?this.SelectSnapIn("bookmarks",!1):DocuViewareAPI.Status.GenericError},ShowSearchSnapIn:function(){if(this.dom.searchArea){var b=this.SelectSnapIn("search",!1);b==DocuViewareAPI.Status.OK&&(a.dom.searchResultsContainer.style.height=dvJQuery(a.dom.searchArea).outerHeight(!0)-dvJQuery(a.dom.searchPanelForm).outerHeight(!0)+"px",dvJQuery(this.dom.searchValueInput).focus());
return b}return DocuViewareAPI.Status.GenericError},ShowAnnotationsSnapIn:function(){return this.dom.annotationsArea?this.SelectSnapIn("annotations",!1):DocuViewareAPI.Status.GenericError},ShowCommentsSnapIn:function(){return this.dom.commentsArea?this.SelectSnapIn("comments",!1):DocuViewareAPI.Status.GenericError},ShowRedactionSnapIn:function(){return this.dom.commentsArea?this.SelectSnapIn("redaction",!1):DocuViewareAPI.Status.GenericError},IsSnapinsPanelVisible:function(){return this.dom.leftSideArea?
"none"!=this.dom.leftSideContainerPanelsArea.style.display:!1},SetSnapinsPanelVisibility:function(b,d,e){if(!this.dom.leftSideArea)return DocuViewareAPI.Status.GenericError;var g=this.dom.leftSideContainerPanelsArea.style.display;if(b){if(!this.IsSnapinsPanelVisible()||d)d&&(d=Math.max(d,dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width())),dvJQuery(a.dom.leftSideArea).animate({width:d?d:a.dom.leftSideArea.oldWidth},100,"linear",function(){dvJQuery(a.dom.leftsideContainer).css("width",
"");a.dom.updateResizeBarVisibility();dvJQuery(a.dom.leftSideContainerPanelsArea).show(0,function(){if(g!=a.dom.leftSideContainerPanelsArea.style.display||e)a.events.onNewViewerSize(),a.dom.ensureSelectedThumbnailVisibility(!1)});dvJQuery(a.dom.leftSideArea).resizable("enable");d?a.dom.sidePanelResized():a.dom.sidePanelToggled(!1)})}else this.IsSnapinsPanelVisible()&&(this.UnselectSelectedSnapin(),a.dom.leftSideArea.oldWidth=d?d+"px":a.dom.leftSideArea.style.width,dvJQuery(a.dom.leftSideArea).animate({width:dvJQuery(a.dom.leftsideContainer).width()-
dvJQuery(a.dom.leftSideContainerPanelsArea).width()},100,"linear",function(){a.dom.updateResizeBarVisibility();dvJQuery(a.dom.leftSideContainerPanelsArea).hide(0,function(){if(g!=a.dom.leftSideContainerPanelsArea.style.display||e)a.events.onNewViewerSize()});dvJQuery(a.dom.leftSideArea).resizable("disable");a.dom.sidePanelToggled(!0)}));return DocuViewareAPI.Status.OK},GetSnapInPanelWidth:function(){return this.IsSnapinsPanelVisible()?parseInt(a.dom.leftSideArea.style.width.replace("px","")):0},SetSnapInPanelWidth:function(b){return this.dom.leftSideArea&&
b===parseInt(b)?null==a.dom.selectedSnapin?(a.dom.leftSideArea.oldWidth=Math.max(b,dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width()),this.SelectFirstAvailableSnapin()):this.SetSnapinsPanelVisibility(!0,b,!0):DocuViewareAPI.Status.GenericError},AddCustomSnapIn:function(b,d,e,g,k,p){function n(C){return"object"===typeof HTMLElement?C instanceof HTMLElement:C&&"object"===typeof C&&null!==C&&1===C.nodeType&&"string"===typeof C.nodeName}if(!this.dom.leftSideArea)return DocuViewareAPI.Status.GenericError;
var w=document.createElement("div");w.id=a.uniqueID+"_snapin_button_"+b;w.className="leftsidebutton";w.title=d;w.style.display=!0===k?"block":"none";w.style.borderTop="1px solid "+a.dom.UIconfig.snapInButtonBorderTop;n(e)?w.innerHTML=e.outerHTML:w.innerHTML=e;w.addEventListener("click",function(){a.SnapInButton_Click(b)});w.addEventListener("mouseenter",function(){a.events.onSnapInButtonMouseEnter(this)});w.addEventListener("mouseleave",function(){a.events.onSnapInButtonMouseLeave(this)});document.getElementById("snapinButtonStrip"+
a.uniqueID).appendChild(w);e=document.createElement("div");e.id=a.uniqueID+"_snapin_panel_"+b;e.className="dv-panel";n(g)?e.innerHTML=g.outerHTML:e.innerHTML=g;document.getElementById("leftsidePanels"+a.uniqueID).appendChild(e);a.snapIns.push({snapInID:a.uniqueID+"_snapin_panel_"+b,buttonID:a.uniqueID+"_snapin_button_"+b,name:b,label:d,onSelection:null==p?null:p});return DocuViewareAPI.Status.OK},FindSnapIn:function(b){if(null!=a.snapIns)for(var d=0;d<a.snapIns.length;d++)if(a.snapIns[d].name==b)return a.snapIns[d];
return null},IsSnapInAvailable:function(b){return(b=a.FindSnapIn(b))?dvJQuery("#"+b.buttonID).is(":visible"):!1},ToggleSnapIn:function(b,d){var e=a.FindSnapIn(b);if(e){d?dvJQuery("#"+e.buttonID).show():(dvJQuery("#"+e.buttonID).hide(),!0===a.IsSnapinsPanelVisible()&&0!==a.SelectFirstAvailableSnapin()&&a.SetSnapinsPanelVisibility(!1));switch(b){case "comments":a.dom.selectedAnnotation&&(a.Internal.Annotations.unselectById(a.dom.selectedAnnotation.annotApp.id),a.Internal.Annotations.selectById(a.dom.selectedAnnotation.annotApp.id))}return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},
UnselectSelectedSnapin:function(){if(this.dom.selectedSnapin){var b=this.FindSnapIn(this.dom.selectedSnapin);if(b){var d=document.getElementById(b.snapInID);b=document.getElementById(b.buttonID);if(d&&b)return this.dom.selectedSnapin=null,null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=""),dvJQuery(d).removeClass("active"),dvJQuery(b).removeClass("active"),dvJQuery(b).attr("aria-selected","false"),b.style.fill="",b.style.backgroundColor="",b.style.borderBottomColor=this.dom.UIconfig.snapInButtonBorderBottom,
b.style.borderTopColor=this.dom.UIconfig.snapInButtonBorderTop,DocuViewareAPI.Status.OK}this.dom.selectedSnapin=null}return DocuViewareAPI.Status.GenericError},SelectFirstAvailableSnapin:function(b){if(null!=a.snapIns)for(b=0;b<a.snapIns.length;b++){var d=document.getElementById(a.snapIns[b].snapInID),e=document.getElementById(a.snapIns[b].buttonID);if(d&&e&&"none"!=e.style.display)return this.SelectSnapIn(a.snapIns[b].name,!0)}return DocuViewareAPI.Status.GenericError},SelectSnapIn:function(b,d){if(this.dom.selectedSnapin==
b)return DocuViewareAPI.Status.OK;var e=this.SetSnapInVisibility(b,!0);if(e==DocuViewareAPI.Status.OK){if(e=this.FindSnapIn(b)){var g=document.getElementById(e.buttonID),k=document.getElementById(e.snapInID);if(g&&k&&"none"!=g.style.display){this.UnselectSelectedSnapin();null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=e.label);dvJQuery(g).addClass("active");g.style.fill="legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?this.dom.UIconfig.headerColor:this.dom.UIconfig.snapinButtonActiveColor;
g.style.fill=this.dom.UIconfig.snapinButtonActiveColor;g.style.backgroundColor=this.dom.UIconfig.panelBackColor;g.style.borderBottomColor=this.dom.UIconfig.panelBackColor;g.style.borderTopColor=this.dom.UIconfig.panelBackColor;dvJQuery(k).addClass("active");if(e.onSelection)if("[object Function]"==={}.toString.call(e.onSelection))e.onSelection();else eval(e.onSelection);dvJQuery(k).focus();this.SetSnapinsPanelVisibility(!0);this.dom.selectedSnapin=b;if(!d)if("thumbnails"===b){if(a.callbacks.onThumbnailsSnapInSelected)a.callbacks.onThumbnailsSnapInSelected()}else if("bookmarks"===
b){if(a.callbacks.onBookmarksSnapInSelected)a.callbacks.onBookmarksSnapInSelected()}else if("search"===b){if(a.callbacks.onSearchSnapInSelected)a.callbacks.onSearchSnapInSelected()}else if("annotations"===b){if(a.callbacks.onAnnotationsSnapInSelected)a.callbacks.onAnnotationsSnapInSelected()}else if("comments"===b&&a.callbacks.onCommentsSnapInSelected)a.callbacks.onCommentsSnapInSelected();return DocuViewareAPI.Status.OK}}return DocuViewareAPI.Status.GenericError}return e},SetSnapInVisibility:function(b,
d){if(d&&"annotations"==b&&0==this.serverCtx.annotationEditorMode)return DocuViewareAPI.Status.GenericError;var e=this.FindSnapIn(b);if(e){var g=this.dom.selectedSnapin;g!=b||d||this.UnselectSelectedSnapin();"redaction"===g&&g!==b&&a.events.isAddingRedactionMarksMode&&a.Internal.Redaction.disableAddRedactionMarksMode();g=document.getElementById(e.buttonID);e=document.getElementById(e.snapInID);"redaction"==b&&d&&(dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+
a.uniqueID+"']")).minicolors({defaultValue:"#000000",letterCase:"uppercase"}),dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(k){dvJQuery(k.target).parents().add(k.target).hasClass("minicolors")||dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("margin-bottom","0px")}),dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("margin-bottom",
"175px");event.stopPropagation()}),dvJQuery(a.dom.redactionFill).find("#redaction_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.redactionFill).find("#redaction_fill_color_control"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("display","inline-block"));if(g&&e)return"none"!=g.style.display!=d&&(g.style.display=d?"":"none",e.style.display=d?"":"none"),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},
Search:function(b,d,e,g,k){this.ClearSearch();this.SubmitSearch(b,d,e,g,k);this.dom.searchArea&&(this.dom.searchValueInput.value=b,this.dom.searchWholeWordInput.checked=d,this.dom.searchCaseSensitiveInput.checked=e,this.dom.searchAnyWordInput.checked=g,dvJQuery(this.dom.searchPageSelect).filter("[value='"+k+"']").prop("checked",!0),dvJQuery(this.dom.searchPageSelect).dvButton("refresh"));return DocuViewareAPI.Status.OK},SetSearchSettings:function(b,d,e,g,k,p){this.dom.searchWholeWordInput.checked=
b;this.dom.searchCaseSensitiveInput.checked=d;this.dom.searchAnyWordInput.checked=e;k&&(a.dom.UIconfig.searchResultBackColor=k);p&&(a.dom.UIconfig.searchResultBorderColor=k);dvJQuery(this.dom.searchPageSelect).filter("[value='"+g+"']").prop("checked",!0);dvJQuery(this.dom.searchPageSelect).dvButton("refresh");return DocuViewareAPI.Status.OK},SearchNavigateToOccurrence:function(b){return a.Internal.Search.occurences[b]&&(b=document.getElementById(a.uniqueID+"searchResultItem"+b))?(a.Internal.Search.navigateToResult(b),
DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},GetSearchResultsCount:function(){return a.Internal.Search._occurences?a.Internal.Search._occurences.length:0},GetCurrentSearchOccurrenceIdx:function(){return a.Internal.Search._currentOccurence?parseInt(a.Internal.Search._currentOccurence.dataset.idx):-1},SubmitSearch:function(b,d,e,g,k){this.ShowSearchSnapIn();if(b){var p=[];p.push(0==k?a.GetCurrentPage():-1);return this.ajax.PostBaseRequest("textsearch",{data:{text:b,pages:p,wholeWord:d,
caseSensitive:e,anyWord:g},success:function(n){n="string"===typeof n?eval("("+n+")"):n;var w=0;n&&n.status==DocuViewareAPI.Status.OK?(a.Internal.Search.addResults(b,n.occurences),0==n.occurences.length?a.callbacks.onSearchInvoked||a.ShowMessage({text:a.Localize("no_result"),backgroundColor:a.dom.UIconfig.headerColor,icon:64,delay:5E3}):(w=n.occurences.length,a.Internal.Search.navigateToFirstResult(),a.dom.searchArea&&(a.dom.searchClearResultsButton.style.display="block"))):(a.callbacks.onSearchInvoked||
a.ShowMessage({text:a.Localize("no_result"),backgroundColor:a.dom.UIconfig.headerColor,icon:64,delay:5E3}),a.Internal.Search.addResults(null,null),a.ajax.HandleError(n));if(a.callbacks.onSearchInvoked)a.callbacks.onSearchInvoked({occurrences:w})}},!1)}return DocuViewareAPI.Status.GenericError},UpdateLayout:function(){this.events.onResize();return DocuViewareAPI.Status.OK},ClearSearch:function(){this.Internal.Search.clearResults();this.dom.searchArea&&(this.dom.searchValueInput.value="",this.dom.searchClearResultsButton.style.display=
"none");return DocuViewareAPI.Status.OK},CommentsClearSearch:function(){this.dom.commentsSearchArea&&(this.dom.commentsSearchValueInput.value="",this.dom.commentsSearchClearResultsButton.style.display="none");a.refreshCommentsPanel();return DocuViewareAPI.Status.OK},SubmitCommentsSearch:function(b){this.ShowCommentsSnapIn();if(!b)return DocuViewareAPI.Status.GenericError},CommentsExpandCollapseAll:function(){dvJQuery(a.dom.commentsCollapseExpandAllButton).hasClass("dvcolapsed")?(dvJQuery(a.dom.commentsCollapseExpandAllButton).removeClass("dvcolapsed"),
dvJQuery(".dvcomment-user .dvtoggle").removeClass("dvcolapsed"),dvJQuery(".dvcomment-content").slideDown(),"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" style="height:16px;width:16px;" viewBox="0 0 512 512" xml:space="preserve"><path d="m87 254.3 169-169 169 169-30.3 30.1L277.3 167v302.3h-42.7V167L117.3 284.4 87 254.3m169-169h213.3V42.7H42.7v42.7H256z"/></svg>'):"material"===a.dom.mainArea.attributes["data-theme-icon"].value?
dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" style="height:16px;width:16px;" viewBox="0 0 512 512" xml:space="preserve"><path d="m87 254.3 169-169 169 169-30.3 30.1L277.3 167v302.3h-42.7V167L117.3 284.4 87 254.3m169-169h213.3V42.7H42.7v42.7H256z"/></svg>'):"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 504 504" style="enable-background:new 0 0 504 504" xml:space="preserve"><path d="M44 96.4c.3 14.4 11.5 25.8 25.4 25.6h365.3c13.8.1 25.1-11.3 25.4-25.6.3-14.4-10.8-26.1-24.6-26.4h-366c-14-.1-25.2 11.3-25.5 25.6v.8zM44 415.9c0 9.9 7.7 18 17.3 18 4.7 0 9.2-1.9 12.4-5.5l178.2-185 178.2 185.1c6.6 7.2 17.6 7.4 24.5.5 6.9-6.9 7.1-18.3.5-25.5l-.5-.5-190.4-197.8c-6.7-7-17.7-7-24.5 0L49.3 403c-3.4 3.3-5.3 8-5.3 12.9z"/></svg>')):
(dvJQuery(a.dom.commentsCollapseExpandAllButton).addClass("dvcolapsed"),dvJQuery(".dvcomment-user .dvtoggle").addClass("dvcolapsed"),dvJQuery(".dvcomment-content").slideUp(),"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" style="height:16px;width:16px;" viewBox="0 0 512 512" xml:space="preserve"><path d="m425 257.7-169 169-169-169 30.3-30.1L234.7 345V42.7h42.7V345l117.3-117.5 30.3 30.2m-169 169H42.7v42.7h426.7v-42.7H256z"/></svg>'):
"material"===a.dom.mainArea.attributes["data-theme-icon"].value?dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" style="height:16px;width:16px;" viewBox="0 0 512 512" xml:space="preserve"><path d="m425 257.7-169 169-169-169 30.3-30.1L234.7 345V42.7h42.7V345l117.3-117.5 30.3 30.2m-169 169H42.7v42.7h426.7v-42.7H256z"/></svg>'):"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 504 504" style="enable-background:new 0 0 504 504" xml:space="preserve"><path d="M460 407.6c-.3-14.4-11.5-25.8-25.4-25.6H69.4c-13.8-.1-25.1 11.3-25.4 25.6s10.8 26.1 24.6 26.4h366c13.8.1 25.1-11.3 25.4-25.6v-.8zM460 88.1c0-9.9-7.7-18-17.3-18-4.7 0-9.2 1.9-12.4 5.5l-178.2 185L73.9 75.5c-6.6-7.2-17.6-7.4-24.5-.5-6.9 6.9-7.1 18.3-.5 25.5l.5.5 190.4 197.8c6.7 7 17.7 7 24.5 0L454.7 101c3.4-3.3 5.3-8 5.3-12.9z"/></svg>'))},
SetLoadFromUriDialogVisibility:function(b,d){this.dom.isLoadFromUriDialogVisible!=b&&(b?(dvJQuery(this.dom.openFromUriArea).slideDown({complete:function(){dvJQuery(document).on("mousedown.toggleOpenUriEvent",function(e){dvJQuery(a.dom.openFromUriArea).is(dvJQuery(e.target))||0!=dvJQuery(a.dom.openFromUriArea).has(dvJQuery(e.target)).length||a.ToggleLoadFromUriDialog()});a.dom.isLoadFromUriDialogVisible=b;"undefined"!==typeof d&&!0!==d||dvJQuery(a.dom.addressBar).focus()}}),dvJQuery(this.dom.openFromUriButton).addClass("button_active")):
(dvJQuery(document).unbind("mousedown.toggleOpenUriEvent"),dvJQuery(this.dom.openFromUriArea).slideUp({complete:function(){a.dom.isLoadFromUriDialogVisible=b}}),dvJQuery(this.dom.openFromUriButton).removeClass("button_active")),this.dom.updateButtons())},LoadFromUri:function(b,d,e,g,k,p){function n(K){a.ajax.downloading=!1;0!=a.dom.progressbar.value()&&(a.dom.progressbar.go(100),a.dom.progressbar.value100=100);dvJQuery(a.dom.mainSpinner).hide();a.SetLoadFromUriDialogVisibility(!1);if(K){if(a.callbacks.onURIOpenSuccess)a.callbacks.onURIOpenSuccess()}else if(a.callbacks.onURIOpenError)a.callbacks.onURIOpenError()}
function w(K){a.ajax.HandleError(K);n(!1)}function C(K){if(a.ajax.downloading&&(K="string"===typeof K?eval("("+K+")"):K,!K||!K.ignoreResponse))if(K&&K.status==DocuViewareAPI.Status.OK)if(K.isTransfering){if(0<K.progress&&100>=K.progress){100!=K.progress&&(a.dom.progressbar.go(K.progress),a.dom.progressbar.value100=K.progress);var F=dvJQuery(a.dom.mainSpinnerContent);F.children(F.children.length-1).text(a.Localize("label__downloading_document")+" ("+K.progress+"%)")}a.ajax.PostBaseRequest("loadfromuri",
{data:{transferID:a.ajax.transferID,progressRequest:!0,URI:b,fileName:d,password:k,ignoreFileHostingURI:null!=p?p:!1},success:C,error:w},!1,!0)}else n(!0),a.ajax.SetNewServerCtx(K);else n(!1),a.ajax.HandleError(K)}if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.callbacks.onURIOpenError=g;this.callbacks.onURIOpenSuccess=e;this.ajax.downloading=!0;this.ajax.transferID=Date.now();e=dvJQuery(this.dom.mainSpinnerContent);e.children(e.children.length-1).text(this.Localize("label__loading_progress"));
a.SetLoadFromUriDialogVisibility(!1);dvJQuery(this.dom.mainSpinner).show();a.ajax.PostBaseRequest("loadfromuri",{data:{transferID:a.ajax.transferID,progressRequest:!1,URI:b,fileName:d,clientConfiguration:a.getConfig(),password:k,ignoreFileHostingURI:null!=p?p:!1},success:C,error:w},!1,!0);return DocuViewareAPI.Status.OK},ExitAnnotationDrawingMode:function(){2==this.events.mouseMode&&this.events.isDrawingPath&&(this.ResetScrollConfig(!1),this.dom.freehandCan.style.display="none",this.events.isDrawingPath=
!1,this.Internal.Annotations.addAnnotInteractive(),this.dom.drawingModeArea.style.display="none",this.dom.modalOverlayArea.style.display="none",this.dom.controlArea.style.zIndex="1");a.dom.UIconfig.disableAnnotationDrawingModePanel&&(null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).removeClass("button_active"),null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).removeClass("button_active"),null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).removeClass("button_active"),
null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).removeClass("button_active"));this.dom.addViewAreaTouchAction();this.Internal.Annotations.stopAnnotInteractiveAdd();return DocuViewareAPI.Status.OK},IsFullScreenMode:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},ToggleFullscreen:function(){if(a.isSafari||a.isIOS||a.isIE9||a.isIE10||this.hasPendingAction(!1,!1,!1))return DocuViewareAPI.Status.GenericError;
var b=this.IsFullScreenMode();if(b)document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{dvJQuery(a.dom.fullscreenButton).addClass("button_active");var d=a.dom.mainArea;d.requestFullscreen?(DocuViewareUtilities.addEvent(document,"fullscreenchange",function k(g){document.fullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,
"fullscreenchange",k,!1))},!1),d.requestFullscreen()):d.msRequestFullscreen?(DocuViewareUtilities.addEvent(document,"MSFullscreenChange",function k(g){document.msFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"MSFullscreenChange",k,!1))},!1),d.msRequestFullscreen()):d.mozRequestFullScreen?(DocuViewareUtilities.addEvent(document,"mozfullscreenchange",function k(g){document.mozFullScreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"mozfullscreenchange",
k,!1))},!1),d.mozRequestFullScreen()):d.webkitRequestFullScreen&&(DocuViewareUtilities.addEvent(document,"webkitfullscreenchange",function k(g){document.webkitFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"webkitfullscreenchange",k,!1))},!1),d.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT));if(a.callbacks.onFullscreenModeChanged){if(!b)a.callbacks.onFullscreenModeChanged({newMode:!0})}else return DocuViewareAPI.Status.GenericError;a.dom.UIconfig.old_viewer_width=
a.width;a.dom.UIconfig.old_viewer_height=a.height;a.dom.leftSideArea&&"none"!=a.dom.leftSideContainerPanelsArea.style.display&&(b=window.screen.width/a.width,a.dom.leftSideArea.style.width=Math.round((a.dom.leftSideArea.style.width.replace("px","")||a.dom.leftSideArea.offsetWidth)*b)+"px");a.events.onNewViewerSize();a.dom.updateButtons()}return DocuViewareAPI.Status.OK},ExitFullscreen:function(){if(this.hasPendingAction(!1,!1,!1))return DocuViewareAPI.Status.GenericError;dvJQuery(a.dom.fullscreenButton).removeClass("button_active");
a.dom.updateButtons();var b=a.dom.UIconfig.old_viewer_width/a.width;a.dom.leftSideArea&&("none"!=a.dom.leftSideContainerPanelsArea.style.display?a.dom.leftSideArea.style.width=Math.round((a.dom.leftSideArea.style.width.replace("px","")||a.dom.leftSideArea.offsetWidth)*b)+"px":a.dom.leftSideContainerPanelsArea.style.width=Math.round(parseFloat(a.dom.leftSideContainerPanelsArea.style.width.replace("px",""))*b)+"px");a.events.onNewViewerSize();if(a.callbacks.onFullscreenModeChanged)a.callbacks.onFullscreenModeChanged({newMode:!1})},
SetZoomMode:function(b){return a.ajax.PostBaseRequest("zoommode",{data:{zoomMode:b},success:function(d){a.ajax.HandleServerContextResponse("string"===typeof d?eval("("+d+")"):d,!1)}},!1)},IsMagnifierEnabled:function(){return a.Internal.Magnifier.isMagnifying},ToggleMagnifier:function(){return a.Internal.Magnifier.toggle()},EnableMagnifier:function(){return a.Internal.Magnifier.enable()},DisableMagnifier:function(){return a.Internal.Magnifier.disable()},SetMouseMode:function(b){a.events.mouseMode=
b;var d=DocuViewareAPI.Status.OK;a.events.setCursor();a.Internal.Selection.selectionArea.hide();this.IsMagnifierEnabled()&&this.DisableMagnifier();switch(b){case 0:this.dom.addViewAreaTouchAction();case 1:a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!1);a.events.ownMouseEvents=!1;break;case 3:this.dom.removeViewAreaTouchAction();a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();
a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;case 4:this.dom.removeViewAreaTouchAction();a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;case 5:this.dom.removeViewAreaTouchAction(),a.events.ownMouseEvents=!0;default:d=DocuViewareAPI.Status.GenericError}a.dom.udpateMouseModeButtons(b);
a.dom.updateButtons();return d},GetMouseMode:function(){return a.events.mouseMode},NewViewerSizePreview:function(){if(!this.serverCtx.singlePageView||2==this.serverCtx.documentPosition){var b=DocuViewareUtilities.clonePageCanvasSizes(a.cache.pageCanvasSize);if(null!=b){var d=a.dom.getViewerContainer(),e=d.offsetWidth;d=d.offsetHeight;a.serverCtx.vScrollbarVisible&&(e-=a.dom.sbWidth);a.serverCtx.hScrollbarVisible&&(d-=a.dom.sbWidth);for(var g=b.length,k=!0,p=0,n=0;n<g;n++){n+1<g&&(p+=a.serverCtx.itemsVerticalSpacing);
var w=b[n].Width,C=b[n].Height;k&&w>e&&(k=!1);p+=C}var K=p<d;if(K||k){var F=0;for(n=0;n<g;n++)w=b[n].Width,C=b[n].Height,k&&(b[n].OffsetX=(e-w)/2),K&&(b[n].OffsetY=F+(d-p)/2),F+=C+a.serverCtx.itemsVerticalSpacing}a.SetupViewerArea(b,a.cache.pageCanvasZoom,!0,!0)}}},CanChangeZoom:function(){return!a.hasPendingAction(!0,!0,!0,!1)},ZoomPreview:function(b){b>a.serverCtx.zoomMax?b=a.serverCtx.zoomMax:b<a.serverCtx.zoomMin&&(b=a.serverCtx.zoomMin);if(Math.round(1E3*b)!==Math.round(1E3*a.cache.pageCanvasZoom)){a.events.restartZoomPreviewAutoSubmitter();
var d=DocuViewareUtilities.clonePageCanvasSizes(a.cache.pageCanvasSizeNoPreview);if(null!=d){var e=a.dom.getViewerContainer(),g=e.offsetWidth,k=e.offsetHeight;a.serverCtx.vScrollbarVisible&&(g-=a.dom.sbWidth);a.serverCtx.hScrollbarVisible&&(k-=a.dom.sbWidth);e=d.length;for(var p=b/a.serverCtx.zoom,n=0,w=0,C=0;C<e;C++)d[C].Width>w&&(w=d[C].Width);var K=w=0;for(C=0;C<e;C++){var F=d[C].Width*p,Y=d[C].Height*p;F>w&&(w=F);d[C].OffsetY=n;d[C].OffsetX=0;d[C].Width=F;d[C].Height=Y;C==e-1&&(K=n+Y);n+=Y+a.serverCtx.itemsVerticalSpacing}switch(a.serverCtx.documentPosition){case 0:p=
0;n=k>K&&0==d[0].OffsetY?(k-K)/2:0;break;case 1:p=g>w?g-w:0;n=k>K&&0==d[0].OffsetY?(k-K)/2:0;break;default:p=g>w?(g-w)/2:0;n=k>K&&0==d[0].OffsetY?(k-K)/2:0;break;case 4:n=p=0;break;case 5:p=g>w?g-w:0;n=0;break;case 6:p=g>w?(g-w)/2:0;n=0;break;case 7:p=0;n=k>K&&0==d[0].OffsetY?k-K:0;break;case 8:p=g>w?g-w:0;n=k>K&&0==d[0].OffsetY?k-K:0;break;case 9:p=g>w?(g-w)/2:0,n=k>K&&0==d[0].OffsetY?k-K:0}C=a.serverCtx.forceScrollBars||a.viewerHeight<K||!a.serverCtx.singlePageView&&1<a.serverCtx.pageCount;Math.round(w)<
Math.round(g)&&(C?a.serverCtx.vScrollbarVisible||(p-=a.dom.sbWidth/2):a.serverCtx.vScrollbarVisible&&(p+=a.dom.sbWidth/2));g=a.serverCtx.forceScrollBars||Math.round(a.viewerWidth)<Math.round(w);Math.round(K)<Math.round(k)&&(g?a.serverCtx.hScrollbarVisible||(n-=a.dom.sbWidth/2):a.serverCtx.hScrollbarVisible&&(n+=a.dom.sbWidth/2));for(C=0;C<e;C++)g=p,d[C].Width<w&&(g+=(w-d[C].Width)/2),0!=g&&(d[C].OffsetX+=g),0!=n&&(d[C].OffsetY+=n);e=a.Internal.Coordinates.getViewerScrollTop();w=a.Internal.Coordinates.getViewerScrollTopMax();
g=a.Internal.Coordinates.getViewerScrollLeft();k=a.Internal.Coordinates.getViewerScrollLeftMax();a.SetupViewerArea(d,b);a.dom.viewerArea.scrollLeft=a.Internal.Coordinates.getViewerScrollLeftMax()*(g/k);a.dom.viewerArea.scrollTop=a.Internal.Coordinates.getViewerScrollTopMax()*(e/w);d=this.Internal.Pages.getVisiblePageNumbers();if(null!=d)for(e=0;e<d.length;e++)a.DrawPage(a.cache.getPageObject(d[e]),b!==a.serverCtx.zoom)}}},ComputeNextZoom:function(b,d){for(var e=a.serverCtx.zoom,g=0;g<b;g++)e=d?e+
a.serverCtx.zoomStep/100*e:e/(a.serverCtx.zoomStep/100+1);return e},ZoomINPreview:function(b){if(!a.CanChangeZoom())return DocuViewareAPI.Status.GenericError;b=a.ComputeNextZoom(b,!0);a.ZoomPreview(b);return DocuViewareAPI.Status.OK},ZoomIN:function(b,d,e,g,k){if(!a.CanChangeZoom())return DocuViewareAPI.Status.GenericError;d&&a.ZoomINPreview(b);if(e)return this.zoomInTimeout&&(clearTimeout(this.zoomInTimeout),this.zoomInTimeout=null),this.zoomInTimeout=setTimeout(function(){a.ZoomIN(b,!1,!1,g,k)},
0),DocuViewareAPI.Status.OK;d=a.ComputeNextZoom(b,!0);return this.SetCurrentZoom(d)},ZoomOUTPreview:function(b){if(!a.CanChangeZoom())return DocuViewareAPI.Status.GenericError;b=a.ComputeNextZoom(b,!1);a.ZoomPreview(b);return DocuViewareAPI.Status.OK},ZoomOUT:function(b,d,e,g,k){if(a.CanChangeZoom()){d&&a.ZoomOUTPreview(b);if(e)return this.zoomOutTimeout&&(clearTimeout(this.zoomOutTimeout),this.zoomOutTimeout=null),this.zoomOutTimeout=setTimeout(function(){a.ZoomOUT(b,!1,!1,g,k)},0),DocuViewareAPI.Status.OK;
d=a.ComputeNextZoom(b,!1);return this.SetCurrentZoom(d)}},ZoomRect:function(b,d,e){if(a.CanChangeZoom())return b&&Number.isFinite(b.left)&&Number.isFinite(b.top)&&Number.isFinite(b.width)&&Number.isFinite(b.height)?(b={data:{pageNo:this.GetCurrentPage(),left:b.left,top:b.top,width:b.width,height:b.height},success:function(g){a.ajax.HandleServerContextResponse("string"===typeof g?eval("("+g+")"):g,!1);d&&d()},error:function(){e&&e()}},this.ajax.PostBaseRequest("zoomrect",b,!1)):DocuViewareAPI.Status.GenericError},
Rotate:function(b,d){return this.ajax.PostBaseRequest("rotate",{data:{rotation:b,mode:d},success:function(e){a.ajax.HandleServerContextResponse("string"===typeof e?eval("("+e+")"):e,!1);if(a.callbacks.onRotationChanged)a.callbacks.onRotationChanged(a.serverCtx.renderRotation)}})},RotatePage:function(b,d,e,g){"number"==typeof b&&(b=[b]);return this.ajax.PostBaseRequest("rotate",{data:{rotation:d,pages:b,mode:2},success:function(k){a.ajax.HandleServerContextResponse("string"===typeof k?eval("("+k+")"):
k,!1);e&&e()},error:function(){g&&g()}})},DeletePageInteractive:function(b,d,e){a.DisplayDialogForm(dvJQuery(a.dom.pageActionRemoveConfirm),a.Localize("_title_confirm_page_removal"),null,function(){dvJQuery(a.dom.pageActionRemoveConfirmMessage).html(a.Localize("_message_confirm_page_removal"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.pageActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.DeletePage(b,d,e);dvJQuery(a.dom.pageActionRemoveConfirm).dvDialog("close")}}])},
DeletePage:function(b,d,e){"number"==typeof b&&(b=[b]);return this.ajax.PostBaseRequest("deletepage",{data:{pages:b},success:function(g){a.ajax.HandleServerContextResponse("string"===typeof g?eval("("+g+")"):g,!1,!0,!0);d&&d();if(a.callbacks.onPageDeleted)a.callbacks.onPageDeleted({pages:b})},error:function(){e&&e()}})},SwapPages:function(b,d,e,g){return"number"==typeof b&&"number"==typeof d?this.ajax.PostBaseRequest("swappages",{data:{page1:b,page2:d},success:function(k){a.ajax.HandleServerContextResponse("string"===
typeof k?eval("("+k+")"):k,!1);e&&e()},error:function(){g&&g()}}):DocuViewareAPI.Status.GenericError},SelectPage:function(b,d){if(!(this.serverCtx.documentLoaded&&0<b&&b<=this.serverCtx.pageCount))return DocuViewareAPI.Status.GenericError;b!=this.GetLastPageNoRequest()?this.SelectPageEx(b,!0,!0,!0,!1,!1,d):d&&d();return DocuViewareAPI.Status.OK},EnsurePageVisibility:function(b){if(!this.serverCtx.singlePageView&&null!=this.cache.canvas)for(var d=0;d<this.cache.canvas.length;d++)if(this.cache.canvas[d].pageNo==
b){var e=this.cache.canvas[d].top;d=this.cache.canvas[d].bottom-e;var g=this.dom.viewerArea.offsetHeight;e=g<d?Math.round(e):Math.round(e+(d-g)/2);a.Internal.Coordinates.getViewerScrollTop()!=e&&(a.events.freezeScrollEvents=!0,setTimeout(function(){a.events.freezeScrollEvents=!1},1E3),a.Internal.Coordinates.setViewerScrollTop(e),a.showVisiblePages(b));break}},EnsurePageRegionVisibility:function(b,d,e,g,k){if((!this.serverCtx.singlePageView||b==a.GetCurrentPage())&&null!=this.cache.canvas)for(var p=
0;p<this.cache.canvas.length;p++)if(this.cache.canvas[p].pageNo==b){var n=this.cache.canvas[p].top,w=this.cache.canvas[p].bottom-n,C=this.dom.viewerArea.offsetHeight,K=this.dom.viewerArea.offsetWidth;p=0;C<w?(w=a.Internal.Pages.getRenderingState(b),d={left:d,top:e,width:g,height:k},e=a.Internal.Matrix.scale(w.contentMatrix,96,96,!1),a.Internal.Matrix.transformBBox(e,0,d),e=d.top+d.height,e>C&&(n+=e-C+2,a.serverCtx.hScrollbarVisible&&(n+=a.dom.sbWidth)),C=d.left+d.width,C>K&&(p=C-K+2,a.serverCtx.vScrollbarVisible&&
(p+=a.dom.sbWidth)),n=Math.round(n)):n=Math.round(n+(w-C)/2);a.Internal.Coordinates.getViewerScrollTop()!=n&&(a.events.freezeScrollEvents=!0,setTimeout(function(){a.events.freezeScrollEvents=!1},1E3),a.Internal.Coordinates.setViewerScrollTop(n),0!=p&&a.Internal.Coordinates.setViewerScrollLeft(p),a.showVisiblePages(b));break}},EnsureCurrentPageVisibility:function(){this.EnsurePageVisibility(this.GetLastPageNoRequest())},SelectPageEx:function(b,d,e,g,k,p,n){a.debug&&console.log("DocuVieware: Select page: "+
b);a.Internal.Thumbnails.reinitThumbnailsSelection();a.Internal.Thumbnails.setThumbnailSelected(b,!0);if(b!=a.GetLastPageNoRequest())return g&&this.dom.updateSelectedPageFader(500,b),e&&!a.serverCtx.singlePageView&&a.EnsurePageVisibility(b),k&&a.serverCtx.singlePageView&&(k=!1),e=this.ajax.latestSelectedPage,this.ajax.latestSelectedPage=b,b=this.ajax.PostBaseRequest("selectpage",{data:{page:b},success:function(w){a.ajax.HandleServerContextResponse("string"===typeof w?eval("("+w+")"):w,k)&&a.dom.updateThumbsStyle(d,
!1);n&&n()},error:function(){}},!1,!0),b!=DocuViewareAPI.Status.OK&&(this.ajax.latestSelectedPage=e),b;p&&a.DrawPage(a.cache.getPageObject(b),!1);n&&n();return DocuViewareAPI.Status.OK},Save:function(b,d,e,g,k,p,n){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;if(""==b)return a.DisplayError(a.Localize("error__saving_filename")),DocuViewareAPI.Status.GenericError;if(""==d)return a.DisplayError(a.Localize("error__saving_file_format")),DocuViewareAPI.Status.GenericError;window.location=
a.appControllerPath+"/save"+(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID+"&fileName="+encodeURIComponent(b)+"&format="+d+"&pageRange="+(e?e:"*")+"&dropAnnotations="+g+"&flattenAnnotations="+k;p&&p();if(a.callbacks.onDocumentSaved)a.callbacks.onDocumentSaved();return DocuViewareAPI.Status.OK},CloseDocument:function(){return this.serverCtx.documentLoaded?this.ajax.PostBaseRequest("close",{data:{},success:function(b){a.ajax.SetNewServerCtx(null)}},!0):DocuViewareAPI.Status.GenericError},
AddAnnot:function(b,d,e,g,k){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var p=[],n=null;null!=this.Internal.Annotations.defaultAuthor&&(n={},n.author=this.Internal.Annotations.defaultAuthor);for(var w=0;w<b.length;w++){var C=this.Internal.Annotations.mergeAnnotationProperties(b[w].type,b[w].appearance);C.left=b[w].coordinates.left;C.top=b[w].coordinates.top;C.height=b[w].coordinates.height;C.width=b[w].coordinates.width;null!=b[w].appearance.flipX&&(C.flipX=b[w].appearance.flipX,
C.useClientFlipX=!0);null!=b[w].appearance.flipY&&(C.flipY=b[w].appearance.flipY,C.useClientFlipY=!0);for(var K in b[w].common)b[w].common.hasOwnProperty(K)&&(null==n&&(n={}),n[K]=b[w].common[K]);p.push({extProperties:n,properties:C,pageNo:b[w].pageNo})}this.ajax.PostBaseRequest("newannotation",{data:{annots:p},success:function(F){if((F="string"===typeof F?eval("("+F+")"):F)&&null!=F.annots){for(var Y=[],aa=[],ha=0;ha<F.annots.length;ha++){var da=a.Internal.Pages.getRenderingState(F.annots[ha].annotApp.pageNo);
da=a.Internal.Annotations.newController(F.annots[ha].annotApp,da.pageLeft,da.pageTop,da.contentMatrix);aa.push(F.annots[ha].annotApp.pageNo);a.dom.singlePageView&&F.annots[ha].annotApp.pageNo!==a.GetCurrentPage()||a.Internal.Pages.isPageRendered(F.annots[ha].annotApp.pageNo)&&da.render();if(!d&&a.callbacks.onAnnotationAdded)a.callbacks.onAnnotationAdded({id:F.annots[ha].annotApp.id,pageNo:F.annots[ha].annotApp.pageNo});Y.push({id:F.annots[ha].annotApp.id,pageNo:F.annots[ha].annotApp.pageNo});17==
F.annots[ha].annotApp.properties.type&&(da=F.annots[ha].annotApp,a.Internal.Annotations.addAnnotsRedactionReferences({id:da.id,pageNo:da.pageNo,title:da.properties.title,fillColor:da.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!0))}a.updateThumbnails(aa,!0);if(a.callbacks.onTextAnnotated&&k)a.callbacks.onTextAnnotated({userAction:k,resultAnnots:Y})}else a.ajax.HandleError(F);e&&e()},error:function(){g&&g()}},!1);return DocuViewareAPI.Status.OK},GetPageFormFields:function(b){if(b){var d=
[];if(null!=a.cache.FormFields){for(var e=0;e<a.cache.FormFields.length;e++)a.cache.FormFields[e].formFieldApp.pageNo!==b&&"*"!==b||d.push({id:a.cache.FormFields[e].formFieldApp.id,pageNo:a.cache.FormFields[e].formFieldApp.pageNo,properties:a.cache.FormFields[e].formFieldApp.properties});return d}}return DocuViewareAPI.Status.GenericError},UpdateFormFields:function(b,d,e){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;for(var g=[],k=0;k<b.length;k++)g.push({id:b[k].id,pageNo:b[k].pageNo,
updateNo:k,properties:b[k].properties});this.ajax.PostBaseRequest("formfieldsdupdate",{data:{items:g},success:function(p){if(p="string"===typeof p?eval("("+p+")"):p){for(var n=[],w=0;w<p.length;w++){a.Internal.FormFields.removeFormFieldFromCache(p[w].formFieldApp.id);var C=a.Internal.FormFields.newController(p[w].formFieldApp);a.dom.singlePageView&&p[w].formFieldApp.pageNo!==a.GetCurrentPage()||C.render();-1===n.indexOf(p[w].formFieldApp.pageNo)&&n.push(p[w].formFieldApp.pageNo);if(a.callbacks.onFormFieldChanged)a.callbacks.onFormFieldChanged({id:p[w].formFieldApp.id,
pageNo:p[w].formFieldApp.pageNo})}0<n.length&&a.updateThumbnails(n)}else a.ajax.HandleError(p);d&&d()},error:function(){e&&e()}},!1);return DocuViewareAPI.Status.OK},SetAnnotationsInteractionState:function(b){b?a.Internal.Annotations.enableAll():a.Internal.Annotations.disableAll();return DocuViewareAPI.Status.OK},SetAnnotationsVisibility:function(b){return a.Internal.Annotations.setAnnotationsVisibility(b)},AddAnnotInteractive:function(b,d,e,g){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;
a.ExitAnnotationDrawingMode();a.dom.UIconfig.disableAnnotationDrawingModePanel&&(5==b?null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).addClass("button_active"):10==b?null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).addClass("button_active"):11==b?null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).addClass("button_active"):16==b&&null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).addClass("button_active"));
d?(b=this.Internal.Annotations.mergeAnnotationProperties(b,d),e?this.Internal.Annotations.showAnnotationPropertiesUI(b,null,null,g):this.Internal.Annotations.beginAddAnnotInteractive(b)):this.Internal.Annotations.defaultProperties[b].autoCreate?this.Internal.Annotations.beginAddAnnotInteractive(this.Internal.Annotations.defaultProperties[b]):this.Internal.Annotations.showAnnotationPropertiesUI(this.Internal.Annotations.defaultProperties[b],null);return DocuViewareAPI.Status.OK},EditAnnotInteractive:function(b,
d){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var e=dvJQuery.extend(!0,{},this.Internal.Annotations.defaultProperties[b.annotApp.properties.type]);dvJQuery.each(e,function(g,k){e[g]=b.annotApp.properties[g]});return this.Internal.Annotations.showAnnotationPropertiesUI(e,!0,b,d)},DeleteAnnotationById:function(b,d){d="undefined"===typeof d?!0:d;if(b&&null!=a.cache.Annots)for(var e=d?this.GetCurrentPage():-1,g=0;g<a.cache.Annots.length;g++){var k=a.cache.Annots[g];if((!d||
k.annotApp.pageNo==e)&&k.annotApp.id==b)return this.DeleteAnnotations([k])}return DocuViewareAPI.Status.GenericError},DeleteAnnotations:function(b){if(b&&0<b.length){for(var d=[],e=1;e<b.length;e++)d.push(b[e]);return b[0].updateAnnotation(!0,null,!1,d)}return DocuViewareAPI.Status.GenericError},UnselectAllAnnotations:function(){a.Internal.Annotations.unselectAll();return DocuViewareAPI.Status.OK},UpdateAnnotationById:function(b,d){if(b&&null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++){var g=
a.cache.Annots[e];if(g.annotApp.id==b)return g.updateAnnotationDeferred(!1,d)}return DocuViewareAPI.Status.GenericError},GetAnnotationProperties:function(b){if(b&&null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id==b)return e.annotApp.properties}return DocuViewareAPI.Status.GenericError},GetPageAnnotCount:function(b){var d=0;if(null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++)a.cache.Annots[e].annotApp.pageNo===b&&d++;return d},GetPageAnnotId:function(b,
d){var e=0;if(null!=a.cache.Annots)for(var g=0;g<a.cache.Annots.length;g++){var k=a.cache.Annots[g];if(k.annotApp.pageNo===b){if(e===d)return k.annotApp.id;e++}}return DocuViewareAPI.Status.GenericError},GetAnnotationClientTag:function(b){if(b&&null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id==b)return e.annotApp.clientTag}return DocuViewareAPI.Status.GenericError},SetAnnotationClientTag:function(b,d){if(b&&null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++){var g=
a.cache.Annots[e];if(g.annotApp.id==b)return g.annotApp.clientTag=d,g.updateAnnotationDeferred(!1,g.annotApp.properties)}return DocuViewareAPI.Status.GenericError},ApplyAllRedactions:function(){a.Internal.Redaction.disableAddRedactionMarksMode();return a.ajax.PostBaseRequest("redact",{data:{},success:function(b){var d="string"===typeof b?eval("("+b+")"):b;if(d&&d.status===DocuViewareAPI.Status.OK){if(a.callbacks.onRedactionMarksApplied)a.callbacks.onRedactionMarksApplied();a.ajax.HandleServerContextResponse("string"===
typeof b?eval("("+b+")"):b,!1)}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b)}},!1)},HasPendingRedactionMark:function(){return a.Internal.Redaction.hasPendingRedactionMark()},EnableAnnotEditionOnDblClick:function(b){if("boolean"==typeof b)this.dom.enableAnnotEditionOnDblClick=b;else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotAutoCreate:function(b){if(0<b.length)for(var d=0;d<b.length;d++)this.Internal.Annotations.defaultProperties[b[d]].autoCreate=
!1;else for(d=0;d<Object.keys(this.Internal.Annotations.defaultProperties).length;d++)this.Internal.Annotations.defaultProperties[d].autoCreate=!1;return DocuViewareAPI.Status.OK},ResetAnnotToDefault:function(b){if(0<b.length)for(var d=0;d<b.length;d++)this.Internal.Annotations.defaultProperties[b[d]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties([b[d]]);else for(d=0;d<Object.keys(this.Internal.Annotations.defaultProperties).length;d++)this.Internal.Annotations.defaultProperties[d]=
DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(d);return DocuViewareAPI.Status.OK},SetAnnotDefaultAuthor:function(b,d){this.Internal.Annotations.setDefaultAuthor(b);this.dom.commentsAuthorInput.disabled=!0===d?!0:!1;return DocuViewareAPI.Status.OK},SetAnnotPropertiesValues:function(b,d){if(d)this.Internal.Annotations.setDefaultPropertiesValues(b,d);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},GetAnnotPropertiesValues:function(b){return null!=b&&0<=
b&&17>=b?this.Internal.Annotations.getAnnotPropertiesValues(b):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesToDisplay:function(b,d){if(d)this.Internal.Annotations.setDefaultPropertiesToDisplay(b,d);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotPropertiesToDisplayDefault:function(b){if(0<b.length)for(var d=0;d<b.length;d++)this.Internal.Annotations.defaultPropertiesDisplay[b[d]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay([b[d]]);
else for(d=0;d<Object.keys(this.Internal.Annotations.defaultPropertiesDisplay).length;d++)this.Internal.Annotations.defaultPropertiesDisplay[d]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(d);return DocuViewareAPI.Status.OK},EnableAnnotMultiSelect:function(b){a.Internal.Annotations.multiSelectionEnabled=b},FocusAnnot:function(b,d,e){if(b&&null!=a.cache.Annots){if(null!=a.cache.AnnotsComments&&0<a.cache.AnnotsComments.length&&null!=a.cache.AnnotsComments)for(var g=0;g<a.cache.AnnotsComments.length;g++){var k=
a.cache.AnnotsComments[g];if(k.annotApp.id===b){d&&a.Internal.Annotations.selectAnnotationCommentById(b,e,e);var p=k.annotApp.pageNo;return a.SelectPage(p,function(){var w=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(k.annotApp,!0);null!=w&&(d&&w.visible&&(a.Internal.Annotations.unselectAll(),a.Internal.Annotations.selectById(w.id)),e&&a.EnsurePageRegionVisibility(p,w.bbox.Left,w.bbox.Top,w.bbox.Width,w.bbox.Height))})}}for(g=0;g<a.cache.Annots.length;g++){var n=a.cache.Annots[g];if(n.annotApp.id===
b){if(n.annotApp.visible)return p=n.annotApp.pageNo,a.SelectPage(p,function(){e&&a.EnsurePageRegionVisibility(p,n.annotApp.bbox.Left,n.annotApp.bbox.Top,n.annotApp.bbox.Width,n.annotApp.bbox.Height);d&&a.Internal.Annotations.selectById(n.annotApp.id)});break}}}return DocuViewareAPI.Status.GenericError},UnselectAnnot:function(b){if(b&&null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id===b)return a.Internal.Annotations.unselectById(e.annotApp.id)}return DocuViewareAPI.Status.GenericError},
GetAnnotBBoxOnViewer:function(b){if(b&&null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id===b)return e.getBBoxOnViewer()}return DocuViewareAPI.Status.GenericError},GetTwainAcquisitionServiceInfo:function(b,d){a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"ServiceVersion/",success:function(e){e?b&&b(e):d&&d()},error:function(){d&&d({status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}});
return DocuViewareAPI.Status.OK},GetTwainAcquisitionSources:function(b,d){a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"GetTwainSources/",success:function(e){if(e){if(b){if(null!=e.GetTwainSourcesResult&&null!=e.GetTwainSourcesResult.sources)for(var g=0;g<e.GetTwainSourcesResult.sources.length;g++)e.GetTwainSourcesResult.sources[g].is64bit&&(e.GetTwainSourcesResult.sources[g].sourceName+=" (64-bit)");b(e)}}else d&&d(e)},error:function(){d&&d({status:DocuViewareAPI.Status.GenericError,
message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}})},GetTwainSourceList:function(){var b=null;a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"GetTwainSources/",async:!1,timeout:5E3,success:function(d){if(d&&d.GetTwainSourcesResult){if(null!=d.GetTwainSourcesResult&&null!=d.GetTwainSourcesResult.sources)for(var e=0;e<d.GetTwainSourcesResult.sources.length;e++)d.GetTwainSourcesResult.sources[e].is64bit&&(d.GetTwainSourcesResult.sources[e].sourceName+=
" (64-bit)");b=d.GetTwainSourcesResult}}});return b},TwainGetClientInfo:function(){var b=null;a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"GetTwainClientInfo/",async:!1,timeout:5E3,success:function(d){d&&d.GetTwainClientInfoResult&&(b=d.GetTwainClientInfoResult)}});return b},TwainGetLocalServiceStatus:function(){var b=DocuViewareAPI.LocalServiceStatus.NotFound;a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"ServiceVersion/",async:!1,timeout:5E3,success:function(d){b=
d&&d.ServiceVersionResult?parseInt(d.ServiceVersionResult)>=a.twainServiceSupportedVersion?DocuViewareAPI.LocalServiceStatus.Ready:DocuViewareAPI.LocalServiceStatus.WrongVersion:DocuViewareAPI.LocalServiceStatus.NotFound}});return b},DownloadTwainServiceSetup:function(){window.location=a.appControllerPath+"/twainservicesetupdownload"+(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID;return DocuViewareAPI.Status.OK}};a.resetServerCtx();if(a.dom.thumbnailArea){c=document.getElementById(a.FindSnapIn("thumbnails").snapInID);
a.isIOS&&(c.style.overflow="auto");var B=null;dvJQuery(c).bind("scroll",function(b){null!=B&&clearTimeout(B);B=setTimeout(function(){a.showVisibleThumbnails()},a.fastMode?50:400)});a.dom.UIconfig.enableMultipleThumbnailSelection&&(a.dom.thumbnailSelectBox=dvJQuery("<div/>").appendTo(c).css("position","absolute").css("border","1px solid "+a.dom.UIconfig.activeSelectedColorHover).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).css("display","none"),c.onmousedown=a.events.onThumbnailAreaMouseDownHandler,
c.onmousemove=a.events.onThumbnailAreaMouseMoveHandler,c.onmouseup=a.events.onThumbnailAreaMouseUpHandler);a.dom.UIconfig.enableThumbnailDragDrop&&dvJQuery(a.dom.thumbnailArea).sortable({placeholder:"highlight",forcePlaceholderSize:!0,tolerance:"pointer",helper:function(b,d){b=dvJQuery("<div>");var e=dvJQuery("<div>");e.css({position:"relative",width:"100%",height:"100%"});d=d.find("canvas");var g=d.get(0).toDataURL("image/png");g=dvJQuery('<img src="'+g+'"/>');g.css({position:"absolute",left:"0px",
top:"0px",opacity:"0.5",width:d.width()/2+"px",height:d.height()/2+"px"});e.html(g);b.html(e);b.width(d.width()/2);b.height(d.height()/2);return b},start:function(b,d){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()&&(a.dom.resetThumbStyle(d.placeholder,!0),d.placeholder.width(d.item.width()),d.item.attr("data-moving","true"),b=a.Internal.Thumbnails.getThumbnailPage(d.item.get(0)),a.Internal.Thumbnails.isThumbnailSelected(b)||(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.Internal.Thumbnails.selectThumbnail(b)),
b=a.GetSelectedThumbnailItems(),0!=b.length)){for(var e=0;e<b.length;e++){var g=a.Internal.Thumbnails.getThumbnailFromPageNo(b[e]);null!=g&&g.css("opacity","0.5")}b=dvJQuery("<span>"+b.length+"</span>");b.css({padding:"6px",color:"white",border:"1px solid white",position:"absolute",opacity:"0.95","background-color":a.dom.UIconfig.activeSelectedColor,right:"10%",bottom:"10%","-webkit-border-radius":"4px","-moz-border-radius":"4px","border-radius":"4px"});dvJQuery(d.helper).children(0).append(b)}},
update:function(b,d){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()){var e=d.item.index()+1,g=a.GetSelectedThumbnailItems();if(1!=g.length||g[0]!==e)dvJQuery(a.dom.thumbnailArea).sortable("disable"),a.ajax.PostBaseRequest("movepage",{data:{source:g,dest:e},success:function(k){dvJQuery(a.dom.thumbnailArea).sortable("enable");a.ajax.HandleServerContextResponse("string"===typeof k?eval("("+k+")"):k,!1,!0,!0);if(a.callbacks.onThumbnailsOrderChanged)a.callbacks.onThumbnailsOrderChanged({source:g,
destination:e})},error:function(){dvJQuery(a.dom.thumbnailArea).sortable("enable")}},!1)}},stop:function(b,d){d.item.attr("data-moving","false");b=a.GetSelectedThumbnailItems();if(0!=b.length)for(var e=a.Internal.Thumbnails.getThumbnailPage(d.item.get(0)),g=d.item,k=0;k<b.length;k++){var p=b[k],n=a.Internal.Thumbnails.getThumbnailFromPageNo(p);p!=e&&(p<e?d.item.before(n):g.after(n));g=n;g.css("opacity","1")}}})}a.events.pageRequestTimeout=null;a.events.onViewScroll=function(){a.events.pageRequestTimeout&&
clearTimeout(a.events.pageRequestTimeout);if(null!=a.serverCtx&&!a.serverCtx.singlePageView&&a.serverCtx.documentLoaded&&!(a.Internal.Files.uploading||a.ajax.downloading||a.events.isZoomingPreview||null!=a.selectNextPageActions&&0!=a.selectNextPageActions||null!=a.selectPreviousPageActions&&0!=a.selectPreviousPageActions)){if(!a.events.freezeScrollEvents){var b=-1;if(null!=a.cache.canvas)for(var d=!1,e=a.Internal.Coordinates.getViewerScrollTop()+a.dom.viewerArea.offsetHeight/2,g=0;g<a.cache.canvas.length;g++){for(var k=
0;k<a.cache.canvas[g].canvas.length;k++){var p=parseFloat(a.cache.canvas[g].canvas[k].tile.style.top),n=p+parseFloat(a.cache.canvas[g].canvas[k].tile.style.height);if(p<e&&n>e){b=a.cache.canvas[g].pageNo;a.dom.updateSelectedPageFader(0,b);d=!0;break}}if(d)break}a.events.pageRequestTimeout=setTimeout(function(){0<b&&b<=a.serverCtx.pageCount&&b!=a.GetLastPageNoRequest()?a.SelectPageEx(b,!0,!1,!0,!0):a.showVisiblePages(b)},a.fastMode?50:500)}a.previewVisiblePages();if(a.callbacks.onViewerScroll)a.callbacks.onViewerScroll()}};
dvJQuery(a.dom.viewerArea).bind("scroll",a.events.onViewScroll);dvJQuery(a.dom.viewerArea).dvContextMenu({idMenu:"viewerContextMenu"+a.uniqueID,referrer:a.dom.viewerArea,dependsOnTextSelection:!0,beforeShow:function(){return null!=a.Internal.Text.getSelectedText()},translateMouse:function(b){var d=a.dom.viewerArea.getBoundingClientRect(),e=dvJQuery(a.dom.viewerContextMenu);b.x=b.x-d.left+a.dom.viewerArea.offsetLeft+5;b.y=b.y-d.top+a.dom.viewerArea.offsetTop-5;d=e.width();b.x+d>a.dom.viewerArea.clientWidth&&
(b.x-=b.x+d-a.dom.viewerArea.clientWidth+15);e=e.height();b.y+e>a.dom.viewerArea.clientHeight-e&&(b.y-=b.y-a.dom.viewerArea.clientHeight+e+10)}});ra(a);dvJQuery("#"+t).on("dragenter",function(b){b.stopPropagation();b.preventDefault()});dvJQuery("#"+t).on("dragover",function(b){b.stopPropagation();b.preventDefault()});if(ja)dvJQuery("#"+t).on("drop",function(b){b.originalEvent&&b.originalEvent.dataTransfer&&b.originalEvent.dataTransfer.files&&(b.preventDefault(),(b=b.originalEvent.dataTransfer.files)&&
1<=b.length&&a.Internal.Files.uploadFile(b[0],0))});else dvJQuery("#"+t).on("drop",function(b){b.preventDefault()});dvJQuery(a.dom.viewerArea).on("keydown",function(b){(b.metaKey||b.ctrlKey)&&"c"===String.fromCharCode(b.which).toLowerCase()?(a.CopySelectedTextToClipboard(),b.preventDefault()):(b.metaKey||b.ctrlKey)&&"a"===String.fromCharCode(b.which).toLowerCase()?(a.dom.SelectedTextRegions.clear(1),a.Internal.Text.captureAndHighlightSelectedText(-1,-1,-1,-1,!0,!1),b.preventDefault()):a.events.isDrawingPath&&
(b.metaKey||b.ctrlKey)&&"z"===String.fromCharCode(b.which).toLowerCase()&&(a.Internal.Annotations.dropPendingFreenhandAnnotLastSubPath(),b.preventDefault())});a.dom.pageNavBox&&a.dom.pageNavBox.id&&dvJQuery(a.dom.pageNavBox).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),b=parseInt(a.dom.pageNavBox.value),a.serverCtx.documentLoaded&&b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?(a.dom.pageNavBox.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+
" [1 - "+a.serverCtx.pageCount.toString()+"]"):a.dom.pageNavBox.value=b)});a.dom.pageNavBoxMobile&&a.dom.pageNavBoxMobile.id&&dvJQuery(a.dom.pageNavBoxMobile).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),b=parseInt(a.dom.pageNavBoxMobile.value),a.serverCtx.documentLoaded&&b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?(a.dom.pageNavBoxMobile.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+" [1 - "+a.serverCtx.pageCount.toString()+"]"):
a.dom.pageNavBoxMobile.value=b)});a.dom.searchValueInput&&dvJQuery(a.dom.searchValueInput).keypress(function(b){if(13==(b.keyCode||b.which)){b.preventDefault();b=a.dom.searchValueInput.value;var d=a.dom.searchWholeWordInput.checked,e=a.dom.searchCaseSensitiveInput.checked,g=a.dom.searchAnyWordInput.checked,k=dvJQuery(a.dom.searchPageSelect).filter(":checked").val();a.SubmitSearch(b,d,e,g,k)}});a.dom.addressBar&&dvJQuery(a.dom.addressBar).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),
a.LoadFromUri(a.dom.addressBar.value,"",null,null,null,!0))});"ontouchstart"in document.documentElement?(dvJQuery(a.dom.mainArea).find(".dv-button").on("touchstart",function(b){dvJQuery(this).addClass("button_hover");a.dom.updateButtons()}),dvJQuery(a.dom.mainArea).find(".dv-button").on("touchend",function(b){dvJQuery(this).removeClass("button_hover");a.dom.updateButtons()})):dvJQuery(a.dom.mainArea).find(".dv-button").hover(function(){dvJQuery(this).addClass("button_hover");a.dom.updateButtons()},
function(){dvJQuery(this).removeClass("button_hover");a.dom.updateButtons()});a.dom.leftSideArea&&(dvJQuery(a.dom.leftSideArea).resizable({containment:dvJQuery(a.dom.controlArea),handles:{e:dvJQuery(a.dom.leftSideResizeBar)},minWidth:null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0,start:function(b,d){a.hasPendingAction()?b.preventDefault():a.events.isResizingUI=!0},resize:function(b,d){b=null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0;d.size.width<b+30&&(d.size.width=
b);a.NewViewerSizePreview()},stop:function(b,d){a.events.isResizingUI=!1;d.size.width<(null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0)+30&&a.SetSnapinsPanelVisibility(!1,d.originalSize.width);a.events.onNewViewerSize();a.dom.sidePanelResized()}}),a.dom.searchArea&&("legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?dvJQuery(a.dom.searchArea).find(".dv-jqueryRadio").dvButtonset({setActive:function(){dvJQuery(a.dom.searchArea).find(".dvUi-button").each(function(){dvJQuery(this).css("background-color",
"transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});dvJQuery(a.dom.searchArea).find(".dvUi-state-active").each(function(){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image",
"-webkit-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+" 0%,"+a.dom.UIconfig.panelDarkerBackColor+" 100%)");dvJQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+
")");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)})}}):dvJQuery(a.dom.searchArea).find(".dv-jqueryRadio").dvButtonset({setActive:function(){dvJQuery(a.dom.searchArea).find(".dvUi-button").each(function(){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});
dvJQuery(a.dom.searchArea).find(".dvUi-state-active").each(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.activeSelectedColor);dvJQuery(this).css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("fill",a.dom.UIconfig.toolbarIconActiveColor)})}})),a.dom.UIconfig.collapsedSnapInPanel&&(dvJQuery(a.dom.leftSideArea).resizable("disable"),a.dom.leftSideArea.oldWidth=a.dom.UIconfig.snapInPanelDefaultWidth));c=document.getElementsByName("inputSelectedPages"+a.uniqueID);
for(var J=0;J<c.length;J++)c[J].onchange=function(b){a.pageRangeSelection(this.value,document.getElementById("savePageRangeInput"+a.uniqueID))};document.getElementById("savePageRangeInput"+a.uniqueID).onkeyup=function(b){a.inputPageRangeControl(b.target)};document.getElementById("save_extension_select"+a.uniqueID).onchange=Ca;document.getElementById("save_content_select"+a.uniqueID).onchange=Ca;document.getElementById("save_extension_select"+a.uniqueID).onchange();c=document.getElementsByName("inputPrintSelectedPages"+
a.uniqueID);for(J=0;J<c.length;J++)c[J].onchange=function(b){a.pageRangeSelection(this.value,a.dom.printPageRangeInput)};c=document.getElementsByName("inputTwainAcquisitionDestination"+a.uniqueID);for(J=0;J<c.length;J++)c[J].onchange=function(b){"1"===b.target.value&&b.target.checked?dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("select,span").prop("disabled",!1).removeClass("dvUi-state-disabled").addClass("dvUi-state-default").css("opacity",1):dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("select,span").prop("disabled",
!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity",.3)};a.dom.printPageRangeInput.onkeyup=function(b){a.inputPageRangeControl(b.target)};a.dom.progressbar=new DocuViewareProgressbar({bg:"#acf",target:a.dom.controlArea,id:"progressbar"+a.uniqueID});"undefined"!=typeof a.dom.toolBarArea&&null!=a.dom.toolBarArea&&dvJQuery(a.dom.toolBarArea).bind("touchstart",function(b){var d=b.timeStamp,e=dvJQuery(this).data("lastTouch")||d;e=d-e;var g=b.originalEvent.touches.length;
dvJQuery(this).data("lastTouch",d);!e||500<e||1<g||(b.preventDefault(),dvJQuery(this).trigger("click").trigger("click"))});a.dom.viewerArea.cursorMgr=CreateDocuViewareCursorManager(a.dom.viewerArea,a.isIEorEdge);a.dom.updateSinglePageModeButton();null!=a.dom.zoomInButton&&(dvJQuery(a.dom.zoomInButton).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomInButton).bind("touchend",function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");
dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomInButtonMobile&&(dvJQuery(a.dom.zoomInButtonMobile).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomInButtonMobile).bind("touchend",function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomOutButton&&(dvJQuery(a.dom.zoomOutButton).bind("touchstart",function(b){b.preventDefault();
dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomOutButton).bind("touchend",function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomOutButtonMobile&&(dvJQuery(a.dom.zoomOutButtonMobile).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomOutButtonMobile).bind("touchend",function(b){b.preventDefault();
dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));a.dom.panDiv=document.createElement("div");a.dom.panDiv.style.display="block";a.dom.panDiv.style.position="absolute";a.dom.panDiv.style.height="100%";a.dom.panDiv.style.width="100%";a.dom.panDiv.style.left="0px";a.dom.panDiv.style.top="0px";a.dom.panDiv.style.padding="0px";a.dom.panDiv.style.margin="0px";a.isIE&&(a.dom.panDiv.style.backgroundColor="rgba(255,255,255,0.01)");a.dom.mainArea.addEventListener("touchstart",
function(b){1<b.touches.length&&(a.events.disableSingleInputEvents=!0,a.Internal.Annotations.unselectAll());2===b.touches.length&&(!a.events.isZoomingPreview&&a.CanChangeZoom()&&(a.events.isZoomingPreview=!0,a.events.isZoomingPreviewTouchMode=!0,a.events.enableZoomPreviewAutoSubmitter(),a.events.twoFingersDistStart=Math.hypot(b.touches[0].pageX-b.touches[1].pageX,b.touches[0].pageY-b.touches[1].pageY),a.events.prevTwoFingersDist=null),b.cancelable&&b.preventDefault())});a.dom.mainArea.addEventListener("touchend",
function(b){a.events.disableSingleInputEvents&&(a.events.disableSingleInputEvents=!1);a.events.isZoomingPreview&&a.events.isZoomingPreviewTouchMode&&(a.events.isZoomingPreview=!1,a.events.isZoomingPreviewTouchMode=null,a.SetCurrentZoom(a.cache.pageCanvasZoom),b.cancelable&&b.preventDefault())});a.dom.mainArea.addEventListener("touchmove",function(b){if(2===b.touches.length){if(a.events.isZoomingPreview&&a.events.isZoomingPreviewTouchMode){var d=Math.hypot(b.touches[0].pageX-b.touches[1].pageX,b.touches[0].pageY-
b.touches[1].pageY),e=!0;null!=a.events.prevTwoFingersDist&&(e=5<Math.abs(d-a.events.prevTwoFingersDist));e&&(a.ZoomPreview(d/a.events.twoFingersDistStart*a.serverCtx.zoom),a.events.prevTwoFingersDist=d)}b.cancelable&&b.preventDefault()}});a.dom.mainArea.addEventListener("wheel",function(b){if(b.ctrlKey){!a.events.isZoomingPreview&&a.CanChangeZoom()&&(a.events.enableZoomPreviewAutoSubmitter(),a.events.isZoomingPreview=!0,a.events.zoomPreviewWheelValue=0);if(a.events.isZoomingPreview&&null!=a.events.zoomPreviewWheelValue){0>
b.deltaY?a.events.zoomPreviewWheelValue++:a.events.zoomPreviewWheelValue--;var d=0<=a.events.zoomPreviewWheelValue?a.ComputeNextZoom(a.events.zoomPreviewWheelValue,!0):a.ComputeNextZoom(Math.abs(a.events.zoomPreviewWheelValue),!1);a.ZoomPreview(d)}b.preventDefault()}});window.addEventListener("keyup",function(b){"Control"==b.key&&a.events.zoomPreviewWheelValue&&a.events.isZoomingPreview&&(a.events.zoomPreviewWheelValue=null,a.events.isZoomingPreview=!1,a.SetCurrentZoom(a.cache.pageCanvasZoom),b.preventDefault())});
a.dom.snapinButtonStrip&&(a.dom.snapinButtonStrip.tabFocus=0,a.dom.snapinButtonStrip.addEventListener("keydown",function(b){if(38===b.keyCode||40===b.keyCode){var d=a.dom.snapinButtonStrip.childNodes;d[a.dom.snapinButtonStrip.tabFocus].setAttribute("tabindex",-1);40===b.keyCode?(a.dom.snapinButtonStrip.tabFocus++,a.dom.snapinButtonStrip.tabFocus>=d.length&&(a.dom.snapinButtonStrip.tabFocus=0)):38===b.keyCode&&(a.dom.snapinButtonStrip.tabFocus--,0>a.dom.snapinButtonStrip.tabFocus&&(a.dom.snapinButtonStrip.tabFocus=
d.length-1));d[a.dom.snapinButtonStrip.tabFocus].setAttribute("tabindex",0);d[a.dom.snapinButtonStrip.tabFocus].focus()}}));a.dom.pageBoundsDiv=document.createElement("div");a.dom.pageBoundsDiv.style.display="block";a.dom.pageBoundsDiv.style.position="absolute";a.dom.pageBoundsDiv.style.padding="0px";a.dom.pageBoundsDiv.style.margin="0px";a.dom.pageBoundsDiv.style.display="none";a.dom.pageBoundsDiv.style.borderStyle="solid";a.dom.pageBoundsDiv.style.borderColor=a.dom.UIconfig.strokeColor;a.dom.pageBoundsDiv.style.borderWidth=
"1px";a.dom.panDiv.appendChild(a.dom.pageBoundsDiv);a.dom.rlink=document.createElement("canvas");a.dom.rlink.style.zIndex=a.dom.zindexManager.getFirstAnnotZindex()-1;a.dom.rlink.style.position="absolute";a.dom.rlink.style.height="0px";a.dom.rlink.style.width="0px";a.dom.rlink.style.left="0px";a.dom.rlink.style.top="0px";a.dom.rlink.style.padding="0px";a.dom.rlink.style.margin="0px";a.dom.rlink.style.borderStyle="solid";a.dom.rlink.style.borderStyle="solid";a.dom.rlink.style.borderColor="red";a.dom.rlink.style.borderWidth=
"1px";a.dom.rlink.style.display="none";a.dom.panDiv.appendChild(a.dom.rlink);a.Internal.Selection.selectionArea.init(a.dom.panDiv);a.events.forwardMouseEventsToViewer(a.dom.panDiv);a.dom.viewerArea.appendChild(a.dom.panDiv);a.events.onLoad(S);DocuViewareUtilities.addEvent(window,"resize",a.events.onResize);setTimeout(a.events.UIStateVerifier,1E3);document.getElementById(t).control=a}};
